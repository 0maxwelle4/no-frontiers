import{$ as li,A as oM,B as im,C as nn,D as sM,E as aM,F as qr,G as ds,H as om,I as Td,J as Jw,K as cM,L as lM,M as ve,N as pr,O as gn,P as eE,Q as uM,R as Ad,S as qe,T as Cr,U as sm,V as tE,W as Hr,X as hs,Y as _a,Z as am,_ as dM,a as ae,aa as On,b as st,c as YR,d as XR,e as $e,f as S9,g as Yw,h as j,i as ZR,j as em,k as JR,l as eM,m as Q,n as nl,o as tm,p as tM,q as nM,r as Cn,s as nm,t as Dd,u as Xw,v as rM,w as Ri,x as Zw,y as rm,z as iM}from"./chunk-AL2ROQEX.js";var fL=$e(()=>{"use strict"});var We=$e((yy,pL)=>{"use strict";(function(t,e){typeof yy=="object"?pL.exports=yy=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(yy,function(){var t=t||function(e,n){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof YR=="function")try{r=fL()}catch{}var i=function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function y(){}return function(v){var C;return y.prototype=v,C=new y,y.prototype=null,C}}(),s={},a=s.lib={},c=a.Base=function(){return{extend:function(y){var v=o(this);return y&&v.mixIn(y),(!v.hasOwnProperty("init")||this.init===v.init)&&(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var y=this.extend();return y.init.apply(y,arguments),y},init:function(){},mixIn:function(y){for(var v in y)y.hasOwnProperty(v)&&(this[v]=y[v]);y.hasOwnProperty("toString")&&(this.toString=y.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),l=a.WordArray=c.extend({init:function(y,v){y=this.words=y||[],v!=n?this.sigBytes=v:this.sigBytes=y.length*4},toString:function(y){return(y||d).stringify(this)},concat:function(y){var v=this.words,C=y.words,b=this.sigBytes,A=y.sigBytes;if(this.clamp(),b%4)for(var x=0;x<A;x++){var I=C[x>>>2]>>>24-x%4*8&255;v[b+x>>>2]|=I<<24-(b+x)%4*8}else for(var T=0;T<A;T+=4)v[b+T>>>2]=C[T>>>2];return this.sigBytes+=A,this},clamp:function(){var y=this.words,v=this.sigBytes;y[v>>>2]&=4294967295<<32-v%4*8,y.length=e.ceil(v/4)},clone:function(){var y=c.clone.call(this);return y.words=this.words.slice(0),y},random:function(y){for(var v=[],C=0;C<y;C+=4)v.push(i());return new l.init(v,y)}}),u=s.enc={},d=u.Hex={stringify:function(y){for(var v=y.words,C=y.sigBytes,b=[],A=0;A<C;A++){var x=v[A>>>2]>>>24-A%4*8&255;b.push((x>>>4).toString(16)),b.push((x&15).toString(16))}return b.join("")},parse:function(y){for(var v=y.length,C=[],b=0;b<v;b+=2)C[b>>>3]|=parseInt(y.substr(b,2),16)<<24-b%8*4;return new l.init(C,v/2)}},h=u.Latin1={stringify:function(y){for(var v=y.words,C=y.sigBytes,b=[],A=0;A<C;A++){var x=v[A>>>2]>>>24-A%4*8&255;b.push(String.fromCharCode(x))}return b.join("")},parse:function(y){for(var v=y.length,C=[],b=0;b<v;b++)C[b>>>2]|=(y.charCodeAt(b)&255)<<24-b%4*8;return new l.init(C,v)}},f=u.Utf8={stringify:function(y){try{return decodeURIComponent(escape(h.stringify(y)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(y){return h.parse(unescape(encodeURIComponent(y)))}},m=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(y){typeof y=="string"&&(y=f.parse(y)),this._data.concat(y),this._nDataBytes+=y.sigBytes},_process:function(y){var v,C=this._data,b=C.words,A=C.sigBytes,x=this.blockSize,I=x*4,T=A/I;y?T=e.ceil(T):T=e.max((T|0)-this._minBufferSize,0);var R=T*x,L=e.min(R*4,A);if(R){for(var N=0;N<R;N+=x)this._doProcessBlock(b,N);v=b.splice(0,R),C.sigBytes-=L}return new l.init(v,L)},clone:function(){var y=c.clone.call(this);return y._data=this._data.clone(),y},_minBufferSize:0}),_=a.Hasher=m.extend({cfg:c.extend(),init:function(y){this.cfg=this.cfg.extend(y),this.reset()},reset:function(){m.reset.call(this),this._doReset()},update:function(y){return this._append(y),this._process(),this},finalize:function(y){y&&this._append(y);var v=this._doFinalize();return v},blockSize:512/32,_createHelper:function(y){return function(v,C){return new y.init(C).finalize(v)}},_createHmacHelper:function(y){return function(v,C){return new w.HMAC.init(y,C).finalize(v)}}}),w=s.algo={};return s}(Math);return t})});var Jh=$e((vy,mL)=>{"use strict";(function(t,e){typeof vy=="object"?mL.exports=vy=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(vy,function(t){return function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,s=n.x64={},a=s.Word=i.extend({init:function(l,u){this.high=l,this.low=u}}),c=s.WordArray=i.extend({init:function(l,u){l=this.words=l||[],u!=e?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,d=[],h=0;h<u;h++){var f=l[h];d.push(f.high),d.push(f.low)}return o.create(d,this.sigBytes)},clone:function(){for(var l=i.clone.call(this),u=l.words=this.words.slice(0),d=u.length,h=0;h<d;h++)u[h]=u[h].clone();return l}})}(),t})});var yL=$e((_y,gL)=>{"use strict";(function(t,e){typeof _y=="object"?gL.exports=_y=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(_y,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,n=e.lib,r=n.WordArray,i=r.init,o=r.init=function(s){if(s instanceof ArrayBuffer&&(s=new Uint8Array(s)),(s instanceof Int8Array||typeof Uint8ClampedArray<"u"&&s instanceof Uint8ClampedArray||s instanceof Int16Array||s instanceof Uint16Array||s instanceof Int32Array||s instanceof Uint32Array||s instanceof Float32Array||s instanceof Float64Array)&&(s=new Uint8Array(s.buffer,s.byteOffset,s.byteLength)),s instanceof Uint8Array){for(var a=s.byteLength,c=[],l=0;l<a;l++)c[l>>>2]|=s[l]<<24-l%4*8;i.call(this,c,a)}else i.apply(this,arguments)};o.prototype=r}}(),t.lib.WordArray})});var _L=$e((wy,vL)=>{"use strict";(function(t,e){typeof wy=="object"?vL.exports=wy=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(wy,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:function(a){for(var c=a.words,l=a.sigBytes,u=[],d=0;d<l;d+=2){var h=c[d>>>2]>>>16-d%4*8&65535;u.push(String.fromCharCode(h))}return u.join("")},parse:function(a){for(var c=a.length,l=[],u=0;u<c;u++)l[u>>>1]|=a.charCodeAt(u)<<16-u%2*16;return r.create(l,c*2)}};i.Utf16LE={stringify:function(a){for(var c=a.words,l=a.sigBytes,u=[],d=0;d<l;d+=2){var h=s(c[d>>>2]>>>16-d%4*8&65535);u.push(String.fromCharCode(h))}return u.join("")},parse:function(a){for(var c=a.length,l=[],u=0;u<c;u++)l[u>>>1]|=s(a.charCodeAt(u)<<16-u%2*16);return r.create(l,c*2)}};function s(a){return a<<8&4278255360|a>>>8&16711935}}(),t.enc.Utf16})});var Vs=$e((Ey,wL)=>{"use strict";(function(t,e){typeof Ey=="object"?wL.exports=Ey=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Ey,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64={stringify:function(a){var c=a.words,l=a.sigBytes,u=this._map;a.clamp();for(var d=[],h=0;h<l;h+=3)for(var f=c[h>>>2]>>>24-h%4*8&255,m=c[h+1>>>2]>>>24-(h+1)%4*8&255,_=c[h+2>>>2]>>>24-(h+2)%4*8&255,w=f<<16|m<<8|_,y=0;y<4&&h+y*.75<l;y++)d.push(u.charAt(w>>>6*(3-y)&63));var v=u.charAt(64);if(v)for(;d.length%4;)d.push(v);return d.join("")},parse:function(a){var c=a.length,l=this._map,u=this._reverseMap;if(!u){u=this._reverseMap=[];for(var d=0;d<l.length;d++)u[l.charCodeAt(d)]=d}var h=l.charAt(64);if(h){var f=a.indexOf(h);f!==-1&&(c=f)}return s(a,c,u)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(a,c,l){for(var u=[],d=0,h=0;h<c;h++)if(h%4){var f=l[a.charCodeAt(h-1)]<<h%4*2,m=l[a.charCodeAt(h)]>>>6-h%4*2,_=f|m;u[d>>>2]|=_<<24-d%4*8,d++}return r.create(u,d)}}(),t.enc.Base64})});var xL=$e((xy,EL)=>{"use strict";(function(t,e){typeof xy=="object"?EL.exports=xy=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(xy,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64url={stringify:function(a,c){c===void 0&&(c=!0);var l=a.words,u=a.sigBytes,d=c?this._safe_map:this._map;a.clamp();for(var h=[],f=0;f<u;f+=3)for(var m=l[f>>>2]>>>24-f%4*8&255,_=l[f+1>>>2]>>>24-(f+1)%4*8&255,w=l[f+2>>>2]>>>24-(f+2)%4*8&255,y=m<<16|_<<8|w,v=0;v<4&&f+v*.75<u;v++)h.push(d.charAt(y>>>6*(3-v)&63));var C=d.charAt(64);if(C)for(;h.length%4;)h.push(C);return h.join("")},parse:function(a,c){c===void 0&&(c=!0);var l=a.length,u=c?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<u.length;h++)d[u.charCodeAt(h)]=h}var f=u.charAt(64);if(f){var m=a.indexOf(f);m!==-1&&(l=m)}return s(a,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(a,c,l){for(var u=[],d=0,h=0;h<c;h++)if(h%4){var f=l[a.charCodeAt(h-1)]<<h%4*2,m=l[a.charCodeAt(h)]>>>6-h%4*2,_=f|m;u[d>>>2]|=_<<24-d%4*8,d++}return r.create(u,d)}}(),t.enc.Base64url})});var Bs=$e((Cy,CL)=>{"use strict";(function(t,e){typeof Cy=="object"?CL.exports=Cy=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Cy,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,s=n.algo,a=[];(function(){for(var f=0;f<64;f++)a[f]=e.abs(e.sin(f+1))*4294967296|0})();var c=s.MD5=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(f,m){for(var _=0;_<16;_++){var w=m+_,y=f[w];f[w]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var v=this._hash.words,C=f[m+0],b=f[m+1],A=f[m+2],x=f[m+3],I=f[m+4],T=f[m+5],R=f[m+6],L=f[m+7],N=f[m+8],S=f[m+9],$=f[m+10],F=f[m+11],re=f[m+12],ce=f[m+13],Ee=f[m+14],Ne=f[m+15],q=v[0],K=v[1],g=v[2],p=v[3];q=l(q,K,g,p,C,7,a[0]),p=l(p,q,K,g,b,12,a[1]),g=l(g,p,q,K,A,17,a[2]),K=l(K,g,p,q,x,22,a[3]),q=l(q,K,g,p,I,7,a[4]),p=l(p,q,K,g,T,12,a[5]),g=l(g,p,q,K,R,17,a[6]),K=l(K,g,p,q,L,22,a[7]),q=l(q,K,g,p,N,7,a[8]),p=l(p,q,K,g,S,12,a[9]),g=l(g,p,q,K,$,17,a[10]),K=l(K,g,p,q,F,22,a[11]),q=l(q,K,g,p,re,7,a[12]),p=l(p,q,K,g,ce,12,a[13]),g=l(g,p,q,K,Ee,17,a[14]),K=l(K,g,p,q,Ne,22,a[15]),q=u(q,K,g,p,b,5,a[16]),p=u(p,q,K,g,R,9,a[17]),g=u(g,p,q,K,F,14,a[18]),K=u(K,g,p,q,C,20,a[19]),q=u(q,K,g,p,T,5,a[20]),p=u(p,q,K,g,$,9,a[21]),g=u(g,p,q,K,Ne,14,a[22]),K=u(K,g,p,q,I,20,a[23]),q=u(q,K,g,p,S,5,a[24]),p=u(p,q,K,g,Ee,9,a[25]),g=u(g,p,q,K,x,14,a[26]),K=u(K,g,p,q,N,20,a[27]),q=u(q,K,g,p,ce,5,a[28]),p=u(p,q,K,g,A,9,a[29]),g=u(g,p,q,K,L,14,a[30]),K=u(K,g,p,q,re,20,a[31]),q=d(q,K,g,p,T,4,a[32]),p=d(p,q,K,g,N,11,a[33]),g=d(g,p,q,K,F,16,a[34]),K=d(K,g,p,q,Ee,23,a[35]),q=d(q,K,g,p,b,4,a[36]),p=d(p,q,K,g,I,11,a[37]),g=d(g,p,q,K,L,16,a[38]),K=d(K,g,p,q,$,23,a[39]),q=d(q,K,g,p,ce,4,a[40]),p=d(p,q,K,g,C,11,a[41]),g=d(g,p,q,K,x,16,a[42]),K=d(K,g,p,q,R,23,a[43]),q=d(q,K,g,p,S,4,a[44]),p=d(p,q,K,g,re,11,a[45]),g=d(g,p,q,K,Ne,16,a[46]),K=d(K,g,p,q,A,23,a[47]),q=h(q,K,g,p,C,6,a[48]),p=h(p,q,K,g,L,10,a[49]),g=h(g,p,q,K,Ee,15,a[50]),K=h(K,g,p,q,T,21,a[51]),q=h(q,K,g,p,re,6,a[52]),p=h(p,q,K,g,x,10,a[53]),g=h(g,p,q,K,$,15,a[54]),K=h(K,g,p,q,b,21,a[55]),q=h(q,K,g,p,N,6,a[56]),p=h(p,q,K,g,Ne,10,a[57]),g=h(g,p,q,K,R,15,a[58]),K=h(K,g,p,q,ce,21,a[59]),q=h(q,K,g,p,I,6,a[60]),p=h(p,q,K,g,F,10,a[61]),g=h(g,p,q,K,A,15,a[62]),K=h(K,g,p,q,S,21,a[63]),v[0]=v[0]+q|0,v[1]=v[1]+K|0,v[2]=v[2]+g|0,v[3]=v[3]+p|0},_doFinalize:function(){var f=this._data,m=f.words,_=this._nDataBytes*8,w=f.sigBytes*8;m[w>>>5]|=128<<24-w%32;var y=e.floor(_/4294967296),v=_;m[(w+64>>>9<<4)+15]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,m[(w+64>>>9<<4)+14]=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,f.sigBytes=(m.length+1)*4,this._process();for(var C=this._hash,b=C.words,A=0;A<4;A++){var x=b[A];b[A]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}return C},clone:function(){var f=o.clone.call(this);return f._hash=this._hash.clone(),f}});function l(f,m,_,w,y,v,C){var b=f+(m&_|~m&w)+y+C;return(b<<v|b>>>32-v)+m}function u(f,m,_,w,y,v,C){var b=f+(m&w|_&~w)+y+C;return(b<<v|b>>>32-v)+m}function d(f,m,_,w,y,v,C){var b=f+(m^_^w)+y+C;return(b<<v|b>>>32-v)+m}function h(f,m,_,w,y,v,C){var b=f+(_^(m|~w))+y+C;return(b<<v|b>>>32-v)+m}n.MD5=o._createHelper(c),n.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5})});var z1=$e((by,bL)=>{"use strict";(function(t,e){typeof by=="object"?bL.exports=by=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(by,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,o=e.algo,s=[],a=o.SHA1=i.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,l){for(var u=this._hash.words,d=u[0],h=u[1],f=u[2],m=u[3],_=u[4],w=0;w<80;w++){if(w<16)s[w]=c[l+w]|0;else{var y=s[w-3]^s[w-8]^s[w-14]^s[w-16];s[w]=y<<1|y>>>31}var v=(d<<5|d>>>27)+_+s[w];w<20?v+=(h&f|~h&m)+1518500249:w<40?v+=(h^f^m)+1859775393:w<60?v+=(h&f|h&m|f&m)-1894007588:v+=(h^f^m)-899497514,_=m,m=f,f=h<<30|h>>>2,h=d,d=v}u[0]=u[0]+d|0,u[1]=u[1]+h|0,u[2]=u[2]+f|0,u[3]=u[3]+m|0,u[4]=u[4]+_|0},_doFinalize:function(){var c=this._data,l=c.words,u=this._nDataBytes*8,d=c.sigBytes*8;return l[d>>>5]|=128<<24-d%32,l[(d+64>>>9<<4)+14]=Math.floor(u/4294967296),l[(d+64>>>9<<4)+15]=u,c.sigBytes=l.length*4,this._process(),this._hash},clone:function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c}});e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a)}(),t.SHA1})});var Dy=$e((Iy,IL)=>{"use strict";(function(t,e){typeof Iy=="object"?IL.exports=Iy=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Iy,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,s=n.algo,a=[],c=[];(function(){function d(_){for(var w=e.sqrt(_),y=2;y<=w;y++)if(!(_%y))return!1;return!0}function h(_){return(_-(_|0))*4294967296|0}for(var f=2,m=0;m<64;)d(f)&&(m<8&&(a[m]=h(e.pow(f,1/2))),c[m]=h(e.pow(f,1/3)),m++),f++})();var l=[],u=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(d,h){for(var f=this._hash.words,m=f[0],_=f[1],w=f[2],y=f[3],v=f[4],C=f[5],b=f[6],A=f[7],x=0;x<64;x++){if(x<16)l[x]=d[h+x]|0;else{var I=l[x-15],T=(I<<25|I>>>7)^(I<<14|I>>>18)^I>>>3,R=l[x-2],L=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;l[x]=T+l[x-7]+L+l[x-16]}var N=v&C^~v&b,S=m&_^m&w^_&w,$=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),F=(v<<26|v>>>6)^(v<<21|v>>>11)^(v<<7|v>>>25),re=A+F+N+c[x]+l[x],ce=$+S;A=b,b=C,C=v,v=y+re|0,y=w,w=_,_=m,m=re+ce|0}f[0]=f[0]+m|0,f[1]=f[1]+_|0,f[2]=f[2]+w|0,f[3]=f[3]+y|0,f[4]=f[4]+v|0,f[5]=f[5]+C|0,f[6]=f[6]+b|0,f[7]=f[7]+A|0},_doFinalize:function(){var d=this._data,h=d.words,f=this._nDataBytes*8,m=d.sigBytes*8;return h[m>>>5]|=128<<24-m%32,h[(m+64>>>9<<4)+14]=e.floor(f/4294967296),h[(m+64>>>9<<4)+15]=f,d.sigBytes=h.length*4,this._process(),this._hash},clone:function(){var d=o.clone.call(this);return d._hash=this._hash.clone(),d}});n.SHA256=o._createHelper(u),n.HmacSHA256=o._createHmacHelper(u)}(Math),t.SHA256})});var TL=$e((Ty,DL)=>{"use strict";(function(t,e,n){typeof Ty=="object"?DL.exports=Ty=e(We(),Dy()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(Ty,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.algo,o=i.SHA256,s=i.SHA224=o.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var a=o._doFinalize.call(this);return a.sigBytes-=4,a}});e.SHA224=o._createHelper(s),e.HmacSHA224=o._createHmacHelper(s)}(),t.SHA224})});var W1=$e((Ay,AL)=>{"use strict";(function(t,e,n){typeof Ay=="object"?AL.exports=Ay=e(We(),Jh()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Ay,function(t){return function(){var e=t,n=e.lib,r=n.Hasher,i=e.x64,o=i.Word,s=i.WordArray,a=e.algo;function c(){return o.create.apply(o,arguments)}var l=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],u=[];(function(){for(var h=0;h<80;h++)u[h]=c()})();var d=a.SHA512=r.extend({_doReset:function(){this._hash=new s.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},_doProcessBlock:function(h,f){for(var m=this._hash.words,_=m[0],w=m[1],y=m[2],v=m[3],C=m[4],b=m[5],A=m[6],x=m[7],I=_.high,T=_.low,R=w.high,L=w.low,N=y.high,S=y.low,$=v.high,F=v.low,re=C.high,ce=C.low,Ee=b.high,Ne=b.low,q=A.high,K=A.low,g=x.high,p=x.low,E=I,D=T,M=R,P=L,H=N,J=S,ke=$,Xe=F,ut=re,xt=ce,Ur=Ee,mn=Ne,Fn=q,Lt=K,cs=g,fr=p,Zn=0;Zn<80;Zn++){var $r,ls,Jp=u[Zn];if(Zn<16)ls=Jp.high=h[f+Zn*2]|0,$r=Jp.low=h[f+Zn*2+1]|0;else{var VR=u[Zn-15],el=VR.high,bd=VR.low,g9=(el>>>1|bd<<31)^(el>>>8|bd<<24)^el>>>7,BR=(bd>>>1|el<<31)^(bd>>>8|el<<24)^(bd>>>7|el<<25),jR=u[Zn-2],tl=jR.high,Id=jR.low,y9=(tl>>>19|Id<<13)^(tl<<3|Id>>>29)^tl>>>6,UR=(Id>>>19|tl<<13)^(Id<<3|tl>>>29)^(Id>>>6|tl<<26),$R=u[Zn-7],v9=$R.high,_9=$R.low,qR=u[Zn-16],w9=qR.high,HR=qR.low;$r=BR+_9,ls=g9+v9+($r>>>0<BR>>>0?1:0),$r=$r+UR,ls=ls+y9+($r>>>0<UR>>>0?1:0),$r=$r+HR,ls=ls+w9+($r>>>0<HR>>>0?1:0),Jp.high=ls,Jp.low=$r}var E9=ut&Ur^~ut&Fn,zR=xt&mn^~xt&Lt,x9=E&M^E&H^M&H,C9=D&P^D&J^P&J,b9=(E>>>28|D<<4)^(E<<30|D>>>2)^(E<<25|D>>>7),WR=(D>>>28|E<<4)^(D<<30|E>>>2)^(D<<25|E>>>7),I9=(ut>>>14|xt<<18)^(ut>>>18|xt<<14)^(ut<<23|xt>>>9),D9=(xt>>>14|ut<<18)^(xt>>>18|ut<<14)^(xt<<23|ut>>>9),GR=l[Zn],T9=GR.high,KR=GR.low,xr=fr+D9,us=cs+I9+(xr>>>0<fr>>>0?1:0),xr=xr+zR,us=us+E9+(xr>>>0<zR>>>0?1:0),xr=xr+KR,us=us+T9+(xr>>>0<KR>>>0?1:0),xr=xr+$r,us=us+ls+(xr>>>0<$r>>>0?1:0),QR=WR+C9,A9=b9+x9+(QR>>>0<WR>>>0?1:0);cs=Fn,fr=Lt,Fn=Ur,Lt=mn,Ur=ut,mn=xt,xt=Xe+xr|0,ut=ke+us+(xt>>>0<Xe>>>0?1:0)|0,ke=H,Xe=J,H=M,J=P,M=E,P=D,D=xr+QR|0,E=us+A9+(D>>>0<xr>>>0?1:0)|0}T=_.low=T+D,_.high=I+E+(T>>>0<D>>>0?1:0),L=w.low=L+P,w.high=R+M+(L>>>0<P>>>0?1:0),S=y.low=S+J,y.high=N+H+(S>>>0<J>>>0?1:0),F=v.low=F+Xe,v.high=$+ke+(F>>>0<Xe>>>0?1:0),ce=C.low=ce+xt,C.high=re+ut+(ce>>>0<xt>>>0?1:0),Ne=b.low=Ne+mn,b.high=Ee+Ur+(Ne>>>0<mn>>>0?1:0),K=A.low=K+Lt,A.high=q+Fn+(K>>>0<Lt>>>0?1:0),p=x.low=p+fr,x.high=g+cs+(p>>>0<fr>>>0?1:0)},_doFinalize:function(){var h=this._data,f=h.words,m=this._nDataBytes*8,_=h.sigBytes*8;f[_>>>5]|=128<<24-_%32,f[(_+128>>>10<<5)+30]=Math.floor(m/4294967296),f[(_+128>>>10<<5)+31]=m,h.sigBytes=f.length*4,this._process();var w=this._hash.toX32();return w},clone:function(){var h=r.clone.call(this);return h._hash=this._hash.clone(),h},blockSize:1024/32});e.SHA512=r._createHelper(d),e.HmacSHA512=r._createHmacHelper(d)}(),t.SHA512})});var RL=$e((Sy,SL)=>{"use strict";(function(t,e,n){typeof Sy=="object"?SL.exports=Sy=e(We(),Jh(),W1()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(Sy,function(t){return function(){var e=t,n=e.x64,r=n.Word,i=n.WordArray,o=e.algo,s=o.SHA512,a=o.SHA384=s.extend({_doReset:function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},_doFinalize:function(){var c=s._doFinalize.call(this);return c.sigBytes-=16,c}});e.SHA384=s._createHelper(a),e.HmacSHA384=s._createHmacHelper(a)}(),t.SHA384})});var PL=$e((Ry,ML)=>{"use strict";(function(t,e,n){typeof Ry=="object"?ML.exports=Ry=e(We(),Jh()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(Ry,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,s=n.x64,a=s.Word,c=n.algo,l=[],u=[],d=[];(function(){for(var m=1,_=0,w=0;w<24;w++){l[m+5*_]=(w+1)*(w+2)/2%64;var y=_%5,v=(2*m+3*_)%5;m=y,_=v}for(var m=0;m<5;m++)for(var _=0;_<5;_++)u[m+5*_]=_+(2*m+3*_)%5*5;for(var C=1,b=0;b<24;b++){for(var A=0,x=0,I=0;I<7;I++){if(C&1){var T=(1<<I)-1;T<32?x^=1<<T:A^=1<<T-32}C&128?C=C<<1^113:C<<=1}d[b]=a.create(A,x)}})();var h=[];(function(){for(var m=0;m<25;m++)h[m]=a.create()})();var f=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var m=this._state=[],_=0;_<25;_++)m[_]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(m,_){for(var w=this._state,y=this.blockSize/2,v=0;v<y;v++){var C=m[_+2*v],b=m[_+2*v+1];C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360,b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360;var A=w[v];A.high^=b,A.low^=C}for(var x=0;x<24;x++){for(var I=0;I<5;I++){for(var T=0,R=0,L=0;L<5;L++){var A=w[I+5*L];T^=A.high,R^=A.low}var N=h[I];N.high=T,N.low=R}for(var I=0;I<5;I++)for(var S=h[(I+4)%5],$=h[(I+1)%5],F=$.high,re=$.low,T=S.high^(F<<1|re>>>31),R=S.low^(re<<1|F>>>31),L=0;L<5;L++){var A=w[I+5*L];A.high^=T,A.low^=R}for(var ce=1;ce<25;ce++){var T,R,A=w[ce],Ee=A.high,Ne=A.low,q=l[ce];q<32?(T=Ee<<q|Ne>>>32-q,R=Ne<<q|Ee>>>32-q):(T=Ne<<q-32|Ee>>>64-q,R=Ee<<q-32|Ne>>>64-q);var K=h[u[ce]];K.high=T,K.low=R}var g=h[0],p=w[0];g.high=p.high,g.low=p.low;for(var I=0;I<5;I++)for(var L=0;L<5;L++){var ce=I+5*L,A=w[ce],E=h[ce],D=h[(I+1)%5+5*L],M=h[(I+2)%5+5*L];A.high=E.high^~D.high&M.high,A.low=E.low^~D.low&M.low}var A=w[0],P=d[x];A.high^=P.high,A.low^=P.low}},_doFinalize:function(){var m=this._data,_=m.words,w=this._nDataBytes*8,y=m.sigBytes*8,v=this.blockSize*32;_[y>>>5]|=1<<24-y%32,_[(e.ceil((y+1)/v)*v>>>5)-1]|=128,m.sigBytes=_.length*4,this._process();for(var C=this._state,b=this.cfg.outputLength/8,A=b/8,x=[],I=0;I<A;I++){var T=C[I],R=T.high,L=T.low;R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,x.push(L),x.push(R)}return new i.init(x,b)},clone:function(){for(var m=o.clone.call(this),_=m._state=this._state.slice(0),w=0;w<25;w++)_[w]=_[w].clone();return m}});n.SHA3=o._createHelper(f),n.HmacSHA3=o._createHmacHelper(f)}(Math),t.SHA3})});var kL=$e((My,NL)=>{"use strict";(function(t,e){typeof My=="object"?NL.exports=My=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(My,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,s=n.algo,a=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),l=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),u=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=i.create([0,1518500249,1859775393,2400959708,2840853838]),h=i.create([1352829926,1548603684,1836072691,2053994217,0]),f=s.RIPEMD160=o.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(b,A){for(var x=0;x<16;x++){var I=A+x,T=b[I];b[I]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var R=this._hash.words,L=d.words,N=h.words,S=a.words,$=c.words,F=l.words,re=u.words,ce,Ee,Ne,q,K,g,p,E,D,M;g=ce=R[0],p=Ee=R[1],E=Ne=R[2],D=q=R[3],M=K=R[4];for(var P,x=0;x<80;x+=1)P=ce+b[A+S[x]]|0,x<16?P+=m(Ee,Ne,q)+L[0]:x<32?P+=_(Ee,Ne,q)+L[1]:x<48?P+=w(Ee,Ne,q)+L[2]:x<64?P+=y(Ee,Ne,q)+L[3]:P+=v(Ee,Ne,q)+L[4],P=P|0,P=C(P,F[x]),P=P+K|0,ce=K,K=q,q=C(Ne,10),Ne=Ee,Ee=P,P=g+b[A+$[x]]|0,x<16?P+=v(p,E,D)+N[0]:x<32?P+=y(p,E,D)+N[1]:x<48?P+=w(p,E,D)+N[2]:x<64?P+=_(p,E,D)+N[3]:P+=m(p,E,D)+N[4],P=P|0,P=C(P,re[x]),P=P+M|0,g=M,M=D,D=C(E,10),E=p,p=P;P=R[1]+Ne+D|0,R[1]=R[2]+q+M|0,R[2]=R[3]+K+g|0,R[3]=R[4]+ce+p|0,R[4]=R[0]+Ee+E|0,R[0]=P},_doFinalize:function(){var b=this._data,A=b.words,x=this._nDataBytes*8,I=b.sigBytes*8;A[I>>>5]|=128<<24-I%32,A[(I+64>>>9<<4)+14]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,b.sigBytes=(A.length+1)*4,this._process();for(var T=this._hash,R=T.words,L=0;L<5;L++){var N=R[L];R[L]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return T},clone:function(){var b=o.clone.call(this);return b._hash=this._hash.clone(),b}});function m(b,A,x){return b^A^x}function _(b,A,x){return b&A|~b&x}function w(b,A,x){return(b|~A)^x}function y(b,A,x){return b&x|A&~x}function v(b,A,x){return b^(A|~x)}function C(b,A){return b<<A|b>>>32-A}n.RIPEMD160=o._createHelper(f),n.HmacRIPEMD160=o._createHmacHelper(f)}(Math),t.RIPEMD160})});var Ny=$e((Py,FL)=>{"use strict";(function(t,e){typeof Py=="object"?FL.exports=Py=e(We()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Py,function(t){(function(){var e=t,n=e.lib,r=n.Base,i=e.enc,o=i.Utf8,s=e.algo,a=s.HMAC=r.extend({init:function(c,l){c=this._hasher=new c.init,typeof l=="string"&&(l=o.parse(l));var u=c.blockSize,d=u*4;l.sigBytes>d&&(l=c.finalize(l)),l.clamp();for(var h=this._oKey=l.clone(),f=this._iKey=l.clone(),m=h.words,_=f.words,w=0;w<u;w++)m[w]^=1549556828,_[w]^=909522486;h.sigBytes=f.sigBytes=d,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var l=this._hasher,u=l.finalize(c);l.reset();var d=l.finalize(this._oKey.clone().concat(u));return d}})})()})});var LL=$e((ky,OL)=>{"use strict";(function(t,e,n){typeof ky=="object"?OL.exports=ky=e(We(),Dy(),Ny()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(ky,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,s=o.SHA256,a=o.HMAC,c=o.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:s,iterations:25e4}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,u){for(var d=this.cfg,h=a.create(d.hasher,l),f=i.create(),m=i.create([1]),_=f.words,w=m.words,y=d.keySize,v=d.iterations;_.length<y;){var C=h.update(u).finalize(m);h.reset();for(var b=C.words,A=b.length,x=C,I=1;I<v;I++){x=h.finalize(x),h.reset();for(var T=x.words,R=0;R<A;R++)b[R]^=T[R]}f.concat(C),w[0]++}return f.sigBytes=y*4,f}});e.PBKDF2=function(l,u,d){return c.create(d).compute(l,u)}}(),t.PBKDF2})});var Go=$e((Fy,VL)=>{"use strict";(function(t,e,n){typeof Fy=="object"?VL.exports=Fy=e(We(),z1(),Ny()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(Fy,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,s=o.MD5,a=o.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:s,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,l){for(var u,d=this.cfg,h=d.hasher.create(),f=i.create(),m=f.words,_=d.keySize,w=d.iterations;m.length<_;){u&&h.update(u),u=h.update(c).finalize(l),h.reset();for(var y=1;y<w;y++)u=h.finalize(u),h.reset();f.concat(u)}return f.sigBytes=_*4,f}});e.EvpKDF=function(c,l,u){return a.create(u).compute(c,l)}}(),t.EvpKDF})});var En=$e((Oy,BL)=>{"use strict";(function(t,e,n){typeof Oy=="object"?BL.exports=Oy=e(We(),Go()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(Oy,function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,s=r.BufferedBlockAlgorithm,a=n.enc,c=a.Utf8,l=a.Base64,u=n.algo,d=u.EvpKDF,h=r.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(N,S){return this.create(this._ENC_XFORM_MODE,N,S)},createDecryptor:function(N,S){return this.create(this._DEC_XFORM_MODE,N,S)},init:function(N,S,$){this.cfg=this.cfg.extend($),this._xformMode=N,this._key=S,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(N){return this._append(N),this._process()},finalize:function(N){N&&this._append(N);var S=this._doFinalize();return S},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function N(S){return typeof S=="string"?L:I}return function(S){return{encrypt:function($,F,re){return N(F).encrypt(S,$,F,re)},decrypt:function($,F,re){return N(F).decrypt(S,$,F,re)}}}}()}),f=r.StreamCipher=h.extend({_doFinalize:function(){var N=this._process(!0);return N},blockSize:1}),m=n.mode={},_=r.BlockCipherMode=i.extend({createEncryptor:function(N,S){return this.Encryptor.create(N,S)},createDecryptor:function(N,S){return this.Decryptor.create(N,S)},init:function(N,S){this._cipher=N,this._iv=S}}),w=m.CBC=function(){var N=_.extend();N.Encryptor=N.extend({processBlock:function($,F){var re=this._cipher,ce=re.blockSize;S.call(this,$,F,ce),re.encryptBlock($,F),this._prevBlock=$.slice(F,F+ce)}}),N.Decryptor=N.extend({processBlock:function($,F){var re=this._cipher,ce=re.blockSize,Ee=$.slice(F,F+ce);re.decryptBlock($,F),S.call(this,$,F,ce),this._prevBlock=Ee}});function S($,F,re){var ce,Ee=this._iv;Ee?(ce=Ee,this._iv=e):ce=this._prevBlock;for(var Ne=0;Ne<re;Ne++)$[F+Ne]^=ce[Ne]}return N}(),y=n.pad={},v=y.Pkcs7={pad:function(N,S){for(var $=S*4,F=$-N.sigBytes%$,re=F<<24|F<<16|F<<8|F,ce=[],Ee=0;Ee<F;Ee+=4)ce.push(re);var Ne=o.create(ce,F);N.concat(Ne)},unpad:function(N){var S=N.words[N.sigBytes-1>>>2]&255;N.sigBytes-=S}},C=r.BlockCipher=h.extend({cfg:h.cfg.extend({mode:w,padding:v}),reset:function(){var N;h.reset.call(this);var S=this.cfg,$=S.iv,F=S.mode;this._xformMode==this._ENC_XFORM_MODE?N=F.createEncryptor:(N=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==N?this._mode.init(this,$&&$.words):(this._mode=N.call(F,this,$&&$.words),this._mode.__creator=N)},_doProcessBlock:function(N,S){this._mode.processBlock(N,S)},_doFinalize:function(){var N,S=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(S.pad(this._data,this.blockSize),N=this._process(!0)):(N=this._process(!0),S.unpad(N)),N},blockSize:128/32}),b=r.CipherParams=i.extend({init:function(N){this.mixIn(N)},toString:function(N){return(N||this.formatter).stringify(this)}}),A=n.format={},x=A.OpenSSL={stringify:function(N){var S,$=N.ciphertext,F=N.salt;return F?S=o.create([1398893684,1701076831]).concat(F).concat($):S=$,S.toString(l)},parse:function(N){var S,$=l.parse(N),F=$.words;return F[0]==1398893684&&F[1]==1701076831&&(S=o.create(F.slice(2,4)),F.splice(0,4),$.sigBytes-=16),b.create({ciphertext:$,salt:S})}},I=r.SerializableCipher=i.extend({cfg:i.extend({format:x}),encrypt:function(N,S,$,F){F=this.cfg.extend(F);var re=N.createEncryptor($,F),ce=re.finalize(S),Ee=re.cfg;return b.create({ciphertext:ce,key:$,iv:Ee.iv,algorithm:N,mode:Ee.mode,padding:Ee.padding,blockSize:N.blockSize,formatter:F.format})},decrypt:function(N,S,$,F){F=this.cfg.extend(F),S=this._parse(S,F.format);var re=N.createDecryptor($,F).finalize(S.ciphertext);return re},_parse:function(N,S){return typeof N=="string"?S.parse(N,this):N}}),T=n.kdf={},R=T.OpenSSL={execute:function(N,S,$,F,re){if(F||(F=o.random(64/8)),re)var ce=d.create({keySize:S+$,hasher:re}).compute(N,F);else var ce=d.create({keySize:S+$}).compute(N,F);var Ee=o.create(ce.words.slice(S),$*4);return ce.sigBytes=S*4,b.create({key:ce,iv:Ee,salt:F})}},L=r.PasswordBasedCipher=I.extend({cfg:I.cfg.extend({kdf:R}),encrypt:function(N,S,$,F){F=this.cfg.extend(F);var re=F.kdf.execute($,N.keySize,N.ivSize,F.salt,F.hasher);F.iv=re.iv;var ce=I.encrypt.call(this,N,S,re.key,F);return ce.mixIn(re),ce},decrypt:function(N,S,$,F){F=this.cfg.extend(F),S=this._parse(S,F.format);var re=F.kdf.execute($,N.keySize,N.ivSize,S.salt,F.hasher);F.iv=re.iv;var ce=I.decrypt.call(this,N,S,re.key,F);return ce}})}()})});var UL=$e((Ly,jL)=>{"use strict";(function(t,e,n){typeof Ly=="object"?jL.exports=Ly=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Ly,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:function(r,i){var o=this._cipher,s=o.blockSize;n.call(this,r,i,s,o),this._prevBlock=r.slice(i,i+s)}}),e.Decryptor=e.extend({processBlock:function(r,i){var o=this._cipher,s=o.blockSize,a=r.slice(i,i+s);n.call(this,r,i,s,o),this._prevBlock=a}});function n(r,i,o,s){var a,c=this._iv;c?(a=c.slice(0),this._iv=void 0):a=this._prevBlock,s.encryptBlock(a,0);for(var l=0;l<o;l++)r[i+l]^=a[l]}return e}(),t.mode.CFB})});var qL=$e((Vy,$L)=>{"use strict";(function(t,e,n){typeof Vy=="object"?$L.exports=Vy=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Vy,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(r,i){var o=this._cipher,s=o.blockSize,a=this._iv,c=this._counter;a&&(c=this._counter=a.slice(0),this._iv=void 0);var l=c.slice(0);o.encryptBlock(l,0),c[s-1]=c[s-1]+1|0;for(var u=0;u<s;u++)r[i+u]^=l[u]}});return e.Decryptor=n,e}(),t.mode.CTR})});var zL=$e((By,HL)=>{"use strict";(function(t,e,n){typeof By=="object"?HL.exports=By=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(By,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(o){if((o>>24&255)===255){var s=o>>16&255,a=o>>8&255,c=o&255;s===255?(s=0,a===255?(a=0,c===255?c=0:++c):++a):++s,o=0,o+=s<<16,o+=a<<8,o+=c}else o+=1<<24;return o}function r(o){return(o[0]=n(o[0]))===0&&(o[1]=n(o[1])),o}var i=e.Encryptor=e.extend({processBlock:function(o,s){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0),r(u);var d=u.slice(0);a.encryptBlock(d,0);for(var h=0;h<c;h++)o[s+h]^=d[h]}});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var GL=$e((jy,WL)=>{"use strict";(function(t,e,n){typeof jy=="object"?WL.exports=jy=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(jy,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:function(r,i){var o=this._cipher,s=o.blockSize,a=this._iv,c=this._keystream;a&&(c=this._keystream=a.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var l=0;l<s;l++)r[i+l]^=c[l]}});return e.Decryptor=n,e}(),t.mode.OFB})});var QL=$e((Uy,KL)=>{"use strict";(function(t,e,n){typeof Uy=="object"?KL.exports=Uy=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Uy,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(n,r){this._cipher.encryptBlock(n,r)}}),e.Decryptor=e.extend({processBlock:function(n,r){this._cipher.decryptBlock(n,r)}}),e}(),t.mode.ECB})});var XL=$e(($y,YL)=>{"use strict";(function(t,e,n){typeof $y=="object"?YL.exports=$y=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})($y,function(t){return t.pad.AnsiX923={pad:function(e,n){var r=e.sigBytes,i=n*4,o=i-r%i,s=r+o-1;e.clamp(),e.words[s>>>2]|=o<<24-s%4*8,e.sigBytes+=o},unpad:function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n}},t.pad.Ansix923})});var JL=$e((qy,ZL)=>{"use strict";(function(t,e,n){typeof qy=="object"?ZL.exports=qy=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(qy,function(t){return t.pad.Iso10126={pad:function(e,n){var r=n*4,i=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},unpad:function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n}},t.pad.Iso10126})});var tV=$e((Hy,eV)=>{"use strict";(function(t,e,n){typeof Hy=="object"?eV.exports=Hy=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Hy,function(t){return t.pad.Iso97971={pad:function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})});var rV=$e((zy,nV)=>{"use strict";(function(t,e,n){typeof zy=="object"?nV.exports=zy=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(zy,function(t){return t.pad.ZeroPadding={pad:function(e,n){var r=n*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var n=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(n[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}}},t.pad.ZeroPadding})});var oV=$e((Wy,iV)=>{"use strict";(function(t,e,n){typeof Wy=="object"?iV.exports=Wy=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Wy,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})});var aV=$e((Gy,sV)=>{"use strict";(function(t,e,n){typeof Gy=="object"?sV.exports=Gy=e(We(),En()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(Gy,function(t){return function(e){var n=t,r=n.lib,i=r.CipherParams,o=n.enc,s=o.Hex,a=n.format,c=a.Hex={stringify:function(l){return l.ciphertext.toString(s)},parse:function(l){var u=s.parse(l);return i.create({ciphertext:u})}}}(),t.format.Hex})});var lV=$e((Ky,cV)=>{"use strict";(function(t,e,n){typeof Ky=="object"?cV.exports=Ky=e(We(),Vs(),Bs(),Go(),En()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Ky,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo,o=[],s=[],a=[],c=[],l=[],u=[],d=[],h=[],f=[],m=[];(function(){for(var y=[],v=0;v<256;v++)v<128?y[v]=v<<1:y[v]=v<<1^283;for(var C=0,b=0,v=0;v<256;v++){var A=b^b<<1^b<<2^b<<3^b<<4;A=A>>>8^A&255^99,o[C]=A,s[A]=C;var x=y[C],I=y[x],T=y[I],R=y[A]*257^A*16843008;a[C]=R<<24|R>>>8,c[C]=R<<16|R>>>16,l[C]=R<<8|R>>>24,u[C]=R;var R=T*16843009^I*65537^x*257^C*16843008;d[A]=R<<24|R>>>8,h[A]=R<<16|R>>>16,f[A]=R<<8|R>>>24,m[A]=R,C?(C=x^y[y[y[T^x]]],b^=y[y[b]]):C=b=1}})();var _=[0,1,2,4,8,16,32,64,128,27,54],w=i.AES=r.extend({_doReset:function(){var y;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var v=this._keyPriorReset=this._key,C=v.words,b=v.sigBytes/4,A=this._nRounds=b+6,x=(A+1)*4,I=this._keySchedule=[],T=0;T<x;T++)T<b?I[T]=C[T]:(y=I[T-1],T%b?b>6&&T%b==4&&(y=o[y>>>24]<<24|o[y>>>16&255]<<16|o[y>>>8&255]<<8|o[y&255]):(y=y<<8|y>>>24,y=o[y>>>24]<<24|o[y>>>16&255]<<16|o[y>>>8&255]<<8|o[y&255],y^=_[T/b|0]<<24),I[T]=I[T-b]^y);for(var R=this._invKeySchedule=[],L=0;L<x;L++){var T=x-L;if(L%4)var y=I[T];else var y=I[T-4];L<4||T<=4?R[L]=y:R[L]=d[o[y>>>24]]^h[o[y>>>16&255]]^f[o[y>>>8&255]]^m[o[y&255]]}}},encryptBlock:function(y,v){this._doCryptBlock(y,v,this._keySchedule,a,c,l,u,o)},decryptBlock:function(y,v){var C=y[v+1];y[v+1]=y[v+3],y[v+3]=C,this._doCryptBlock(y,v,this._invKeySchedule,d,h,f,m,s);var C=y[v+1];y[v+1]=y[v+3],y[v+3]=C},_doCryptBlock:function(y,v,C,b,A,x,I,T){for(var R=this._nRounds,L=y[v]^C[0],N=y[v+1]^C[1],S=y[v+2]^C[2],$=y[v+3]^C[3],F=4,re=1;re<R;re++){var ce=b[L>>>24]^A[N>>>16&255]^x[S>>>8&255]^I[$&255]^C[F++],Ee=b[N>>>24]^A[S>>>16&255]^x[$>>>8&255]^I[L&255]^C[F++],Ne=b[S>>>24]^A[$>>>16&255]^x[L>>>8&255]^I[N&255]^C[F++],q=b[$>>>24]^A[L>>>16&255]^x[N>>>8&255]^I[S&255]^C[F++];L=ce,N=Ee,S=Ne,$=q}var ce=(T[L>>>24]<<24|T[N>>>16&255]<<16|T[S>>>8&255]<<8|T[$&255])^C[F++],Ee=(T[N>>>24]<<24|T[S>>>16&255]<<16|T[$>>>8&255]<<8|T[L&255])^C[F++],Ne=(T[S>>>24]<<24|T[$>>>16&255]<<16|T[L>>>8&255]<<8|T[N&255])^C[F++],q=(T[$>>>24]<<24|T[L>>>16&255]<<16|T[N>>>8&255]<<8|T[S&255])^C[F++];y[v]=ce,y[v+1]=Ee,y[v+2]=Ne,y[v+3]=q},keySize:256/32});e.AES=r._createHelper(w)}(),t.AES})});var dV=$e((Qy,uV)=>{"use strict";(function(t,e,n){typeof Qy=="object"?uV.exports=Qy=e(We(),Vs(),Bs(),Go(),En()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Qy,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.BlockCipher,o=e.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],a=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],u=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],d=o.DES=i.extend({_doReset:function(){for(var _=this._key,w=_.words,y=[],v=0;v<56;v++){var C=s[v]-1;y[v]=w[C>>>5]>>>31-C%32&1}for(var b=this._subKeys=[],A=0;A<16;A++){for(var x=b[A]=[],I=c[A],v=0;v<24;v++)x[v/6|0]|=y[(a[v]-1+I)%28]<<31-v%6,x[4+(v/6|0)]|=y[28+(a[v+24]-1+I)%28]<<31-v%6;x[0]=x[0]<<1|x[0]>>>31;for(var v=1;v<7;v++)x[v]=x[v]>>>(v-1)*4+3;x[7]=x[7]<<5|x[7]>>>27}for(var T=this._invSubKeys=[],v=0;v<16;v++)T[v]=b[15-v]},encryptBlock:function(_,w){this._doCryptBlock(_,w,this._subKeys)},decryptBlock:function(_,w){this._doCryptBlock(_,w,this._invSubKeys)},_doCryptBlock:function(_,w,y){this._lBlock=_[w],this._rBlock=_[w+1],h.call(this,4,252645135),h.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),h.call(this,1,1431655765);for(var v=0;v<16;v++){for(var C=y[v],b=this._lBlock,A=this._rBlock,x=0,I=0;I<8;I++)x|=l[I][((A^C[I])&u[I])>>>0];this._lBlock=A,this._rBlock=b^x}var T=this._lBlock;this._lBlock=this._rBlock,this._rBlock=T,h.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),h.call(this,16,65535),h.call(this,4,252645135),_[w]=this._lBlock,_[w+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function h(_,w){var y=(this._lBlock>>>_^this._rBlock)&w;this._rBlock^=y,this._lBlock^=y<<_}function f(_,w){var y=(this._rBlock>>>_^this._lBlock)&w;this._lBlock^=y,this._rBlock^=y<<_}e.DES=i._createHelper(d);var m=o.TripleDES=i.extend({_doReset:function(){var _=this._key,w=_.words;if(w.length!==2&&w.length!==4&&w.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var y=w.slice(0,2),v=w.length<4?w.slice(0,2):w.slice(2,4),C=w.length<6?w.slice(0,2):w.slice(4,6);this._des1=d.createEncryptor(r.create(y)),this._des2=d.createEncryptor(r.create(v)),this._des3=d.createEncryptor(r.create(C))},encryptBlock:function(_,w){this._des1.encryptBlock(_,w),this._des2.decryptBlock(_,w),this._des3.encryptBlock(_,w)},decryptBlock:function(_,w){this._des3.decryptBlock(_,w),this._des2.encryptBlock(_,w),this._des1.decryptBlock(_,w)},keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(m)}(),t.TripleDES})});var fV=$e((Yy,hV)=>{"use strict";(function(t,e,n){typeof Yy=="object"?hV.exports=Yy=e(We(),Vs(),Bs(),Go(),En()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Yy,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=i.RC4=r.extend({_doReset:function(){for(var c=this._key,l=c.words,u=c.sigBytes,d=this._S=[],h=0;h<256;h++)d[h]=h;for(var h=0,f=0;h<256;h++){var m=h%u,_=l[m>>>2]>>>24-m%4*8&255;f=(f+d[h]+_)%256;var w=d[h];d[h]=d[f],d[f]=w}this._i=this._j=0},_doProcessBlock:function(c,l){c[l]^=s.call(this)},keySize:256/32,ivSize:0});function s(){for(var c=this._S,l=this._i,u=this._j,d=0,h=0;h<4;h++){l=(l+1)%256,u=(u+c[l])%256;var f=c[l];c[l]=c[u],c[u]=f,d|=c[(c[l]+c[u])%256]<<24-h*8}return this._i=l,this._j=u,d}e.RC4=r._createHelper(o);var a=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)s.call(this)}});e.RC4Drop=r._createHelper(a)}(),t.RC4})});var mV=$e((Xy,pV)=>{"use strict";(function(t,e,n){typeof Xy=="object"?pV.exports=Xy=e(We(),Vs(),Bs(),Go(),En()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Xy,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],s=[],a=[],c=i.Rabbit=r.extend({_doReset:function(){for(var u=this._key.words,d=this.cfg.iv,h=0;h<4;h++)u[h]=(u[h]<<8|u[h]>>>24)&16711935|(u[h]<<24|u[h]>>>8)&4278255360;var f=this._X=[u[0],u[3]<<16|u[2]>>>16,u[1],u[0]<<16|u[3]>>>16,u[2],u[1]<<16|u[0]>>>16,u[3],u[2]<<16|u[1]>>>16],m=this._C=[u[2]<<16|u[2]>>>16,u[0]&4294901760|u[1]&65535,u[3]<<16|u[3]>>>16,u[1]&4294901760|u[2]&65535,u[0]<<16|u[0]>>>16,u[2]&4294901760|u[3]&65535,u[1]<<16|u[1]>>>16,u[3]&4294901760|u[0]&65535];this._b=0;for(var h=0;h<4;h++)l.call(this);for(var h=0;h<8;h++)m[h]^=f[h+4&7];if(d){var _=d.words,w=_[0],y=_[1],v=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,b=v>>>16|C&4294901760,A=C<<16|v&65535;m[0]^=v,m[1]^=b,m[2]^=C,m[3]^=A,m[4]^=v,m[5]^=b,m[6]^=C,m[7]^=A;for(var h=0;h<4;h++)l.call(this)}},_doProcessBlock:function(u,d){var h=this._X;l.call(this),o[0]=h[0]^h[5]>>>16^h[3]<<16,o[1]=h[2]^h[7]>>>16^h[5]<<16,o[2]=h[4]^h[1]>>>16^h[7]<<16,o[3]=h[6]^h[3]>>>16^h[1]<<16;for(var f=0;f<4;f++)o[f]=(o[f]<<8|o[f]>>>24)&16711935|(o[f]<<24|o[f]>>>8)&4278255360,u[d+f]^=o[f]},blockSize:128/32,ivSize:64/32});function l(){for(var u=this._X,d=this._C,h=0;h<8;h++)s[h]=d[h];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<s[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<s[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<s[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<s[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<s[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<s[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<s[6]>>>0?1:0)|0,this._b=d[7]>>>0<s[7]>>>0?1:0;for(var h=0;h<8;h++){var f=u[h]+d[h],m=f&65535,_=f>>>16,w=((m*m>>>17)+m*_>>>15)+_*_,y=((f&4294901760)*f|0)+((f&65535)*f|0);a[h]=w^y}u[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,u[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,u[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,u[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,u[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,u[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,u[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,u[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.Rabbit=r._createHelper(c)}(),t.Rabbit})});var yV=$e((Zy,gV)=>{"use strict";(function(t,e,n){typeof Zy=="object"?gV.exports=Zy=e(We(),Vs(),Bs(),Go(),En()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Zy,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],s=[],a=[],c=i.RabbitLegacy=r.extend({_doReset:function(){var u=this._key.words,d=this.cfg.iv,h=this._X=[u[0],u[3]<<16|u[2]>>>16,u[1],u[0]<<16|u[3]>>>16,u[2],u[1]<<16|u[0]>>>16,u[3],u[2]<<16|u[1]>>>16],f=this._C=[u[2]<<16|u[2]>>>16,u[0]&4294901760|u[1]&65535,u[3]<<16|u[3]>>>16,u[1]&4294901760|u[2]&65535,u[0]<<16|u[0]>>>16,u[2]&4294901760|u[3]&65535,u[1]<<16|u[1]>>>16,u[3]&4294901760|u[0]&65535];this._b=0;for(var m=0;m<4;m++)l.call(this);for(var m=0;m<8;m++)f[m]^=h[m+4&7];if(d){var _=d.words,w=_[0],y=_[1],v=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,b=v>>>16|C&4294901760,A=C<<16|v&65535;f[0]^=v,f[1]^=b,f[2]^=C,f[3]^=A,f[4]^=v,f[5]^=b,f[6]^=C,f[7]^=A;for(var m=0;m<4;m++)l.call(this)}},_doProcessBlock:function(u,d){var h=this._X;l.call(this),o[0]=h[0]^h[5]>>>16^h[3]<<16,o[1]=h[2]^h[7]>>>16^h[5]<<16,o[2]=h[4]^h[1]>>>16^h[7]<<16,o[3]=h[6]^h[3]>>>16^h[1]<<16;for(var f=0;f<4;f++)o[f]=(o[f]<<8|o[f]>>>24)&16711935|(o[f]<<24|o[f]>>>8)&4278255360,u[d+f]^=o[f]},blockSize:128/32,ivSize:64/32});function l(){for(var u=this._X,d=this._C,h=0;h<8;h++)s[h]=d[h];d[0]=d[0]+1295307597+this._b|0,d[1]=d[1]+3545052371+(d[0]>>>0<s[0]>>>0?1:0)|0,d[2]=d[2]+886263092+(d[1]>>>0<s[1]>>>0?1:0)|0,d[3]=d[3]+1295307597+(d[2]>>>0<s[2]>>>0?1:0)|0,d[4]=d[4]+3545052371+(d[3]>>>0<s[3]>>>0?1:0)|0,d[5]=d[5]+886263092+(d[4]>>>0<s[4]>>>0?1:0)|0,d[6]=d[6]+1295307597+(d[5]>>>0<s[5]>>>0?1:0)|0,d[7]=d[7]+3545052371+(d[6]>>>0<s[6]>>>0?1:0)|0,this._b=d[7]>>>0<s[7]>>>0?1:0;for(var h=0;h<8;h++){var f=u[h]+d[h],m=f&65535,_=f>>>16,w=((m*m>>>17)+m*_>>>15)+_*_,y=((f&4294901760)*f|0)+((f&65535)*f|0);a[h]=w^y}u[0]=a[0]+(a[7]<<16|a[7]>>>16)+(a[6]<<16|a[6]>>>16)|0,u[1]=a[1]+(a[0]<<8|a[0]>>>24)+a[7]|0,u[2]=a[2]+(a[1]<<16|a[1]>>>16)+(a[0]<<16|a[0]>>>16)|0,u[3]=a[3]+(a[2]<<8|a[2]>>>24)+a[1]|0,u[4]=a[4]+(a[3]<<16|a[3]>>>16)+(a[2]<<16|a[2]>>>16)|0,u[5]=a[5]+(a[4]<<8|a[4]>>>24)+a[3]|0,u[6]=a[6]+(a[5]<<16|a[5]>>>16)+(a[4]<<16|a[4]>>>16)|0,u[7]=a[7]+(a[6]<<8|a[6]>>>24)+a[5]|0}e.RabbitLegacy=r._createHelper(c)}(),t.RabbitLegacy})});var _V=$e((Jy,vV)=>{"use strict";(function(t,e,n){typeof Jy=="object"?vV.exports=Jy=e(We(),Vs(),Bs(),Go(),En()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(Jy,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo;let o=16,s=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],a=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function l(m,_){let w=_>>24&255,y=_>>16&255,v=_>>8&255,C=_&255,b=m.sbox[0][w]+m.sbox[1][y];return b=b^m.sbox[2][v],b=b+m.sbox[3][C],b}function u(m,_,w){let y=_,v=w,C;for(let b=0;b<o;++b)y=y^m.pbox[b],v=l(m,y)^v,C=y,y=v,v=C;return C=y,y=v,v=C,v=v^m.pbox[o],y=y^m.pbox[o+1],{left:y,right:v}}function d(m,_,w){let y=_,v=w,C;for(let b=o+1;b>1;--b)y=y^m.pbox[b],v=l(m,y)^v,C=y,y=v,v=C;return C=y,y=v,v=C,v=v^m.pbox[1],y=y^m.pbox[0],{left:y,right:v}}function h(m,_,w){for(let A=0;A<4;A++){m.sbox[A]=[];for(let x=0;x<256;x++)m.sbox[A][x]=a[A][x]}let y=0;for(let A=0;A<o+2;A++)m.pbox[A]=s[A]^_[y],y++,y>=w&&(y=0);let v=0,C=0,b=0;for(let A=0;A<o+2;A+=2)b=u(m,v,C),v=b.left,C=b.right,m.pbox[A]=v,m.pbox[A+1]=C;for(let A=0;A<4;A++)for(let x=0;x<256;x+=2)b=u(m,v,C),v=b.left,C=b.right,m.sbox[A][x]=v,m.sbox[A][x+1]=C;return!0}var f=i.Blowfish=r.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var m=this._keyPriorReset=this._key,_=m.words,w=m.sigBytes/4;h(c,_,w)}},encryptBlock:function(m,_){var w=u(c,m[_],m[_+1]);m[_]=w.left,m[_+1]=w.right},decryptBlock:function(m,_){var w=d(c,m[_],m[_+1]);m[_]=w.left,m[_+1]=w.right},blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(f)}(),t.Blowfish})});var EV=$e((ev,wV)=>{"use strict";(function(t,e,n){typeof ev=="object"?wV.exports=ev=e(We(),Jh(),yL(),_L(),Vs(),xL(),Bs(),z1(),Dy(),TL(),W1(),RL(),PL(),kL(),Ny(),LL(),Go(),En(),UL(),qL(),zL(),GL(),QL(),XL(),JL(),tV(),rV(),oV(),aV(),lV(),dV(),fV(),mV(),yV(),_V()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(ev,function(t){return t})});var hM=null;var nE=1,fM=Symbol("SIGNAL");function at(t){let e=hM;return hM=t,e}var pM={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function R9(t){if(!(oE(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===nE)){if(!t.producerMustRecompute(t)&&!rE(t)){t.dirty=!1,t.lastCleanEpoch=nE;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=nE}}function mM(t){return t&&(t.nextProducerIndex=0),at(t)}function gM(t,e){if(at(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(oE(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)iE(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function rE(t){cm(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(R9(n),r!==n.version))return!0}return!1}function yM(t){if(cm(t),oE(t))for(let e=0;e<t.producerNode.length;e++)iE(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function iE(t,e){if(M9(t),cm(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)iE(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];cm(i),i.producerIndexOfThis[r]=e}}function oE(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function cm(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function M9(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function P9(){throw new Error}var N9=P9;function vM(t){N9=t}function xe(t){return typeof t=="function"}function rl(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var lm=rl(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function wa(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var zt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(xe(r))try{r()}catch(o){e=o instanceof lm?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_M(o)}catch(s){e=e??[],s instanceof lm?e=[...e,...s.errors]:e.push(s)}}if(e)throw new lm(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_M(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&wa(n,e)}remove(e){let{_finalizers:n}=this;n&&wa(n,e),e instanceof t&&e._removeParent(this)}};zt.EMPTY=(()=>{let t=new zt;return t.closed=!0,t})();var sE=zt.EMPTY;function um(t){return t instanceof zt||t&&"closed"in t&&xe(t.remove)&&xe(t.add)&&xe(t.unsubscribe)}function _M(t){xe(t)?t():t.unsubscribe()}var ui={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var il={setTimeout(t,e,...n){let{delegate:r}=il;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=il;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function dm(t){il.setTimeout(()=>{let{onUnhandledError:e}=ui;if(e)e(t);else throw t})}function Ea(){}var wM=aE("C",void 0,void 0);function EM(t){return aE("E",void 0,t)}function xM(t){return aE("N",t,void 0)}function aE(t,e,n){return{kind:t,value:e,error:n}}var xa=null;function ol(t){if(ui.useDeprecatedSynchronousErrorHandling){let e=!xa;if(e&&(xa={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=xa;if(xa=null,n)throw r}}else t()}function CM(t){ui.useDeprecatedSynchronousErrorHandling&&xa&&(xa.errorThrown=!0,xa.error=t)}var Ca=class extends zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,um(e)&&e.add(this)):this.destination=O9}static create(e,n,r){return new _o(e,n,r)}next(e){this.isStopped?lE(xM(e),this):this._next(e)}error(e){this.isStopped?lE(EM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?lE(wM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},k9=Function.prototype.bind;function cE(t,e){return k9.call(t,e)}var uE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){hm(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){hm(r)}else hm(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){hm(n)}}},_o=class extends Ca{constructor(e,n,r){super();let i;if(xe(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ui.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cE(e.next,o),error:e.error&&cE(e.error,o),complete:e.complete&&cE(e.complete,o)}):i=e}this.destination=new uE(i)}};function hm(t){ui.useDeprecatedSynchronousErrorHandling?CM(t):dm(t)}function F9(t){throw t}function lE(t,e){let{onStoppedNotification:n}=ui;n&&il.setTimeout(()=>n(t,e))}var O9={closed:!0,next:Ea,error:F9,complete:Ea};var sl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ln(t){return t}function dE(...t){return hE(t)}function hE(t){return t.length===0?Ln:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var Fe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=V9(n)?n:new _o(n,r,i);return ol(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=bM(r),new r((i,o)=>{let s=new _o({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[sl](){return this}pipe(...n){return hE(n)(this)}toPromise(n){return n=bM(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function bM(t){var e;return(e=t??ui.Promise)!==null&&e!==void 0?e:Promise}function L9(t){return t&&xe(t.next)&&xe(t.error)&&xe(t.complete)}function V9(t){return t&&t instanceof Ca||L9(t)&&um(t)}function fE(t){return xe(t?.lift)}function Te(t){return e=>{if(fE(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ce(t,e,n,r,i){return new pE(t,e,n,r,i)}var pE=class extends Ca{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function al(){return Te((t,e)=>{let n=null;t._refCount++;let r=Ce(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,o=n;n=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var cl=class extends Fe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,fE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zt;let n=this.getSubject();e.add(this.source.subscribe(Ce(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zt.EMPTY)}return e}refCount(){return al()(this)}};var IM=rl(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var rn=(()=>{class t extends Fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new fm(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new IM}next(n){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ol(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?sE:(this.currentObservers=null,o.push(n),new zt(()=>{this.currentObservers=null,wa(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new Fe;return n.source=this,n}}return t.create=(e,n)=>new fm(e,n),t})(),fm=class extends rn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:sE}};var yn=class extends rn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Sd={now(){return(Sd.delegate||Date).now()},delegate:void 0};var pm=class extends rn{constructor(e=1/0,n=1/0,r=Sd){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var mm=class extends zt{constructor(e,n){super()}schedule(e,n=0){return this}};var Rd={setInterval(t,e,...n){let{delegate:r}=Rd;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Rd;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var ll=class extends mm{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Rd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Rd.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,wa(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ul=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ul.now=Sd.now;var dl=class extends ul{constructor(e,n=ul.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ba=new dl(ll);var gm=class extends ll{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var ym=class extends dl{};var mE=new ym(gm);var mr=new Fe(t=>t.complete());function DM(t){return t&&xe(t.schedule)}function gE(t){return t[t.length-1]}function hl(t){return xe(gE(t))?t.pop():void 0}function Mi(t){return DM(gE(t))?t.pop():void 0}function TM(t,e){return typeof gE(t)=="number"?t.pop():e}var vm=t=>t&&typeof t.length=="number"&&typeof t!="function";function _m(t){return xe(t?.then)}function wm(t){return xe(t[sl])}function Em(t){return Symbol.asyncIterator&&xe(t?.[Symbol.asyncIterator])}function xm(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function B9(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cm=B9();function bm(t){return xe(t?.[Cm])}function Im(t){return JR(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield em(n.read());if(i)return yield em(void 0);yield yield em(r)}}finally{n.releaseLock()}})}function Dm(t){return xe(t?.getReader)}function yt(t){if(t instanceof Fe)return t;if(t!=null){if(wm(t))return j9(t);if(vm(t))return U9(t);if(_m(t))return $9(t);if(Em(t))return AM(t);if(bm(t))return q9(t);if(Dm(t))return H9(t)}throw xm(t)}function j9(t){return new Fe(e=>{let n=t[sl]();if(xe(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function U9(t){return new Fe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function $9(t){return new Fe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,dm)})}function q9(t){return new Fe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function AM(t){return new Fe(e=>{z9(t,e).catch(n=>e.error(n))})}function H9(t){return AM(Im(t))}function z9(t,e){var n,r,i,o;return ZR(this,void 0,void 0,function*(){try{for(n=eM(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function gr(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function zr(t,e=0){return Te((n,r)=>{n.subscribe(Ce(r,i=>gr(r,t,()=>r.next(i),e),()=>gr(r,t,()=>r.complete(),e),i=>gr(r,t,()=>r.error(i),e)))})}function di(t,e=0){return Te((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function SM(t,e){return yt(t).pipe(di(e),zr(e))}function RM(t,e){return yt(t).pipe(di(e),zr(e))}function MM(t,e){return new Fe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function PM(t,e){return new Fe(n=>{let r;return gr(n,e,()=>{r=t[Cm](),gr(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>xe(r?.return)&&r.return()})}function Tm(t,e){if(!t)throw new Error("Iterable cannot be null");return new Fe(n=>{gr(n,e,()=>{let r=t[Symbol.asyncIterator]();gr(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function NM(t,e){return Tm(Im(t),e)}function kM(t,e){if(t!=null){if(wm(t))return SM(t,e);if(vm(t))return MM(t,e);if(_m(t))return RM(t,e);if(Em(t))return Tm(t,e);if(bm(t))return PM(t,e);if(Dm(t))return NM(t,e)}throw xm(t)}function be(t,e){return e?kM(t,e):yt(t)}function pe(...t){let e=Mi(t);return be(t,e)}function wo(t,e){let n=xe(t)?t:()=>t,r=i=>i.error(n());return new Fe(e?i=>e.schedule(r,0,i):r)}function yE(t){return!!t&&(t instanceof Fe||xe(t.lift)&&xe(t.subscribe))}var Eo=rl(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function fe(t,e){return Te((n,r)=>{let i=0;n.subscribe(Ce(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:W9}=Array;function G9(t,e){return W9(e)?t(...e):t(e)}function Am(t){return fe(e=>G9(t,e))}var{isArray:K9}=Array,{getPrototypeOf:Q9,prototype:Y9,keys:X9}=Object;function Sm(t){if(t.length===1){let e=t[0];if(K9(e))return{args:e,keys:null};if(Z9(e)){let n=X9(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function Z9(t){return t&&typeof t=="object"&&Q9(t)===Y9}function Rm(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Md(...t){let e=Mi(t),n=hl(t),{args:r,keys:i}=Sm(t);if(r.length===0)return be([],e);let o=new Fe(J9(r,e,i?s=>Rm(i,s):Ln));return n?o.pipe(Am(n)):o}function J9(t,e,n=Ln){return r=>{FM(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)FM(e,()=>{let l=be(t[c],e),u=!1;l.subscribe(Ce(r,d=>{o[c]=d,u||(u=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function FM(t,e,n){t?gr(n,t,e):e()}function OM(t,e,n,r,i,o,s,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=_=>l<r?m(_):c.push(_),m=_=>{o&&e.next(_),l++;let w=!1;yt(n(_,u++)).subscribe(Ce(e,y=>{i?.(y),o?f(y):e.next(y)},()=>{w=!0},void 0,()=>{if(w)try{for(l--;c.length&&l<r;){let y=c.shift();s?gr(e,s,()=>m(y)):m(y)}h()}catch(y){e.error(y)}}))};return t.subscribe(Ce(e,f,()=>{d=!0,h()})),()=>{a?.()}}function on(t,e,n=1/0){return xe(e)?on((r,i)=>fe((o,s)=>e(r,o,i,s))(yt(t(r,i))),n):(typeof e=="number"&&(n=e),Te((r,i)=>OM(r,i,t,n)))}function Pi(t=1/0){return on(Ln,t)}function LM(){return Pi(1)}function fl(...t){return LM()(be(t,Mi(t)))}function Mm(t){return new Fe(e=>{yt(t()).subscribe(e)})}function vE(...t){let e=hl(t),{args:n,keys:r}=Sm(t),i=new Fe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;yt(n[u]).subscribe(Ce(o,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||o.next(r?Rm(r,a):a),o.complete())}))}});return e?i.pipe(Am(e)):i}function pl(...t){let e=Mi(t),n=TM(t,1/0),r=t;return r.length?r.length===1?yt(r[0]):Pi(n)(be(r,e)):mr}function vn(t,e){return Te((n,r)=>{let i=0;n.subscribe(Ce(r,o=>t.call(e,o,i++)&&r.next(o)))})}function fs(t){return Te((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ce(n,void 0,void 0,s=>{o=yt(t(s,fs(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function VM(t,e,n,r,i){return(o,s)=>{let a=n,c=e,l=0;o.subscribe(Ce(s,u=>{let d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function xo(t,e){return xe(e)?on(t,e,1):on(t,1)}function ps(t){return Te((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Co(t){return t<=0?()=>mr:Te((e,n)=>{let r=0;e.subscribe(Ce(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function _E(t){return fe(()=>t)}function Pd(t,e=Ln){return t=t??e7,Te((n,r)=>{let i,o=!0;n.subscribe(Ce(r,s=>{let a=e(s);(o||!t(i,a))&&(o=!1,i=a,r.next(s))}))})}function e7(t,e){return t===e}function Pm(t=t7){return Te((e,n)=>{let r=!1;e.subscribe(Ce(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function t7(){return new Eo}function ms(t){return Te((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function br(t,e){let n=arguments.length>=2;return r=>r.pipe(t?vn((i,o)=>t(i,o,r)):Ln,Co(1),n?ps(e):Pm(()=>new Eo))}function ml(t){return t<=0?()=>mr:Te((e,n)=>{let r=[];e.subscribe(Ce(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function wE(t,e){let n=arguments.length>=2;return r=>r.pipe(t?vn((i,o)=>t(i,o,r)):Ln,ml(1),n?ps(e):Pm(()=>new Eo))}function Nd(){return Te((t,e)=>{let n,r=!1;t.subscribe(Ce(e,i=>{let o=n;n=i,r&&e.next([o,i]),r=!0}))})}function Ni(t,e){return Te(VM(t,e,arguments.length>=2,!0))}function kd(t={}){let{connector:e=()=>new rn,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),s=c=void 0,u=d=!1},m=()=>{let _=s;f(),_?.unsubscribe()};return Te((_,w)=>{l++,!d&&!u&&h();let y=c=c??e();w.add(()=>{l--,l===0&&!d&&!u&&(a=EE(m,i))}),y.subscribe(w),!s&&l>0&&(s=new _o({next:v=>y.next(v),error:v=>{d=!0,h(),a=EE(f,n,v),y.error(v)},complete:()=>{u=!0,h(),a=EE(f,r),y.complete()}}),yt(_).subscribe(s))})(o)}}function EE(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new _o({next:()=>{r.unsubscribe(),t()}});return yt(e(...n)).subscribe(r)}function Nm(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,kd({connector:()=>new pm(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function xE(t){return Te((e,n)=>{let r=!1,i=0;e.subscribe(Ce(n,o=>(r||(r=!t(o,i++)))&&n.next(o)))})}function Ia(...t){let e=Mi(t);return Te((n,r)=>{(e?fl(t,n,e):fl(t,n)).subscribe(r)})}function He(t,e){return Te((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Ce(r,c=>{i?.unsubscribe();let l=0,u=o++;yt(t(c,u)).subscribe(i=Ce(r,d=>r.next(e?e(c,d,u,l++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function km(t,e){return xe(e)?He(()=>t,e):He(()=>t)}function CE(t){return Te((e,n)=>{yt(t).subscribe(Ce(n,()=>n.complete(),Ea)),!n.closed&&e.subscribe(n)})}function Vt(t,e,n){let r=xe(t)||e||n?{next:t,error:e,complete:n}:t;return r?Te((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Ce(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Ln}function bE(...t){let e=hl(t);return Te((n,r)=>{let i=t.length,o=new Array(i),s=t.map(()=>!1),a=!1;for(let c=0;c<i;c++)yt(t[c]).subscribe(Ce(r,l=>{o[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(Ln))&&(s=null))},Ea));n.subscribe(Ce(r,c=>{if(a){let l=[c,...o];r.next(e?e(...l):l)}}))})}var AP="https://g.co/ng/security#xss",de=class extends Error{constructor(e,n){super(_g(e,n)),this.code=e}};function _g(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var qE=class extends rn{constructor(e=!1){super(),this.__isAsync=e}emit(e){let n=at(null);try{super.next(e)}finally{at(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=IE(o),i&&(i=IE(i)),s&&(s=IE(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof zt&&e.add(a),a}};function IE(t){return e=>{setTimeout(t,void 0,e)}}var Bt=qE;var Be=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Be||{});function er(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(er).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function BM(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var SP=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(SP||{}),Oi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Oi||{});function Qd(t){return{toString:t}.toString()}var Wt=globalThis;var xl={},Ir=[];function vt(t){for(let e in t)if(t[e]===vt)return e;throw Error("Could not find renamed property on target object.")}function n7(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}var r7=vt({\u0275cmp:vt}),i7=vt({\u0275dir:vt}),o7=vt({\u0275pipe:vt}),s7=vt({\u0275mod:vt}),Ym=vt({\u0275fac:vt}),Od=vt({__NG_ELEMENT_ID__:vt}),jM=vt({__NG_ENV_ID__:vt}),Vn=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Vn||{});function RP(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}function HE(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];a7(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function MP(t){return t===3||t===4||t===6}function a7(t){return t.charCodeAt(0)===64}function Vd(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?UM(t,n,i,null,e[++r]):UM(t,n,i,null,null))}}return t}function UM(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[o+1]=i);return}else if(r===t[o+1]){t[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r),i!==null&&t.splice(o++,0,i)}var PP="ng-template";function c7(t,e,n){let r=0,i=!0;for(;r<t.length;){let o=t[r++];if(typeof o=="string"&&i){let s=t[r++];if(n&&o==="class"&&RP(s.toLowerCase(),e,0)!==-1)return!0}else if(o===1){for(;r<t.length&&typeof(o=t[r++])=="string";)if(o.toLowerCase()===e)return!0;return!1}else typeof o=="number"&&(i=!1)}return!1}function NP(t){return t.type===4&&t.value!==PP}function l7(t,e,n){let r=t.type===4&&!n?PP:t.value;return e===r}function u7(t,e,n){let r=4,i=t.attrs||[],o=f7(i),s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!hi(r)&&!hi(c))return!1;if(s&&hi(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!l7(t,c,n)||c===""&&e.length===1){if(hi(r))return!1;s=!0}}else{let l=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!c7(t.attrs,l,n)){if(hi(r))return!1;s=!0}continue}let u=r&8?"class":c,d=d7(u,i,NP(t),n);if(d===-1){if(hi(r))return!1;s=!0;continue}if(l!==""){let h;d>o?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&RP(f,l,0)!==-1||r&2&&l!==h){if(hi(r))return!1;s=!0}}}}return hi(r)||s}function hi(t){return(t&1)===0}function d7(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return p7(e,t)}function h7(t,e,n=!1){for(let r=0;r<e.length;r++)if(u7(t,e[r],n))return!0;return!1}function f7(t){for(let e=0;e<t.length;e++){let n=t[e];if(MP(n))return e}return t.length}function p7(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function $M(t,e){return t?":not("+e.trim()+")":e}function m7(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!hi(s)&&(e+=$M(o,i),i=""),r=s,o=o||!hi(r);n++}return i!==""&&(e+=$M(o,i)),e}function g7(t){return t.map(m7).join(",")}function y7(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!hi(i))break;i=o}r++}return{attrs:e,classes:n}}function Je(t){return Qd(()=>{let e=VP(t),n=st(ae({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===SP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Oi.Emulated,styles:t.styles||Ir,_:null,schemas:t.schemas||null,tView:null,id:""});BP(n);let r=t.dependencies;return n.directiveDefs=HM(r,!1),n.pipeDefs=HM(r,!0),n.id=w7(n),n})}function v7(t){return vs(t)||kP(t)}function _7(t){return t!==null}function Rt(t){return Qd(()=>({type:t.type,bootstrap:t.bootstrap||Ir,declarations:t.declarations||Ir,imports:t.imports||Ir,exports:t.exports||Ir,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function qM(t,e){if(t==null)return xl;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a=Vn.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(n[o]=a!==Vn.None?[r,a]:r,e[o]=s):n[o]=r}return n}function _n(t){return Qd(()=>{let e=VP(t);return BP(e),e})}function Rl(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function vs(t){return t[r7]||null}function kP(t){return t[i7]||null}function FP(t){return t[o7]||null}function OP(t){let e=vs(t)||kP(t)||FP(t);return e!==null?e.standalone:!1}function LP(t,e){let n=t[s7]||null;if(!n&&e===!0)throw new Error(`Type ${er(t)} does not have '\u0275mod' property.`);return n}function VP(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||xl,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ir,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:qM(t.inputs,e),outputs:qM(t.outputs),debugInfo:null}}function BP(t){t.features?.forEach(e=>e(t))}function HM(t,e){if(!t)return null;let n=e?FP:v7;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(_7)}function w7(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Dr=0,Me=1,_e=2,bn=3,fi=4,gi=5,Io=6,Bd=7,pi=8,Cl=9,Do=10,Gt=11,jd=12,zM=13,Ml=14,Wr=15,Yd=16,gl=17,To=18,wg=19,jP=20,ys=21,DE=22,Aa=23,In=25,UP=1,Ud=6,Ao=7,Xm=8,bl=9,vr=10,Wx=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Wx||{});function bo(t){return Array.isArray(t)&&typeof t[UP]=="object"}function Vi(t){return Array.isArray(t)&&t[UP]===!0}function Gx(t){return(t.flags&4)!==0}function Xd(t){return t.componentOffset>-1}function Eg(t){return(t.flags&1)===1}function _s(t){return!!t.template}function $P(t){return(t[_e]&512)!==0}var qP="svg",E7="math",x7=!1;function C7(){return x7}function mi(t){for(;Array.isArray(t);)t=t[Dr];return t}function HP(t,e){return mi(e[t])}function Tr(t,e){return mi(e[t.index])}function zP(t,e){return t.data[e]}function Kx(t,e){return t[e]}function xs(t,e){let n=e[t];return bo(n)?n:n[Dr]}function b7(t){return(t[_e]&4)===4}function Qx(t){return(t[_e]&128)===128}function I7(t){return Vi(t[bn])}function Il(t,e){return e==null?null:t[e]}function WP(t){t[gl]=0}function D7(t){t[_e]&1024||(t[_e]|=1024,Qx(t)&&$d(t))}function T7(t,e){for(;t>0;)e=e[Ml],t--;return e}function Yx(t){return!!(t[_e]&9216||t[Aa]?.dirty)}function zE(t){Yx(t)?$d(t):t[_e]&64&&(C7()?(t[_e]|=1024,$d(t)):t[Do].changeDetectionScheduler?.notify())}function $d(t){t[Do].changeDetectionScheduler?.notify();let e=qd(t);for(;e!==null&&!(e[_e]&8192||(e[_e]|=8192,!Qx(e)));)e=qd(e)}function GP(t,e){if((t[_e]&256)===256)throw new de(911,!1);t[ys]===null&&(t[ys]=[]),t[ys].push(e)}function A7(t,e){if(t[ys]===null)return;let n=t[ys].indexOf(e);n!==-1&&t[ys].splice(n,1)}function qd(t){let e=t[bn];return Vi(e)?e[bn]:e}var Ae={lFrame:tN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function S7(){return Ae.lFrame.elementDepthCount}function R7(){Ae.lFrame.elementDepthCount++}function M7(){Ae.lFrame.elementDepthCount--}function KP(){return Ae.bindingsEnabled}function Zd(){return Ae.skipHydrationRootTNode!==null}function P7(t){return Ae.skipHydrationRootTNode===t}function N7(t){Ae.skipHydrationRootTNode=t}function k7(){Ae.skipHydrationRootTNode=null}function Ze(){return Ae.lFrame.lView}function qn(){return Ae.lFrame.tView}function et(t){return Ae.lFrame.contextLView=t,t[pi]}function tt(t){return Ae.lFrame.contextLView=null,t}function nr(){let t=QP();for(;t!==null&&t.type===64;)t=t.parent;return t}function QP(){return Ae.lFrame.currentTNode}function F7(){let t=Ae.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Va(t,e){let n=Ae.lFrame;n.currentTNode=t,n.isParent=e}function Xx(){return Ae.lFrame.isParent}function YP(){Ae.lFrame.isParent=!1}function O7(){return Ae.lFrame.contextLView}function xg(){let t=Ae.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function L7(){return Ae.lFrame.bindingIndex}function V7(t){return Ae.lFrame.bindingIndex=t}function Zx(){return Ae.lFrame.bindingIndex++}function XP(t){let e=Ae.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function B7(){return Ae.lFrame.inI18n}function j7(t,e){let n=Ae.lFrame;n.bindingIndex=n.bindingRootIndex=t,WE(e)}function U7(){return Ae.lFrame.currentDirectiveIndex}function WE(t){Ae.lFrame.currentDirectiveIndex=t}function $7(t){let e=Ae.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ZP(){return Ae.lFrame.currentQueryIndex}function Jx(t){Ae.lFrame.currentQueryIndex=t}function q7(t){let e=t[Me];return e.type===2?e.declTNode:e.type===1?t[gi]:null}function JP(t,e,n){if(n&Be.SkipSelf){let i=e,o=t;for(;i=i.parent,i===null&&!(n&Be.Host);)if(i=q7(o),i===null||(o=o[Ml],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=Ae.lFrame=eN();return r.currentTNode=e,r.lView=t,!0}function eC(t){let e=eN(),n=t[Me];Ae.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function eN(){let t=Ae.lFrame,e=t===null?null:t.child;return e===null?tN(t):e}function tN(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function nN(){let t=Ae.lFrame;return Ae.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var rN=nN;function tC(){let t=nN();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function H7(t){return(Ae.lFrame.contextLView=T7(t,Ae.lFrame.contextLView))[pi]}function Ba(){return Ae.lFrame.selectedIndex}function Sa(t){Ae.lFrame.selectedIndex=t}function iN(){let t=Ae.lFrame;return zP(t.tView,t.selectedIndex)}function Cg(){Ae.lFrame.currentNamespace=qP}function bg(){z7()}function z7(){Ae.lFrame.currentNamespace=null}function oN(){return Ae.lFrame.currentNamespace}var sN=!0;function Ig(){return sN}function Cs(t){sN=t}function W7(){return Pl(nr(),Ze())}function Pl(t,e){return new Ar(Tr(t,e))}var Ar=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=W7;let t=e;return t})();function G7(t){return t instanceof Ar?t.nativeElement:t}function K7(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}function Q7(t){return t.flat(Number.POSITIVE_INFINITY)}function nC(t,e){t.forEach(n=>Array.isArray(n)?nC(n,e):e(n))}function aN(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Zm(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Y7(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function X7(t,e,n){let r=Jd(t,e);return r>=0?t[r|1]=n:(r=~r,Y7(t,r,e,n)),r}function TE(t,e){let n=Jd(t,e);if(n>=0)return t[n|1]}function Jd(t,e){return Z7(t,e,1)}function Z7(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}function J7(){return this._results[Symbol.iterator]()}var GE=class t{get changes(){return this._changes??=new Bt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=J7)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=Q7(e);(this._changesDetected=!K7(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},e$="ngSkipHydration",t$="ngskiphydration";function cN(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let r=e[n];if(typeof r=="number")return!1;if(typeof r=="string"&&r.toLowerCase()===t$)return!0}return!1}function lN(t){return t.hasAttribute(e$)}function Jm(t){return(t.flags&128)===128}function n$(t){if(Jm(t))return!0;let e=t.parent;for(;e;){if(Jm(t)||cN(e))return!0;e=e.parent}return!1}var KE;function uN(t){KE=t}function Dg(){if(KE!==void 0)return KE;if(typeof document<"u")return document;throw new de(210,!1)}function ne(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Mt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Tg(t){return WM(t,hN)||WM(t,fN)}function dN(t){return Tg(t)!==null}function WM(t,e){return t.hasOwnProperty(e)?t[e]:null}function r$(t){let e=t&&(t[hN]||t[fN]);return e||null}function GM(t){return t&&(t.hasOwnProperty(KM)||t.hasOwnProperty(i$))?t[KM]:null}var hN=vt({\u0275prov:vt}),KM=vt({\u0275inj:vt}),fN=vt({ngInjectableDef:vt}),i$=vt({ngInjectorDef:vt}),te=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}},eh=new te("",{providedIn:"root",factory:()=>o$}),o$="ng",rC=new te(""),Kt=new te("",{providedIn:"platform",factory:()=>"unknown"});var iC=new te("",{providedIn:"root",factory:()=>Dg().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var s$=vt({__forward_ref__:vt});function ja(t){return t.__forward_ref__=ja,t.toString=function(){return er(this())},t}function Jn(t){return pN(t)?t():t}function pN(t){return typeof t=="function"&&t.hasOwnProperty(s$)&&t.__forward_ref__===ja}function mN(t){return t&&!!t.\u0275providers}function Dl(t){return typeof t=="string"?t:t==null?"":String(t)}function a$(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Dl(t)}function c$(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new de(-200,t)}function oC(t,e){throw new de(-201,!1)}var QE;function gN(){return QE}function yr(t){let e=QE;return QE=t,e}function yN(t,e,n){let r=Tg(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&Be.Optional)return null;if(e!==void 0)return e;oC(t,"Injector")}var l$={},Hd=l$,YE="__NG_DI_FLAG__",eg="ngTempTokenPath",u$="ngTokenPath",d$=/\n/gm,h$="\u0275",QM="__source",wl;function f$(){return wl}function gs(t){let e=wl;return wl=t,e}function p$(t,e=Be.Default){if(wl===void 0)throw new de(-203,!1);return wl===null?yN(t,void 0,e):wl.get(t,e&Be.Optional?null:void 0,e)}function U(t,e=Be.Default){return(gN()||p$)(Jn(t),e)}function Y(t,e=Be.Default){return U(t,Ag(e))}function Ag(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function XE(t){let e=[];for(let n=0;n<t.length;n++){let r=Jn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new de(900,!1);let i,o=Be.Default;for(let s=0;s<r.length;s++){let a=r[s],c=m$(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(U(i,o))}else e.push(U(r))}return e}function vN(t,e){return t[YE]=e,t.prototype[YE]=e,t}function m$(t){return t[YE]}function g$(t,e,n,r){let i=t[eg];throw e[QM]&&i.unshift(e[QM]),t.message=y$(`
`+t.message,i,n,r),t[u$]=i,t[eg]=null,t}function y$(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==h$?t.slice(2):t;let i=er(e);if(Array.isArray(e))i=e.map(er).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):er(a)))}i=`{${o.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(d$,`
  `)}`}function v$(){let t=new Ua;return Y(Kt)==="browser"&&(t.store=_$(Dg(),Y(eh))),t}var Ua=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(r,i){return this.store[r]!==void 0?this.store[r]:i}set(r,i){this.store[r]=i}remove(r){delete this.store[r]}hasKey(r){return this.store.hasOwnProperty(r)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(r,i){this.onSerializeCallbacks[r]=i}toJson(){for(let r in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(r))try{this.store[r]=this.onSerializeCallbacks[r]()}catch(i){console.warn("Exception in onSerialize callback: ",i)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=ne({token:e,providedIn:"root",factory:v$});let t=e;return t})();function _$(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(r){console.warn("Exception while restoring TransferState for app "+e,r)}return{}}var _N="h",wN="b",ZE=function(t){return t.FirstChild="f",t.NextSibling="n",t}(ZE||{}),w$="e",E$="t",sC="c",EN="x",tg="r",x$="i",C$="n",b$="d",I$="__nghData__",xN=I$,AE="ngh",D$="nghm",CN=()=>null;function T$(t,e,n=!1){let r=t.getAttribute(AE);if(r==null)return null;let[i,o]=r.split("|");if(r=n?o:i,!r)return null;let s=o?`|${o}`:"",a=n?i:s,c={};if(r!==""){let u=e.get(Ua,null,{optional:!0});u!==null&&(c=u.get(xN,[])[Number(r)])}let l={data:c,firstChild:t.firstChild??null};return n&&(l.firstChild=t,Sg(l,0,t.nextSibling)),a?t.setAttribute(AE,a):t.removeAttribute(AE),l}function A$(){CN=T$}function aC(t,e,n=!1){return CN(t,e,n)}function S$(t){let e=t._lView;return e[Me].type===2?null:($P(e)&&(e=e[In]),e)}function R$(t){return t.textContent?.replace(/\s/gm,"")}function M$(t){let e=Dg(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=R$(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),r,i=[];for(;r=n.nextNode();)i.push(r);for(let o of i)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Sg(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function JE(t,e){return t.segmentHeads?.[e]??null}function P$(t,e){let n=t.data,r=n[w$]?.[e]??null;return r===null&&n[sC]?.[e]&&(r=cC(t,e)),r}function bN(t,e){return t.data[sC]?.[e]??null}function cC(t,e){let n=bN(t,e)??[],r=0;for(let i of n)r+=i[tg]*(i[EN]??1);return r}function Rg(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[b$];t.disconnectedNodes=n?new Set(n):null}return!!t.disconnectedNodes?.has(e)}var Fm="__parameters__";function N$(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function IN(t,e,n){return Qd(()=>{let r=N$(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Fm)?c[Fm]:Object.defineProperty(c,Fm,{value:[]})[Fm];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Nl=vN(IN("Optional"),8);var lC=vN(IN("SkipSelf"),4);function Ra(t,e){let n=t.hasOwnProperty(Ym);return n?t[Ym]:null}var Ma=new te(""),DN=new te("",-1),TN=new te(""),ng=class{get(e,n=Hd){if(n===Hd){let r=new Error(`NullInjectorError: No provider for ${er(e)}!`);throw r.name="NullInjectorError",r}return n}};function kl(t){return{\u0275providers:t}}function k$(...t){return{\u0275providers:AN(!0,t),\u0275fromNgModule:!0}}function AN(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return nC(e,s=>{let a=s;ex(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&SN(i,o),n}function SN(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];uC(i,o=>{e(o,r)})}}function ex(t,e,n,r){if(t=Jn(t),!t)return!1;let i=null,o=GM(t),s=!o&&vs(t);if(!o&&!s){let c=t.ngModule;if(o=GM(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ex(l,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{nC(o.imports,u=>{ex(u,e,n,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&SN(l,e)}if(!a){let l=Ra(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ir},i),e({provide:TN,useValue:i,multi:!0},i),e({provide:Ma,useValue:()=>U(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=t;uC(c,u=>{e(u,l)})}}else return!1;return i!==t&&t.providers!==void 0}function uC(t,e){for(let n of t)mN(n)&&(n=n.\u0275providers),Array.isArray(n)?uC(n,e):e(n)}var F$=vt({provide:String,useValue:vt});function RN(t){return t!==null&&typeof t=="object"&&F$ in t}function O$(t){return!!(t&&t.useExisting)}function L$(t){return!!(t&&t.useFactory)}function Tl(t){return typeof t=="function"}function V$(t){return!!t.useClass}var Mg=new te(""),Hm={},B$={},SE;function dC(){return SE===void 0&&(SE=new ng),SE}var tr=class{},zd=class extends tr{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nx(e,s=>this.processProvider(s)),this.records.set(DN,yl(void 0,this)),i.has("environment")&&this.records.set(tr,yl(void 0,this));let o=this.records.get(Mg);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(TN,Ir,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=at(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),at(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=gs(this),r=yr(void 0),i;try{return e()}finally{gs(n),yr(r)}}get(e,n=Hd,r=Be.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(jM))return e[jM](this);r=Ag(r);let i,o=gs(this),s=yr(void 0);try{if(!(r&Be.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=H$(e)&&Tg(e);l&&this.injectableDefInScope(l)?c=yl(tx(e),Hm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Be.Self?dC():this.parent;return n=r&Be.Optional&&n===Hd?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[eg]=a[eg]||[]).unshift(er(e)),o)throw a;return g$(a,e,"R3InjectorError",this.source)}else throw a}finally{yr(s),gs(o)}}resolveInjectorInitializers(){let e=at(null),n=gs(this),r=yr(void 0),i;try{let o=this.get(Ma,Ir,Be.Self);for(let s of o)s()}finally{gs(n),yr(r),at(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(er(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new de(205,!1)}processProvider(e){e=Jn(e);let n=Tl(e)?e:Jn(e&&e.provide),r=U$(e);if(!Tl(e)&&e.multi===!0){let i=this.records.get(n);i||(i=yl(void 0,Hm,!0),i.factory=()=>XE(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=at(null);try{return n.value===Hm&&(n.value=B$,n.value=n.factory()),typeof n.value=="object"&&n.value&&q$(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{at(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Jn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function tx(t){let e=Tg(t),n=e!==null?e.factory:Ra(t);if(n!==null)return n;if(t instanceof te)throw new de(204,!1);if(t instanceof Function)return j$(t);throw new de(204,!1)}function j$(t){if(t.length>0)throw new de(204,!1);let n=r$(t);return n!==null?()=>n.factory(t):()=>new t}function U$(t){if(RN(t))return yl(void 0,t.useValue);{let e=MN(t);return yl(e,Hm)}}function MN(t,e,n){let r;if(Tl(t)){let i=Jn(t);return Ra(i)||tx(i)}else if(RN(t))r=()=>Jn(t.useValue);else if(L$(t))r=()=>t.useFactory(...XE(t.deps||[]));else if(O$(t))r=()=>U(Jn(t.useExisting));else{let i=Jn(t&&(t.useClass||t.provide));if($$(t))r=()=>new i(...XE(t.deps));else return Ra(i)||tx(i)}return r}function yl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function $$(t){return!!t.deps}function q$(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function H$(t){return typeof t=="function"||typeof t=="object"&&t instanceof te}function nx(t,e){for(let n of t)Array.isArray(n)?nx(n,e):n&&mN(n)?nx(n.\u0275providers,e):e(n)}function Bi(t,e){t instanceof zd&&t.assertNotDestroyed();let n,r=gs(t),i=yr(void 0);try{return e()}finally{gs(r),yr(i)}}function z$(t){if(!gN()&&!f$())throw new de(-203,!1)}function W$(t){let e=Wt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function G$(t){return typeof t=="function"}var rx=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function PN(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Po(){return NN}function NN(t){return t.type.prototype.ngOnChanges&&(t.setInput=Q$),K$}Po.ngInherit=!0;function K$(){let t=FN(this),e=t?.current;if(e){let n=t.previous;if(n===xl)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function Q$(t,e,n,r,i){let o=this.declaredInputs[r],s=FN(t)||Y$(t,{previous:xl,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new rx(l&&l.currentValue,n,c===xl),PN(t,e,i,n)}var kN="__ngSimpleChanges__";function FN(t){return t[kN]||null}function Y$(t,e){return t[kN]=e}var YM=null;var ki=function(t,e,n){YM?.(t,e,n)};function X$(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=NN(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Pg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function zm(t,e,n){ON(t,e,3,n)}function Wm(t,e,n,r){(t[_e]&3)===n&&ON(t,e,n,r)}function RE(t,e){let n=t[_e];(n&3)===e&&(n&=16383,n+=1,t[_e]=n)}function ON(t,e,n,r){let i=r!==void 0?t[gl]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[gl]+=65536),(a<o||o==-1)&&(Z$(t,n,e,c),t[gl]=(t[gl]&4294901760)+c+2),c++}function XM(t,e){ki(4,t,e);let n=at(null);try{e.call(t)}finally{at(n),ki(5,t,e)}}function Z$(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[_e]>>14<t[gl]>>16&&(t[_e]&3)===e&&(t[_e]+=16384,XM(a,o)):XM(a,o)}var El=-1,Pa=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function J$(t){return t instanceof Pa}function eq(t){return(t.flags&8)!==0}function tq(t){return(t.flags&16)!==0}function LN(t){return t!==El}function rg(t){return t&32767}function nq(t){return t>>16}function ig(t,e){let n=nq(t),r=e;for(;n>0;)r=r[Ml],n--;return r}var ix=!0;function og(t){let e=ix;return ix=t,e}var rq=256,VN=rq-1,BN=5,iq=0,Fi={};function oq(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Od)&&(r=n[Od]),r==null&&(r=n[Od]=iq++);let i=r&VN,o=1<<i;e.data[t+(i>>BN)]|=o}function sg(t,e){let n=jN(t,e);if(n!==-1)return n;let r=e[Me];r.firstCreatePass&&(t.injectorIndex=e.length,ME(r.data,t),ME(e,null),ME(r.blueprint,null));let i=hC(t,e),o=t.injectorIndex;if(LN(i)){let s=rg(i),a=ig(i,e),c=a[Me].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function ME(t,e){t.push(0,0,0,0,0,0,0,0,e)}function jN(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function hC(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=zN(i),r===null)return El;if(n++,i=i[Ml],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return El}function ox(t,e,n){oq(t,e,n)}function sq(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(MP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function UN(t,e,n){if(n&Be.Optional||t!==void 0)return t;oC(e,"NodeInjector")}function $N(t,e,n,r){if(n&Be.Optional&&r===void 0&&(r=null),!(n&(Be.Self|Be.Host))){let i=t[Cl],o=yr(void 0);try{return i?i.get(e,r,n&Be.Optional):yN(e,r,n&Be.Optional)}finally{yr(o)}}return UN(r,e,n)}function qN(t,e,n,r=Be.Default,i){if(t!==null){if(e[_e]&2048&&!(r&Be.Self)){let s=uq(t,e,n,r,Fi);if(s!==Fi)return s}let o=HN(t,e,n,r,Fi);if(o!==Fi)return o}return $N(e,n,r,i)}function HN(t,e,n,r,i){let o=cq(n);if(typeof o=="function"){if(!JP(e,t,r))return r&Be.Host?UN(i,n,r):$N(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&Be.Optional))oC(n);else return s}finally{rN()}}else if(typeof o=="number"){let s=null,a=jN(t,e),c=El,l=r&Be.Host?e[Wr][gi]:null;for((a===-1||r&Be.SkipSelf)&&(c=a===-1?hC(t,e):e[a+8],c===El||!JM(r,!1)?a=-1:(s=e[Me],a=rg(c),e=ig(c,e)));a!==-1;){let u=e[Me];if(ZM(o,a,u.data)){let d=aq(a,e,n,s,r,l);if(d!==Fi)return d}c=e[a+8],c!==El&&JM(r,e[Me].data[a+8]===l)&&ZM(o,a,e)?(s=u,a=rg(c),e=ig(c,e)):a=-1}}return i}function aq(t,e,n,r,i,o){let s=e[Me],a=s.data[t+8],c=r==null?Xd(a)&&ix:r!=s&&(a.type&3)!==0,l=i&Be.Host&&o===a,u=Gm(a,s,n,c,l);return u!==null?Na(e,s,u,a):Fi}function Gm(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,c=t.directiveStart,l=t.directiveEnd,u=o>>20,d=r?a:a+u,h=i?a+u:l;for(let f=d;f<h;f++){let m=s[f];if(f<c&&n===m||f>=c&&m.type===n)return f}if(i){let f=s[c];if(f&&_s(f)&&f.type===n)return c}return null}function Na(t,e,n,r){let i=t[n],o=e.data;if(J$(i)){let s=i;s.resolving&&c$(a$(o[n]));let a=og(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?yr(s.injectImpl):null,u=JP(t,r,Be.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&X$(n,o[n],e)}finally{l!==null&&yr(l),og(a),s.resolving=!1,rN()}}return i}function cq(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Od)?t[Od]:void 0;return typeof e=="number"?e>=0?e&VN:lq:e}function ZM(t,e,n){let r=1<<t;return!!(n[e+(t>>BN)]&r)}function JM(t,e){return!(t&Be.Self)&&!(t&Be.Host&&e)}var Ta=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return qN(this._tNode,this._lView,e,Ag(r),n)}};function lq(){return new Ta(nr(),Ze())}function Fl(t){return Qd(()=>{let e=t.prototype.constructor,n=e[Ym]||sx(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Ym]||sx(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function sx(t){return pN(t)?()=>{let e=sx(Jn(t));return e&&e()}:Ra(t)}function uq(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[_e]&2048&&!(s[_e]&512);){let a=HN(o,s,n,r|Be.Self,Fi);if(a!==Fi)return a;let c=o.parent;if(!c){let l=s[jP];if(l){let u=l.get(n,Fi,r);if(u!==Fi)return u}c=zN(s),s=s[Ml]}o=c}return i}function zN(t){let e=t[Me],n=e.type;return n===2?e.declTNode:n===1?t[gi]:null}function fC(t){return sq(nr(),t)}function eP(t,e=null,n=null,r){let i=WN(t,e,n,r);return i.resolveInjectorInitializers(),i}function WN(t,e=null,n=null,r,i=new Set){let o=[n||Ir,k$(t)];return r=r||(typeof t=="object"?void 0:er(t)),new zd(o,e||dC(),r||null,i)}var Gr=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return eP({name:""},i,r,"");{let o=r.name??"";return eP({name:o},r.parent,r.providers,o)}}};e.THROW_IF_NOT_FOUND=Hd,e.NULL=new ng,e.\u0275prov=ne({token:e,providedIn:"any",factory:()=>U(DN)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})(),dq="ngOriginalError";function PE(t){return t[dq]}var Li=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&PE(e);for(;n&&PE(n);)n=PE(n);return n||null}},GN=new te("",{providedIn:"root",factory:()=>Y(Li).handleError.bind(void 0)}),Om=new te(""),KN=!1,QN=new te("",{providedIn:"root",factory:()=>KN}),Lm;function hq(){if(Lm===void 0&&(Lm=null,Wt.trustedTypes))try{Lm=Wt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Lm}function Ng(t){return hq()?.createHTML(t)||t}var Vm;function fq(){if(Vm===void 0&&(Vm=null,Wt.trustedTypes))try{Vm=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Vm}function tP(t){return fq()?.createScriptURL(t)||t}var So=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${AP})`}},ax=class extends So{getTypeName(){return"HTML"}},cx=class extends So{getTypeName(){return"Style"}},lx=class extends So{getTypeName(){return"Script"}},ux=class extends So{getTypeName(){return"URL"}},dx=class extends So{getTypeName(){return"ResourceURL"}};function ji(t){return t instanceof So?t.changingThisBreaksApplicationSecurity:t}function bs(t,e){let n=pq(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${AP})`)}return n===e}function pq(t){return t instanceof So&&t.getTypeName()||null}function YN(t){return new ax(t)}function XN(t){return new cx(t)}function ZN(t){return new lx(t)}function JN(t){return new ux(t)}function e2(t){return new dx(t)}function mq(t){let e=new fx(t);return gq()?new hx(e):e}var hx=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Ng(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},fx=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Ng(e),n}};function gq(){try{return!!new window.DOMParser().parseFromString(Ng(""),"text/html")}catch{return!1}}var yq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kg(t){return t=String(t),t.match(yq)?t:"unsafe:"+t}function No(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function th(...t){let e={};for(let n of t)for(let r in n)n.hasOwnProperty(r)&&(e[r]=!0);return e}var t2=No("area,br,col,hr,img,wbr"),n2=No("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),r2=No("rp,rt"),vq=th(r2,n2),_q=th(n2,No("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wq=th(r2,No("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),nP=th(t2,_q,wq,vq),i2=No("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Eq=No("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xq=No("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Cq=th(i2,Eq,xq),bq=No("script,style,template"),px=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,r=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?r=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,r&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let i=this.checkClobberedElement(n,n.nextSibling);if(i){n=i;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!nP.hasOwnProperty(n))return this.sanitizedSomething=!0,!bq.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let r=e.attributes;for(let i=0;i<r.length;i++){let o=r.item(i),s=o.name,a=s.toLowerCase();if(!Cq.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;i2[a]&&(c=kg(c)),this.buf.push(" ",s,'="',rP(c),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();nP.hasOwnProperty(n)&&!t2.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(rP(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},Iq=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Dq=/([^\#-~ |!])/g;function rP(t){return t.replace(/&/g,"&amp;").replace(Iq,function(e){let n=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((n-55296)*1024+(r-56320)+65536)+";"}).replace(Dq,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Bm;function o2(t,e){let n=null;try{Bm=Bm||mq(t);let r=e?String(e):"";n=Bm.getInertBodyElement(r);let i=5,o=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Bm.getInertBodyElement(r)}while(r!==o);let a=new px().sanitizeChildren(iP(n)||n);return Ng(a)}finally{if(n){let r=iP(n)||n;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function iP(t){return"content"in t&&Tq(t)?t.content:null}function Tq(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var Ui=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ui||{});function jt(t){let e=a2();return e?e.sanitize(Ui.URL,t)||"":bs(t,"URL")?ji(t):kg(Dl(t))}function Aq(t){let e=a2();if(e)return tP(e.sanitize(Ui.RESOURCE_URL,t)||"");if(bs(t,"ResourceURL"))return tP(ji(t));throw new de(904,!1)}function Sq(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?Aq:jt}function s2(t,e,n){return Sq(e,n)(t)}function a2(){let t=Ze();return t&&t[Do].sanitizer}var Rq=/^>|^->|<!--|-->|--!>|<!-$/g,Mq=/(<|>)/g,Pq="\u200B$1\u200B";function Nq(t){return t.replace(Rq,e=>e.replace(Mq,Pq))}var c2=new Map,kq=0;function Fq(){return kq++}function Oq(t){c2.set(t[wg],t)}function Lq(t){c2.delete(t[wg])}var oP="__ngContext__";function ws(t,e){bo(e)?(t[oP]=e[wg],Oq(e)):t[oP]=e}function Vq(t){return t.ownerDocument.body}function l2(t){return t instanceof Function?t():t}function Fd(t){return(t??Y(Gr)).get(Kt)==="browser"}var Ro=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ro||{}),Bq;function pC(t,e){return Bq(t,e)}function vl(t,e,n,r,i){if(r!=null){let o,s=!1;Vi(r)?o=r:bo(r)&&(s=!0,r=r[Dr]);let a=mi(r);t===0&&n!==null?i==null?m2(e,n,a):ag(e,n,a,i||null,!0):t===1&&n!==null?ag(e,n,a,i||null,!0):t===2?y2(e,a,s):t===3&&e.destroyNode(a),o!=null&&nH(e,t,o,n,i)}}function u2(t,e){return t.createText(e)}function jq(t,e,n){t.setValue(e,n)}function d2(t,e){return t.createComment(Nq(e))}function mC(t,e,n){return t.createElement(e,n)}function Uq(t,e){h2(t,e),e[Dr]=null,e[gi]=null}function $q(t,e,n,r,i,o){r[Dr]=i,r[gi]=e,Og(t,r,n,1,i,o)}function h2(t,e){Og(t,e,e[Gt],2,null,null)}function qq(t){let e=t[jd];if(!e)return NE(t[Me],t);for(;e;){let n=null;if(bo(e))n=e[jd];else{let r=e[vr];r&&(n=r)}if(!n){for(;e&&!e[fi]&&e!==t;)bo(e)&&NE(e[Me],e),e=e[bn];e===null&&(e=t),bo(e)&&NE(e[Me],e),n=e&&e[fi]}e=n}}function Hq(t,e,n,r){let i=vr+r,o=n.length;r>0&&(n[i-1][fi]=e),r<o-vr?(e[fi]=n[i],aN(n,vr+r,e)):(n.push(e),e[fi]=null),e[bn]=n;let s=e[Yd];s!==null&&n!==s&&zq(s,e);let a=e[To];a!==null&&a.insertView(t),zE(e),e[_e]|=128}function zq(t,e){let n=t[bl],i=e[bn][bn][Wr];e[Wr]!==i&&(t[_e]|=Wx.HasTransplantedViews),n===null?t[bl]=[e]:n.push(e)}function f2(t,e){let n=t[bl],r=n.indexOf(e);n.splice(r,1)}function mx(t,e){if(t.length<=vr)return;let n=vr+e,r=t[n];if(r){let i=r[Yd];i!==null&&i!==t&&f2(i,r),e>0&&(t[n-1][fi]=r[fi]);let o=Zm(t,vr+e);Uq(r[Me],r);let s=o[To];s!==null&&s.detachView(o[Me]),r[bn]=null,r[fi]=null,r[_e]&=-129}return r}function p2(t,e){if(!(e[_e]&256)){let n=e[Gt];n.destroyNode&&Og(t,e,n,3,null,null),qq(e)}}function NE(t,e){if(e[_e]&256)return;let n=at(null);try{e[_e]&=-129,e[_e]|=256,e[Aa]&&yM(e[Aa]),Gq(t,e),Wq(t,e),e[Me].type===1&&e[Gt].destroy();let r=e[Yd];if(r!==null&&Vi(e[bn])){r!==e[bn]&&f2(r,e);let i=e[To];i!==null&&i.detachView(t)}Lq(e)}finally{at(n)}}function Wq(t,e){let n=t.cleanup,r=e[Bd];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[n[o+1]];n[o].call(s)}r!==null&&(e[Bd]=null);let i=e[ys];if(i!==null){e[ys]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function Gq(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Pa)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];ki(4,a,c);try{c.call(a)}finally{ki(5,a,c)}}else{ki(4,i,o);try{o.call(i)}finally{ki(5,i,o)}}}}}function Kq(t,e,n){return Qq(t,e.parent,n)}function Qq(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Dr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=t.data[r.directiveStart+i];if(o===Oi.None||o===Oi.Emulated)return null}return Tr(r,n)}}function ag(t,e,n,r,i){t.insertBefore(e,n,r,i)}function m2(t,e,n){t.appendChild(e,n)}function sP(t,e,n,r,i){r!==null?ag(t,e,n,r,i):m2(t,e,n)}function Yq(t,e,n,r){t.removeChild(e,n,r)}function gC(t,e){return t.parentNode(e)}function Xq(t,e){return t.nextSibling(e)}function Zq(t,e,n){return eH(t,e,n)}function Jq(t,e,n){return t.type&40?Tr(t,n):null}var eH=Jq,aP;function Fg(t,e,n,r){let i=Kq(t,r,e),o=e[Gt],s=r.parent||e[gi],a=Zq(s,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)sP(o,i,n[c],a,!1);else sP(o,i,n,a,!1);aP!==void 0&&aP(o,r,e,n,i)}function Km(t,e){if(e!==null){let n=e.type;if(n&3)return Tr(e,t);if(n&4)return gx(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Km(t,r);{let i=t[e.index];return Vi(i)?gx(-1,i):mi(i)}}else{if(n&32)return pC(e,t)()||mi(t[e.index]);{let r=g2(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=qd(t[Wr]);return Km(i,r)}else return Km(t,e.next)}}}return null}function g2(t,e){if(e!==null){let r=t[Wr][gi],i=e.projection;return r.projection[i]}return null}function gx(t,e){let n=vr+t+1;if(n<e.length){let r=e[n],i=r[Me].firstChild;if(i!==null)return Km(r,i)}return e[Ao]}function y2(t,e,n){let r=gC(t,e);r&&Yq(t,r,e,n)}function v2(t){t.textContent=""}function yC(t,e,n,r,i,o,s){for(;n!=null;){let a=r[n.index],c=n.type;if(s&&e===0&&(a&&ws(mi(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)yC(t,e,n.child,r,i,o,!1),vl(e,t,i,a,o);else if(c&32){let l=pC(n,r),u;for(;u=l();)vl(e,t,i,u,o);vl(e,t,i,a,o)}else c&16?tH(t,e,r,n,i,o):vl(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Og(t,e,n,r,i,o){yC(n,r,t.firstChild,e,i,o,!1)}function tH(t,e,n,r,i,o){let s=n[Wr],c=s[gi].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];vl(e,t,i,u,o)}else{let l=c,u=s[bn];Jm(r)&&(l.flags|=128),yC(t,e,l,u,i,o,!0)}}function nH(t,e,n,r,i){let o=n[Ao],s=mi(n);o!==s&&vl(e,t,r,o,i);for(let a=vr;a<n.length;a++){let c=n[a];Og(c[Me],c,t,e,r,o)}}function rH(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Ro.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ro.Important),t.setStyle(n,r,i,o))}}function iH(t,e,n){t.setAttribute(e,"style",n)}function _2(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function w2(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&HE(t,e,r),i!==null&&_2(t,e,i),o!==null&&iH(t,e,o)}var $i={};function Z(t=1){E2(qn(),Ze(),Ba()+t,!1)}function E2(t,e,n,r){if(!r)if((e[_e]&3)===3){let o=t.preOrderCheckHooks;o!==null&&zm(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Wm(e,o,0,n)}Sa(n)}function X(t,e=Be.Default){let n=Ze();if(n===null)return U(t,e);let r=nr();return qN(r,n,Jn(t),e)}function x2(){let t="invalid";throw new Error(t)}function C2(t,e,n,r,i,o){let s=at(null);try{let a=null;i&Vn.SignalBased&&(a=e[r][fM]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Vn.HasDecoratorInputTransform&&(o=t.inputTransforms[r].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,r):PN(e,a,r,o)}finally{at(s)}}function oH(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Sa(~i);else{let o=i,s=n[++r],a=n[++r];j7(s,o);let c=e[o];a(2,c)}}}finally{Sa(-1)}}function Lg(t,e,n,r,i,o,s,a,c,l,u){let d=e.blueprint.slice();return d[Dr]=i,d[_e]=r|4|128|8|64,(l!==null||t&&t[_e]&2048)&&(d[_e]|=2048),WP(d),d[bn]=d[Ml]=t,d[pi]=n,d[Do]=s||t&&t[Do],d[Gt]=a||t&&t[Gt],d[Cl]=c||t&&t[Cl]||null,d[gi]=o,d[wg]=Fq(),d[Io]=u,d[jP]=l,d[Wr]=e.type==2?t[Wr]:d,d}function nh(t,e,n,r,i){let o=t.data[e];if(o===null)o=sH(t,e,n,r,i),B7()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=F7();o.injectorIndex=s===null?-1:s.injectorIndex}return Va(o,!0),o}function sH(t,e,n,r,i){let o=QP(),s=Xx(),a=s?o:o&&o.parent,c=t.data[e]=fH(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function b2(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function I2(t,e,n,r,i){let o=Ba(),s=r&2;try{Sa(-1),s&&e.length>In&&E2(t,e,In,!1),ki(s?2:0,i),n(r,i)}finally{Sa(o),ki(s?3:1,i)}}function vC(t,e,n){if(Gx(e)){let r=at(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{at(r)}}}function _C(t,e,n){KP()&&(wH(t,e,n,Tr(n,e)),(n.flags&64)===64&&S2(t,e,n))}function wC(t,e,n=Tr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function D2(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=EC(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function EC(t,e,n,r,i,o,s,a,c,l,u){let d=In+r,h=d+i,f=aH(d,h),m=typeof l=="function"?l():l;return f[Me]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:u}}function aH(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:$i);return n}function cH(t,e,n,r){let o=r.get(QN,KN)||n===Oi.ShadowDom,s=t.selectRootElement(e,o);return lH(s),s}function lH(t){T2(t)}var T2=()=>null;function uH(t){lN(t)?v2(t):M$(t)}function dH(){T2=uH}function hH(t,e,n,r){let i=P2(e);i.push(n),t.firstCreatePass&&N2(t).push(r,i.length-1)}function fH(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return Zd()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function cP(t,e,n,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Vn.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}t===0?lP(r,n,l,a,c):lP(r,n,l,a)}return r}function lP(t,e,n,r,i){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,r):o=t[n]=[e,r],i!==void 0&&o.push(i)}function pH(t,e,n){let r=e.directiveStart,i=e.directiveEnd,o=t.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,m=h?h.outputs:null;c=cP(0,d.inputs,u,c,f),l=cP(1,d.outputs,u,l,m);let _=c!==null&&s!==null&&!NP(e)?MH(c,u,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function mH(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gH(t,e,n,r,i,o,s,a){let c=Tr(e,n),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(CC(t,n,u,r,i),Xd(e)&&yH(n,e.index)):e.type&3?(r=mH(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function yH(t,e){let n=xs(e,t);n[_e]&16||(n[_e]|=64)}function xC(t,e,n,r){if(KP()){let i=r===null?null:{"":-1},o=xH(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&A2(t,e,n,s,i,a),i&&CH(n,r,i)}n.mergedAttrs=Vd(n.mergedAttrs,n.attrs)}function A2(t,e,n,r,i,o){for(let l=0;l<r.length;l++)ox(sg(n,e),t,r[l].type);IH(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=b2(t,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];n.mergedAttrs=Vd(n.mergedAttrs,u.hostAttrs),DH(t,n,e,c,u),bH(c,u,i),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}pH(t,n,o)}function vH(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;_H(s)!=a&&s.push(a),s.push(n,r,o)}}function _H(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function wH(t,e,n,r){let i=n.directiveStart,o=n.directiveEnd;Xd(n)&&TH(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||sg(n,e),ws(r,e);let s=n.initialInputs;for(let a=i;a<o;a++){let c=t.data[a],l=Na(e,t,a,n);if(ws(l,e),s!==null&&RH(e,a-i,l,c,n,s),_s(c)){let u=xs(n.index,e);u[pi]=Na(e,t,a,n)}}}function S2(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=U7();try{Sa(o);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];WE(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&EH(c,l)}}finally{Sa(-1),WE(s)}}function EH(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function xH(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(h7(e,s.selectors,!1))if(r||(r=[]),_s(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;yx(t,e,c)}else r.unshift(s),yx(t,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function yx(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function CH(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new de(-301,!1);r.push(e[i],o)}}}function bH(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;_s(e)&&(n[""]=t)}}function IH(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function DH(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Ra(i.type,!0)),s=new Pa(o,_s(i),X);t.blueprint[r]=s,n[r]=s,vH(t,e,r,b2(t,n,i.hostVars,$i),i)}function TH(t,e,n){let r=Tr(e,t),i=D2(n),o=t[Do].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Vg(t,Lg(t,i,null,s,r,e,null,o.createRenderer(r,n),null,null,null));t[e.index]=a}function AH(t,e,n,r,i,o){let s=Tr(t,e);SH(e[Gt],s,o,t.value,n,r,i)}function SH(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Dl(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function RH(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];C2(r,n,c,l,u,d)}}function MH(t,e,n){let r=null,i=0;for(;i<n.length;){let o=n[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){r===null&&(r=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],n[i+1]);break}}i+=2}return r}function R2(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function M2(t,e){let n=t.contentQueries;if(n!==null){let r=at(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];Jx(o),a.contentQueries(2,e[s],s)}}}finally{at(r)}}}function Vg(t,e){return t[jd]?t[zM][fi]=e:t[jd]=e,t[zM]=e,e}function vx(t,e,n){Jx(0);let r=at(null);try{e(t,n)}finally{at(r)}}function P2(t){return t[Bd]||(t[Bd]=[])}function N2(t){return t.cleanup||(t.cleanup=[])}function k2(t,e){let n=t[Cl],r=n?n.get(Li,null):null;r&&r.handleError(e)}function CC(t,e,n,r,i){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],c=n[o++],l=e[s],u=t.data[s];C2(u,l,r,a,c,i)}}function F2(t,e,n){let r=HP(e,t);jq(t[Gt],r,n)}function PH(t,e){let n=xs(e,t),r=n[Me];NH(r,n);let i=n[Dr];i!==null&&n[Io]===null&&(n[Io]=aC(i,n[Cl])),bC(r,n,n[pi])}function NH(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function bC(t,e,n){eC(e);try{let r=t.viewQuery;r!==null&&vx(1,r,n);let i=t.template;i!==null&&I2(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[To]?.finishViewCreation(t),t.staticContentQueries&&M2(t,e),t.staticViewQueries&&vx(2,t.viewQuery,n);let o=t.components;o!==null&&kH(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[_e]&=-5,tC()}}function kH(t,e){for(let n=0;n<e.length;n++)PH(t,e[n])}function FH(t,e,n,r){let i=at(null);try{let o=e.tView,a=t[_e]&4096?4096:16,c=Lg(t,o,n,a,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),l=t[e.index];c[Yd]=l;let u=t[To];return u!==null&&(c[To]=u.createEmbeddedView(o)),bC(o,c,n),c}finally{at(i)}}function uP(t,e){return!e||e.firstChild===null||Jm(t)}function OH(t,e,n,r=!0){let i=e[Me];if(Hq(i,e,t,n),r){let s=gx(n,t),a=e[Gt],c=gC(a,t[Ao]);c!==null&&$q(i,t[gi],a,e,c,s)}let o=e[Io];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function cg(t,e,n,r,i=!1){for(;n!==null;){let o=e[n.index];o!==null&&r.push(mi(o)),Vi(o)&&LH(o,r);let s=n.type;if(s&8)cg(t,e,n.child,r);else if(s&32){let a=pC(n,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=g2(e,n);if(Array.isArray(a))r.push(...a);else{let c=qd(e[Wr]);cg(c[Me],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function LH(t,e){for(let n=vr;n<t.length;n++){let r=t[n],i=r[Me].firstChild;i!==null&&cg(r[Me],r,i,e)}t[Ao]!==t[Dr]&&e.push(t[Ao])}var O2=[];function VH(t){return t[Aa]??BH(t)}function BH(t){let e=O2.pop()??Object.create(UH);return e.lView=t,e}function jH(t){t.lView[Aa]!==t&&(t.lView=null,O2.push(t))}var UH=st(ae({},pM),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{$d(t.lView)},consumerOnSignalRead(){this.lView[Aa]=this}});function L2(t){return B2(t[jd])}function V2(t){return B2(t[fi])}function B2(t){for(;t!==null&&!Vi(t);)t=t[fi];return t}var j2=100;function U2(t,e=!0,n=0){let r=t[Do],i=r.rendererFactory,o=!1;o||i.begin?.();try{$H(t,n)}catch(s){throw e&&k2(t,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function $H(t,e){_x(t,e);let n=0;for(;Yx(t);){if(n===j2)throw new de(103,!1);n++,_x(t,1)}}function qH(t,e,n,r){let i=e[_e];if((i&256)===256)return;let o=!1;!o&&e[Do].inlineEffectRunner?.flush(),eC(e);let s=null,a=null;!o&&HH(t)&&(a=VH(e),s=mM(a));try{WP(e),V7(t.bindingStartIndex),n!==null&&I2(t,e,n,2,r);let c=(i&3)===3;if(!o)if(c){let d=t.preOrderCheckHooks;d!==null&&zm(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Wm(e,d,0,null),RE(e,0)}if(zH(e),$2(e,0),t.contentQueries!==null&&M2(t,e),!o)if(c){let d=t.contentCheckHooks;d!==null&&zm(e,d)}else{let d=t.contentHooks;d!==null&&Wm(e,d,1),RE(e,1)}oH(t,e);let l=t.components;l!==null&&H2(e,l,0);let u=t.viewQuery;if(u!==null&&vx(2,u,r),!o)if(c){let d=t.viewCheckHooks;d!==null&&zm(e,d)}else{let d=t.viewHooks;d!==null&&Wm(e,d,2),RE(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[DE]){for(let d of e[DE])d();e[DE]=null}o||(e[_e]&=-73)}catch(c){throw $d(e),c}finally{a!==null&&(gM(a,s),jH(a)),tC()}}function HH(t){return t.type!==2}function $2(t,e){for(let n=L2(t);n!==null;n=V2(n))for(let r=vr;r<n.length;r++){let i=n[r];q2(i,e)}}function zH(t){for(let e=L2(t);e!==null;e=V2(e)){if(!(e[_e]&Wx.HasTransplantedViews))continue;let n=e[bl];for(let r=0;r<n.length;r++){let i=n[r],o=i[bn];D7(i)}}}function WH(t,e,n){let r=xs(e,t);q2(r,n)}function q2(t,e){Qx(t)&&_x(t,e)}function _x(t,e){let r=t[Me],i=t[_e],o=t[Aa],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&rE(o)),o&&(o.dirty=!1),t[_e]&=-9217,s)qH(r,t,r.template,t[pi]);else if(i&8192){$2(t,1);let a=r.components;a!==null&&H2(t,a,1)}}function H2(t,e,n){for(let r=0;r<e.length;r++)WH(t,e[r],n)}function IC(t){for(t[Do].changeDetectionScheduler?.notify();t;){t[_e]|=64;let e=qd(t);if($P(t)&&!e)return t;t=e}return null}var ka=class{get rootNodes(){let e=this._lView,n=e[Me];return cg(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pi]}set context(e){this._lView[pi]=e}get destroyed(){return(this._lView[_e]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[bn];if(Vi(e)){let n=e[Xm],r=n?n.indexOf(this):-1;r>-1&&(mx(e,r),Zm(n,r))}this._attachedToViewContainer=!1}p2(this._lView[Me],this._lView)}onDestroy(e){GP(this._lView,e)}markForCheck(){IC(this._cdRefInjectingView||this._lView)}detach(){this._lView[_e]&=-129}reattach(){zE(this._lView),this._lView[_e]|=128}detectChanges(){this._lView[_e]|=1024,U2(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new de(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,h2(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new de(902,!1);this._appRef=e,zE(this._lView)}},Fa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=QH;let t=e;return t})(),GH=Fa,KH=class extends GH{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=FH(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new ka(i)}};function QH(){return DC(nr(),Ze())}function DC(t,e){return t.type&4?new KH(e,t,Pl(t,e)):null}function z2(t){let e=t[Ud]??[],r=t[bn][Gt];for(let i of e)YH(i,r);t[Ud]=Ir}function YH(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[tg];for(;n<i;){let o=r.nextSibling;y2(e,r,!1),r=o,n++}}}function W2(t){z2(t);for(let e=vr;e<t.length;e++)lg(t[e])}function lg(t){let e=t[Me];for(let n=In;n<e.bindingStartIndex;n++)if(Vi(t[n])){let r=t[n];W2(r)}else bo(t[n])&&lg(t[n])}function XH(t){let e=t._views;for(let n of e){let r=S$(n);if(r!==null&&r[Dr]!==null)if(bo(r))lg(r);else{let i=r[Dr];lg(i),W2(r)}}}var ZH=new RegExp(`^(\\d+)*(${wN}|${_N})*(.*)`);function JH(t){let e=t.match(ZH),[n,r,i,o]=e,s=r?parseInt(r,10):i,a=[];for(let[c,l,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(l,d)}return[s,...a]}function ez(t){return!t.prev&&t.parent?.type===8}function kE(t){return t.index-In}function Bg(t,e,n,r){let i=null,o=kE(r),s=t.data[C$];if(s?.[o])i=nz(s[o],n);else if(e.firstChild===r)i=t.firstChild;else{let a=r.prev===null,c=r.prev??r.parent;if(ez(r)){let l=kE(r.parent);i=JE(t,l)}else{let l=Tr(c,n);if(a)i=l.firstChild;else{let u=kE(c),d=JE(t,u);if(c.type===2&&d){let f=cC(t,u)+1;i=jg(f,d)}else i=l.nextSibling}}}return i}function jg(t,e){let n=e;for(let r=0;r<t;r++)n=n.nextSibling;return n}function tz(t,e){let n=t;for(let r=0;r<e.length;r+=2){let i=e[r],o=e[r+1];for(let s=0;s<o;s++)switch(i){case ZE.FirstChild:n=n.firstChild;break;case ZE.NextSibling:n=n.nextSibling;break}}return n}function nz(t,e){let[n,...r]=JH(t),i;if(n===_N)i=e[Wr][Dr];else if(n===wN)i=Vq(e[Wr][Dr]);else{let o=Number(n);i=mi(e[o+In])}return tz(i,r)}function rz(t,e){let n=[];for(let r of e)for(let i=0;i<(r[EN]??1);i++){let o={data:r,firstChild:null};r[tg]>0&&(o.firstChild=t,t=jg(r[tg],t)),n.push(o)}return[t,n]}var G2=()=>null;function iz(t,e){let n=t[Ud];return!e||n===null||n.length===0?null:n[0].data[x$]===e?n.shift():(z2(t),null)}function oz(){G2=iz}function dP(t,e){return G2(t,e)}var wx=class{},Ex=class{},ug=class{};function sz(t){let e=Error(`No component factory found for ${er(t)}.`);return e[az]=t,e}var az="ngComponent";var xx=class{resolveComponentFactory(e){throw sz(e)}},Ug=(()=>{let e=class e{};e.NULL=new xx;let t=e;return t})(),Wd=class{},ko=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>cz();let t=e;return t})();function cz(){let t=Ze(),e=nr(),n=xs(e.index,t);return(bo(n)?n:t)[Gt]}var lz=(()=>{let e=class e{};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),FE={},K2=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uz,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Cx=class extends K2{constructor(e){super(),this._lView=e}onDestroy(e){return GP(this._lView,e),()=>A7(this._lView,e)}};function uz(){return new Cx(Ze())}var hP=new Set;function Ol(t){hP.has(t)||(hP.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function fP(...t){}function dz(){let t=typeof Wt.requestAnimationFrame=="function",e=Wt[t?"requestAnimationFrame":"setTimeout"],n=Wt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var je=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1),typeof Zone>"u")throw new de(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=dz().nativeRequestAnimationFrame,pz(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new de(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new de(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,hz,fP,fP);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},hz={};function TC(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function fz(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Wt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,bx(t),t.isCheckStableRunning=!0,TC(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),bx(t))}function pz(t){let e=()=>{fz(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{if(mz(a))return n.invokeTask(i,o,s,a);try{return pP(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),mP(t)}},onInvoke:(n,r,i,o,s,a,c)=>{try{return pP(t),n.invoke(i,o,s,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),mP(t)}},onHasTask:(n,r,i,o)=>{n.hasTask(i,o),r===i&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,bx(t),TC(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,r,i,o)=>(n.handleError(i,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function bx(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function pP(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mP(t){t._nesting--,TC(t)}var Ix=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Bt,this.onMicrotaskEmpty=new Bt,this.onStable=new Bt,this.onError=new Bt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function mz(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function gz(t="zone.js",e){return t==="noop"?new Ix:t==="zone.js"?new je(e):t}var _l=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(_l||{}),yz={destroy(){}};function AC(t,e){!e&&z$(AC);let n=e?.injector??Y(Gr);if(!Fd(n))return yz;Ol("NgAfterNextRender");let r=n.get(SC),i=r.handler??=new Tx,o=e?.phase??_l.MixedReadWrite,s=()=>{i.unregister(c),a()},a=n.get(K2).onDestroy(s),c=new Dx(n,o,()=>{s(),t()});return i.register(c),{destroy:s}}var Dx=class{constructor(e,n,r){this.phase=n,this.callbackFn=r,this.zone=e.get(je),this.errorHandler=e.get(Li,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Tx=class{constructor(){this.executingCallbacks=!1,this.buckets={[_l.EarlyRead]:new Set,[_l.Write]:new Set,[_l.MixedReadWrite]:new Set,[_l.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},SC=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function dg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=BM(i,a);else if(o==2){let c=a,l=e[++s];r=BM(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var hg=class extends Ug{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=vs(e);return new Al(n,this.ngModule)}};function gP(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function vz(t){let e=t.toLowerCase();return e==="svg"?qP:e==="math"?E7:null}var Ax=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Ag(r);let i=this.injector.get(e,FE,r);return i!==FE||n===FE?i:this.parentInjector.get(e,n,r)}},Al=class extends ug{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=gP(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return gP(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=g7(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let o=at(null);try{i=i||this.ngModule;let s=i instanceof tr?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ax(e,s):e,c=a.get(Wd,null);if(c===null)throw new de(407,!1);let l=a.get(lz,null),u=a.get(SC,null),d=a.get(wx,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=r?cH(f,r,this.componentDef.encapsulation,a):mC(f,m,vz(m)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let y=null;_!==null&&(y=aC(_,a,!0));let v=EC(0,null,null,1,0,null,null,null,null,null,null),C=Lg(null,v,null,w,null,null,h,f,a,null,y);eC(C);let b,A;try{let x=this.componentDef,I,T=null;x.findHostDirectiveDefs?(I=[],T=new Map,x.findHostDirectiveDefs(x,I,T),I.push(x)):I=[x];let R=_z(C,_),L=wz(R,_,x,I,C,h,f);A=zP(v,In),_&&Cz(f,x,_,r),n!==void 0&&bz(A,this.ngContentSelectors,n),b=xz(L,x,I,T,C,[Iz]),bC(v,C,null)}finally{tC()}return new Sx(this.componentType,b,Pl(A,C),C,A)}finally{at(o)}}},Sx=class extends Ex{constructor(e,n,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ka(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;CC(o[Me],o,i,e,n),this.previousInputValues.set(e,n);let s=xs(this._tNode.index,o);IC(s)}}get injector(){return new Ta(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _z(t,e){let n=t[Me],r=In;return t[r]=e,nh(n,r,2,"#host",null)}function wz(t,e,n,r,i,o,s){let a=i[Me];Ez(r,t,e,s);let c=null;e!==null&&(c=aC(e,i[Cl]));let l=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Lg(i,D2(n),null,u,i[t.index],t,o,l,null,null,c);return a.firstCreatePass&&yx(a,t,r.length-1),Vg(i,d),i[t.index]=d}function Ez(t,e,n,r){for(let i of t)e.mergedAttrs=Vd(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(dg(e,e.mergedAttrs,!0),n!==null&&w2(r,n,e))}function xz(t,e,n,r,i,o){let s=nr(),a=i[Me],c=Tr(s,i);A2(a,i,s,n,null,r);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Na(i,a,d,s);ws(h,i)}S2(a,i,s),c&&ws(c,i);let l=Na(i,a,s.directiveStart+s.componentOffset,s);if(t[pi]=i[pi]=l,o!==null)for(let u of o)u(l,e);return vC(a,s,i),l}function Cz(t,e,n,r){if(r)HE(t,n,["ng-version","17.2.4"]);else{let{attrs:i,classes:o}=y7(e.selectors[0]);i&&HE(t,n,i),o&&o.length>0&&_2(t,n,o.join(" "))}}function bz(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null?Array.from(o):null)}}function Iz(){let t=nr();Pg(Ze()[Me],t)}var Is=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Dz;let t=e;return t})();function Dz(){let t=nr();return Y2(t,Ze())}var Tz=Is,Q2=class extends Tz{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Pl(this._hostTNode,this._hostLView)}get injector(){return new Ta(this._hostTNode,this._hostLView)}get parentInjector(){let e=hC(this._hostTNode,this._hostLView);if(LN(e)){let n=ig(e,this._hostLView),r=rg(e),i=n[Me].data[r+8];return new Ta(i,n)}else return new Ta(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=yP(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-vr}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=dP(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,uP(this._hostTNode,s)),a}createComponent(e,n,r,i,o){let s=e&&!G$(e),a;if(s)a=n;else{let m=n||{};a=m.index,r=m.injector,i=m.projectableNodes,o=m.environmentInjector||m.ngModuleRef}let c=s?e:new Al(vs(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?l:this.parentInjector).get(tr,null);_&&(o=_)}let u=vs(c.componentType??{}),d=dP(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,i,h,o);return this.insertImpl(f.hostView,a,uP(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(I7(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[bn],l=new Q2(c,c[gi],c[bn]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return OH(s,i,o,r),e.attachToViewContainerRef(),aN(OE(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=yP(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=mx(this._lContainer,n);r&&(Zm(OE(this._lContainer),n),p2(r[Me],r))}detach(e){let n=this._adjustIndex(e,-1),r=mx(this._lContainer,n);return r&&Zm(OE(this._lContainer),n)!=null?new ka(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function yP(t){return t[Xm]}function OE(t){return t[Xm]||(t[Xm]=[])}function Y2(t,e){let n,r=e[t.index];return Vi(r)?n=r:(n=R2(r,e,null,t),e[t.index]=n,Vg(e,n)),X2(n,e,t,r),new Q2(n,t,e)}function Az(t,e){let n=t[Gt],r=n.createComment(""),i=Tr(e,t),o=gC(n,i);return ag(n,o,r,Xq(n,i),!1),r}var X2=Z2,RC=()=>!1;function Sz(t,e,n){return RC(t,e,n)}function Z2(t,e,n,r){if(t[Ao])return;let i;n.type&8?i=mi(r):i=Az(e,n),t[Ao]=i}function Rz(t,e,n){if(t[Ao]&&t[Ud])return!0;let r=n[Io],i=e.index-In;if(!r||n$(e)||Rg(r,i))return!1;let s=JE(r,i),a=r.data[sC]?.[i],[c,l]=rz(s,a);return t[Ao]=c,t[Ud]=l,!0}function Mz(t,e,n,r){RC(t,n,e)||Z2(t,e,n,r)}function Pz(){X2=Mz,RC=Rz}var Rx=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Mx=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let o=0;o<r;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)MC(e,n).matches!==null&&this.queries[n].setDirty()}},Px=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=jz(e):this.predicate=e}},Nx=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},kx=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,n,Nz(n,o)),this.matchTNodeWithReadOption(e,n,Gm(n,e,o,!1,!1))}else r===Fa?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Gm(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ar||i===Is||i===Fa&&n.type&4)this.addMatch(n.index,-2);else{let o=Gm(n,e,i,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function Nz(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function kz(t,e){return t.type&11?Pl(t,e):t.type&4?DC(t,e):null}function Fz(t,e,n,r){return n===-1?kz(e,t):n===-2?Oz(t,e,r):Na(t,t[Me],n,e)}function Oz(t,e,n){if(n===Ar)return Pl(e,t);if(n===Fa)return DC(e,t);if(n===Is)return Y2(e,t)}function J2(t,e,n,r){let i=e[To].queries[r];if(i.matches===null){let o=t.data,s=n.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let u=o[l];a.push(Fz(e,u,s[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Fx(t,e,n,r){let i=t.queries.getByIndex(n),o=i.matches;if(o!==null){let s=J2(t,e,i,n);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let l=o[a+1],u=e[-c];for(let d=vr;d<u.length;d++){let h=u[d];h[Yd]===h[bn]&&Fx(h[Me],h,l,r)}if(u[bl]!==null){let d=u[bl];for(let h=0;h<d.length;h++){let f=d[h];Fx(f[Me],f,l,r)}}}}}return r}function Lz(t,e){return t[To].queries[e].queryList}function Vz(t,e,n){let r=new GE((n&4)===4);return hH(t,e,r,r.destroy),(e[To]??=new Mx).queries.push(new Rx(r))-1}function Bz(t,e,n,r){let i=qn();if(i.firstCreatePass){let o=nr();Uz(i,new Px(e,n,r),o.index),$z(i,t),(n&2)===2&&(i.staticContentQueries=!0)}return Vz(i,Ze(),n)}function jz(t){return t.split(",").map(e=>e.trim())}function Uz(t,e,n){t.queries===null&&(t.queries=new Nx),t.queries.track(new kx(e,n))}function $z(t,e){let n=t.contentQueries||(t.contentQueries=[]),r=n.length?n[n.length-1]:-1;e!==r&&n.push(t.queries.length-1,e)}function MC(t,e){return t.queries.getByIndex(e)}function qz(t,e){let n=t[Me],r=MC(n,e);return r.crossesNgTemplate?Fx(n,t,e,[]):J2(n,t,r,e)}function Hz(t){let e=[],n=new Map;function r(i){let o=n.get(i);if(!o){let s=t(i);n.set(i,o=s.then(Kz))}return o}return fg.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,u=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),s.push(r(d).then(f=>{a[l+h]=f,u.splice(u.indexOf(d),1),u.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(s).then(()=>Qz(o));e.push(c)}),Wz(),Promise.all(e).then(()=>{})}var fg=new Map,zz=new Set;function Wz(){let t=fg;return fg=new Map,t}function Gz(){return fg.size===0}function Kz(t){return typeof t=="string"?t:t.text()}function Qz(t){zz.delete(t)}function Yz(t){return Object.getPrototypeOf(t.prototype).constructor}function Fo(t){let e=Yz(t.type),n=!0,r=[t];for(;e;){let i;if(_s(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new de(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=jm(t.inputs),s.inputTransforms=jm(t.inputTransforms),s.declaredInputs=jm(t.declaredInputs),s.outputs=jm(t.outputs);let a=i.hostBindings;a&&tW(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Jz(t,c),l&&eW(t,l),Xz(t,i),n7(t.outputs,i.outputs),_s(i)&&i.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Fo&&(n=!1)}}e=Object.getPrototypeOf(e)}Zz(r)}function Xz(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Zz(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Vd(i.hostAttrs,n=Vd(n,i.hostAttrs))}}function jm(t){return t===xl?{}:t===Ir?[]:t}function Jz(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function eW(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function tW(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function PC(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Es=class{},Gd=class{};var pg=class extends Es{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hg(this);let i=LP(e);this._bootstrapComponents=l2(i.bootstrap),this._r3Injector=WN(e,n,[{provide:Es,useValue:this},{provide:Ug,useValue:this.componentFactoryResolver},...r],er(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},mg=class extends Gd{constructor(e){super(),this.moduleType=e}create(e){return new pg(this.moduleType,e,[])}};function nW(t,e,n){return new pg(t,e,n)}var Ox=class extends Es{constructor(e){super(),this.componentFactoryResolver=new hg(this),this.instance=null;let n=new zd([...e.providers,{provide:Es,useValue:this},{provide:Ug,useValue:this.componentFactoryResolver}],e.parent||dC(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $g(t,e,n=null){return new Ox({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var $a=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ek(t){return iW(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function rW(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function iW(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function NC(t,e,n){return t[e]=n}function oW(t,e){return t[e]}function Oa(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function tk(t,e,n,r){let i=Oa(t,e,n);return Oa(t,e+1,r)||i}function sW(t,e,n,r,i,o,s,a,c){let l=e.consts,u=nh(e,t,4,s||null,Il(l,a));xC(e,n,u,Il(l,c)),Pg(e,u);let d=u.tView=EC(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Ie(t,e,n,r,i,o,s,a){let c=Ze(),l=qn(),u=t+In,d=l.firstCreatePass?sW(u,l,c,e,n,r,i,o,s):l.data[u];Va(d,!1);let h=nk(l,c,d,t);Ig()&&Fg(l,c,h,d),ws(h,c);let f=R2(h,c,h,d);return c[u]=f,Vg(c,f),Sz(f,d,c),Eg(d)&&_C(l,c,d),s!=null&&wC(c,d,a),Ie}var nk=rk;function rk(t,e,n,r){return Cs(!0),e[Gt].createComment("")}function aW(t,e,n,r){let i=e[Io],o=!i||Zd()||Rg(i,r);if(Cs(o),o)return rk(t,e,n,r);let s=i.data[E$]?.[r]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Bg(i,t,e,n);Sg(i,r,a);let c=cC(i,r);return jg(c,a)}function cW(){nk=aW}function rh(t,e,n,r){let i=Ze(),o=Zx();if(Oa(i,o,e)){let s=qn(),a=iN();AH(a,i,t,e,n,r)}return rh}function lW(t,e,n,r){return Oa(t,Zx(),n)?e+Dl(n)+r:$i}function uW(t,e,n,r,i,o){let s=L7(),a=tk(t,s,n,i);return XP(2),a?e+Dl(n)+r+Dl(i)+o:$i}function Um(t,e){return t<<17|e<<2}function La(t){return t>>17&32767}function dW(t){return(t&2)==2}function hW(t,e){return t&131071|e<<17}function Lx(t){return t|2}function Sl(t){return(t&131068)>>2}function LE(t,e){return t&-131069|e<<2}function fW(t){return(t&1)===1}function Vx(t){return t|1}function pW(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=La(s),c=Sl(s);t[r]=n;let l=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Jd(d,u)>0)&&(l=!0)}else u=n;if(i)if(c!==0){let h=La(t[a+1]);t[r+1]=Um(h,a),h!==0&&(t[h+1]=LE(t[h+1],r)),t[a+1]=hW(t[a+1],r)}else t[r+1]=Um(a,0),a!==0&&(t[a+1]=LE(t[a+1],r)),a=r;else t[r+1]=Um(c,0),a===0?a=r:t[c+1]=LE(t[c+1],r),c=r;l&&(t[r+1]=Lx(t[r+1])),vP(t,u,r,!0),vP(t,u,r,!1),mW(e,u,t,r,o),s=Um(a,c),o?e.classBindings=s:e.styleBindings=s}function mW(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Jd(o,e)>=0&&(n[r+1]=Vx(n[r+1]))}function vP(t,e,n,r){let i=t[n+1],o=e===null,s=r?La(i):Sl(i),a=!1;for(;s!==0&&(a===!1||o);){let c=t[s],l=t[s+1];gW(c,e)&&(a=!0,t[s+1]=r?Vx(l):Lx(l)),s=r?La(l):Sl(l)}a&&(t[n+1]=r?Lx(i):Vx(i))}function gW(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Jd(t,e)>=0:!1}function ee(t,e,n){let r=Ze(),i=Zx();if(Oa(r,i,e)){let o=qn(),s=iN();gH(o,s,r,t,e,r[Gt],n,!1)}return ee}function _P(t,e,n,r,i){let o=e.inputs,s=i?"class":"style";CC(t,n,o[s],s,r)}function Oo(t,e,n){return ik(t,e,n,!1),Oo}function qg(t,e){return ik(t,e,null,!0),qg}function ik(t,e,n,r){let i=Ze(),o=qn(),s=XP(2);if(o.firstUpdatePass&&vW(o,t,s,r),e!==$i&&Oa(i,s,e)){let a=o.data[Ba()];CW(o,a,i,i[Gt],t,i[s+1]=bW(e,n),r,s)}}function yW(t,e){return e>=t.expandoStartIndex}function vW(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[Ba()],s=yW(t,n);IW(o,r)&&e===null&&!s&&(e=!1),e=_W(i,o,e,r),pW(i,o,e,n,s,r)}}function _W(t,e,n,r){let i=$7(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=VE(null,t,e,n,r),n=Kd(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=VE(i,t,e,n,r),o===null){let c=wW(t,e,r);c!==void 0&&Array.isArray(c)&&(c=VE(null,t,e,c[1],r),c=Kd(c,e.attrs,r),EW(t,e,r,c))}else o=xW(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function wW(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Sl(r)!==0)return t[La(r)]}function EW(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[La(i)]=r}function xW(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Kd(r,s,n)}return Kd(r,e.attrs,n)}function VE(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=Kd(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function Kd(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),X7(t,s,n?!0:e[++o]))}return t===void 0?null:t}function CW(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],u=fW(l)?wP(c,e,n,i,Sl(l),s):void 0;if(!gg(u)){gg(o)||dW(l)&&(o=wP(c,null,n,i,a,s));let d=HP(Ba(),n);rH(r,s,d,i,o)}}function wP(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=n[i+1];h===$i&&(h=d?Ir:void 0);let f=d?TE(h,r):u===r?h:void 0;if(l&&!gg(f)&&(f=TE(c,r)),gg(f)&&(a=f,s))return a;let m=t[i+1];i=s?La(m):Sl(m)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=TE(c,r))}return a}function gg(t){return t!==void 0}function bW(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=er(ji(t)))),t}function IW(t,e){return(t.flags&(e?8:16))!==0}function DW(t,e,n,r,i,o){let s=e.consts,a=Il(s,i),c=nh(e,t,2,r,a);return xC(e,n,c,Il(s,o)),c.attrs!==null&&dg(c,c.attrs,!1),c.mergedAttrs!==null&&dg(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function k(t,e,n,r){let i=Ze(),o=qn(),s=In+t,a=i[Gt],c=o.firstCreatePass?DW(s,o,i,e,n,r):o.data[s],l=ok(o,i,c,a,e,t);i[s]=l;let u=Eg(c);return Va(c,!0),w2(a,l,c),(c.flags&32)!==32&&Ig()&&Fg(o,i,l,c),S7()===0&&ws(l,i),R7(),u&&(_C(o,i,c),vC(o,c,i)),r!==null&&wC(i,c),k}function O(){let t=nr();Xx()?YP():(t=t.parent,Va(t,!1));let e=t;P7(e)&&k7(),M7();let n=qn();return n.firstCreatePass&&(Pg(n,t),Gx(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&eq(e)&&_P(n,e,Ze(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&tq(e)&&_P(n,e,Ze(),e.stylesWithoutHost,!1),O}function le(t,e,n,r){return k(t,e,n,r),O(),le}var ok=(t,e,n,r,i,o)=>(Cs(!0),mC(r,i,oN()));function TW(t,e,n,r,i,o){let s=e[Io],a=!s||Zd()||Rg(s,o);if(Cs(a),a)return mC(r,i,oN());let c=Bg(s,t,e,n);return bN(s,o)&&Sg(s,o,c.nextSibling),s&&(cN(n)||lN(c))&&Xd(n)&&(N7(n),v2(c)),c}function AW(){ok=TW}function SW(t,e,n,r,i){let o=e.consts,s=Il(o,r),a=nh(e,t,8,"ng-container",s);s!==null&&dg(a,s,!0);let c=Il(o,i);return xC(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function ih(t,e,n){let r=Ze(),i=qn(),o=t+In,s=i.firstCreatePass?SW(o,i,r,e,n):i.data[o];Va(s,!0);let a=sk(i,r,s,t);return r[o]=a,Ig()&&Fg(i,r,a,s),ws(a,r),Eg(s)&&(_C(i,r,s),vC(i,s,r)),n!=null&&wC(r,s),ih}function oh(){let t=nr(),e=qn();return Xx()?YP():(t=t.parent,Va(t,!1)),e.firstCreatePass&&(Pg(e,t),Gx(t)&&e.queries.elementEnd(t)),oh}var sk=(t,e,n,r)=>(Cs(!0),d2(e[Gt],""));function RW(t,e,n,r){let i,o=e[Io],s=!o||Zd();if(Cs(s),s)return d2(e[Gt],"");let a=Bg(o,t,e,n),c=P$(o,r);return Sg(o,r,a),i=jg(c,a),i}function MW(){sk=RW}function dt(){return Ze()}var Da=void 0;function PW(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var NW=["en",[["a","p"],["AM","PM"],Da],[["AM","PM"],Da,Da],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Da,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Da,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Da,"{1} 'at' {0}",Da],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",PW],BE={};function Kr(t){let e=kW(t),n=EP(e);if(n)return n;let r=e.split("-")[0];if(n=EP(r),n)return n;if(r==="en")return NW;throw new de(701,!1)}function EP(t){return t in BE||(BE[t]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[t]),BE[t]}var Qt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Qt||{});function kW(t){return t.toLowerCase().replace(/_/g,"-")}var yg="en-US";var FW=yg;function OW(t){typeof t=="string"&&(FW=t.toLowerCase().replace(/_/g,"-"))}function we(t,e,n,r){let i=Ze(),o=qn(),s=nr();return VW(o,i,i[Gt],s,t,e,r),we}function LW(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Bd],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function VW(t,e,n,r,i,o,s){let a=Eg(r),l=t.firstCreatePass&&N2(t),u=e[pi],d=P2(e),h=!0;if(r.type&3||s){let _=Tr(r,e),w=s?s(_):_,y=d.length,v=s?b=>s(mi(b[r.index])):r.index,C=null;if(!s&&a&&(C=LW(t,e,i,r.index)),C!==null){let b=C.__ngLastListenerFn__||C;b.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,h=!1}else{o=CP(r,e,u,o,!1);let b=n.listen(w,i,o);d.push(o,b),l&&l.push(i,v,y,y+1)}}else o=CP(r,e,u,o,!1);let f=r.outputs,m;if(h&&f!==null&&(m=f[i])){let _=m.length;if(_)for(let w=0;w<_;w+=2){let y=m[w],v=m[w+1],A=e[y][v].subscribe(o),x=d.length;if(d.push(o,A),l){let I=typeof A=="function"?x+1:-(x+1);l.push(i,r.index,x,I)}}}}function xP(t,e,n,r){let i=at(null);try{return ki(6,e,n),n(r)!==!1}catch(o){return k2(t,o),!1}finally{ki(7,e,n),at(i)}}function CP(t,e,n,r,i){return function o(s){if(s===Function)return r;let a=t.componentOffset>-1?xs(t.index,e):e;IC(a);let c=xP(e,n,r,s),l=o.__ngNextListenerFn__;for(;l;)c=xP(e,n,l,s)&&c,l=l.__ngNextListenerFn__;return i&&c===!1&&s.preventDefault(),c}}function nt(t=1){return H7(t)}function ak(t,e,n,r){Bz(t,e,n,r)}function ck(t){let e=Ze(),n=qn(),r=ZP();Jx(r+1);let i=MC(n,r);if(t.dirty&&b7(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let o=qz(e,r);t.reset(o,G7),t.notifyOnChanges()}return!0}return!1}function lk(){return Lz(Ze(),ZP())}function BW(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function sn(t){let e=O7();return Kx(e,In+t)}function z(t,e=""){let n=Ze(),r=qn(),i=t+In,o=r.firstCreatePass?nh(r,i,1,e,null):r.data[i],s=uk(r,n,o,e,t);n[i]=s,Ig()&&Fg(r,n,s,o),Va(o,!1)}var uk=(t,e,n,r,i)=>(Cs(!0),u2(e[Gt],r));function jW(t,e,n,r,i){let o=e[Io],s=!o||Zd()||Rg(o,i);return Cs(s),s?u2(e[Gt],r):Bg(o,t,e,n)}function UW(){uk=jW}function Dt(t){return Qr("",t,""),Dt}function Qr(t,e,n){let r=Ze(),i=lW(r,t,e,n);return i!==$i&&F2(r,Ba(),i),Qr}function kC(t,e,n,r,i){let o=Ze(),s=uW(o,t,e,n,r,i);return s!==$i&&F2(o,Ba(),s),kC}function $W(t,e,n){let r=qn();if(r.firstCreatePass){let i=_s(t);Bx(n,r.data,r.blueprint,i,!0),Bx(e,r.data,r.blueprint,i,!1)}}function Bx(t,e,n,r,i){if(t=Jn(t),Array.isArray(t))for(let o=0;o<t.length;o++)Bx(t[o],e,n,r,i);else{let o=qn(),s=Ze(),a=nr(),c=Tl(t)?t:Jn(t.provide),l=MN(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Tl(t)||!t.multi){let f=new Pa(l,i,X),m=UE(c,e,i?u:u+h,d);m===-1?(ox(sg(a,s),o,c),jE(o,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[m]=f,s[m]=f)}else{let f=UE(c,e,u+h,d),m=UE(c,e,u,u+h),_=f>=0&&n[f],w=m>=0&&n[m];if(i&&!w||!i&&!_){ox(sg(a,s),o,c);let y=zW(i?HW:qW,n.length,i,r,l);!i&&w&&(n[m].providerFactory=y),jE(o,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),s.push(y)}else{let y=dk(n[i?m:f],l,!i&&r);jE(o,t,f>-1?f:m,y)}!i&&r&&w&&n[m].componentProviders++}}}function jE(t,e,n,r){let i=Tl(e),o=V$(e);if(i||o){let c=(o?Jn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(n);u===-1?l.push(n,[r,c]):l[u+1].push(r,c)}else l.push(n,c)}}}function dk(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function UE(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function qW(t,e,n,r){return jx(this.multi,[])}function HW(t,e,n,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Na(n,n[Me],this.providerFactory.index,r);o=a.slice(0,s),jx(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],jx(i,o);return o}function jx(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function zW(t,e,n,r,i){let o=new Pa(t,n,X);return o.multi=[],o.index=e,o.componentProviders=0,dk(o,i,r&&!n),o}function sh(t,e=[]){return n=>{n.providersResolver=(r,i)=>$W(r,i?i(t):t,e)}}var WW=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=AN(!1,r.type),o=i.length>0?$g([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,o)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ne({token:e,providedIn:"environment",factory:()=>new e(U(tr))});let t=e;return t})();function hk(t){Ol("NgStandalone"),t.getStandaloneInjector=e=>e.get(WW).getOrCreateStandaloneInjector(t)}function Bn(t,e,n){let r=xg()+t,i=Ze();return i[r]===$i?NC(i,r,n?e.call(n):e()):oW(i,r)}function qa(t,e,n,r,i){return pk(Ze(),xg(),t,e,n,r,i)}function fk(t,e){let n=t[e];return n===$i?void 0:n}function GW(t,e,n,r,i,o){let s=e+n;return Oa(t,s,i)?NC(t,s+1,o?r.call(o,i):r(i)):fk(t,s+1)}function pk(t,e,n,r,i,o,s){let a=e+n;return tk(t,a,i,o)?NC(t,a+2,s?r.call(s,i,o):r(i,o)):fk(t,a+2)}function Ds(t,e){let n=qn(),r,i=t+In;n.firstCreatePass?(r=KW(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Ra(r.type,!0)),s,a=yr(X);try{let c=og(!1),l=o();return og(c),BW(n,Ze(),i,l),l}finally{yr(a)}}function KW(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function Hg(t,e,n){let r=t+In,i=Ze(),o=Kx(i,r);return mk(i,r)?GW(i,xg(),e,o.transform,n,o):o.transform(n)}function zg(t,e,n,r){let i=t+In,o=Ze(),s=Kx(o,i);return mk(o,i)?pk(o,xg(),e,s.transform,n,r,s):s.transform(n,r)}function mk(t,e){return t[Me].data[e].pure}var $m=null;function QW(t){$m!==null&&(t.defaultEncapsulation!==$m.defaultEncapsulation||t.preserveWhitespaces!==$m.preserveWhitespaces)||($m=t)}var Mo=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},gk=new Mo("17.2.4"),Wg=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var FC=new te(""),ah=new te(""),Gg=(()=>{let e=class e{constructor(r,i,o){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,OC||(YW(o),o.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{je.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,o){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),r()},i)),this._callbacks.push({doneCb:r,timeoutId:s,updateCb:o})}whenStable(r,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,o){return[]}};e.\u0275fac=function(i){return new(i||e)(U(je),U(Kg),U(ah))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),Kg=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return OC?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function YW(t){OC=t}var OC;function Ha(t){return!!t&&typeof t.then=="function"}function yk(t){return!!t&&typeof t.subscribe=="function"}var Qg=new te(""),vk=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=Y(Qg,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let o of this.appInits){let s=o();if(Ha(s))r.push(s);else if(yk(s)){let a=new Promise((c,l)=>{s.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(o=>{this.reject(o)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ll=new te("");function XW(){vM(()=>{throw new de(600,!1)})}function ZW(t){return t.isBoundToModule}function JW(t,e,n){try{let r=n();return Ha(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function _k(t,e){return Array.isArray(e)?e.reduce(_k,t):ae(ae({},t),e)}var Lo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Y(GN),this.afterRenderEffectManager=Y(SC),this.componentTypes=[],this.components=[],this.isStable=Y($a).hasPendingTasks.pipe(fe(r=>!r)),this._injector=Y(tr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let o=r instanceof ug;if(!this._injector.get(vk).done){let f=!o&&OP(r),m=!1;throw new de(405,m)}let a;o?a=r:a=this._injector.get(Ug).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=ZW(a)?void 0:this._injector.get(Es),l=i||a.selector,u=a.create(Gr.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(FC,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Qm(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new de(101,!1);let r=at(null);try{this._runningTick=!0,this.detectChangesInAttachedViews()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,at(r)}}detectChangesInAttachedViews(){let r=0,i=this.afterRenderEffectManager;for(;;){if(r===j2)throw new de(103,!1);let o=r===0;for(let{_lView:s,notifyErrorHandler:a}of this._views)!o&&!$E(s)||this.detectChangesInView(s,a,o);if(r++,i.executeInternalCallbacks(),!this._views.some(({_lView:s})=>$E(s))&&(i.execute(),!this._views.some(({_lView:s})=>$E(s))))break}}detectChangesInView(r,i,o){let s;o?(s=0,r[_e]|=1024):r[_e]&64?s=0:s=1,U2(r,i,s)}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Qm(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Ll,[]);[...this._bootstrapListeners,...i].forEach(o=>o(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Qm(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new de(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Qm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var qm;function LC(t){qm??=new WeakMap;let e=qm.get(t);if(e)return e;let n=t.isStable.pipe(br(r=>r)).toPromise().then(()=>{});return qm.set(t,n),t.onDestroy(()=>qm?.delete(t)),n}function $E(t){return Yx(t)}var Ux=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Yg=(()=>{let e=class e{compileModuleSync(r){return new mg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),o=LP(r),s=l2(o.declarations).reduce((a,c)=>{let l=vs(c);return l&&a.push(new Al(l)),a},[]);return new Ux(i,s)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eG=new te("");function tG(t,e,n){let r=new mg(n);return Promise.resolve(r)}function bP(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var nG=(()=>{let e=class e{constructor(){this.zone=Y(je),this.applicationRef=Y(Lo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rG(t){return[{provide:je,useFactory:t},{provide:Ma,multi:!0,useFactory:()=>{let e=Y(nG,{optional:!0});return()=>e.initialize()}},{provide:Ma,multi:!0,useFactory:()=>{let e=Y(sG);return()=>{e.initialize()}}},{provide:GN,useFactory:iG}]}function iG(){let t=Y(je),e=Y(Li);return n=>t.runOutsideAngular(()=>e.handleError(n))}function oG(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var sG=(()=>{let e=class e{constructor(){this.subscription=new zt,this.initialized=!1,this.zone=Y(je),this.pendingTasks=Y($a)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{je.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{je.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aG(){return typeof $localize<"u"&&$localize.locale||yg}var Xg=new te("",{providedIn:"root",factory:()=>Y(Xg,Be.Optional|Be.SkipSelf)||aG()});var wk=new te(""),Ek=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let o=gz(i?.ngZone,oG({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return o.run(()=>{let s=nW(r.moduleType,this.injector,rG(()=>o)),a=s.injector.get(Li,null);return o.runOutsideAngular(()=>{let c=o.onError.subscribe({next:l=>{a.handleError(l)}});s.onDestroy(()=>{Qm(this._modules,s),c.unsubscribe()})}),JW(a,o,()=>{let c=s.injector.get(vk);return c.runInitializers(),c.donePromise.then(()=>{let l=s.injector.get(Xg,yg);return OW(l||yg),this._moduleDoBootstrap(s),s})})})}bootstrapModule(r,i=[]){let o=_k({},i);return tG(this.injector,o,r).then(s=>this.bootstrapModuleFactory(s,o))}_moduleDoBootstrap(r){let i=r.injector.get(Lo);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(o=>i.bootstrap(o));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new de(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new de(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(wk,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(U(Gr))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),Ld=null,xk=new te("");function cG(t){if(Ld&&!Ld.get(xk,!1))throw new de(400,!1);XW(),Ld=t;let e=t.get(Ek);return dG(t),e}function VC(t,e,n=[]){let r=`Platform: ${e}`,i=new te(r);return(o=[])=>{let s=Ck();if(!s||s.injector.get(xk,!1)){let a=[...n,...o,{provide:i,useValue:!0}];t?t(a):cG(lG(a,r))}return uG(i)}}function lG(t=[],e){return Gr.create({name:e,providers:[{provide:Mg,useValue:"platform"},{provide:wk,useValue:new Set([()=>Ld=null])},...t]})}function uG(t){let e=Ck();if(!e)throw new de(401,!1);return e}function Ck(){return Ld?.get(Ek)??null}function dG(t){t.get(rC,null)?.forEach(n=>n())}function BC(){return!1}var Ts=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hG;let t=e;return t})();function hG(t){return fG(nr(),Ze(),(t&16)===16)}function fG(t,e,n){if(Xd(t)&&!n){let r=xs(t.index,e);return new ka(r,r)}else if(t.type&47){let r=e[Wr];return new ka(r,e)}return null}var $x=class{constructor(){}supports(e){return ek(e)}create(e){return new qx(e)}},pG=(t,e)=>e,qx=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||pG}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<IP(r,i,o)?n:r,a=IP(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let h=0;h<l;h++){let f=h<o.length?o[h]:o[h]=0,m=f+h;u<=m&&m<l&&(o[h]=f+1)}let d=s.previousIndex;o[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!ek(e))throw new de(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,rW(e,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,o,i)):e=this._addAfter(new Hx(n,r),o,i)),e}_verifyReinsertion(e,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new vg),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vg),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Hx=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},zx=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},vg=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new zx,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function IP(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function DP(){return new jC([new $x])}var jC=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let o=i.factories.slice();r=r.concat(o)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||DP()),deps:[[e,new lC,new Nl]]}}find(r){let i=this.factories.find(o=>o.supports(r));if(i!=null)return i;throw new de(901,!1)}};e.\u0275prov=ne({token:e,providedIn:"root",factory:DP});let t=e;return t})();var bk=VC(null,"core",[]),Ik=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(U(Lo))},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({});let t=e;return t})();var TP=!1;function mG(){TP||(TP=!0,A$(),AW(),UW(),MW(),cW(),Pz(),oz(),dH())}function gG(t,e){return LC(t)}function Dk(){return kl([{provide:Om,useFactory:()=>{let t=!0;return Fd()&&(t=!!Y(Ua,{optional:!0})?.get(xN,null)),t&&Ol("NgHydration"),t}},{provide:Ma,useValue:()=>{Fd()&&Y(Om)&&(yG(),mG())},multi:!0},{provide:QN,useFactory:()=>Fd()&&Y(Om)},{provide:Ll,useFactory:()=>{if(Fd()&&Y(Om)){let t=Y(Lo),e=Y(Gr);return()=>{gG(t,e).then(()=>{je.assertInAngularZone(),XH(t)})}}return()=>{}},multi:!0}])}function yG(){let t=Dg(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===D$){e=n;break}if(!e)throw new de(-507,!1)}function As(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Tk(t){let e=vs(t);if(!e)return null;let n=new Al(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var kk=null;function qi(){return kk}function Fk(t){kk??=t}var s0=class{};var wn=new te(""),QC=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>Y(vG),providedIn:"platform"});let t=e;return t})(),Ok=new te(""),vG=(()=>{let e=class e extends QC{constructor(){super(),this._doc=Y(wn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return qi().getBaseHref(this._doc)}onPopState(r){let i=qi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=qi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,o){this._history.pushState(r,i,o)}replaceState(r,i,o){this._history.replaceState(r,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function YC(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function Ak(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Bo(t){return t&&t[0]!=="?"?"?"+t:t}var $o=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>Y(XC),providedIn:"root"});let t=e;return t})(),Lk=new te(""),XC=(()=>{let e=class e extends $o{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Y(wn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return YC(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Bo(this._platformLocation.search),o=this._platformLocation.hash;return o&&r?`${i}${o}`:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Bo(s));this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Bo(s));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(U(QC),U(Lk,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vk=(()=>{let e=class e extends $o{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=YC(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,o,s){let a=this.prepareExternalUrl(o+Bo(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,o,s){let a=this.prepareExternalUrl(o+Bo(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(U(QC),U(Lk,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),_r=(()=>{let e=class e{constructor(r){this._subject=new Bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=EG(Ak(Sk(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Bo(i))}normalize(r){return e.stripTrailingSlash(wG(this._basePath,Sk(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",o=null){this._locationStrategy.pushState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Bo(i)),o)}replaceState(r,i="",o=null){this._locationStrategy.replaceState(o,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Bo(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(o=>o(r,i))}subscribe(r,i,o){return this._subject.subscribe({next:r,error:i,complete:o})}};e.normalizeQueryParams=Bo,e.joinWithSlash=YC,e.stripTrailingSlash=Ak,e.\u0275fac=function(i){return new(i||e)(U($o))},e.\u0275prov=ne({token:e,factory:()=>_G(),providedIn:"root"});let t=e;return t})();function _G(){return new _r(U($o))}function wG(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Sk(t){return t.replace(/\/index.html$/,"")}function EG(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var rr=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(rr||{}),_t=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(_t||{}),Sr=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Sr||{}),jo=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t.Infinity=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}(jo||{});function xG(t){return Kr(t)[Qt.LocaleId]}function CG(t,e,n){let r=Kr(t),i=[r[Qt.DayPeriodsFormat],r[Qt.DayPeriodsStandalone]],o=Yr(i,e);return Yr(o,n)}function bG(t,e,n){let r=Kr(t),i=[r[Qt.DaysFormat],r[Qt.DaysStandalone]],o=Yr(i,e);return Yr(o,n)}function IG(t,e,n){let r=Kr(t),i=[r[Qt.MonthsFormat],r[Qt.MonthsStandalone]],o=Yr(i,e);return Yr(o,n)}function DG(t,e){let r=Kr(t)[Qt.Eras];return Yr(r,e)}function Zg(t,e){let n=Kr(t);return Yr(n[Qt.DateFormat],e)}function Jg(t,e){let n=Kr(t);return Yr(n[Qt.TimeFormat],e)}function e0(t,e){let r=Kr(t)[Qt.DateTimeFormat];return Yr(r,e)}function c0(t,e){let n=Kr(t),r=n[Qt.NumberSymbols][e];if(typeof r>"u"){if(e===jo.CurrencyDecimal)return n[Qt.NumberSymbols][jo.Decimal];if(e===jo.CurrencyGroup)return n[Qt.NumberSymbols][jo.Group]}return r}function Bk(t){if(!t[Qt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Qt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function TG(t){let e=Kr(t);return Bk(e),(e[Qt.ExtraData][2]||[]).map(r=>typeof r=="string"?UC(r):[UC(r[0]),UC(r[1])])}function AG(t,e,n){let r=Kr(t);Bk(r);let i=[r[Qt.ExtraData][0],r[Qt.ExtraData][1]],o=Yr(i,e)||[];return Yr(o,n)||[]}function Yr(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function UC(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var SG=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,t0={},RG=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Uo=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Uo||{}),lt=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(lt||{}),ct=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(ct||{});function MG(t,e,n,r){let i=jG(t);e=Vo(n,e)||e;let s=[],a;for(;e;)if(a=RG.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=Uk(r,c),i=BG(i,r,!0));let l="";return s.forEach(u=>{let d=LG(u);l+=d?d(i,n,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function a0(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Vo(t,e){let n=xG(t);if(t0[n]??={},t0[n][e])return t0[n][e];let r="";switch(e){case"shortDate":r=Zg(t,Sr.Short);break;case"mediumDate":r=Zg(t,Sr.Medium);break;case"longDate":r=Zg(t,Sr.Long);break;case"fullDate":r=Zg(t,Sr.Full);break;case"shortTime":r=Jg(t,Sr.Short);break;case"mediumTime":r=Jg(t,Sr.Medium);break;case"longTime":r=Jg(t,Sr.Long);break;case"fullTime":r=Jg(t,Sr.Full);break;case"short":let i=Vo(t,"shortTime"),o=Vo(t,"shortDate");r=n0(e0(t,Sr.Short),[i,o]);break;case"medium":let s=Vo(t,"mediumTime"),a=Vo(t,"mediumDate");r=n0(e0(t,Sr.Medium),[s,a]);break;case"long":let c=Vo(t,"longTime"),l=Vo(t,"longDate");r=n0(e0(t,Sr.Long),[c,l]);break;case"full":let u=Vo(t,"fullTime"),d=Vo(t,"fullDate");r=n0(e0(t,Sr.Full),[u,d]);break}return r&&(t0[n][e]=r),r}function n0(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function yi(t,e,n="-",r,i){let o="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function PG(t,e){return yi(t,3).substring(0,e)}function an(t,e,n=0,r=!1,i=!1){return function(o,s){let a=NG(t,o);if((n>0||a>-n)&&(a+=n),t===lt.Hours)a===0&&n===-12&&(a=12);else if(t===lt.FractionalSeconds)return PG(a,e);let c=c0(s,jo.MinusSign);return yi(a,e,c,r,i)}}function NG(t,e){switch(t){case lt.FullYear:return e.getFullYear();case lt.Month:return e.getMonth();case lt.Date:return e.getDate();case lt.Hours:return e.getHours();case lt.Minutes:return e.getMinutes();case lt.Seconds:return e.getSeconds();case lt.FractionalSeconds:return e.getMilliseconds();case lt.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ct(t,e,n=rr.Format,r=!1){return function(i,o){return kG(i,o,t,e,n,r)}}function kG(t,e,n,r,i,o){switch(n){case ct.Months:return IG(e,i,r)[t.getMonth()];case ct.Days:return bG(e,i,r)[t.getDay()];case ct.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let l=TG(e),u=AG(e,i,r),d=l.findIndex(h=>{if(Array.isArray(h)){let[f,m]=h,_=s>=f.hours&&a>=f.minutes,w=s<m.hours||s===m.hours&&a<m.minutes;if(f.hours<m.hours){if(_&&w)return!0}else if(_||w)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return CG(e,i,r)[s<12?0:1];case ct.Eras:return DG(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function r0(t){return function(e,n,r){let i=-1*r,o=c0(n,jo.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Uo.Short:return(i>=0?"+":"")+yi(s,2,o)+yi(Math.abs(i%60),2,o);case Uo.ShortGMT:return"GMT"+(i>=0?"+":"")+yi(s,1,o);case Uo.Long:return"GMT"+(i>=0?"+":"")+yi(s,2,o)+":"+yi(Math.abs(i%60),2,o);case Uo.Extended:return r===0?"Z":(i>=0?"+":"")+yi(s,2,o)+":"+yi(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var FG=0,o0=4;function OG(t){let e=a0(t,FG,1).getDay();return a0(t,0,1+(e<=o0?o0:o0+7)-e)}function jk(t){let e=t.getDay(),n=e===0?-3:o0-e;return a0(t.getFullYear(),t.getMonth(),t.getDate()+n)}function $C(t,e=!1){return function(n,r){let i;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();i=1+Math.floor((s+o)/7)}else{let o=jk(n),s=OG(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return yi(i,t,c0(r,jo.MinusSign))}}function i0(t,e=!1){return function(n,r){let o=jk(n).getFullYear();return yi(o,t,c0(r,jo.MinusSign),e)}}var qC={};function LG(t){if(qC[t])return qC[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ct(ct.Eras,_t.Abbreviated);break;case"GGGG":e=Ct(ct.Eras,_t.Wide);break;case"GGGGG":e=Ct(ct.Eras,_t.Narrow);break;case"y":e=an(lt.FullYear,1,0,!1,!0);break;case"yy":e=an(lt.FullYear,2,0,!0,!0);break;case"yyy":e=an(lt.FullYear,3,0,!1,!0);break;case"yyyy":e=an(lt.FullYear,4,0,!1,!0);break;case"Y":e=i0(1);break;case"YY":e=i0(2,!0);break;case"YYY":e=i0(3);break;case"YYYY":e=i0(4);break;case"M":case"L":e=an(lt.Month,1,1);break;case"MM":case"LL":e=an(lt.Month,2,1);break;case"MMM":e=Ct(ct.Months,_t.Abbreviated);break;case"MMMM":e=Ct(ct.Months,_t.Wide);break;case"MMMMM":e=Ct(ct.Months,_t.Narrow);break;case"LLL":e=Ct(ct.Months,_t.Abbreviated,rr.Standalone);break;case"LLLL":e=Ct(ct.Months,_t.Wide,rr.Standalone);break;case"LLLLL":e=Ct(ct.Months,_t.Narrow,rr.Standalone);break;case"w":e=$C(1);break;case"ww":e=$C(2);break;case"W":e=$C(1,!0);break;case"d":e=an(lt.Date,1);break;case"dd":e=an(lt.Date,2);break;case"c":case"cc":e=an(lt.Day,1);break;case"ccc":e=Ct(ct.Days,_t.Abbreviated,rr.Standalone);break;case"cccc":e=Ct(ct.Days,_t.Wide,rr.Standalone);break;case"ccccc":e=Ct(ct.Days,_t.Narrow,rr.Standalone);break;case"cccccc":e=Ct(ct.Days,_t.Short,rr.Standalone);break;case"E":case"EE":case"EEE":e=Ct(ct.Days,_t.Abbreviated);break;case"EEEE":e=Ct(ct.Days,_t.Wide);break;case"EEEEE":e=Ct(ct.Days,_t.Narrow);break;case"EEEEEE":e=Ct(ct.Days,_t.Short);break;case"a":case"aa":case"aaa":e=Ct(ct.DayPeriods,_t.Abbreviated);break;case"aaaa":e=Ct(ct.DayPeriods,_t.Wide);break;case"aaaaa":e=Ct(ct.DayPeriods,_t.Narrow);break;case"b":case"bb":case"bbb":e=Ct(ct.DayPeriods,_t.Abbreviated,rr.Standalone,!0);break;case"bbbb":e=Ct(ct.DayPeriods,_t.Wide,rr.Standalone,!0);break;case"bbbbb":e=Ct(ct.DayPeriods,_t.Narrow,rr.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ct(ct.DayPeriods,_t.Abbreviated,rr.Format,!0);break;case"BBBB":e=Ct(ct.DayPeriods,_t.Wide,rr.Format,!0);break;case"BBBBB":e=Ct(ct.DayPeriods,_t.Narrow,rr.Format,!0);break;case"h":e=an(lt.Hours,1,-12);break;case"hh":e=an(lt.Hours,2,-12);break;case"H":e=an(lt.Hours,1);break;case"HH":e=an(lt.Hours,2);break;case"m":e=an(lt.Minutes,1);break;case"mm":e=an(lt.Minutes,2);break;case"s":e=an(lt.Seconds,1);break;case"ss":e=an(lt.Seconds,2);break;case"S":e=an(lt.FractionalSeconds,1);break;case"SS":e=an(lt.FractionalSeconds,2);break;case"SSS":e=an(lt.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=r0(Uo.Short);break;case"ZZZZZ":e=r0(Uo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=r0(Uo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=r0(Uo.Long);break;default:return null}return qC[t]=e,e}function Uk(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function VG(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function BG(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),o=Uk(e,i);return VG(t,r*(o-i))}function jG(t){if(Rk(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,o=1,s=1]=t.split("-").map(a=>+a);return a0(i,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(SG))return UG(r)}let e=new Date(t);if(!Rk(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function UG(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,c,l),e}function Rk(t){return t instanceof Date&&!isNaN(t.valueOf())}function l0(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var HC=/\s+/,Mk=[],u0=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Mk,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(HC):Mk}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(HC):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let o=this.stateMap.get(r);o!==void 0?(o.enabled!==i&&(o.changed=!0,o.enabled=i),o.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],o=r[1];o.changed?(this._toggleClass(i,o.enabled),o.changed=!1):o.touched||(o.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),o.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(HC).forEach(o=>{i?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}};e.\u0275fac=function(i){return new(i||e)(X(Ar),X(ko))},e.\u0275dir=_n({type:e,selectors:[["","ngClass",""]],inputs:{klass:[Vn.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var zC=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Hn=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,o){this._viewContainer=r,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((o,s,a)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new zC(o.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(s===null?void 0:s);else if(s!==null){let c=i.get(s);i.move(c,a),Pk(c,o)}});for(let o=0,s=i.length;o<s;o++){let c=i.get(o).context;c.index=o,c.count=s,c.ngForOf=this._ngForOf}r.forEachIdentityChange(o=>{let s=i.get(o.currentIndex);Pk(s,o)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(X(Is),X(Fa),X(jC))},e.\u0275dir=_n({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function Pk(t,e){t.context.$implicit=e.item}var cn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new WC,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Nk("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Nk("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(X(Is),X(Fa))},e.\u0275dir=_n({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),WC=class{constructor(){this.$implicit=null,this.ngIf=null}};function Nk(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${er(e)}'.`)}function $G(t,e){return new de(2100,!1)}var qG="mediumDate",HG=new te(""),zG=new te(""),d0=(()=>{let e=class e{constructor(r,i,o){this.locale=r,this.defaultTimezone=i,this.defaultOptions=o}transform(r,i,o,s){if(r==null||r===""||r!==r)return null;try{let a=i??this.defaultOptions?.dateFormat??qG,c=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return MG(r,a,s||this.locale,c)}catch(a){throw $G(e,a.message)}}};e.\u0275fac=function(i){return new(i||e)(X(Xg,16),X(HG,24),X(zG,24))},e.\u0275pipe=Rl({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var h0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({});let t=e;return t})(),ZC="browser",WG="server";function JC(t){return t===ZC}function za(t){return t===WG}var $k=(()=>{let e=class e{};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>JC(Y(Kt))?new GC(Y(wn),window):new KC});let t=e;return t})(),GC=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=GG(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function GG(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var KC=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Vl=class{};var lh=class{},m0=class{},ln=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=i.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(i,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var tb=class{encodeKey(e){return qk(e)}encodeValue(e){return qk(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function QG(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var YG=/%(\d[a-f0-9])/gi,XG={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function qk(t){return encodeURIComponent(t).replace(YG,(e,n)=>XG[n]??e)}function f0(t){return`${t}`}var Hi=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tb,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=QG(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(f0):[f0(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(f0(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(f0(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var nb=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function ZG(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Hk(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function zk(t){return typeof Blob<"u"&&t instanceof Blob}function Wk(t){return typeof FormData<"u"&&t instanceof FormData}function JG(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var ch=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(ZG(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ln,this.context??=new nb,!this.params)this.params=new Hi,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:Hk(this.body)||zk(this.body)||Wk(this.body)||JG(this.body)||typeof this.body=="string"?this.body:this.body instanceof Hi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Wk(this.body)?null:zk(this.body)?this.body.type||null:Hk(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Hi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.body!==void 0?e.body:this.body,s=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new t(n,r,o,{params:l,headers:c,context:u,reportProgress:a,responseType:i,withCredentials:s})}},Bl=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Bl||{}),uh=class{constructor(e,n=y0.Ok,r="OK"){this.headers=e.headers||new ln,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},rb=class t extends uh{constructor(e={}){super(e),this.type=Bl.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},jl=class t extends uh{constructor(e={}){super(e),this.type=Bl.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},g0=class extends uh{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},y0=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(y0||{});function eb(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Wa=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,o={}){let s;if(r instanceof ch)s=r;else{let l;o.headers instanceof ln?l=o.headers:l=new ln(o.headers);let u;o.params&&(o.params instanceof Hi?u=o.params:u=new Hi({fromObject:o.params})),s=new ch(r,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=pe(s).pipe(xo(l=>this.handler.handle(l)));if(r instanceof ch||o.observe==="events")return a;let c=a.pipe(vn(l=>l instanceof jl));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return c.pipe(fe(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(fe(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(fe(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(fe(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Hi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,o={}){return this.request("PATCH",r,eb(o,i))}post(r,i,o={}){return this.request("POST",r,eb(o,i))}put(r,i,o={}){return this.request("PUT",r,eb(o,i))}};e.\u0275fac=function(i){return new(i||e)(U(lh))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function nF(t,e){return e(t)}function eK(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function tK(t,e,n){return(r,i)=>Bi(n,()=>e(r,o=>t(o,i)))}var nK=new te(""),ib=new te(""),rF=new te(""),rK=new te("");function iK(){let t=null;return(e,n)=>{t===null&&(t=(Y(nK,{optional:!0})??[]).reduceRight(eK,nF));let r=Y($a),i=r.add();return t(e,n).pipe(ms(()=>r.remove(i)))}}var Gk=(()=>{let e=class e extends lh{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=Y($a);let o=Y(rK,{optional:!0});this.backend=o??r}handle(r){if(this.chain===null){let o=Array.from(new Set([...this.injector.get(ib),...this.injector.get(rF,[])]));this.chain=o.reduceRight((s,a)=>tK(s,a,this.injector),nF)}let i=this.pendingTasks.add();return this.chain(r,o=>this.backend.handle(o)).pipe(ms(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(U(m0),U(tr))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();var oK=/^\)\]\}',?\n/;function sK(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var Kk=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new de(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?be(i.\u0275loadImpl()):pe(null)).pipe(He(()=>new Fe(s=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((w,y)=>a.setRequestHeader(w,y.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let w=r.detectContentTypeHeader();w!==null&&a.setRequestHeader("Content-Type",w)}if(r.responseType){let w=r.responseType.toLowerCase();a.responseType=w!=="json"?w:"text"}let c=r.serializeBody(),l=null,u=()=>{if(l!==null)return l;let w=a.statusText||"OK",y=new ln(a.getAllResponseHeaders()),v=sK(a)||r.url;return l=new rb({headers:y,status:a.status,statusText:w,url:v}),l},d=()=>{let{headers:w,status:y,statusText:v,url:C}=u(),b=null;y!==y0.NoContent&&(b=typeof a.response>"u"?a.responseText:a.response),y===0&&(y=b?y0.Ok:0);let A=y>=200&&y<300;if(r.responseType==="json"&&typeof b=="string"){let x=b;b=b.replace(oK,"");try{b=b!==""?JSON.parse(b):null}catch(I){b=x,A&&(A=!1,b={error:I,text:b})}}A?(s.next(new jl({body:b,headers:w,status:y,statusText:v,url:C||void 0})),s.complete()):s.error(new g0({error:b,headers:w,status:y,statusText:v,url:C||void 0}))},h=w=>{let{url:y}=u(),v=new g0({error:w,status:a.status||0,statusText:a.statusText||"Unknown Error",url:y||void 0});s.error(v)},f=!1,m=w=>{f||(s.next(u()),f=!0);let y={type:Bl.DownloadProgress,loaded:w.loaded};w.lengthComputable&&(y.total=w.total),r.responseType==="text"&&a.responseText&&(y.partialText=a.responseText),s.next(y)},_=w=>{let y={type:Bl.UploadProgress,loaded:w.loaded};w.lengthComputable&&(y.total=w.total),s.next(y)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",m),c!==null&&a.upload&&a.upload.addEventListener("progress",_)),a.send(c),s.next({type:Bl.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",m),c!==null&&a.upload&&a.upload.removeEventListener("progress",_)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(U(Vl))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),iF=new te(""),aK="XSRF-TOKEN",cK=new te("",{providedIn:"root",factory:()=>aK}),lK="X-XSRF-TOKEN",uK=new te("",{providedIn:"root",factory:()=>lK}),v0=class{},dK=(()=>{let e=class e{constructor(r,i,o){this.doc=r,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=l0(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(U(wn),U(Kt),U(cK))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function hK(t,e){let n=t.url.toLowerCase();if(!Y(iF)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=Y(v0).getToken(),i=Y(uK);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var oF=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(oF||{});function fK(t,e){return{\u0275kind:t,\u0275providers:e}}function pK(...t){let e=[Wa,Kk,Gk,{provide:lh,useExisting:Gk},{provide:m0,useExisting:Kk},{provide:ib,useValue:hK,multi:!0},{provide:iF,useValue:!0},{provide:v0,useClass:dK}];for(let n of t)e.push(...n.\u0275providers);return kl(e)}var Qk=new te("");function mK(){return fK(oF.LegacyInterceptors,[{provide:Qk,useFactory:iK},{provide:ib,useExisting:Qk,multi:!0}])}var sF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({providers:[pK(mK())]});let t=e;return t})();var Yk="b",Xk="h",Zk="s",Jk="st",eF="u",tF="rt",p0=new te(""),gK=["GET","HEAD"];function yK(t,e){let u=Y(p0),{isCacheActive:n}=u,r=XR(u,["isCacheActive"]),{transferCache:i,method:o}=t;if(!n||o==="POST"&&!r.includePostRequests&&!i||o!=="POST"&&!gK.includes(o)||i===!1||r.filter?.(t)===!1)return e(t);let s=Y(Ua),a=_K(t),c=s.get(a,null),l=r.includeHeaders;if(typeof i=="object"&&i.includeHeaders&&(l=i.includeHeaders),c){let{[Yk]:d,[tF]:h,[Xk]:f,[Zk]:m,[Jk]:_,[eF]:w}=c,y=d;switch(h){case"arraybuffer":y=new TextEncoder().encode(d).buffer;break;case"blob":y=new Blob([d]);break}let v=new ln(f);return pe(new jl({body:y,headers:v,status:m,statusText:_,url:w}))}return e(t).pipe(Vt(d=>{d instanceof jl&&s.set(a,{[Yk]:d.body,[Xk]:vK(d.headers,l),[Zk]:d.status,[Jk]:d.statusText,[eF]:d.url||"",[tF]:t.responseType})}))}function vK(t,e){if(!e)return{};let n={};for(let r of e){let i=t.getAll(r);i!==null&&(n[r]=i)}return n}function _K(t){let{params:e,method:n,responseType:r,url:i,body:o}=t,s=e.keys().sort().map(u=>`${u}=${e.getAll(u)}`).join("&"),c=[n,r,i,typeof o=="string"?o:"",s].join("|"),l=wK(c);return l}function wK(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function aF(t){return[{provide:p0,useFactory:()=>(Ol("NgHttpTransferCache"),ae({isCacheActive:!0},t))},{provide:rF,useValue:yK,multi:!0,deps:[Ua,p0]},{provide:Ll,multi:!0,useFactory:()=>{let e=Y(Lo),n=Y(p0);return()=>{LC(e).then(()=>{n.isCacheActive=!1})}}}]}var cb=class extends s0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lb=class t extends cb{static makeCurrent(){Fk(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=EK();return n==null?null:xK(n)}resetBaseElement(){dh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return l0(document.cookie,e)}},dh=null;function EK(){return dh=dh||document.querySelector("base"),dh?dh.getAttribute("href"):null}function xK(t){return new URL(t,document.baseURI).pathname}var ub=class{addToWindow(e){Wt.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new de(5103,!1);return o},Wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wt.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=Wt.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Wt.frameworkStabilizers||(Wt.frameworkStabilizers=[]),Wt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?qi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},CK=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),db=new te(""),dF=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(o=>{o.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,o){return this._findPluginFor(i).addEventListener(r,i,o)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(s=>s.supports(r)),!i)throw new de(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(U(db),U(je))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),_0=class{constructor(e){this._doc=e}},sb="ng-app-id",hF=(()=>{let e=class e{constructor(r,i,o,s={}){this.doc=r,this.appId=i,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=za(s),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(o=>o.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${sb}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(r,i){let o=this.styleRef;if(o.has(r)){let s=o.get(r);return s.usage+=i,s.usage}return o.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let o=this.styleNodesInDOM,s=o?.get(i);if(s?.parentNode===r)return o.delete(i),s.removeAttribute(sb),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(sb,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let o=this.getStyleElement(r,i),s=this.styleRef,a=s.get(i)?.elements;a?a.push(o):s.set(i,{elements:[o],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(U(wn),U(eh),U(iC,8),U(Kt))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),ab={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pb=/%COMP%/g,fF="%COMP%",bK=`_nghost-${fF}`,IK=`_ngcontent-${fF}`,DK=!0,TK=new te("",{providedIn:"root",factory:()=>DK});function AK(t){return IK.replace(pb,t)}function SK(t){return bK.replace(pb,t)}function pF(t,e){return e.map(n=>n.replace(pb,t))}var cF=(()=>{let e=class e{constructor(r,i,o,s,a,c,l,u=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=za(c),this.defaultRenderer=new hh(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Oi.ShadowDom&&(i=st(ae({},i),{encapsulation:Oi.Emulated}));let o=this.getOrCreateRenderer(r,i);return o instanceof w0?o.applyToHost(r):o instanceof fh&&o.applyStyles(),o}getOrCreateRenderer(r,i){let o=this.rendererByCompId,s=o.get(i.id);if(!s){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Oi.Emulated:s=new w0(l,u,i,this.appId,d,a,c,h);break;case Oi.ShadowDom:return new hb(l,u,r,i,a,c,this.nonce,h);default:s=new fh(l,u,i,d,a,c,h);break}o.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(U(dF),U(hF),U(eh),U(TK),U(wn),U(Kt),U(je),U(iC))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),hh=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ab[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(lF(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(lF(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new de(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=ab[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ab[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ro.DashCase|Ro.Important)?e.style.setProperty(n,r,i&Ro.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ro.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=qi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function lF(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var hb=class extends hh{constructor(e,n,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=pF(i.id,i.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},fh=class extends hh{constructor(e,n,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?pF(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},w0=class extends fh{constructor(e,n,r,i,o,s,a,c){let l=i+"-"+r.id;super(e,n,r,o,s,a,c,l),this.contentAttr=AK(l),this.hostAttr=SK(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},RK=(()=>{let e=class e extends _0{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,o){return r.addEventListener(i,o,!1),()=>this.removeEventListener(r,i,o)}removeEventListener(r,i,o){return r.removeEventListener(i,o)}};e.\u0275fac=function(i){return new(i||e)(U(wn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),uF=["alt","control","meta","shift"],MK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},PK={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},NK=(()=>{let e=class e extends _0{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qi().onAndCancel(r,s.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),uF.forEach(u=>{let d=i.indexOf(u);d>-1&&(i.splice(d,1),a+=u+".")}),a+=s,i.length!=0||s.length===0)return null;let l={};return l.domEventName=o,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let o=MK[r.key]||r.key,s="";return i.indexOf("code.")>-1&&(o=r.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),uF.forEach(a=>{if(a!==o){let c=PK[a];c(r)&&(s+=a+".")}}),s+=o,s===i)}static eventCallback(r,i,o){return s=>{e.matchEventFullKeyCode(s,r)&&o.runGuarded(()=>i(s))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(U(wn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function kK(){lb.makeCurrent()}function FK(){return new Li}function OK(){return uN(document),document}var LK=[{provide:Kt,useValue:ZC},{provide:rC,useValue:kK,multi:!0},{provide:wn,useFactory:OK,deps:[]}],mF=VC(bk,"browser",LK),VK=new te(""),BK=[{provide:ah,useClass:ub,deps:[]},{provide:FC,useClass:Gg,deps:[je,Kg,ah]},{provide:Gg,useClass:Gg,deps:[je,Kg,ah]}],jK=[{provide:Mg,useValue:"root"},{provide:Li,useFactory:FK,deps:[]},{provide:db,useClass:RK,multi:!0,deps:[wn,je,Kt]},{provide:db,useClass:NK,multi:!0,deps:[wn]},cF,hF,dF,{provide:Wd,useExisting:cF},{provide:Vl,useClass:CK,deps:[]},[]],gF=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:eh,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(U(VK,12))},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({providers:[...jK,...BK],imports:[h0,Ik]});let t=e;return t})();var yF=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(U(wn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var mb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:function(i){let o=null;return i?o=new(i||e):o=U(UK),o},providedIn:"root"});let t=e;return t})(),UK=(()=>{let e=class e extends mb{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case Ui.NONE:return i;case Ui.HTML:return bs(i,"HTML")?ji(i):o2(this._doc,String(i)).toString();case Ui.STYLE:return bs(i,"Style")?ji(i):i;case Ui.SCRIPT:if(bs(i,"Script"))return ji(i);throw new de(5200,!1);case Ui.URL:return bs(i,"URL")?ji(i):kg(String(i));case Ui.RESOURCE_URL:if(bs(i,"ResourceURL"))return ji(i);throw new de(5201,!1);default:throw new de(5202,!1)}}bypassSecurityTrustHtml(r){return YN(r)}bypassSecurityTrustStyle(r){return XN(r)}bypassSecurityTrustScript(r){return ZN(r)}bypassSecurityTrustUrl(r){return JN(r)}bypassSecurityTrustResourceUrl(r){return e2(r)}};e.\u0275fac=function(i){return new(i||e)(U(wn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fb=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t}(fb||{});function vF(...t){let e=[],n=new Set,r=n.has(fb.HttpTransferCacheOptions);for(let{\u0275providers:i,\u0275kind:o}of t)n.add(o),i.length&&e.push(i);return kl([[],Dk(),n.has(fb.NoHttpTransferCache)||r?[]:aF({}),e])}var Oe="primary",Ah=Symbol("RouteTitle"),Eb=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function zl(t){return new Eb(t)}function $K(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function qK(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!zi(t[n],e[n]))return!1;return!0}function zi(t,e){let n=t?xb(t):void 0,r=e?xb(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!TF(t[i],e[i]))return!1;return!0}function xb(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function TF(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function AF(t){return t.length>0?t[t.length-1]:null}function Ns(t){return yE(t)?t:Ha(t)?be(Promise.resolve(t)):pe(t)}var HK={exact:RF,subset:MF},SF={exact:zK,subset:WK,ignored:()=>!0};function _F(t,e,n){return HK[n.paths](t.root,e.root,n.matrixParams)&&SF[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function zK(t,e){return zi(t,e)}function RF(t,e,n){if(!Ka(t.segments,e.segments)||!C0(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!RF(t.children[r],e.children[r],n))return!1;return!0}function WK(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>TF(t[n],e[n]))}function MF(t,e,n){return PF(t,e,e.segments,n)}function PF(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Ka(i,n)||e.hasChildren()||!C0(i,n,r))}else if(t.segments.length===n.length){if(!Ka(t.segments,n)||!C0(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!MF(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ka(t.segments,i)||!C0(t.segments,i,r)||!t.children[Oe]?!1:PF(t.children[Oe],e,o,r)}}function C0(t,e,n){return e.every((r,i)=>SF[n](t[i].parameters,r.parameters))}var Ss=class{constructor(e=new ht([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zl(this.queryParams),this._queryParamMap}toString(){return QK.serialize(this)}},ht=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return b0(this)}},Ga=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=zl(this.parameters),this._parameterMap}toString(){return kF(this)}};function GK(t,e){return Ka(t,e)&&t.every((n,r)=>zi(n.parameters,e[r].parameters))}function Ka(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function KK(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Oe&&(n=n.concat(e(i,r)))}),n}var Sh=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>new wh,providedIn:"root"});let t=e;return t})(),wh=class{parse(e){let n=new bb(e);return new Ss(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ph(e.root,!0)}`,r=ZK(e.queryParams),i=typeof e.fragment=="string"?`#${YK(e.fragment)}`:"";return`${n}${r}${i}`}},QK=new wh;function b0(t){return t.segments.map(e=>kF(e)).join("/")}function ph(t,e){if(!t.hasChildren())return b0(t);if(e){let n=t.children[Oe]?ph(t.children[Oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Oe&&r.push(`${i}:${ph(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=KK(t,(r,i)=>i===Oe?[ph(t.children[Oe],!1)]:[`${i}:${ph(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Oe]!=null?`${b0(t)}/${n[0]}`:`${b0(t)}/(${n.join("//")})`}}function NF(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function E0(t){return NF(t).replace(/%3B/gi,";")}function YK(t){return encodeURI(t)}function Cb(t){return NF(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function I0(t){return decodeURIComponent(t)}function wF(t){return I0(t.replace(/\+/g,"%20"))}function kF(t){return`${Cb(t.path)}${XK(t.parameters)}`}function XK(t){return Object.entries(t).map(([e,n])=>`;${Cb(e)}=${Cb(n)}`).join("")}function ZK(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${E0(n)}=${E0(i)}`).join("&"):`${E0(n)}=${E0(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var JK=/^[^\/()?;#]+/;function yb(t){let e=t.match(JK);return e?e[0]:""}var eQ=/^[^\/()?;=#]+/;function tQ(t){let e=t.match(eQ);return e?e[0]:""}var nQ=/^[^=?&#]+/;function rQ(t){let e=t.match(nQ);return e?e[0]:""}var iQ=/^[^&#]+/;function oQ(t){let e=t.match(iQ);return e?e[0]:""}var bb=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ht([],{}):new ht([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Oe]=new ht(e,n)),r}parseSegment(){let e=yb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new de(4009,!1);return this.capture(e),new Ga(I0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=tQ(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=yb(this.remaining);i&&(r=i,this.capture(r))}e[I0(n)]=I0(r)}parseQueryParam(e){let n=rQ(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=oQ(this.remaining);s&&(r=s,this.capture(r))}let i=wF(n),o=wF(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=yb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new de(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Oe);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Oe]:new ht([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new de(4011,!1)}};function FF(t){return t.segments.length>0?new ht([],{[Oe]:t}):t}function OF(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=OF(i);if(r===Oe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ht(t.segments,e);return sQ(n)}function sQ(t){if(t.numberOfChildren===1&&t.children[Oe]){let e=t.children[Oe];return new ht(t.segments.concat(e.segments),e.children)}return t}function Wl(t){return t instanceof Ss}function aQ(t,e,n=null,r=null){let i=LF(t);return VF(i,e,n,r)}function LF(t){let e;function n(o){let s={};for(let c of o.children){let l=n(c);s[c.outlet]=l}let a=new ht(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=FF(r);return e??i}function VF(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return vb(i,i,i,n,r);let o=cQ(e);if(o.toRoot())return vb(i,i,new ht([],{}),n,r);let s=lQ(o,i,t),a=s.processChildren?yh(s.segmentGroup,s.index,o.commands):jF(s.segmentGroup,s.index,o.commands);return vb(i,s.segmentGroup,a,n,r)}function D0(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Eh(t){return typeof t=="object"&&t!=null&&t.outlets}function vb(t,e,n,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;t===e?s=n:s=BF(t,e,n);let a=FF(OF(s));return new Ss(a,o,i)}function BF(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=BF(o,e,n)}),new ht(t.segments,r)}var T0=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&D0(r[0]))throw new de(4003,!1);let i=r.find(Eh);if(i&&i!==AF(r))throw new de(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function cQ(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new T0(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new T0(n,e,r)}var ql=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function lQ(t,e,n){if(t.isAbsolute)return new ql(e,!0,0);if(!n)return new ql(e,!1,NaN);if(n.parent===null)return new ql(n,!0,0);let r=D0(t.commands[0])?0:1,i=n.segments.length-1+r;return uQ(n,i,t.numberOfDoubleDots)}function uQ(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new de(4005,!1);i=r.segments.length}return new ql(r,!1,i-o)}function dQ(t){return Eh(t[0])?t[0].outlets:{[Oe]:t}}function jF(t,e,n){if(t??=new ht([],{}),t.segments.length===0&&t.hasChildren())return yh(t,e,n);let r=hQ(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ht(t.segments.slice(0,r.pathIndex),{});return o.children[Oe]=new ht(t.segments.slice(r.pathIndex),t.children),yh(o,0,i)}else return r.match&&i.length===0?new ht(t.segments,{}):r.match&&!t.hasChildren()?Ib(t,e,n):r.match?yh(t,0,i):Ib(t,e,n)}function yh(t,e,n){if(n.length===0)return new ht(t.segments,{});{let r=dQ(n),i={};if(Object.keys(r).some(o=>o!==Oe)&&t.children[Oe]&&t.numberOfChildren===1&&t.children[Oe].segments.length===0){let o=yh(t.children[Oe],e,n);return new ht(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=jF(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ht(t.segments,i)}}function hQ(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(Eh(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!xF(c,l,s))return o;r+=2}else{if(!xF(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ib(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Eh(o)){let c=fQ(o.outlets);return new ht(r,c)}if(i===0&&D0(n[0])){let c=t.segments[e];r.push(new Ga(c.path,EF(n[0]))),i++;continue}let s=Eh(o)?o.outlets[Oe]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&D0(a)?(r.push(new Ga(s,EF(a))),i+=2):(r.push(new Ga(s,{})),i++)}return new ht(r,{})}function fQ(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Ib(new ht([],{}),0,r))}),e}function EF(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function xF(t,e,n){return t==n.path&&zi(e,n.parameters)}var vh="imperative",Dn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Dn||{}),Zr=class{constructor(e,n){this.id=e,this.url=n}},Gl=class extends Zr{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Dn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},vi=class extends Zr{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Dn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xr=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Xr||{}),A0=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(A0||{}),Rs=class extends Zr{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Dn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ms=class extends Zr{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Dn.NavigationSkipped}},xh=class extends Zr{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Dn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},S0=class extends Zr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Dn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Db=class extends Zr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Dn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tb=class extends Zr{constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=Dn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ab=class extends Zr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Dn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sb=class extends Zr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Dn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rb=class{constructor(e){this.route=e,this.type=Dn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Mb=class{constructor(e){this.route=e,this.type=Dn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Pb=class{constructor(e){this.snapshot=e,this.type=Dn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Nb=class{constructor(e){this.snapshot=e,this.type=Dn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kb=class{constructor(e){this.snapshot=e,this.type=Dn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fb=class{constructor(e){this.snapshot=e,this.type=Dn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},R0=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=Dn.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ch=class{},bh=class{constructor(e){this.url=e}};var Ob=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Rh,this.attachRef=null}},Rh=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let o=this.getOrCreateContext(r);o.outlet=i,this.contexts.set(r,o)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Ob,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),M0=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Lb(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Lb(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Vb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Vb(e,this._root).map(n=>n.value)}};function Lb(t,e){if(t===e.value)return e;for(let n of e.children){let r=Lb(t,n);if(r)return r}return null}function Vb(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Vb(t,n);if(r.length)return r.unshift(e),r}return[]}var Mr=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function $l(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var P0=class extends M0{constructor(e,n){super(e),this.snapshot=n,Kb(this,e)}toString(){return this.snapshot.toString()}};function UF(t){let e=pQ(t),n=new yn([new Ga("",{})]),r=new yn({}),i=new yn({}),o=new yn({}),s=new yn(""),a=new ir(n,r,o,s,i,Oe,t,e.root);return a.snapshot=e.root,new P0(new Mr(a,[]),e)}function pQ(t){let e={},n={},r={},i="",o=new Ih([],e,r,i,n,Oe,t,null,{});return new N0("",new Mr(o,[]))}var ir=class{constructor(e,n,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(fe(l=>l[Ah]))??pe(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fe(e=>zl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fe(e=>zl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gb(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:ae(ae({},e.params),t.params),data:ae(ae({},e.data),t.data),resolve:ae(ae(ae(ae({},t.data),e.data),i?.data),t._resolvedData)}:r={params:ae({},t.params),data:ae({},t.data),resolve:ae(ae({},t.data),t._resolvedData??{})},i&&qF(i)&&(r.resolve[Ah]=i.title),r}var Ih=class{get title(){return this.data?.[Ah]}constructor(e,n,r,i,o,s,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},N0=class extends M0{constructor(e,n){super(n),this.url=e,Kb(this,n)}toString(){return $F(this._root)}};function Kb(t,e){e.value._routerState=t,e.children.forEach(n=>Kb(t,n))}function $F(t){let e=t.children.length>0?` { ${t.children.map($F).join(", ")} } `:"";return`${t.value}${e}`}function _b(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,zi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),zi(e.params,n.params)||t.paramsSubject.next(n.params),qK(e.url,n.url)||t.urlSubject.next(n.url),zi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Bb(t,e){let n=zi(t.params,e.params)&&GK(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Bb(t.parent,e.parent))}function qF(t){return typeof t.title=="string"||t.title===null}var Qb=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Oe,this.activateEvents=new Bt,this.deactivateEvents=new Bt,this.attachEvents=new Bt,this.detachEvents=new Bt,this.parentContexts=Y(Rh),this.location=Y(Is),this.changeDetector=Y(Ts),this.environmentInjector=Y(tr),this.inputBinder=Y(V0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:o}=r.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new de(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new de(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new de(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new de(4013,!1);this._activatedRoute=r;let o=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new jb(r,c,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=_n({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Po]});let t=e;return t})(),jb=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ir?this.route:e===Rh?this.childContexts:this.parent.get(e,n)}},V0=new te(""),CF=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,o=Md([i.queryParams,i.params,i.data]).pipe(He(([s,a,c],l)=>(c=ae(ae(ae({},s),a),c),l===0?pe(c):Promise.resolve(c)))).subscribe(s=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Tk(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,s[c])});this.outletDataSubscriptions.set(r,o)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function mQ(t,e,n){let r=Dh(t,e._root,n?n._root:void 0);return new P0(r,e)}function Dh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=gQ(t,e,n);return new Mr(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Dh(t,a)),s}}let r=yQ(e.value),i=e.children.map(o=>Dh(t,o));return new Mr(r,i)}}function gQ(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Dh(t,r,i);return Dh(t,r)})}function yQ(t){return new ir(new yn(t.url),new yn(t.params),new yn(t.queryParams),new yn(t.fragment),new yn(t.data),t.outlet,t.component,t)}var HF="ngNavigationCancelingError";function zF(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Wl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=WF(!1,Xr.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function WF(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[HF]=!0,n.cancellationCode=e,n}function vQ(t){return GF(t)&&Wl(t.url)}function GF(t){return!!t&&t[HF]}var _Q=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Je({type:e,selectors:[["ng-component"]],standalone:!0,features:[hk],decls:1,vars:0,template:function(i,o){i&1&&le(0,"router-outlet")},dependencies:[Qb],encapsulation:2});let t=e;return t})();function wQ(t,e){return t.providers&&!t._injector&&(t._injector=$g(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Yb(t){let e=t.children&&t.children.map(Yb),n=e?st(ae({},t),{children:e}):ae({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Oe&&(n.component=_Q),n}function Wi(t){return t.outlet||Oe}function EQ(t,e){let n=t.filter(r=>Wi(r)===e);return n.push(...t.filter(r=>Wi(r)!==e)),n}function Mh(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var xQ=(t,e,n,r)=>fe(i=>(new Ub(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Ub=class{constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),_b(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=$l(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=$l(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=$l(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=$l(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Fb(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Nb(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(_b(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),_b(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Mh(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}},k0=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Hl=class{constructor(e,n){this.component=e,this.route=n}};function CQ(t,e,n){let r=t._root,i=e?e._root:null;return mh(r,i,n,[r.value])}function bQ(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ql(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!dN(t)?t:e.get(t):r}function mh(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=$l(e);return t.children.forEach(s=>{IQ(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>_h(a,n.getContext(s),i)),i}function IQ(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=DQ(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new k0(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?mh(t,e,a?a.children:null,r,i):mh(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Hl(a.outlet.component,s))}else s&&_h(e,a,i),i.canActivateChecks.push(new k0(r)),o.component?mh(t,null,a?a.children:null,r,i):mh(t,null,n,r,i);return i}function DQ(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ka(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ka(t.url,e.url)||!zi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bb(t,e)||!zi(t.queryParams,e.queryParams);case"paramsChange":default:return!Bb(t,e)}}function _h(t,e,n){let r=$l(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?_h(s,e.children.getContext(o),n):_h(s,null,n):_h(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Hl(e.outlet.component,i)):n.canDeactivateChecks.push(new Hl(null,i)):n.canDeactivateChecks.push(new Hl(null,i))}function Ph(t){return typeof t=="function"}function TQ(t){return typeof t=="boolean"}function AQ(t){return t&&Ph(t.canLoad)}function SQ(t){return t&&Ph(t.canActivate)}function RQ(t){return t&&Ph(t.canActivateChild)}function MQ(t){return t&&Ph(t.canDeactivate)}function PQ(t){return t&&Ph(t.canMatch)}function KF(t){return t instanceof Eo||t?.name==="EmptyError"}var x0=Symbol("INITIAL_VALUE");function Kl(){return He(t=>Md(t.map(e=>e.pipe(Co(1),Ia(x0)))).pipe(fe(e=>{for(let n of e)if(n!==!0){if(n===x0)return x0;if(n===!1||n instanceof Ss)return n}return!0}),vn(e=>e!==x0),Co(1)))}function NQ(t,e){return on(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?pe(st(ae({},n),{guardsResult:!0})):kQ(s,r,i,t).pipe(on(a=>a&&TQ(a)?FQ(r,o,t,e):pe(a)),fe(a=>st(ae({},n),{guardsResult:a})))})}function kQ(t,e,n,r){return be(t).pipe(on(i=>jQ(i.component,i.route,n,e,r)),br(i=>i!==!0,!0))}function FQ(t,e,n,r){return be(e).pipe(xo(i=>fl(LQ(i.route.parent,r),OQ(i.route,r),BQ(t,i.path,n),VQ(t,i.route,n))),br(i=>i!==!0,!0))}function OQ(t,e){return t!==null&&e&&e(new kb(t)),pe(!0)}function LQ(t,e){return t!==null&&e&&e(new Pb(t)),pe(!0)}function VQ(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return pe(!0);let i=r.map(o=>Mm(()=>{let s=Mh(e)??n,a=Ql(o,s),c=SQ(a)?a.canActivate(e,t):Bi(s,()=>a(e,t));return Ns(c).pipe(br())}));return pe(i).pipe(Kl())}function BQ(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>bQ(s)).filter(s=>s!==null).map(s=>Mm(()=>{let a=s.guards.map(c=>{let l=Mh(s.node)??n,u=Ql(c,l),d=RQ(u)?u.canActivateChild(r,t):Bi(l,()=>u(r,t));return Ns(d).pipe(br())});return pe(a).pipe(Kl())}));return pe(o).pipe(Kl())}function jQ(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let s=o.map(a=>{let c=Mh(e)??i,l=Ql(a,c),u=MQ(l)?l.canDeactivate(t,e,n,r):Bi(c,()=>l(t,e,n,r));return Ns(u).pipe(br())});return pe(s).pipe(Kl())}function UQ(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return pe(!0);let o=i.map(s=>{let a=Ql(s,t),c=AQ(a)?a.canLoad(e,n):Bi(t,()=>a(e,n));return Ns(c)});return pe(o).pipe(Kl(),QF(r))}function QF(t){return dE(Vt(e=>{if(Wl(e))throw zF(t,e)}),fe(e=>e===!0))}function $Q(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return pe(!0);let o=i.map(s=>{let a=Ql(s,t),c=PQ(a)?a.canMatch(e,n):Bi(t,()=>a(e,n));return Ns(c)});return pe(o).pipe(Kl(),QF(r))}var Th=class{constructor(e){this.segmentGroup=e||null}},F0=class extends Error{constructor(e){super(),this.urlTree=e}};function Ul(t){return wo(new Th(t))}function qQ(t){return wo(new de(4e3,!1))}function HQ(t){return wo(WF(!1,Xr.GuardRejected))}var $b=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return pe(r);if(i.numberOfChildren>1||!i.children[Oe])return qQ(e.redirectTo);i=i.children[Oe]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new F0(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new Ss(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new ht(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new de(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},qb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zQ(t,e,n,r,i){let o=Xb(t,e,n);return o.matched?(r=wQ(e,r),$Q(r,e,n,i).pipe(fe(s=>s===!0?o:ae({},qb)))):pe(o)}function Xb(t,e,n){if(e.path==="**")return WQ(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?ae({},qb):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||$K)(n,t,e);if(!i)return ae({},qb);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?ae(ae({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function WQ(t){return{matched:!0,parameters:t.length>0?AF(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function bF(t,e,n,r){return n.length>0&&QQ(t,n,r)?{segmentGroup:new ht(e,KQ(r,new ht(n,t.children))),slicedSegments:[]}:n.length===0&&YQ(t,n,r)?{segmentGroup:new ht(t.segments,GQ(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ht(t.segments,t.children),slicedSegments:n}}function GQ(t,e,n,r){let i={};for(let o of n)if(B0(t,e,o)&&!r[Wi(o)]){let s=new ht([],{});i[Wi(o)]=s}return ae(ae({},r),i)}function KQ(t,e){let n={};n[Oe]=e;for(let r of t)if(r.path===""&&Wi(r)!==Oe){let i=new ht([],{});n[Wi(r)]=i}return n}function QQ(t,e,n){return n.some(r=>B0(t,e,r)&&Wi(r)!==Oe)}function YQ(t,e,n){return n.some(r=>B0(t,e,r))}function B0(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function XQ(t,e,n,r){return Wi(t)!==r&&(r===Oe||!B0(e,n,t))?!1:Xb(e,t,n).matched}function ZQ(t,e,n){return e.length===0&&!t.children[n]}var Hb=class{};function JQ(t,e,n,r,i,o,s="emptyOnly"){return new zb(t,e,n,r,i,s,o).recognize()}var eY=31,zb=class{constructor(e,n,r,i,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new $b(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new de(4002,`'${e.segmentGroup}'`)}recognize(){let e=bF(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(fe(n=>{let r=new Ih([],Object.freeze({}),Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,{},Oe,this.rootComponentType,null,{}),i=new Mr(r,n),o=new N0("",i),s=aQ(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Oe).pipe(fs(r=>{if(r instanceof F0)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Th?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Gb(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(fe(o=>o instanceof Mr?[o]:[]))}processChildren(e,n,r){let i=[];for(let o of Object.keys(r.children))o==="primary"?i.unshift(o):i.push(o);return be(i).pipe(xo(o=>{let s=r.children[o],a=EQ(n,o);return this.processSegmentGroup(e,a,s,o)}),Ni((o,s)=>(o.push(...s),o)),ps(null),wE(),on(o=>{if(o===null)return Ul(r);let s=YF(o);return tY(s),pe(s)}))}processSegment(e,n,r,i,o,s){return be(n).pipe(xo(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,o,s).pipe(fs(c=>{if(c instanceof Th)return pe(null);throw c}))),br(a=>!!a),fs(a=>{if(KF(a))return ZQ(r,i,o)?pe(new Hb):Ul(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,o,s,a){return XQ(r,i,o,s)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s):Ul(i):Ul(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=Xb(n,i,o);if(!a)return Ul(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>eY&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,d).pipe(on(h=>this.processSegment(e,r,n,h.concat(u),s,!1)))}matchSegmentAgainstRoute(e,n,r,i,o){let s=zQ(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),s.pipe(He(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(He(({routes:c})=>{let l=r._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Ih(u,h,Object.freeze(ae({},this.urlTree.queryParams)),this.urlTree.fragment,rY(r),Wi(r),r.component??r._loadedComponent??null,r,iY(r)),{segmentGroup:m,slicedSegments:_}=bF(n,u,d,c);if(_.length===0&&m.hasChildren())return this.processChildren(l,c,m).pipe(fe(y=>y===null?null:new Mr(f,y)));if(c.length===0&&_.length===0)return pe(new Mr(f,[]));let w=Wi(r)===o;return this.processSegment(l,c,m,_,w?Oe:o,!0).pipe(fe(y=>new Mr(f,y instanceof Mr?[y]:[])))}))):Ul(n)))}getChildConfig(e,n,r){return n.children?pe({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?pe({routes:n._loadedRoutes,injector:n._loadedInjector}):UQ(e,n,r,this.urlSerializer).pipe(on(i=>i?this.configLoader.loadChildren(e,n).pipe(Vt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):HQ(n))):pe({routes:[],injector:e})}};function tY(t){t.sort((e,n)=>e.value.outlet===Oe?-1:n.value.outlet===Oe?1:e.value.outlet.localeCompare(n.value.outlet))}function nY(t){let e=t.value.routeConfig;return e&&e.path===""}function YF(t){let e=[],n=new Set;for(let r of t){if(!nY(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=YF(r.children);e.push(new Mr(r.value,i))}return e.filter(r=>!n.has(r))}function rY(t){return t.data||{}}function iY(t){return t.resolve||{}}function oY(t,e,n,r,i,o){return on(s=>JQ(t,e,n,r,s.extractedUrl,i,o).pipe(fe(({state:a,tree:c})=>st(ae({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function sY(t,e){return on(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return pe(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of XF(c))s.add(l);let a=0;return be(s).pipe(xo(c=>o.has(c)?aY(c,r,t,e):(c.data=Gb(c,c.parent,t).resolve,pe(void 0))),Vt(()=>a++),ml(1),on(c=>a===s.size?pe(n):mr))})}function XF(t){let e=t.children.map(n=>XF(n)).flat();return[t,...e]}function aY(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!qF(i)&&(o[Ah]=i.title),cY(o,t,e,r).pipe(fe(s=>(t._resolvedData=s,t.data=Gb(t,t.parent,n).resolve,null)))}function cY(t,e,n,r){let i=xb(t);if(i.length===0)return pe({});let o={};return be(i).pipe(on(s=>lY(t[s],e,n,r).pipe(br(),Vt(a=>{o[s]=a}))),ml(1),_E(o),fs(s=>KF(s)?mr:wo(s)))}function lY(t,e,n,r){let i=Mh(e)??r,o=Ql(t,i),s=o.resolve?o.resolve(e,n):Bi(i,()=>o(e,n));return Ns(s)}function wb(t){return He(e=>{let n=t(e);return n?be(n).pipe(fe(()=>e)):pe(e)})}var ZF=(()=>{let e=class e{buildTitle(r){let i,o=r.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(s=>s.outlet===Oe);return i}getResolvedTitleForRoute(r){return r.data[Ah]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>Y(uY),providedIn:"root"});let t=e;return t})(),uY=(()=>{let e=class e extends ZF{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(U(yF))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nh=new te("",{providedIn:"root",factory:()=>({})}),O0=new te(""),Zb=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Y(Yg)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return pe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ns(r.loadComponent()).pipe(fe(JF),Vt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),ms(()=>{this.componentLoaders.delete(r)})),o=new cl(i,()=>new rn).pipe(al());return this.componentLoaders.set(r,o),o}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return pe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let s=dY(i,this.compiler,r,this.onLoadEndListener).pipe(ms(()=>{this.childrenLoaders.delete(i)})),a=new cl(s,()=>new rn).pipe(al());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dY(t,e,n,r){return Ns(t.loadChildren()).pipe(fe(JF),on(i=>i instanceof Gd||Array.isArray(i)?pe(i):be(e.compileModuleAsync(i))),fe(i=>{r&&r(t);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(n).injector,s=o.get(O0,[],{optional:!0,self:!0}).flat()),{routes:s.map(Yb),injector:o}}))}function hY(t){return t&&typeof t=="object"&&"default"in t}function JF(t){return hY(t)?t.default:t}var Jb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>Y(fY),providedIn:"root"});let t=e;return t})(),fY=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eO=new te(""),tO=new te("");function pY(t,e,n){let r=t.get(tO),i=t.get(wn);return t.get(je).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),mY(t))),{onViewTransitionCreated:c}=r;return c&&Bi(t,()=>c({transition:a,from:e,to:n})),s})}function mY(t){return new Promise(e=>{AC(e,{injector:t})})}var e1=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new rn,this.transitionAbortSubject=new rn,this.configLoader=Y(Zb),this.environmentInjector=Y(tr),this.urlSerializer=Y(Sh),this.rootContexts=Y(Rh),this.location=Y(_r),this.inputBindingEnabled=Y(V0,{optional:!0})!==null,this.titleStrategy=Y(ZF),this.options=Y(Nh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Y(Jb),this.createViewTransition=Y(eO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pe(void 0),this.rootComponentType=null;let r=o=>this.events.next(new Rb(o)),i=o=>this.events.next(new Mb(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(st(ae(ae({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,o){return this.transitions=new yn({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vh,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vn(s=>s.id!==0),fe(s=>st(ae({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),He(s=>{this.currentTransition=s;let a=!1,c=!1;return pe(s).pipe(Vt(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?st(ae({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),He(l=>{let u=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Ms(l.id,this.urlSerializer.serialize(l.rawUrl),h,A0.IgnoredSameUrlNavigation)),l.resolve(null),mr}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return pe(l).pipe(He(h=>{let f=this.transitions?.getValue();return this.events.next(new Gl(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?mr:Promise.resolve(h)}),oY(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Vt(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=st(ae({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new S0(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:m,restoredState:_,extras:w}=l,y=new Gl(h,this.urlSerializer.serialize(f),m,_);this.events.next(y);let v=UF(this.rootComponentType).snapshot;return this.currentTransition=s=st(ae({},l),{targetSnapshot:v,urlAfterRedirects:f,extras:st(ae({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,pe(s)}else{let h="";return this.events.next(new Ms(l.id,this.urlSerializer.serialize(l.extractedUrl),h,A0.IgnoredByUrlHandlingStrategy)),l.resolve(null),mr}}),Vt(l=>{let u=new Db(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),fe(l=>(this.currentTransition=s=st(ae({},l),{guards:CQ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),NQ(this.environmentInjector,l=>this.events.next(l)),Vt(l=>{if(s.guardsResult=l.guardsResult,Wl(l.guardsResult))throw zF(this.urlSerializer,l.guardsResult);let u=new Tb(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),vn(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Xr.GuardRejected),!1)),wb(l=>{if(l.guards.canActivateChecks.length)return pe(l).pipe(Vt(u=>{let d=new Ab(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),He(u=>{let d=!1;return pe(u).pipe(sY(this.paramsInheritanceStrategy,this.environmentInjector),Vt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Xr.NoDataFromResolver)}}))}),Vt(u=>{let d=new Sb(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),wb(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Vt(f=>{d.component=f}),fe(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Md(u(l.targetSnapshot.root)).pipe(ps(null),Co(1))}),wb(()=>this.afterPreactivation()),He(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?be(d).pipe(fe(()=>s)):pe(s)}),fe(l=>{let u=mQ(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=st(ae({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),Vt(()=>{this.events.next(new Ch)}),xQ(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Co(1),Vt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new vi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),CE(this.transitionAbortSubject.pipe(Vt(l=>{throw l}))),ms(()=>{!a&&!c&&this.cancelNavigationTransition(s,"",Xr.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),fs(l=>{if(c=!0,GF(l))this.events.next(new Rs(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),vQ(l)?this.events.next(new bh(l.url)):s.resolve(!1);else{this.events.next(new xh(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(r.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(u)}}return mr}))}))}cancelNavigationTransition(r,i,o){let s=new Rs(r.id,this.urlSerializer.serialize(r.extractedUrl),i,o);this.events.next(s),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gY(t){return t!==vh}var yY=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>Y(vY),providedIn:"root"});let t=e;return t})(),Wb=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},vY=(()=>{let e=class e extends Wb{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Fl(e)))(o||e)}})(),e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:()=>Y(_Y),providedIn:"root"});let t=e;return t})(),_Y=(()=>{let e=class e extends nO{constructor(){super(...arguments),this.location=Y(_r),this.urlSerializer=Y(Sh),this.options=Y(Nh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Y(Jb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ss,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=UF(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Gl)this.stateMemento=this.createStateMemento();else if(r instanceof Ms)this.rawUrlTree=i.initialUrl;else if(r instanceof S0){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(o,i)}}else r instanceof Ch?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Rs&&(r.code===Xr.GuardRejected||r.code===Xr.NoDataFromResolver)?this.restoreHistory(i):r instanceof xh?this.restoreHistory(i,!0):r instanceof vi&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let o=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let s=this.browserPageId,a=ae(ae({},i.extras.state),this.generateNgRouterState(i.id,s));this.location.replaceState(o,"",a)}else{let s=ae(ae({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===r.finalUrl&&s===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Fl(e)))(o||e)}})(),e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gh=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(gh||{});function rO(t,e){t.events.pipe(vn(n=>n instanceof vi||n instanceof Rs||n instanceof xh||n instanceof Ms),fe(n=>n instanceof vi||n instanceof Ms?gh.COMPLETE:(n instanceof Rs?n.code===Xr.Redirect||n.code===Xr.SupersededByNewNavigation:!1)?gh.REDIRECTING:gh.FAILED),vn(n=>n!==gh.REDIRECTING),Co(1)).subscribe(()=>{e()})}function wY(t){throw t}var EY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ft=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Y(Wg),this.stateManager=Y(nO),this.options=Y(Nh,{optional:!0})||{},this.pendingTasks=Y($a),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Y(e1),this.urlSerializer=Y(Sh),this.location=Y(_r),this.urlHandlingStrategy=Y(Jb),this._events=new rn,this.errorHandler=this.options.errorHandler||wY,this.navigated=!1,this.routeReuseStrategy=Y(yY),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Y(O0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Y(V0,{optional:!0}),this.eventsSubscription=new zt,this.isNgZoneEnabled=Y(je)instanceof je&&je.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(i,s),i instanceof Rs&&i.code!==Xr.Redirect&&i.code!==Xr.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof vi)this.navigated=!0;else if(i instanceof bh){let a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),c={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||gY(o.source)};this.scheduleNavigation(a,vh,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}bY(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),vh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let l=ae({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Yb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=ae(ae({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=LF(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return VF(h,r,d,u??null)}navigateByUrl(r,i={skipLocationChange:!1}){let o=Wl(r)?r:this.parseUrl(r),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,vh,null,i)}navigate(r,i={skipLocationChange:!1}){return CY(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let o;if(i===!0?o=ae({},EY):i===!1?o=ae({},xY):o=i,Wl(r))return _F(this.currentUrlTree,r,o);let s=this.parseUrl(r);return _F(this.currentUrlTree,s,o)}removeEmptyProps(r){return Object.entries(r).reduce((i,[o,s])=>(s!=null&&(i[o]=s),i),{})}scheduleNavigation(r,i,o,s,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return rO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:s,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CY(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new de(4008,!1)}function bY(t){return!(t instanceof Ch)&&!(t instanceof bh)}var Ps=(()=>{let e=class e{constructor(r,i,o,s,a,c){this.router=r,this.route=i,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new rn,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(u=>{u instanceof vi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,o,s,a){let c=this.urlTree;if(c===null||this.isAnchorElement&&(r!==0||i||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:s2(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let o=this.renderer,s=this.el.nativeElement;i!==null?o.setAttribute(s,r,i):o.removeAttribute(s,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(X(ft),X(ir),fC("tabindex"),X(ko),X(Ar),X($o))},e.\u0275dir=_n({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,o){i&1&&we("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&rh("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Vn.HasDecoratorInputTransform,"preserveFragment","preserveFragment",As],skipLocationChange:[Vn.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",As],replaceUrl:[Vn.HasDecoratorInputTransform,"replaceUrl","replaceUrl",As],routerLink:"routerLink"},standalone:!0,features:[PC,Po]});let t=e;return t})(),iO=(()=>{let e=class e{get isActive(){return this._isActive}constructor(r,i,o,s,a){this.router=r,this.element=i,this.renderer=o,this.cdr=s,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Bt,this.routerEventsSubscription=r.events.subscribe(c=>{c instanceof vi&&this.update()})}ngAfterContentInit(){pe(this.links.changes,pe(null)).pipe(Pi()).subscribe(r=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let r=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=be(r).pipe(Pi()).subscribe(i=>{this._isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(r){let i=Array.isArray(r)?r:r.split(" ");this.classes=i.filter(o=>!!o)}ngOnChanges(r){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let r=this.hasActiveLinks();this._isActive!==r&&(this._isActive=r,this.cdr.markForCheck(),this.classes.forEach(i=>{r?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),r&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(r))})}isLinkActive(r){let i=IY(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>{let s=o.urlTree;return s?r.isActive(s,i):!1}}hasActiveLinks(){let r=this.isLinkActive(this.router);return this.link&&r(this.link)||this.links.some(r)}};e.\u0275fac=function(i){return new(i||e)(X(ft),X(Ar),X(ko),X(Ts),X(Ps,8))},e.\u0275dir=_n({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(i,o,s){if(i&1&&ak(s,Ps,5),i&2){let a;ck(a=lk())&&(o.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Po]});let t=e;return t})();function IY(t){return!!t.paths}var L0=class{};var DY=(()=>{let e=class e{constructor(r,i,o,s,a){this.router=r,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(vn(r=>r instanceof vi),xo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let o=[];for(let s of i){s.providers&&!s._injector&&(s._injector=$g(s.providers,r,`Route: ${s.path}`));let a=s._injector??r,c=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(c,s.children??s._loadedRoutes))}return be(o).pipe(Pi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let o;i.loadChildren&&i.canLoad===void 0?o=this.loader.loadChildren(r,i):o=pe(null);let s=o.pipe(on(a=>a===null?pe(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return be([s,a]).pipe(Pi())}else return s})}};e.\u0275fac=function(i){return new(i||e)(U(ft),U(Yg),U(tr),U(L0),U(Zb))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oO=new te(""),TY=(()=>{let e=class e{constructor(r,i,o,s,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Gl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof vi?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Ms&&r.code===A0.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof R0&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new R0(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){x2()},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function AY(t){return t.routerState.root}function kh(t,e){return{\u0275kind:t,\u0275providers:e}}function SY(){let t=Y(Gr);return e=>{let n=t.get(Lo);if(e!==n.components[0])return;let r=t.get(ft),i=t.get(sO);t.get(t1)===1&&r.initialNavigation(),t.get(aO,null,Be.Optional)?.setUpPreloading(),t.get(oO,null,Be.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var sO=new te("",{factory:()=>new rn}),t1=new te("",{providedIn:"root",factory:()=>1});function RY(){return kh(2,[{provide:t1,useValue:0},{provide:Qg,multi:!0,deps:[Gr],useFactory:e=>{let n=e.get(Ok,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(ft),o=e.get(sO);rO(i,()=>{r(!0)}),e.get(e1).afterPreactivation=()=>(r(!0),o.closed?pe(void 0):o),i.initialNavigation()}))}}])}function MY(){return kh(3,[{provide:Qg,multi:!0,useFactory:()=>{let e=Y(ft);return()=>{e.setUpLocationChangeListener()}}},{provide:t1,useValue:2}])}var aO=new te("");function PY(t){return kh(0,[{provide:aO,useExisting:DY},{provide:L0,useExisting:t}])}function NY(){return kh(8,[CF,{provide:V0,useExisting:CF}])}function kY(t){let e=[{provide:eO,useValue:pY},{provide:tO,useValue:ae({skipNextTransition:!!t?.skipInitialTransition},t)}];return kh(9,e)}var IF=new te("ROUTER_FORROOT_GUARD"),FY=[_r,{provide:Sh,useClass:wh},ft,Rh,{provide:ir,useFactory:AY,deps:[ft]},Zb,[]],Yl=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[FY,[],{provide:O0,multi:!0,useValue:r},{provide:IF,useFactory:BY,deps:[[ft,new Nl,new lC]]},{provide:Nh,useValue:i||{}},i?.useHash?LY():VY(),OY(),i?.preloadingStrategy?PY(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?jY(i):[],i?.bindToComponentInputs?NY().\u0275providers:[],i?.enableViewTransitions?kY().\u0275providers:[],UY()]}}static forChild(r){return{ngModule:e,providers:[{provide:O0,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(U(IF,8))},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({});let t=e;return t})();function OY(){return{provide:oO,useFactory:()=>{let t=Y($k),e=Y(je),n=Y(Nh),r=Y(e1),i=Y(Sh);return n.scrollOffset&&t.setOffset(n.scrollOffset),new TY(i,r,t,e,n)}}}function LY(){return{provide:$o,useClass:Vk}}function VY(){return{provide:$o,useClass:XC}}function BY(t){return"guarded"}function jY(t){return[t.initialNavigation==="disabled"?MY().\u0275providers:[],t.initialNavigation==="enabledBlocking"?RY().\u0275providers:[]]}var DF=new te("");function UY(){return[{provide:DF,useFactory:SY},{provide:Ll,multi:!0,useExisting:DF}]}var $Y=[],cO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({imports:[Yl.forRoot($Y),Yl]});let t=e;return t})();var qY=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cc(t,e){return t(e={exports:{}},e.exports),e.exports}var kt=cc(function(t){var e,n;e=qY,n=function(){function r(i){var o=[];if(i.length===0)return"";if(typeof i[0]!="string")throw new TypeError("Url must be a string. Received "+i[0]);if(i[0].match(/^[^/:]+:\/*$/)&&i.length>1){var s=i.shift();i[0]=s+i[0]}i[0].match(/^file:\/\/\//)?i[0]=i[0].replace(/^([^/:]+):\/*/,"$1:///"):i[0]=i[0].replace(/^([^/:]+):\/*/,"$1://");for(var a=0;a<i.length;a++){var c=i[a];if(typeof c!="string")throw new TypeError("Url must be a string. Received "+c);c!==""&&(a>0&&(c=c.replace(/^[\/]+/,"")),c=a<i.length-1?c.replace(/[\/]+$/,""):c.replace(/[\/]+$/,"/"),o.push(c))}var l=o.join("/"),u=(l=l.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return l=u.shift()+(u.length>0?"?":"")+u.join("&")}return function(){return r(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=n():e.urljoin=n()}),lO=typeof Symbol<"u"&&Symbol,uO={foo:{}},HY=Object,zY="Function.prototype.bind called on incompatible ",WY=Object.prototype.toString,GY=Math.max,dO=function(t,e){for(var n=[],r=0;r<t.length;r+=1)n[r]=t[r];for(var i=0;i<e.length;i+=1)n[i+t.length]=e[i];return n},KY=function(t,e){for(var n=[],r=e||0,i=0;r<t.length;r+=1,i+=1)n[i]=t[r];return n},QY=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},zo=Function.prototype.bind||function(t){var e=this;if(typeof e!="function"||WY.apply(e)!=="[object Function]")throw new TypeError(zY+e);for(var n,r=KY(arguments,1),i=function(){if(this instanceof n){var l=e.apply(this,dO(r,arguments));return Object(l)===l?l:this}return e.apply(t,dO(r,arguments))},o=GY(0,e.length-r.length),s=[],a=0;a<o;a++)s[a]="$"+a;if(n=Function("binder","return function ("+QY(s,",")+"){ return binder.apply(this,arguments); }")(i),e.prototype){var c=function(){};c.prototype=e.prototype,n.prototype=new c,c.prototype=null}return n},ey=zo.call(Function.call,Object.prototype.hasOwnProperty),cu=SyntaxError,s4=Function,iu=TypeError,n1=function(t){try{return s4('"use strict"; return ('+t+").constructor;")()}catch{}},ic=Object.getOwnPropertyDescriptor;if(ic)try{ic({},"")}catch{ic=null}var r1=function(){throw new iu},YY=ic?function(){try{return r1}catch{try{return ic(arguments,"callee").get}catch{return r1}}}():r1,Xl=typeof lO=="function"&&typeof Symbol=="function"&&typeof lO("foo")=="symbol"&&typeof Symbol("bar")=="symbol"&&function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},e=Symbol("test"),n=Object(e);if(typeof e=="string"||Object.prototype.toString.call(e)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;for(e in t[e]=42,t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var r=Object.getOwnPropertySymbols(t);if(r.length!==1||r[0]!==e||!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var i=Object.getOwnPropertyDescriptor(t,e);if(i.value!==42||i.enumerable!==!0)return!1}return!0}(),XY={__proto__:uO}.foo===uO.foo&&!({__proto__:null}instanceof HY),An=Object.getPrototypeOf||(XY?function(t){return t.__proto__}:null),eu={},ZY=typeof Uint8Array<"u"&&An?An(Uint8Array):void 0,oc={"%AggregateError%":typeof AggregateError>"u"?void 0:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?void 0:ArrayBuffer,"%ArrayIteratorPrototype%":Xl&&An?An([][Symbol.iterator]()):void 0,"%AsyncFromSyncIteratorPrototype%":void 0,"%AsyncFunction%":eu,"%AsyncGenerator%":eu,"%AsyncGeneratorFunction%":eu,"%AsyncIteratorPrototype%":eu,"%Atomics%":typeof Atomics>"u"?void 0:Atomics,"%BigInt%":typeof BigInt>"u"?void 0:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?void 0:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?void 0:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?void 0:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?void 0:Float32Array,"%Float64Array%":typeof Float64Array>"u"?void 0:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?void 0:FinalizationRegistry,"%Function%":s4,"%GeneratorFunction%":eu,"%Int8Array%":typeof Int8Array>"u"?void 0:Int8Array,"%Int16Array%":typeof Int16Array>"u"?void 0:Int16Array,"%Int32Array%":typeof Int32Array>"u"?void 0:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Xl&&An?An(An([][Symbol.iterator]())):void 0,"%JSON%":typeof JSON=="object"?JSON:void 0,"%Map%":typeof Map>"u"?void 0:Map,"%MapIteratorPrototype%":typeof Map<"u"&&Xl&&An?An(new Map()[Symbol.iterator]()):void 0,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?void 0:Promise,"%Proxy%":typeof Proxy>"u"?void 0:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?void 0:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?void 0:Set,"%SetIteratorPrototype%":typeof Set<"u"&&Xl&&An?An(new Set()[Symbol.iterator]()):void 0,"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?void 0:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Xl&&An?An(""[Symbol.iterator]()):void 0,"%Symbol%":Xl?Symbol:void 0,"%SyntaxError%":cu,"%ThrowTypeError%":YY,"%TypedArray%":ZY,"%TypeError%":iu,"%Uint8Array%":typeof Uint8Array>"u"?void 0:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?void 0:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?void 0:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?void 0:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?void 0:WeakMap,"%WeakRef%":typeof WeakRef>"u"?void 0:WeakRef,"%WeakSet%":typeof WeakSet>"u"?void 0:WeakSet};if(An)try{null.error}catch(t){hO=An(An(t)),oc["%Error.prototype%"]=hO}var hO,fO={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},JY=zo.call(Function.call,Array.prototype.concat),eX=zo.call(Function.apply,Array.prototype.splice),pO=zo.call(Function.call,String.prototype.replace),ty=zo.call(Function.call,String.prototype.slice),tX=zo.call(Function.call,RegExp.prototype.exec),nX=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,rX=/\\(\\)?/g,iX=function(t){var e=ty(t,0,1),n=ty(t,-1);if(e==="%"&&n!=="%")throw new cu("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&e!=="%")throw new cu("invalid intrinsic syntax, expected opening `%`");var r=[];return pO(t,nX,function(i,o,s,a){r[r.length]=s?pO(a,rX,"$1"):o||i}),r},oX=function(t,e){var n,r=t;if(ey(fO,r)&&(r="%"+(n=fO[r])[0]+"%"),ey(oc,r)){var i=oc[r];if(i===eu&&(i=function o(s){var a;if(s==="%AsyncFunction%")a=n1("async function () {}");else if(s==="%GeneratorFunction%")a=n1("function* () {}");else if(s==="%AsyncGeneratorFunction%")a=n1("async function* () {}");else if(s==="%AsyncGenerator%"){var c=o("%AsyncGeneratorFunction%");c&&(a=c.prototype)}else if(s==="%AsyncIteratorPrototype%"){var l=o("%AsyncGenerator%");l&&An&&(a=An(l.prototype))}return oc[s]=a,a}(r)),i===void 0&&!e)throw new iu("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:i}}throw new cu("intrinsic "+t+" does not exist!")},wi=function(t,e){if(typeof t!="string"||t.length===0)throw new iu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof e!="boolean")throw new iu('"allowMissing" argument must be a boolean');if(tX(/^%?[^%]*%?$/,t)===null)throw new cu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=iX(t),r=n.length>0?n[0]:"",i=oX("%"+r+"%",e),o=i.name,s=i.value,a=!1,c=i.alias;c&&(r=c[0],eX(n,JY([0,1],c)));for(var l=1,u=!0;l<n.length;l+=1){var d=n[l],h=ty(d,0,1),f=ty(d,-1);if((h==='"'||h==="'"||h==="`"||f==='"'||f==="'"||f==="`")&&h!==f)throw new cu("property names with quotes must have matching quotes");if(d!=="constructor"&&u||(a=!0),ey(oc,o="%"+(r+="."+d)+"%"))s=oc[o];else if(s!=null){if(!(d in s)){if(!e)throw new iu("base intrinsic for "+t+" exists, but the property is not available.");return}if(ic&&l+1>=n.length){var m=ic(s,d);s=(u=!!m)&&"get"in m&&!("originalValue"in m.get)?m.get:s[d]}else u=ey(s,d),s=s[d];u&&!a&&(oc[o]=s)}}return s},v1=cc(function(t){var e=wi("%Function.prototype.apply%"),n=wi("%Function.prototype.call%"),r=wi("%Reflect.apply%",!0)||zo.call(n,e),i=wi("%Object.getOwnPropertyDescriptor%",!0),o=wi("%Object.defineProperty%",!0),s=wi("%Math.max%");if(o)try{o({},"a",{value:1})}catch{o=null}t.exports=function(c){var l=r(zo,n,arguments);if(i&&o){var u=i(l,"length");u.configurable&&o(l,"length",{value:1+s(0,c.length-(arguments.length-1))})}return l};var a=function(){return r(zo,e,arguments)};o?o(t.exports,"apply",{value:a}):t.exports.apply=a}),sX=(v1.apply,v1(wi("String.prototype.indexOf"))),uu=function(t,e){var n=wi(t,!!e);return typeof n=="function"&&sX(t,".prototype.")>-1?v1(n):n},ou=function(t){return t&&t.default||t}(Object.freeze({__proto__:null,default:{}})),P1=typeof Map=="function"&&Map.prototype,i1=Object.getOwnPropertyDescriptor&&P1?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,j0=P1&&i1&&typeof i1.get=="function"?i1.get:null,mO=P1&&Map.prototype.forEach,N1=typeof Set=="function"&&Set.prototype,o1=Object.getOwnPropertyDescriptor&&N1?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,U0=N1&&o1&&typeof o1.get=="function"?o1.get:null,gO=N1&&Set.prototype.forEach,Fh=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap.prototype.has:null,Oh=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet.prototype.has:null,yO=typeof WeakRef=="function"&&WeakRef.prototype?WeakRef.prototype.deref:null,aX=Boolean.prototype.valueOf,cX=Object.prototype.toString,lX=Function.prototype.toString,uX=String.prototype.match,_1=String.prototype.slice,Os=String.prototype.replace,dX=String.prototype.toUpperCase,vO=String.prototype.toLowerCase,a4=RegExp.prototype.test,_O=Array.prototype.concat,Qi=Array.prototype.join,hX=Array.prototype.slice,wO=Math.floor,s1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,a1=Object.getOwnPropertySymbols,w1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,lu=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Wn=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===lu||!0)?Symbol.toStringTag:null,c4=Object.prototype.propertyIsEnumerable,EO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function xO(t,e){if(t===1/0||t===-1/0||t!=t||t&&t>-1e3&&t<1e3||a4.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-wO(-t):wO(t);if(r!==t){var i=String(r),o=_1.call(e,i.length+1);return Os.call(i,n,"$&_")+"."+Os.call(Os.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Os.call(e,n,"$&_")}var CO=ou.custom,bO=l4(CO)?CO:null,fX=function t(e,n,r,i){var o=n||{};if(ks(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ks(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=!ks(o,"customInspect")||o.customInspect;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ks(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ks(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return function S($,F){if($.length>F.maxStringLength){var re=$.length-F.maxStringLength,ce="... "+re+" more character"+(re>1?"s":"");return S(_1.call($,0,F.maxStringLength),F)+ce}return IO(Os.call(Os.call($,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,gX),"single",F)}(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var c=String(e);return a?xO(e,c):c}if(typeof e=="bigint"){var l=String(e)+"n";return a?xO(e,l):l}var u=o.depth===void 0?5:o.depth;if(r===void 0&&(r=0),r>=u&&u>0&&typeof e=="object")return E1(e)?"[Array]":"[Object]";var d=function(S,$){var F;if(S.indent==="	")F="	";else{if(!(typeof S.indent=="number"&&S.indent>0))return null;F=Qi.call(Array(S.indent+1)," ")}return{base:F,prev:Qi.call(Array($+1),F)}}(o,r);if(i===void 0)i=[];else if(TO(i,e)>=0)return"[Circular]";function h(S,$,F){if($&&(i=hX.call(i)).push($),F){var re={depth:o.depth};return ks(o,"quoteStyle")&&(re.quoteStyle=o.quoteStyle),t(S,re,r+1,i)}return t(S,o,r+1,i)}if(typeof e=="function"&&!DO(e)){var f=function(S){if(S.name)return S.name;var $=uX.call(lX.call(S),/^function\s*([\w$]+)/);return $?$[1]:null}(e),m=$0(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(m.length>0?" { "+Qi.call(m,", ")+" }":"")}if(l4(e)){var _=lu?Os.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):w1.call(e);return typeof e!="object"||lu?_:Lh(_)}if(function(S){return!S||typeof S!="object"?!1:typeof HTMLElement<"u"&&S instanceof HTMLElement?!0:typeof S.nodeName=="string"&&typeof S.getAttribute=="function"}(e)){for(var w="<"+vO.call(String(e.nodeName)),y=e.attributes||[],v=0;v<y.length;v++)w+=" "+y[v].name+"="+IO(pX(y[v].value),"double",o);return w+=">",e.childNodes&&e.childNodes.length&&(w+="..."),w+="</"+vO.call(String(e.nodeName))+">"}if(E1(e)){if(e.length===0)return"[]";var C=$0(e,h);return d&&!function(S){for(var $=0;$<S.length;$++)if(TO(S[$],`
`)>=0)return!1;return!0}(C)?"["+x1(C,d)+"]":"[ "+Qi.call(C,", ")+" ]"}if(function(S){return!(Fs(S)!=="[object Error]"||Wn&&typeof S=="object"&&Wn in S)}(e)){var b=$0(e,h);return"cause"in Error.prototype||!("cause"in e)||c4.call(e,"cause")?b.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Qi.call(b,", ")+" }":"{ ["+String(e)+"] "+Qi.call(_O.call("[cause]: "+h(e.cause),b),", ")+" }"}if(typeof e=="object"&&s){if(bO&&typeof e[bO]=="function"&&ou)return ou(e,{depth:u-r});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(function(S){if(!j0||!S||typeof S!="object")return!1;try{j0.call(S);try{U0.call(S)}catch{return!0}return S instanceof Map}catch{}return!1}(e)){var A=[];return mO&&mO.call(e,function(S,$){A.push(h($,e,!0)+" => "+h(S,e))}),AO("Map",j0.call(e),A,d)}if(function(S){if(!U0||!S||typeof S!="object")return!1;try{U0.call(S);try{j0.call(S)}catch{return!0}return S instanceof Set}catch{}return!1}(e)){var x=[];return gO&&gO.call(e,function(S){x.push(h(S,e))}),AO("Set",U0.call(e),x,d)}if(function(S){if(!Fh||!S||typeof S!="object")return!1;try{Fh.call(S,Fh);try{Oh.call(S,Oh)}catch{return!0}return S instanceof WeakMap}catch{}return!1}(e))return c1("WeakMap");if(function(S){if(!Oh||!S||typeof S!="object")return!1;try{Oh.call(S,Oh);try{Fh.call(S,Fh)}catch{return!0}return S instanceof WeakSet}catch{}return!1}(e))return c1("WeakSet");if(function(S){if(!yO||!S||typeof S!="object")return!1;try{return yO.call(S),!0}catch{}return!1}(e))return c1("WeakRef");if(function(S){return!(Fs(S)!=="[object Number]"||Wn&&typeof S=="object"&&Wn in S)}(e))return Lh(h(Number(e)));if(function(S){if(!S||typeof S!="object"||!s1)return!1;try{return s1.call(S),!0}catch{}return!1}(e))return Lh(h(s1.call(e)));if(function(S){return!(Fs(S)!=="[object Boolean]"||Wn&&typeof S=="object"&&Wn in S)}(e))return Lh(aX.call(e));if(function(S){return!(Fs(S)!=="[object String]"||Wn&&typeof S=="object"&&Wn in S)}(e))return Lh(h(String(e)));if(!function(S){return!(Fs(S)!=="[object Date]"||Wn&&typeof S=="object"&&Wn in S)}(e)&&!DO(e)){var I=$0(e,h),T=EO?EO(e)===Object.prototype:e instanceof Object||e.constructor===Object,R=e instanceof Object?"":"null prototype",L=!T&&Wn&&Object(e)===e&&Wn in e?_1.call(Fs(e),8,-1):R?"Object":"",N=(T||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"")+(L||R?"["+Qi.call(_O.call([],L||[],R||[]),": ")+"] ":"");return I.length===0?N+"{}":d?N+"{"+x1(I,d)+"}":N+"{ "+Qi.call(I,", ")+" }"}return String(e)};function IO(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function pX(t){return Os.call(String(t),/"/g,"&quot;")}function E1(t){return!(Fs(t)!=="[object Array]"||Wn&&typeof t=="object"&&Wn in t)}function DO(t){return!(Fs(t)!=="[object RegExp]"||Wn&&typeof t=="object"&&Wn in t)}function l4(t){if(lu)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!w1)return!1;try{return w1.call(t),!0}catch{}return!1}var mX=Object.prototype.hasOwnProperty||function(t){return t in this};function ks(t,e){return mX.call(t,e)}function Fs(t){return cX.call(t)}function TO(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function gX(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+dX.call(e.toString(16))}function Lh(t){return"Object("+t+")"}function c1(t){return t+" { ? }"}function AO(t,e,n,r){return t+" ("+e+") {"+(r?x1(n,r):Qi.call(n,", "))+"}"}function x1(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Qi.call(t,","+n)+`
`+e.prev}function $0(t,e){var n=E1(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=ks(t,i)?e(t[i],t):""}var o,s=typeof a1=="function"?a1(t):[];if(lu){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var c in t)ks(t,c)&&(n&&String(Number(c))===c&&c<t.length||lu&&o["$"+c]instanceof Symbol||(a4.call(/[^\w$]/,c)?r.push(e(c,t)+": "+e(t[c],t)):r.push(c+": "+e(t[c],t))));if(typeof a1=="function")for(var l=0;l<s.length;l++)c4.call(t,s[l])&&r.push("["+e(s[l])+"]: "+e(t[s[l]],t));return r}var yX=wi("%TypeError%"),q0=wi("%WeakMap%",!0),H0=wi("%Map%",!0),vX=uu("WeakMap.prototype.get",!0),_X=uu("WeakMap.prototype.set",!0),wX=uu("WeakMap.prototype.has",!0),EX=uu("Map.prototype.get",!0),xX=uu("Map.prototype.set",!0),CX=uu("Map.prototype.has",!0),l1=function(t,e){for(var n,r=t;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},u4=function(){var t,e,n,r={assert:function(i){if(!r.has(i))throw new yX("Side channel does not contain "+fX(i))},get:function(i){if(q0&&i&&(typeof i=="object"||typeof i=="function")){if(t)return vX(t,i)}else if(H0){if(e)return EX(e,i)}else if(n)return function(o,s){var a=l1(o,s);return a&&a.value}(n,i)},has:function(i){if(q0&&i&&(typeof i=="object"||typeof i=="function")){if(t)return wX(t,i)}else if(H0){if(e)return CX(e,i)}else if(n)return function(o,s){return!!l1(o,s)}(n,i);return!1},set:function(i,o){q0&&i&&(typeof i=="object"||typeof i=="function")?(t||(t=new q0),_X(t,i,o)):H0?(e||(e=new H0),xX(e,i,o)):(n||(n={key:{},next:null}),function(s,a,c){var l=l1(s,a);l?l.value=c:s.next={key:a,next:s.next,value:c}}(n,i,o))}};return r},bX=String.prototype.replace,IX=/%20/g,SO="RFC3986",ec={default:SO,formatters:{RFC1738:function(t){return bX.call(t,IX,"+")},RFC3986:function(t){return String(t)}},RFC1738:"RFC1738",RFC3986:SO},u1=Object.prototype.hasOwnProperty,Qa=Array.isArray,Gi=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),RO=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)t[r]!==void 0&&(n[r]=t[r]);return n},Yi={arrayToObject:RO,assign:function(t,e){return Object.keys(e).reduce(function(n,r){return n[r]=e[r],n},t)},combine:function(t,e){return[].concat(t,e)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var i=e[r],o=i.obj[i.prop],s=Object.keys(o),a=0;a<s.length;++a){var c=s[a],l=o[c];typeof l=="object"&&l!==null&&n.indexOf(l)===-1&&(e.push({obj:o,prop:c}),n.push(l))}return function(u){for(;u.length>1;){var d=u.pop(),h=d.obj[d.prop];if(Qa(h)){for(var f=[],m=0;m<h.length;++m)h[m]!==void 0&&f.push(h[m]);d.obj[d.prop]=f}}}(e),t},decode:function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},encode:function(t,e,n,r,i){if(t.length===0)return t;var o=t;if(typeof t=="symbol"?o=Symbol.prototype.toString.call(t):typeof t!="string"&&(o=String(t)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(l){return"%26%23"+parseInt(l.slice(2),16)+"%3B"});for(var s="",a=0;a<o.length;++a){var c=o.charCodeAt(a);c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||i===ec.RFC1738&&(c===40||c===41)?s+=o.charAt(a):c<128?s+=Gi[c]:c<2048?s+=Gi[192|c>>6]+Gi[128|63&c]:c<55296||c>=57344?s+=Gi[224|c>>12]+Gi[128|c>>6&63]+Gi[128|63&c]:(a+=1,c=65536+((1023&c)<<10|1023&o.charCodeAt(a)),s+=Gi[240|c>>18]+Gi[128|c>>12&63]+Gi[128|c>>6&63]+Gi[128|63&c])}return s},isBuffer:function(t){return!(!t||typeof t!="object")&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},maybeMap:function(t,e){if(Qa(t)){for(var n=[],r=0;r<t.length;r+=1)n.push(e(t[r]));return n}return e(t)},merge:function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Qa(e))e.push(n);else{if(!e||typeof e!="object")return[e,n];(r&&(r.plainObjects||r.allowPrototypes)||!u1.call(Object.prototype,n))&&(e[n]=!0)}return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return Qa(e)&&!Qa(n)&&(i=RO(e,r)),Qa(e)&&Qa(n)?(n.forEach(function(o,s){if(u1.call(e,s)){var a=e[s];a&&typeof a=="object"&&o&&typeof o=="object"?e[s]=t(a,o,r):e.push(o)}else e[s]=o}),e):Object.keys(n).reduce(function(o,s){var a=n[s];return u1.call(o,s)?o[s]=t(o[s],a,r):o[s]=a,o},i)}},DX=Object.prototype.hasOwnProperty,MO={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},Ho=Array.isArray,TX=Array.prototype.push,d4=function(t,e){TX.apply(t,Ho(e)?e:[e])},AX=Date.prototype.toISOString,PO=ec.default,zn={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Yi.encode,encodeValuesOnly:!1,format:PO,formatter:ec.formatters[PO],indices:!1,serializeDate:function(t){return AX.call(t)},skipNulls:!1,strictNullHandling:!1},d1={},SX=function t(e,n,r,i,o,s,a,c,l,u,d,h,f,m,_,w){for(var y=e,v=w,C=0,b=!1;(v=v.get(d1))!==void 0&&!b;){var A=v.get(e);if(C+=1,A!==void 0){if(A===C)throw new RangeError("Cyclic object value");b=!0}v.get(d1)===void 0&&(C=0)}if(typeof c=="function"?y=c(n,y):y instanceof Date?y=d(y):r==="comma"&&Ho(y)&&(y=Yi.maybeMap(y,function(re){return re instanceof Date?d(re):re})),y===null){if(o)return a&&!m?a(n,zn.encoder,_,"key",h):n;y=""}if(function(re){return typeof re=="string"||typeof re=="number"||typeof re=="boolean"||typeof re=="symbol"||typeof re=="bigint"}(y)||Yi.isBuffer(y))return a?[f(m?n:a(n,zn.encoder,_,"key",h))+"="+f(a(y,zn.encoder,_,"value",h))]:[f(n)+"="+f(String(y))];var x,I=[];if(y===void 0)return I;if(r==="comma"&&Ho(y))m&&a&&(y=Yi.maybeMap(y,a)),x=[{value:y.length>0?y.join(",")||null:void 0}];else if(Ho(c))x=c;else{var T=Object.keys(y);x=l?T.sort(l):T}for(var R=i&&Ho(y)&&y.length===1?n+"[]":n,L=0;L<x.length;++L){var N=x[L],S=typeof N=="object"&&N.value!==void 0?N.value:y[N];if(!s||S!==null){var $=Ho(y)?typeof r=="function"?r(R,N):R:R+(u?"."+N:"["+N+"]");w.set(e,C);var F=u4();F.set(d1,w),d4(I,t(S,$,r,i,o,s,r==="comma"&&m&&Ho(y)?null:a,c,l,u,d,h,f,m,_,F))}}return I},C1=Object.prototype.hasOwnProperty,RX=Array.isArray,Tn={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Yi.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},MX=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},h4=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},PX=function(t,e,n,r){if(t){var i=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,o=/(\[[^[\]]*])/g,s=n.depth>0&&/(\[[^[\]]*])/.exec(i),a=s?i.slice(0,s.index):i,c=[];if(a){if(!n.plainObjects&&C1.call(Object.prototype,a)&&!n.allowPrototypes)return;c.push(a)}for(var l=0;n.depth>0&&(s=o.exec(i))!==null&&l<n.depth;){if(l+=1,!n.plainObjects&&C1.call(Object.prototype,s[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+i.slice(s.index)+"]"),function(u,d,h,f){for(var m=f?d:h4(d,h),_=u.length-1;_>=0;--_){var w,y=u[_];if(y==="[]"&&h.parseArrays)w=[].concat(m);else{w=h.plainObjects?Object.create(null):{};var v=y.charAt(0)==="["&&y.charAt(y.length-1)==="]"?y.slice(1,-1):y,C=parseInt(v,10);h.parseArrays||v!==""?!isNaN(C)&&y!==v&&String(C)===v&&C>=0&&h.parseArrays&&C<=h.arrayLimit?(w=[])[C]=m:v!=="__proto__"&&(w[v]=m):w={0:m}}m=w}return m}(c,e,n,r)}},Ls={formats:ec,parse:function(t,e){var n=function(l){if(!l)return Tn;if(l.decoder!==null&&l.decoder!==void 0&&typeof l.decoder!="function")throw new TypeError("Decoder has to be a function.");if(l.charset!==void 0&&l.charset!=="utf-8"&&l.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var u=l.charset===void 0?Tn.charset:l.charset;return{allowDots:l.allowDots===void 0?Tn.allowDots:!!l.allowDots,allowPrototypes:typeof l.allowPrototypes=="boolean"?l.allowPrototypes:Tn.allowPrototypes,allowSparse:typeof l.allowSparse=="boolean"?l.allowSparse:Tn.allowSparse,arrayLimit:typeof l.arrayLimit=="number"?l.arrayLimit:Tn.arrayLimit,charset:u,charsetSentinel:typeof l.charsetSentinel=="boolean"?l.charsetSentinel:Tn.charsetSentinel,comma:typeof l.comma=="boolean"?l.comma:Tn.comma,decoder:typeof l.decoder=="function"?l.decoder:Tn.decoder,delimiter:typeof l.delimiter=="string"||Yi.isRegExp(l.delimiter)?l.delimiter:Tn.delimiter,depth:typeof l.depth=="number"||l.depth===!1?+l.depth:Tn.depth,ignoreQueryPrefix:l.ignoreQueryPrefix===!0,interpretNumericEntities:typeof l.interpretNumericEntities=="boolean"?l.interpretNumericEntities:Tn.interpretNumericEntities,parameterLimit:typeof l.parameterLimit=="number"?l.parameterLimit:Tn.parameterLimit,parseArrays:l.parseArrays!==!1,plainObjects:typeof l.plainObjects=="boolean"?l.plainObjects:Tn.plainObjects,strictNullHandling:typeof l.strictNullHandling=="boolean"?l.strictNullHandling:Tn.strictNullHandling}}(e);if(t===""||t==null)return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?function(l,u){var d,h={__proto__:null},f=u.ignoreQueryPrefix?l.replace(/^\?/,""):l,m=u.parameterLimit===1/0?void 0:u.parameterLimit,_=f.split(u.delimiter,m),w=-1,y=u.charset;if(u.charsetSentinel)for(d=0;d<_.length;++d)_[d].indexOf("utf8=")===0&&(_[d]==="utf8=%E2%9C%93"?y="utf-8":_[d]==="utf8=%26%2310003%3B"&&(y="iso-8859-1"),w=d,d=_.length);for(d=0;d<_.length;++d)if(d!==w){var v,C,b=_[d],A=b.indexOf("]="),x=A===-1?b.indexOf("="):A+1;x===-1?(v=u.decoder(b,Tn.decoder,y,"key"),C=u.strictNullHandling?null:""):(v=u.decoder(b.slice(0,x),Tn.decoder,y,"key"),C=Yi.maybeMap(h4(b.slice(x+1),u),function(I){return u.decoder(I,Tn.decoder,y,"value")})),C&&u.interpretNumericEntities&&y==="iso-8859-1"&&(C=MX(C)),b.indexOf("[]=")>-1&&(C=RX(C)?[C]:C),C1.call(h,v)?h[v]=Yi.combine(h[v],C):h[v]=C}return h}(t,n):t,i=n.plainObjects?Object.create(null):{},o=Object.keys(r),s=0;s<o.length;++s){var a=o[s],c=PX(a,r[a],n,typeof t=="string");i=Yi.merge(i,c,n)}return n.allowSparse===!0?i:Yi.compact(i)},stringify:function(t,e){var n,r=t,i=function(m){if(!m)return zn;if(m.encoder!==null&&m.encoder!==void 0&&typeof m.encoder!="function")throw new TypeError("Encoder has to be a function.");var _=m.charset||zn.charset;if(m.charset!==void 0&&m.charset!=="utf-8"&&m.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var w=ec.default;if(m.format!==void 0){if(!DX.call(ec.formatters,m.format))throw new TypeError("Unknown format option provided.");w=m.format}var y=ec.formatters[w],v=zn.filter;return(typeof m.filter=="function"||Ho(m.filter))&&(v=m.filter),{addQueryPrefix:typeof m.addQueryPrefix=="boolean"?m.addQueryPrefix:zn.addQueryPrefix,allowDots:m.allowDots===void 0?zn.allowDots:!!m.allowDots,charset:_,charsetSentinel:typeof m.charsetSentinel=="boolean"?m.charsetSentinel:zn.charsetSentinel,delimiter:m.delimiter===void 0?zn.delimiter:m.delimiter,encode:typeof m.encode=="boolean"?m.encode:zn.encode,encoder:typeof m.encoder=="function"?m.encoder:zn.encoder,encodeValuesOnly:typeof m.encodeValuesOnly=="boolean"?m.encodeValuesOnly:zn.encodeValuesOnly,filter:v,format:w,formatter:y,serializeDate:typeof m.serializeDate=="function"?m.serializeDate:zn.serializeDate,skipNulls:typeof m.skipNulls=="boolean"?m.skipNulls:zn.skipNulls,sort:typeof m.sort=="function"?m.sort:null,strictNullHandling:typeof m.strictNullHandling=="boolean"?m.strictNullHandling:zn.strictNullHandling}}(e);typeof i.filter=="function"?r=(0,i.filter)("",r):Ho(i.filter)&&(n=i.filter);var o,s=[];if(typeof r!="object"||r===null)return"";o=e&&e.arrayFormat in MO?e.arrayFormat:e&&"indices"in e?e.indices?"indices":"repeat":"indices";var a=MO[o];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=a==="comma"&&e&&e.commaRoundTrip;n||(n=Object.keys(r)),i.sort&&n.sort(i.sort);for(var l=u4(),u=0;u<n.length;++u){var d=n[u];i.skipNulls&&r[d]===null||d4(s,SX(r[d],d,a,c,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,l))}var h=s.join(i.delimiter),f=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),h.length>0?f+h:""}},NX=cc(function(t){function e(n){if(n)return function(r){for(var i in e.prototype)r[i]=e.prototype[i];return r}(n)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(n,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+n]=this._callbacks["$"+n]||[]).push(r),this},e.prototype.once=function(n,r){function i(){this.off(n,i),r.apply(this,arguments)}return i.fn=r,this.on(n,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(n,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i,o=this._callbacks["$"+n];if(!o)return this;if(arguments.length==1)return delete this._callbacks["$"+n],this;for(var s=0;s<o.length;s++)if((i=o[s])===r||i.fn===r){o.splice(s,1);break}return o.length===0&&delete this._callbacks["$"+n],this},e.prototype.emit=function(n){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),i=this._callbacks["$"+n],o=1;o<arguments.length;o++)r[o-1]=arguments[o];if(i){o=0;for(var s=(i=i.slice(0)).length;o<s;++o)i[o].apply(this,r)}return this},e.prototype.listeners=function(n){return this._callbacks=this._callbacks||{},this._callbacks["$"+n]||[]},e.prototype.hasListeners=function(n){return!!this.listeners(n).length}}),kX=Bh;Bh.default=Bh,Bh.stable=NO,Bh.stableStringify=NO;var sc=[],tc=[];function f4(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function Bh(t,e,n,r){var i;r===void 0&&(r=f4()),function s(a,c,l,u,d,h,f){var m;if(h+=1,typeof a=="object"&&a!==null){for(m=0;m<u.length;m++)if(u[m]===a)return void su("[Circular]",a,c,d);if(f.depthLimit!==void 0&&h>f.depthLimit||f.edgesLimit!==void 0&&l+1>f.edgesLimit)return void su("[...]",a,c,d);if(u.push(a),Array.isArray(a))for(m=0;m<a.length;m++)s(a[m],m,m,u,a,h,f);else{var _=Object.keys(a);for(m=0;m<_.length;m++){var w=_[m];s(a[w],w,m,u,a,h,f)}}u.pop()}}(t,"",0,[],void 0,0,r);try{i=tc.length===0?JSON.stringify(t,e,n):JSON.stringify(t,p4(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sc.length!==0;){var o=sc.pop();o.length===4?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}}return i}function su(t,e,n,r){var i=Object.getOwnPropertyDescriptor(r,n);i.get!==void 0?i.configurable?(Object.defineProperty(r,n,{value:t}),sc.push([r,n,e,i])):tc.push([e,n,t]):(r[n]=t,sc.push([r,n,e]))}function FX(t,e){return t<e?-1:t>e?1:0}function NO(t,e,n,r){r===void 0&&(r=f4());var i,o=function a(c,l,u,d,h,f,m){var _;if(f+=1,typeof c=="object"&&c!==null){for(_=0;_<d.length;_++)if(d[_]===c)return void su("[Circular]",c,l,h);try{if(typeof c.toJSON=="function")return}catch{return}if(m.depthLimit!==void 0&&f>m.depthLimit||m.edgesLimit!==void 0&&u+1>m.edgesLimit)return void su("[...]",c,l,h);if(d.push(c),Array.isArray(c))for(_=0;_<c.length;_++)a(c[_],_,_,d,c,f,m);else{var w={},y=Object.keys(c).sort(FX);for(_=0;_<y.length;_++){var v=y[_];a(c[v],v,_,d,c,f,m),w[v]=c[v]}if(h===void 0)return w;sc.push([h,l,c]),h[l]=w}d.pop()}}(t,"",0,[],void 0,0,r)||t;try{i=tc.length===0?JSON.stringify(o,e,n):JSON.stringify(o,p4(e),n)}catch{return JSON.stringify("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;sc.length!==0;){var s=sc.pop();s.length===4?Object.defineProperty(s[0],s[1],s[3]):s[0][s[1]]=s[2]}}return i}function p4(t){return t=t!==void 0?t:function(e,n){return n},function(e,n){if(tc.length>0)for(var r=0;r<tc.length;r++){var i=tc[r];if(i[1]===e&&i[0]===n){n=i[2],tc.splice(r,1);break}}return t.call(this,e,n)}}var or=cc(function(t,e){function n(o){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s})(o)}function r(o,s){var a=typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(!a){if(Array.isArray(o)||(a=function(f,m){if(f){if(typeof f=="string")return i(f,m);var _=Object.prototype.toString.call(f).slice(8,-1);if(_==="Object"&&f.constructor&&(_=f.constructor.name),_==="Map"||_==="Set")return Array.from(f);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return i(f,m)}}(o))||s&&o&&typeof o.length=="number"){a&&(o=a);var c=0,l=function(){};return{s:l,n:function(){return c>=o.length?{done:!0}:{done:!1,value:o[c++]}},e:function(f){throw f},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,d=!0,h=!1;return{s:function(){a=a.call(o)},n:function(){var f=a.next();return d=f.done,f},e:function(f){h=!0,u=f},f:function(){try{d||a.return==null||a.return()}finally{if(h)throw u}}}}function i(o,s){(s==null||s>o.length)&&(s=o.length);for(var a=0,c=new Array(s);a<s;a++)c[a]=o[a];return c}e.type=function(o){return o.split(/ *; */).shift()},e.params=function(o){var s,a={},c=r(o.split(/ *; */));try{for(c.s();!(s=c.n()).done;){var l=s.value.split(/ *= */),u=l.shift(),d=l.shift();u&&d&&(a[u]=d)}}catch(h){c.e(h)}finally{c.f()}return a},e.parseLinks=function(o){var s,a={},c=r(o.split(/ *, */));try{for(c.s();!(s=c.n()).done;){var l=s.value.split(/ *; */),u=l[0].slice(1,-1);a[l[1].split(/ *= */)[1].slice(1,-1)]=u}}catch(d){c.e(d)}finally{c.f()}return a},e.cleanHeader=function(o,s){return delete o["content-type"],delete o["content-length"],delete o["transfer-encoding"],delete o.host,s&&(delete o.authorization,delete o.cookie),o},e.isObject=function(o){return o!==null&&n(o)==="object"},e.hasOwn=Object.hasOwn||function(o,s){if(o==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(new Object(o),s)},e.mixin=function(o,s){for(var a in s)e.hasOwn(s,a)&&(o[a]=s[a])}});or.type,or.params,or.parseLinks,or.cleanHeader,or.isObject,or.hasOwn,or.mixin;function m4(t){return(m4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var z0=or.isObject,jh=or.hasOwn,OX=rt;function rt(){}rt.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},rt.prototype.parse=function(t){return this._parser=t,this},rt.prototype.responseType=function(t){return this._responseType=t,this},rt.prototype.serialize=function(t){return this._serializer=t,this},rt.prototype.timeout=function(t){if(!t||m4(t)!=="object")return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(jh(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this},rt.prototype.retry=function(t,e){return arguments.length!==0&&t!==!0||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var LX=new Set(["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"]),VX=new Set([408,413,429,500,502,503,504,521,522,524]);rt.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(t,e);if(n===!0)return!0;if(n===!1)return!1}catch(r){console.error(r)}return!!(e&&e.status&&VX.has(e.status)||t&&(t.code&&LX.has(t.code)||t.timeout&&t.code==="ECONNABORTED"||t.crossDomain))},rt.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},rt.prototype.then=function(t,e){var n=this;if(!this._fullfilledPromise){var r=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(i,o){r.on("abort",function(){if(!(n._maxRetries&&n._maxRetries>n._retries))if(n.timedout&&n.timedoutError)o(n.timedoutError);else{var s=new Error("Aborted");s.code="ABORTED",s.status=n.status,s.method=n.method,s.url=n.url,o(s)}}),r.end(function(s,a){s?o(s):i(a)})})}return this._fullfilledPromise.then(t,e)},rt.prototype.catch=function(t){return this.then(void 0,t)},rt.prototype.use=function(t){return t(this),this},rt.prototype.ok=function(t){if(typeof t!="function")throw new Error("Callback required");return this._okCallback=t,this},rt.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},rt.prototype.get=function(t){return this._header[t.toLowerCase()]},rt.prototype.getHeader=rt.prototype.get,rt.prototype.set=function(t,e){if(z0(t)){for(var n in t)jh(t,n)&&this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},rt.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},rt.prototype.field=function(t,e,n){if(t==null)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(z0(t)){for(var r in t)jh(t,r)&&this.field(r,t[r]);return this}if(Array.isArray(e)){for(var i in e)jh(e,i)&&this.field(t,e[i]);return this}if(e==null)throw new Error(".field(name, val) val can not be empty");return typeof e=="boolean"&&(e=String(e)),n?this._getFormData().append(t,e,n):this._getFormData().append(t,e),this},rt.prototype.abort=function(){if(this._aborted)return this;if(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req){if(ou.gte(process.version,"v13.0.0")&&ou.lt(process.version,"v14.0.0"))throw new Error("Superagent does not work in v13 properly with abort() due to Node.js core changes");ou.gte(process.version,"v14.0.0")&&(this.req.destroyed=!0),this.req.abort()}return this.clearTimeout(),this.emit("abort"),this},rt.prototype._auth=function(t,e,n,r){switch(n.type){case"basic":this.set("Authorization","Basic ".concat(r("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},rt.prototype.withCredentials=function(t){return t===void 0&&(t=!0),this._withCredentials=t,this},rt.prototype.redirects=function(t){return this._maxRedirects=t,this},rt.prototype.maxResponseSize=function(t){if(typeof t!="number")throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},rt.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},rt.prototype.send=function(t){var e=z0(t),n=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&z0(this._data))for(var r in t)jh(t,r)&&(this._data[r]=t[r]);else typeof t=="string"?(n||this.type("form"),(n=this._header["content-type"])&&(n=n.toLowerCase().trim()),this._data=n==="application/x-www-form-urlencoded"?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)||n||this.type("json"),this},rt.prototype.sortQuery=function(t){return this._sort=t===void 0||t,this},rt.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var n=this.url.slice(e+1).split("&");typeof this._sort=="function"?n.sort(this._sort):n.sort(),this.url=this.url.slice(0,e)+"?"+n.join("&")}}},rt.prototype._appendQueryString=function(){console.warn("Unsupported")},rt.prototype._timeoutError=function(t,e,n){if(!this._aborted){var r=new Error("".concat(t+e,"ms exceeded"));r.timeout=e,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.timedoutError=r,this.abort(),this.callback(r)}},rt.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))};var BX=Z0;function Z0(){}function jX(t){return function(e){if(Array.isArray(e))return b1(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||g4(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g4(t,e){if(t){if(typeof t=="string")return b1(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b1(t,e):void 0}}function b1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function k1(){this._defaults=[]}Z0.prototype.get=function(t){return this.header[t.toLowerCase()]},Z0.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=or.type(e);var n=or.params(e);for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(this[r]=n[r]);this.links={};try{t.link&&(this.links=or.parseLinks(t.link))}catch{}},Z0.prototype._setStatusProperties=function(t){var e=Math.trunc(t/100);this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=e===1,this.ok=e===2,this.redirect=e===3,this.clientError=e===4,this.serverError=e===5,this.error=(e===4||e===5)&&this.toError(),this.created=t===201,this.accepted=t===202,this.noContent=t===204,this.badRequest=t===400,this.unauthorized=t===401,this.notAcceptable=t===406,this.forbidden=t===403,this.notFound=t===404,this.unprocessableEntity=t===422};for(kO=function(){var t=h1[W0];k1.prototype[t]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._defaults.push({fn:t,args:n}),this}},W0=0,h1=["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"];W0<h1.length;W0++)kO();var kO,W0,h1;k1.prototype._setDefaults=function(t){var e,n=function(i,o){var s=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!s){if(Array.isArray(i)||(s=g4(i))||o&&i&&typeof i.length=="number"){s&&(i=s);var a=0,c=function(){};return{s:c,n:function(){return a>=i.length?{done:!0}:{done:!1,value:i[a++]}},e:function(h){throw h},f:c}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,u=!0,d=!1;return{s:function(){s=s.call(i)},n:function(){var h=s.next();return u=h.done,h},e:function(h){d=!0,l=h},f:function(){try{u||s.return==null||s.return()}finally{if(d)throw l}}}}(this._defaults);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.fn].apply(t,jX(r.args))}}catch(i){n.e(i)}finally{n.f()}};for(Vh=k1,qh=cc(function(t,e){function n(x){return(n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I})(x)}function r(x,I){var T=typeof Symbol<"u"&&x[Symbol.iterator]||x["@@iterator"];if(!T){if(Array.isArray(x)||(T=function(F,re){if(F){if(typeof F=="string")return i(F,re);var ce=Object.prototype.toString.call(F).slice(8,-1);if(ce==="Object"&&F.constructor&&(ce=F.constructor.name),ce==="Map"||ce==="Set")return Array.from(F);if(ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce))return i(F,re)}}(x))||I&&x&&typeof x.length=="number"){T&&(x=T);var R=0,L=function(){};return{s:L,n:function(){return R>=x.length?{done:!0}:{done:!1,value:x[R++]}},e:function(F){throw F},f:L}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N,S=!0,$=!1;return{s:function(){T=T.call(x)},n:function(){var F=T.next();return S=F.done,F},e:function(F){$=!0,N=F},f:function(){try{S||T.return==null||T.return()}finally{if($)throw N}}}}function i(x,I){(I==null||I>x.length)&&(I=x.length);for(var T=0,R=new Array(I);T<I;T++)R[T]=x[T];return R}var o;typeof window<"u"?o=window:typeof self>"u"?(console.warn("Using browser-only version of superagent in non-browser environment"),o=void 0):o=self;var s=or.isObject,a=or.mixin,c=or.hasOwn;function l(){}t.exports=function(x,I){return typeof I=="function"?new e.Request("GET",x).end(I):arguments.length===1?new e.Request("GET",x):new e.Request(x,I)};var u=e=t.exports;e.Request=y,u.getXHR=function(){if(o.XMLHttpRequest&&(!o.location||o.location.protocol!=="file:"||!o.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch{}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch{}throw new Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(x){return x.trim()}:function(x){return x.replace(/(^\s*|\s*$)/g,"")};function h(x){if(!s(x))return x;var I=[];for(var T in x)c(x,T)&&f(I,T,x[T]);return I.join("&")}function f(x,I,T){if(T!==void 0)if(T!==null)if(Array.isArray(T)){var R,L=r(T);try{for(L.s();!(R=L.n()).done;)f(x,I,R.value)}catch(S){L.e(S)}finally{L.f()}}else if(s(T))for(var N in T)c(T,N)&&f(x,"".concat(I,"[").concat(N,"]"),T[N]);else x.push(encodeURI(I)+"="+encodeURIComponent(T));else x.push(encodeURI(I))}function m(x){for(var I,T,R={},L=x.split("&"),N=0,S=L.length;N<S;++N)(T=(I=L[N]).indexOf("="))===-1?R[decodeURIComponent(I)]="":R[decodeURIComponent(I.slice(0,T))]=decodeURIComponent(I.slice(T+1));return R}function _(x){return/[/+]json($|[^-\w])/i.test(x)}function w(x){this.req=x,this.xhr=this.req.xhr,this.text=this.req.method!=="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||this.xhr.responseType===void 0?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var I=this.xhr.status;I===1223&&(I=204),this._setStatusProperties(I),this.headers=function(T){for(var R,L,N,S,$=T.split(/\r?\n/),F={},re=0,ce=$.length;re<ce;++re)(R=(L=$[re]).indexOf(":"))!==-1&&(N=L.slice(0,R).toLowerCase(),S=d(L.slice(R+1)),F[N]=S);return F}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.text===null&&x._responseType?this.body=this.xhr.response:this.body=this.req.method==="HEAD"?null:this._parseBody(this.text?this.text:this.xhr.response)}function y(x,I){var T=this;this._query=this._query||[],this.method=x,this.url=I,this.header={},this._header={},this.on("end",function(){var R,L=null,N=null;try{N=new w(T)}catch(S){return(L=new Error("Parser is unable to parse the response")).parse=!0,L.original=S,T.xhr?(L.rawResponse=T.xhr.responseType===void 0?T.xhr.responseText:T.xhr.response,L.status=T.xhr.status?T.xhr.status:null,L.statusCode=L.status):(L.rawResponse=null,L.status=null),T.callback(L)}T.emit("response",N);try{T._isResponseOK(N)||(R=new Error(N.statusText||N.text||"Unsuccessful HTTP response"))}catch(S){R=S}R?(R.original=L,R.response=N,R.status=N.status,T.callback(R,N)):T.callback(null,N)})}u.serializeObject=h,u.parseString=m,u.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},u.serialize={"application/x-www-form-urlencoded":Ls.stringify,"application/json":kX},u.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse},a(w.prototype,BX.prototype),w.prototype._parseBody=function(x){var I=u.parse[this.type];return this.req._parser?this.req._parser(this,x):(!I&&_(this.type)&&(I=u.parse["application/json"]),I&&x&&(x.length>0||x instanceof Object)?I(x):null)},w.prototype.toError=function(){var x=this.req,I=x.method,T=x.url,R="cannot ".concat(I," ").concat(T," (").concat(this.status,")"),L=new Error(R);return L.status=this.status,L.method=I,L.url=T,L},u.Response=w,NX(y.prototype),a(y.prototype,OX.prototype),y.prototype.type=function(x){return this.set("Content-Type",u.types[x]||x),this},y.prototype.accept=function(x){return this.set("Accept",u.types[x]||x),this},y.prototype.auth=function(x,I,T){arguments.length===1&&(I=""),n(I)==="object"&&I!==null&&(T=I,I=""),T||(T={type:typeof btoa=="function"?"basic":"auto"});var R=T.encoder?T.encoder:function(L){if(typeof btoa=="function")return btoa(L);throw new Error("Cannot use basic auth, btoa is not a function")};return this._auth(x,I,T,R)},y.prototype.query=function(x){return typeof x!="string"&&(x=h(x)),x&&this._query.push(x),this},y.prototype.attach=function(x,I,T){if(I){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(x,I,T||I.name)}return this},y.prototype._getFormData=function(){return this._formData||(this._formData=new o.FormData),this._formData},y.prototype.callback=function(x,I){if(this._shouldRetry(x,I))return this._retry();var T=this._callback;this.clearTimeout(),x&&(this._maxRetries&&(x.retries=this._retries-1),this.emit("error",x)),T(x,I)},y.prototype.crossDomainError=function(){var x=new Error(`Request has been terminated
Possible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.`);x.crossDomain=!0,x.status=this.status,x.method=this.method,x.url=this.url,this.callback(x)},y.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},y.prototype.ca=y.prototype.agent,y.prototype.buffer=y.prototype.ca,y.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},y.prototype.pipe=y.prototype.write,y.prototype._isHost=function(x){return x&&n(x)==="object"&&!Array.isArray(x)&&Object.prototype.toString.call(x)!=="[object Object]"},y.prototype.end=function(x){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=x||l,this._finalizeQueryString(),this._end()},y.prototype._setUploadTimeout=function(){var x=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){x._timeoutError("Upload timeout of ",x._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},y.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var x=this;this.xhr=u.getXHR();var I=this.xhr,T=this._formData||this._data;this._setTimeouts(),I.addEventListener("readystatechange",function(){var $=I.readyState;if($>=2&&x._responseTimeoutTimer&&clearTimeout(x._responseTimeoutTimer),$===4){var F;try{F=I.status}catch{F=0}if(!F)return x.timedout||x._aborted?void 0:x.crossDomainError();x.emit("end")}});var R=function($,F){F.total>0&&(F.percent=F.loaded/F.total*100,F.percent===100&&clearTimeout(x._uploadTimeoutTimer)),F.direction=$,x.emit("progress",F)};if(this.hasListeners("progress"))try{I.addEventListener("progress",R.bind(null,"download")),I.upload&&I.upload.addEventListener("progress",R.bind(null,"upload"))}catch{}I.upload&&this._setUploadTimeout();try{this.username&&this.password?I.open(this.method,this.url,!0,this.username,this.password):I.open(this.method,this.url,!0)}catch($){return this.callback($)}if(this._withCredentials&&(I.withCredentials=!0),!this._formData&&this.method!=="GET"&&this.method!=="HEAD"&&typeof T!="string"&&!this._isHost(T)){var L=this._header["content-type"],N=this._serializer||u.serialize[L?L.split(";")[0]:""];!N&&_(L)&&(N=u.serialize["application/json"]),N&&(T=N(T))}for(var S in this.header)this.header[S]!==null&&c(this.header,S)&&I.setRequestHeader(S,this.header[S]);this._responseType&&(I.responseType=this._responseType),this.emit("request",this),I.send(T===void 0?null:T)},u.agent=function(){return new Vh};for(var v=function(){var x=b[C];Vh.prototype[x.toLowerCase()]=function(I,T){var R=new u.Request(x,I);return this._setDefaults(R),T&&R.end(T),R}},C=0,b=["GET","POST","OPTIONS","PATCH","PUT","DELETE"];C<b.length;C++)v();function A(x,I,T){var R=u("DELETE",x);return typeof I=="function"&&(T=I,I=null),I&&R.send(I),T&&R.end(T),R}Vh.prototype.del=Vh.prototype.delete,u.get=function(x,I,T){var R=u("GET",x);return typeof I=="function"&&(T=I,I=null),I&&R.query(I),T&&R.end(T),R},u.head=function(x,I,T){var R=u("HEAD",x);return typeof I=="function"&&(T=I,I=null),I&&R.query(I),T&&R.end(T),R},u.options=function(x,I,T){var R=u("OPTIONS",x);return typeof I=="function"&&(T=I,I=null),I&&R.send(I),T&&R.end(T),R},u.del=A,u.delete=A,u.patch=function(x,I,T){var R=u("PATCH",x);return typeof I=="function"&&(T=I,I=null),I&&R.send(I),T&&R.end(T),R},u.post=function(x,I,T){var R=u("POST",x);return typeof I=="function"&&(T=I,I=null),I&&R.send(I),T&&R.end(T),R},u.put=function(x,I,T){var R=u("PUT",x);return typeof I=="function"&&(T=I,I=null),I&&R.send(I),T&&R.end(T),R}}),y4=(qh.Request,function(t){var e=LO(t),n=e[0],r=e[1];return 3*(n+r)/4-r}),v4=function(t){var e,n,r=LO(t),i=r[0],o=r[1],s=new FO(function(l,u,d){return 3*(u+d)/4-d}(0,i,o)),a=0,c=o>0?i-4:i;for(n=0;n<c;n+=4)e=Pr[t.charCodeAt(n)]<<18|Pr[t.charCodeAt(n+1)]<<12|Pr[t.charCodeAt(n+2)]<<6|Pr[t.charCodeAt(n+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;return o===2&&(e=Pr[t.charCodeAt(n)]<<2|Pr[t.charCodeAt(n+1)]>>4,s[a++]=255&e),o===1&&(e=Pr[t.charCodeAt(n)]<<10|Pr[t.charCodeAt(n+1)]<<4|Pr[t.charCodeAt(n+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e),s},_4=function(t){for(var e,n=t.length,r=n%3,i=[],o=0,s=n-r;o<s;o+=16383)i.push(UX(t,o,o+16383>s?s:o+16383));return r===1?(e=t[n-1],i.push(_i[e>>2]+_i[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(_i[e>>10]+_i[e>>4&63]+_i[e<<2&63]+"=")),i.join("")},_i=[],Pr=[],FO=typeof Uint8Array<"u"?Uint8Array:Array,G0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ya=0,OO=G0.length;Ya<OO;++Ya)_i[Ya]=G0[Ya],Pr[G0.charCodeAt(Ya)]=Ya;var Vh,qh,y4,v4,_4,_i,Pr,FO,G0,Ya,OO;function LO(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return n===-1&&(n=e),[n,n===e?0:4-n%4]}function UX(t,e,n){for(var r,i,o=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),o.push(_i[(i=r)>>18&63]+_i[i>>12&63]+_i[i>>6&63]+_i[63&i]);return o.join("")}Pr[45]=62,Pr[95]=63;var VO={byteLength:y4,toByteArray:v4,fromByteArray:_4},$X={encode:function(t){return VO.fromByteArray(function(e){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(t)).replace(/\+/g,"-").replace(/\//g,"_")},decode:function(t){return t=function(e){var n=e.length%4;return n===0?e:e+new Array(1+(4-n)).join("=")}(t).replace(/-/g,"+").replace(/_/g,"/"),function(e){for(var n="",r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n}(VO.toByteArray(t))}},ny={raw:"9.24.1"},qX=Object.prototype.toString;function BO(t,e,n,r){if(n=n==="array"?"object":n,t&&typeof t[e]!==n)throw new Error(r)}function jO(t,e,n){if(typeof t!==e)throw new Error(n)}function UO(t,e,n){if(e.indexOf(t)===-1)throw new Error(n)}var ye={check:function(t,e,n){if(e.optional&&!t||jO(t,e.type,e.message),e.type==="object"&&n)for(var r=Object.keys(n),i=0;i<r.length;i++){var o=r[i];n[o].optional&&!t[o]||n[o].condition&&!n[o].condition(t)||(BO(t,o,n[o].type,n[o].message),n[o].values&&UO(t[o],n[o].values,n[o].value_message))}},attribute:BO,variable:jO,value:UO,isArray:function(t){return this.supportsIsArray()?Array.isArray(t):qX.call(t)==="[object Array]"},supportsIsArray:function(){return Array.isArray!=null}};function $O(t){if(t==null)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i=Object.keys(Object(r)),o=0,s=i.length;o<s;o++){var a=i[o],c=Object.getOwnPropertyDescriptor(r,a);c!==void 0&&c.enumerable&&(e[a]=r[a])}}return e}var HX={get:function(){return Object.assign?Object.assign:$O},objectAssignPolyfill:$O};function f1(t,e){return e.reduce(function(n,r){return t[r]&&(n[r]=t[r]),n},{})}function zX(t){var e=[];for(var n in t)e.push(t[n]);return e}function I1(){var t=zX(arguments);return t.unshift({}),HX.get().apply(void 0,t)}function qO(t){var e=t.match(/^(https?:|file:|chrome-extension:)\/\/(([^:/?#]*)(?::([0-9]+))?)([/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return e&&{href:t,protocol:e[1],host:e[2],hostname:e[3],port:e[4],pathname:e[5],search:e[6],hash:e[7]}}function WX(t,e){var n=I1(t);return t[e]&&(n[e]=t[e].trim()),n}var he={toSnakeCase:function t(e,n){return typeof e!="object"||ye.isArray(e)||e===null?e:(n=n||[],Object.keys(e).reduce(function(r,i){return r[n.indexOf(i)===-1?function(o){for(var s,a="",c=0,l=!0,u=!0;c<o.length;)s=o.charCodeAt(c),(!u&&s>=65&&s<=90||!l&&s>=48&&s<=57)&&(a+="_"),a+=o[c].toLowerCase(),l=s>=48&&s<=57,u=s>=65&&s<=90,c++;return a}(i):i]=t(e[i]),r},{}))},toCamelCase:function t(e,n,r){return typeof e!="object"||ye.isArray(e)||e===null?e:(n=n||[],r=r||{},Object.keys(e).reduce(function(i,o){var s,a=n.indexOf(o)===-1?(s=o.split("_")).reduce(function(c,l){return c+l.charAt(0).toUpperCase()+l.slice(1)},s.shift()):o;return i[a]=t(e[a]||e[o],[],r),r.keepOriginal&&(i[o]=t(e[o],[],r)),i},{}))},blacklist:function(t,e){return Object.keys(t).reduce(function(n,r){return e.indexOf(r)===-1&&(n[r]=t[r]),n},{})},merge:function(t,e){return{base:e?f1(t,e):t,with:function(n,r){return n=r?f1(n,r):n,I1(this.base,n)}}},pick:f1,getKeysNotIn:function(t,e){var n=[];for(var r in t)e.indexOf(r)===-1&&n.push(r);return n},extend:I1,getOriginFromUrl:function(t){if(t){var e=qO(t);if(!e)return null;var n=e.protocol+"//"+e.hostname;return e.port&&(n+=":"+e.port),n}},getLocationFromUrl:qO,trimUserDetails:function(t){return function(e,n){return n.reduce(WX,e)}(t,["username","email","phoneNumber"])},updatePropertyOn:function t(e,n,r){typeof n=="string"&&(n=n.split("."));var i=n[0];e.hasOwnProperty(i)&&(n.length===1?e[i]=r:t(e[i],n.slice(1),r))}};function Zl(t){this.request=t,this.method=t.method,this.url=t.url,this.body=t._data,this.headers=t._header}function Xa(t){this.request=t}function Xi(t){this._sendTelemetry=t._sendTelemetry!==!1||t._sendTelemetry,this._telemetryInfo=t._telemetryInfo||null,this._timesToRetryFailedRequests=t._timesToRetryFailedRequests,this.headers=t.headers||{},this._universalLoginPage=t.universalLoginPage}function K0(){return window}Zl.prototype.abort=function(){this.request.abort()},Zl.prototype.getMethod=function(){return this.method},Zl.prototype.getBody=function(){return this.body},Zl.prototype.getUrl=function(){return this.url},Zl.prototype.getHeaders=function(){return this.headers},Xa.prototype.set=function(t,e){return this.request=this.request.set(t,e),this},Xa.prototype.send=function(t){return this.request=this.request.send(he.trimUserDetails(t)),this},Xa.prototype.withCredentials=function(){return this.request=this.request.withCredentials(),this},Xa.prototype.end=function(t){return this.request.end(t),new Zl(this.request)},Xi.prototype.setCommonConfiguration=function(t,e){if(e=e||{},this._timesToRetryFailedRequests>0&&(t=t.retry(this._timesToRetryFailedRequests)),e.noHeaders)return t;var n=this.headers;t=t.set("Content-Type","application/json"),e.xRequestLanguage&&(t=t.set("X-Request-Language",e.xRequestLanguage));for(var r=Object.keys(this.headers),i=0;i<r.length;i++)t=t.set(r[i],n[r[i]]);return this._sendTelemetry&&(t=t.set("Auth0-Client",this.getTelemetryData())),t},Xi.prototype.getTelemetryData=function(){var t=this._universalLoginPage?"auth0.js-ulp":"auth0.js",e={name:t,version:ny.raw};this._telemetryInfo&&((e=he.extend({},this._telemetryInfo)).env=he.extend({},this._telemetryInfo.env),e.env[t]=ny.raw);var n=JSON.stringify(e);return $X.encode(n)},Xi.prototype.get=function(t,e){return new Xa(this.setCommonConfiguration(qh.get(t),e))},Xi.prototype.post=function(t,e){return new Xa(this.setCommonConfiguration(qh.post(t),e))},Xi.prototype.patch=function(t,e){return new Xa(this.setCommonConfiguration(qh.patch(t),e))};var pt={redirect:function(t){K0().location=t},getDocument:function(){return K0().document},getWindow:K0,getOrigin:function(){var t=K0().location,e=t.origin;return e||(e=he.getOriginFromUrl(t.href)),e}};function Hh(){}Hh.prototype.getItem=function(){return null},Hh.prototype.removeItem=function(){},Hh.prototype.setItem=function(){};var Jl=cc(function(t,e){var n;n=function(){function r(){for(var o=0,s={};o<arguments.length;o++){var a=arguments[o];for(var c in a)s[c]=a[c]}return s}function i(o){return o.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function o(s){function a(){}function c(u,d,h){if(typeof document<"u"){typeof(h=r({path:"/"},a.defaults,h)).expires=="number"&&(h.expires=new Date(1*new Date+864e5*h.expires)),h.expires=h.expires?h.expires.toUTCString():"";try{var f=JSON.stringify(d);/^[\{\[]/.test(f)&&(d=f)}catch{}d=s.write?s.write(d,u):encodeURIComponent(String(d)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),u=encodeURIComponent(String(u)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var m="";for(var _ in h)h[_]&&(m+="; "+_,h[_]!==!0&&(m+="="+h[_].split(";")[0]));return document.cookie=u+"="+d+m}}function l(u,d){if(typeof document<"u"){for(var h={},f=document.cookie?document.cookie.split("; "):[],m=0;m<f.length;m++){var _=f[m].split("="),w=_.slice(1).join("=");d||w.charAt(0)!=='"'||(w=w.slice(1,-1));try{var y=i(_[0]);if(w=(s.read||s)(w,y)||i(w),d)try{w=JSON.parse(w)}catch{}if(h[y]=w,u===y)break}catch{}}return u?h[u]:h}}return a.set=c,a.get=function(u){return l(u,!1)},a.getJSON=function(u){return l(u,!0)},a.remove=function(u,d){c(u,"",r(d,{expires:-1}))},a.defaults={},a.withConverter=o,a}(function(){})},t.exports=n()});function p1(t){return"_"+t+"_compat"}function tu(t){this._options=t||{}}function lc(t){this.disableWarnings=t.disableWarnings}function Uh(t){if(this.warn=new lc({}),this.storage=new tu(t),t.__tryLocalStorageFirst===!0)try{var e=pt.getWindow().localStorage;e&&(this.storage=e)}catch(n){this.warn.warning(n),this.warn.warning("Can't use localStorage. Using CookieStorage instead.")}}function au(t){this.handler=new Uh(t)}function ry(t){this.storage=new au(t)}function HO(t,e){return{error:t,errorDescription:e}}tu.prototype.getItem=function(t){return Jl.get(t)||Jl.get(p1(t))},tu.prototype.removeItem=function(t){var e={};this._options.cookieDomain&&(e.domain=this._options.cookieDomain),Jl.remove(t,e),Jl.remove(p1(t),e)},tu.prototype.setItem=function(t,e,n){var r=he.extend({expires:1},n);if(pt.getWindow().location.protocol==="https:"&&(r.secure=!0,r.sameSite="none",this._options.legacySameSiteCookie)){var i=he.blacklist(r,["sameSite"]);Jl.set(p1(t),e,i)}this._options.cookieDomain&&(r.domain=this._options.cookieDomain),Jl.set(t,e,r)},lc.prototype.warning=function(t){this.disableWarnings||console.warn(t)},Uh.prototype.failover=function(){this.storage instanceof Hh?this.warn.warning("DummyStorage: ignore failover"):this.storage instanceof tu?(this.warn.warning("CookieStorage: failing over DummyStorage"),this.storage=new Hh):(this.warn.warning("LocalStorage: failing over CookieStorage"),this.storage=new tu)},Uh.prototype.getItem=function(t){try{return this.storage.getItem(t)}catch(e){return this.warn.warning(e),this.failover(),this.getItem(t)}},Uh.prototype.removeItem=function(t){try{return this.storage.removeItem(t)}catch(e){return this.warn.warning(e),this.failover(),this.removeItem(t)}},Uh.prototype.setItem=function(t,e,n){try{return this.storage.setItem(t,e,n)}catch(r){return this.warn.warning(r),this.failover(),this.setItem(t,e,n)}},au.prototype.getItem=function(t){var e=this.handler.getItem(t);try{return JSON.parse(e)}catch{return e}},au.prototype.removeItem=function(t){return this.handler.removeItem(t)},au.prototype.setItem=function(t,e,n){var r=JSON.stringify(e);return this.handler.setItem(t,r,n)},ry.prototype.set=function(t,e){var n={lastUsedConnection:t,lastUsedSub:e};this.storage.setItem("auth0.ssodata",JSON.stringify(n))},ry.prototype.get=function(){var t=this.storage.getItem("auth0.ssodata");if(t)return JSON.parse(t)};var Ki={buildResponse:HO,invalidToken:function(t){return HO("invalid_token",t)}};function Xt(t,e){return(e=e||{}).ignoreCasing=!!e.ignoreCasing&&e.ignoreCasing,function(n,r){var i;return n||r?(!n&&r.err&&(n=r.err,r=null),!n&&r.error&&(n=r,r=null),n?(i={original:n},he.updatePropertyOn(i,"original.response.req._data.password","*****"),n.response&&n.response.statusCode&&(i.statusCode=n.response.statusCode),n.response&&n.response.statusText&&(i.statusText=n.response.statusText),n.response&&n.response.body&&(n=n.response.body),n.err&&(n=n.err),i.code=n.code||n.error||n.error_code||n.status||null,i.description=n.errorDescription||n.error_description||n.description||n.error||n.details||n.err||null,e.forceLegacyError&&(i.error=i.code,i.error_description=i.description),n.error_codes&&n.error_details&&(i.errorDetails={codes:n.error_codes,details:n.error_details}),n.name&&(i.name=n.name),n.policy&&(i.policy=n.policy),t(i)):!r.type||r.type!=="text/html"&&r.type!=="text/plain"?e.ignoreCasing?t(null,r.body||r):t(null,he.toCamelCase(r.body||r,[],{keepOriginal:e.keepOriginalCasing})):t(null,r.text)):t(Ki.buildResponse("generic_error","Something went wrong"))}}var GX=["realm","audience","otp","client_id","client_secret","redirect_uri","scope","code","grant_type","username","password","refresh_token","assertion","client_assertion","client_assertion_type","code_verifier"],KX=["connection","connection_scope","auth0Client","owp","device","realm","organization","invitation","protocol","_csrf","_intstate","login_ticket","client_id","response_type","response_mode","redirect_uri","audience","scope","state","nonce","display","prompt","screen_hint","max_age","ui_locales","claims_locales","id_token_hint","login_hint","acr_values","claims","registration","request","request_uri","code_challenge","code_challenge_method","access_type","display"],zO={oauthTokenParams:function(t,e){return he.pick(e,GX)},oauthAuthorizeParams:function(t,e){var n=he.getKeysNotIn(e,KX);return n.length>0&&t.warning("Following parameters are not allowed on the `/authorize` endpoint: ["+n.join(",")+"]"),e}},ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uc(t){var e={exports:{}};return t(e,e.exports),e.exports}var QX=uc(function(t,e){t.exports=function(){function n(p){return typeof p=="function"}var r=Array.isArray?Array.isArray:function(p){return Object.prototype.toString.call(p)==="[object Array]"},i=0,o=void 0,s=void 0,a=function(p,E){m[i]=p,m[i+1]=E,(i+=2)===2&&(s?s(_):b())},c=typeof window<"u"?window:void 0,l=c||{},u=l.MutationObserver||l.WebKitMutationObserver,d=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",h=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function f(){var p=setTimeout;return function(){return p(_,1)}}var m=new Array(1e3);function _(){for(var p=0;p<i;p+=2)(0,m[p])(m[p+1]),m[p]=void 0,m[p+1]=void 0;i=0}var w,y,v,C,b=void 0;function A(p,E){var D=this,M=new this.constructor(T);M[I]===void 0&&q(M);var P=D._state;if(P){var H=arguments[P-1];a(function(){return Ee(P,M,H,D._result)})}else re(D,M,p,E);return M}function x(p){if(p&&typeof p=="object"&&p.constructor===this)return p;var E=new this(T);return N(E,p),E}b=d?function(){return process.nextTick(_)}:u?(y=0,v=new u(_),C=document.createTextNode(""),v.observe(C,{characterData:!0}),function(){C.data=y=++y%2}):h?((w=new MessageChannel).port1.onmessage=_,function(){return w.port2.postMessage(0)}):c===void 0?function(){try{var p=Function("return this")().require("vertx");return(o=p.runOnLoop||p.runOnContext)!==void 0?function(){o(_)}:f()}catch{return f()}}():f();var I=Math.random().toString(36).substring(2);function T(){}var R=void 0;function L(p,E,D){E.constructor===p.constructor&&D===A&&E.constructor.resolve===x?function(M,P){P._state===1?$(M,P._result):P._state===2?F(M,P._result):re(P,void 0,function(H){return N(M,H)},function(H){return F(M,H)})}(p,E):D===void 0?$(p,E):n(D)?function(M,P,H){a(function(J){var ke=!1,Xe=function(ut,xt,Ur,mn){try{ut.call(xt,function(Fn){ke||(ke=!0,P!==Fn?N(J,Fn):$(J,Fn))},function(Fn){ke||(ke=!0,F(J,Fn))})}catch(Fn){return Fn}}(H,P);!ke&&Xe&&(ke=!0,F(J,Xe))},M)}(p,E,D):$(p,E)}function N(p,E){if(p===E)F(p,new TypeError("You cannot resolve a promise with itself"));else if(P=typeof(M=E),M===null||P!=="object"&&P!=="function")$(p,E);else{var D=void 0;try{D=E.then}catch(H){return void F(p,H)}L(p,E,D)}var M,P}function S(p){p._onerror&&p._onerror(p._result),ce(p)}function $(p,E){p._state===R&&(p._result=E,p._state=1,p._subscribers.length!==0&&a(ce,p))}function F(p,E){p._state===R&&(p._state=2,p._result=E,a(S,p))}function re(p,E,D,M){var P=p._subscribers,H=P.length;p._onerror=null,P[H]=E,P[H+1]=D,P[H+2]=M,H===0&&p._state&&a(ce,p)}function ce(p){var E=p._subscribers,D=p._state;if(E.length!==0){for(var M=void 0,P=void 0,H=p._result,J=0;J<E.length;J+=3)P=E[J+D],(M=E[J])?Ee(D,M,P,H):P(H);p._subscribers.length=0}}function Ee(p,E,D,M){var P=n(D),H=void 0,J=void 0,ke=!0;if(P){try{H=D(M)}catch(Xe){ke=!1,J=Xe}if(E===H)return void F(E,new TypeError("A promises callback cannot return that same promise."))}else H=M;E._state!==R||(P&&ke?N(E,H):ke===!1?F(E,J):p===1?$(E,H):p===2&&F(E,H))}var Ne=0;function q(p){p[I]=Ne++,p._state=void 0,p._result=void 0,p._subscribers=[]}var K=function(){function p(E,D){this._instanceConstructor=E,this.promise=new E(T),this.promise[I]||q(this.promise),r(D)?(this.length=D.length,this._remaining=D.length,this._result=new Array(this.length),this.length===0?$(this.promise,this._result):(this.length=this.length||0,this._enumerate(D),this._remaining===0&&$(this.promise,this._result))):F(this.promise,new Error("Array Methods must be provided an Array"))}return p.prototype._enumerate=function(E){for(var D=0;this._state===R&&D<E.length;D++)this._eachEntry(E[D],D)},p.prototype._eachEntry=function(E,D){var M=this._instanceConstructor,P=M.resolve;if(P===x){var H=void 0,J=void 0,ke=!1;try{H=E.then}catch(ut){ke=!0,J=ut}if(H===A&&E._state!==R)this._settledAt(E._state,D,E._result);else if(typeof H!="function")this._remaining--,this._result[D]=E;else if(M===g){var Xe=new M(T);ke?F(Xe,J):L(Xe,E,H),this._willSettleAt(Xe,D)}else this._willSettleAt(new M(function(ut){return ut(E)}),D)}else this._willSettleAt(P(E),D)},p.prototype._settledAt=function(E,D,M){var P=this.promise;P._state===R&&(this._remaining--,E===2?F(P,M):this._result[D]=M),this._remaining===0&&$(P,this._result)},p.prototype._willSettleAt=function(E,D){var M=this;re(E,void 0,function(P){return M._settledAt(1,D,P)},function(P){return M._settledAt(2,D,P)})},p}(),g=function(){function p(E){this[I]=Ne++,this._result=this._state=void 0,this._subscribers=[],T!==E&&(typeof E!="function"&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof p?function(D,M){try{M(function(P){N(D,P)},function(P){F(D,P)})}catch(P){F(D,P)}}(this,E):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return p.prototype.catch=function(E){return this.then(null,E)},p.prototype.finally=function(E){var D=this,M=D.constructor;return n(E)?D.then(function(P){return M.resolve(E()).then(function(){return P})},function(P){return M.resolve(E()).then(function(){throw P})}):D.then(E,E)},p}();return g.prototype.then=A,g.all=function(p){return new K(this,p).promise},g.race=function(p){var E=this;return r(p)?new E(function(D,M){for(var P=p.length,H=0;H<P;H++)E.resolve(p[H]).then(D,M)}):new E(function(D,M){return M(new TypeError("You must pass an array to race."))})},g.resolve=x,g.reject=function(p){var E=new this(T);return F(E,p),E},g._setScheduler=function(p){s=p},g._setAsap=function(p){a=p},g._asap=a,g.polyfill=function(){var p=void 0;if(ac!==void 0)p=ac;else if(typeof self<"u")p=self;else try{p=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var E=p.Promise;if(E){var D=null;try{D=Object.prototype.toString.call(E.resolve())}catch{}if(D==="[object Promise]"&&!E.cast)return}p.Promise=g},g.Promise=g,g}()}),YX={__proto__:null,default:{}},F1=uc(function(t,e){var n;t.exports=n=n||function(r,i){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&ac!==void 0&&ac.crypto&&(o=ac.crypto),!o)try{o=YX}catch{}var s=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function v(){}return function(C){var b;return v.prototype=C,b=new v,v.prototype=null,b}}(),c={},l=c.lib={},u=l.Base={extend:function(v){var C=a(this);return v&&C.mixIn(v),C.hasOwnProperty("init")&&this.init!==C.init||(C.init=function(){C.$super.init.apply(this,arguments)}),C.init.prototype=C,C.$super=this,C},create:function(){var v=this.extend();return v.init.apply(v,arguments),v},init:function(){},mixIn:function(v){for(var C in v)v.hasOwnProperty(C)&&(this[C]=v[C]);v.hasOwnProperty("toString")&&(this.toString=v.toString)},clone:function(){return this.init.prototype.extend(this)}},d=l.WordArray=u.extend({init:function(v,C){v=this.words=v||[],this.sigBytes=C??4*v.length},toString:function(v){return(v||f).stringify(this)},concat:function(v){var C=this.words,b=v.words,A=this.sigBytes,x=v.sigBytes;if(this.clamp(),A%4)for(var I=0;I<x;I++)C[A+I>>>2]|=(b[I>>>2]>>>24-I%4*8&255)<<24-(A+I)%4*8;else for(var T=0;T<x;T+=4)C[A+T>>>2]=b[T>>>2];return this.sigBytes+=x,this},clamp:function(){var v=this.words,C=this.sigBytes;v[C>>>2]&=4294967295<<32-C%4*8,v.length=r.ceil(C/4)},clone:function(){var v=u.clone.call(this);return v.words=this.words.slice(0),v},random:function(v){for(var C=[],b=0;b<v;b+=4)C.push(s());return new d.init(C,v)}}),h=c.enc={},f=h.Hex={stringify:function(v){for(var C=v.words,b=v.sigBytes,A=[],x=0;x<b;x++){var I=C[x>>>2]>>>24-x%4*8&255;A.push((I>>>4).toString(16)),A.push((15&I).toString(16))}return A.join("")},parse:function(v){for(var C=v.length,b=[],A=0;A<C;A+=2)b[A>>>3]|=parseInt(v.substr(A,2),16)<<24-A%8*4;return new d.init(b,C/2)}},m=h.Latin1={stringify:function(v){for(var C=v.words,b=v.sigBytes,A=[],x=0;x<b;x++)A.push(String.fromCharCode(C[x>>>2]>>>24-x%4*8&255));return A.join("")},parse:function(v){for(var C=v.length,b=[],A=0;A<C;A++)b[A>>>2]|=(255&v.charCodeAt(A))<<24-A%4*8;return new d.init(b,C)}},_=h.Utf8={stringify:function(v){try{return decodeURIComponent(escape(m.stringify(v)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(v){return m.parse(unescape(encodeURIComponent(v)))}},w=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(v){typeof v=="string"&&(v=_.parse(v)),this._data.concat(v),this._nDataBytes+=v.sigBytes},_process:function(v){var C,b=this._data,A=b.words,x=b.sigBytes,I=this.blockSize,T=x/(4*I),R=(T=v?r.ceil(T):r.max((0|T)-this._minBufferSize,0))*I,L=r.min(4*R,x);if(R){for(var N=0;N<R;N+=I)this._doProcessBlock(A,N);C=A.splice(0,R),b.sigBytes-=L}return new d.init(C,L)},clone:function(){var v=u.clone.call(this);return v._data=this._data.clone(),v},_minBufferSize:0});l.Hasher=w.extend({cfg:u.extend(),init:function(v){this.cfg=this.cfg.extend(v),this.reset()},reset:function(){w.reset.call(this),this._doReset()},update:function(v){return this._append(v),this._process(),this},finalize:function(v){return v&&this._append(v),this._doFinalize()},blockSize:16,_createHelper:function(v){return function(C,b){return new v.init(b).finalize(C)}},_createHmacHelper:function(v){return function(C,b){return new y.HMAC.init(v,b).finalize(C)}}});var y=c.algo={};return c}(Math)}),w4=uc(function(t,e){var n;t.exports=(n=F1,function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,c=i.algo,l=[],u=[];(function(){function f(y){for(var v=r.sqrt(y),C=2;C<=v;C++)if(!(y%C))return!1;return!0}function m(y){return 4294967296*(y-(0|y))|0}for(var _=2,w=0;w<64;)f(_)&&(w<8&&(l[w]=m(r.pow(_,.5))),u[w]=m(r.pow(_,1/3)),w++),_++})();var d=[],h=c.SHA256=a.extend({_doReset:function(){this._hash=new s.init(l.slice(0))},_doProcessBlock:function(f,m){for(var _=this._hash.words,w=_[0],y=_[1],v=_[2],C=_[3],b=_[4],A=_[5],x=_[6],I=_[7],T=0;T<64;T++){if(T<16)d[T]=0|f[m+T];else{var R=d[T-15],L=d[T-2];d[T]=((R<<25|R>>>7)^(R<<14|R>>>18)^R>>>3)+d[T-7]+((L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10)+d[T-16]}var N=w&y^w&v^y&v,S=I+((b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25))+(b&A^~b&x)+u[T]+d[T];I=x,x=A,A=b,b=C+S|0,C=v,v=y,y=w,w=S+(((w<<30|w>>>2)^(w<<19|w>>>13)^(w<<10|w>>>22))+N)|0}_[0]=_[0]+w|0,_[1]=_[1]+y|0,_[2]=_[2]+v|0,_[3]=_[3]+C|0,_[4]=_[4]+b|0,_[5]=_[5]+A|0,_[6]=_[6]+x|0,_[7]=_[7]+I|0},_doFinalize:function(){var f=this._data,m=f.words,_=8*this._nDataBytes,w=8*f.sigBytes;return m[w>>>5]|=128<<24-w%32,m[14+(w+64>>>9<<4)]=r.floor(_/4294967296),m[15+(w+64>>>9<<4)]=_,f.sigBytes=4*m.length,this._process(),this._hash},clone:function(){var f=a.clone.call(this);return f._hash=this._hash.clone(),f}});i.SHA256=a._createHelper(h),i.HmacSHA256=a._createHmacHelper(h)}(Math),n.SHA256)}),XX=uc(function(t,e){var n,r;t.exports=(r=(n=F1).lib.WordArray,n.enc.Base64={stringify:function(i){var o=i.words,s=i.sigBytes,a=this._map;i.clamp();for(var c=[],l=0;l<s;l+=3)for(var u=(o[l>>>2]>>>24-l%4*8&255)<<16|(o[l+1>>>2]>>>24-(l+1)%4*8&255)<<8|o[l+2>>>2]>>>24-(l+2)%4*8&255,d=0;d<4&&l+.75*d<s;d++)c.push(a.charAt(u>>>6*(3-d)&63));var h=a.charAt(64);if(h)for(;c.length%4;)c.push(h);return c.join("")},parse:function(i){var o=i.length,s=this._map,a=this._reverseMap;if(!a){a=this._reverseMap=[];for(var c=0;c<s.length;c++)a[s.charCodeAt(c)]=c}var l=s.charAt(64);if(l){var u=i.indexOf(l);u!==-1&&(o=u)}return function(d,h,f){for(var m=[],_=0,w=0;w<h;w++)if(w%4){var y=f[d.charCodeAt(w-1)]<<w%4*2,v=f[d.charCodeAt(w)]>>>6-w%4*2;m[_>>>2]|=(y|v)<<24-_%4*8,_++}return r.create(m,_)}(i,o,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},n.enc.Base64)}),WO=uc(function(t,e){t.exports=F1.enc.Hex}),E4=uc(function(t,e){(function(){var n;function r(g,p,E){g!=null&&(typeof g=="number"?this.fromNumber(g,p,E):this.fromString(g,p==null&&typeof g!="string"?256:p))}function i(){return new r(null)}var o=typeof navigator<"u";o&&navigator.appName=="Microsoft Internet Explorer"?(r.prototype.am=function(g,p,E,D,M,P){for(var H=32767&p,J=p>>15;--P>=0;){var ke=32767&this[g],Xe=this[g++]>>15,ut=J*ke+Xe*H;M=((ke=H*ke+((32767&ut)<<15)+E[D]+(1073741823&M))>>>30)+(ut>>>15)+J*Xe+(M>>>30),E[D++]=1073741823&ke}return M},n=30):o&&navigator.appName!="Netscape"?(r.prototype.am=function(g,p,E,D,M,P){for(;--P>=0;){var H=p*this[g++]+E[D]+M;M=Math.floor(H/67108864),E[D++]=67108863&H}return M},n=26):(r.prototype.am=function(g,p,E,D,M,P){for(var H=16383&p,J=p>>14;--P>=0;){var ke=16383&this[g],Xe=this[g++]>>14,ut=J*ke+Xe*H;M=((ke=H*ke+((16383&ut)<<14)+E[D]+M)>>28)+(ut>>14)+J*Xe,E[D++]=268435455&ke}return M},n=28),r.prototype.DB=n,r.prototype.DM=(1<<n)-1,r.prototype.DV=1<<n,r.prototype.FV=Math.pow(2,52),r.prototype.F1=52-n,r.prototype.F2=2*n-52;var s,a,c=new Array;for(s=48,a=0;a<=9;++a)c[s++]=a;for(s=97,a=10;a<36;++a)c[s++]=a;for(s=65,a=10;a<36;++a)c[s++]=a;function l(g){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(g)}function u(g,p){var E=c[g.charCodeAt(p)];return E??-1}function d(g){var p=i();return p.fromInt(g),p}function h(g){var p,E=1;return(p=g>>>16)!=0&&(g=p,E+=16),(p=g>>8)!=0&&(g=p,E+=8),(p=g>>4)!=0&&(g=p,E+=4),(p=g>>2)!=0&&(g=p,E+=2),(p=g>>1)!=0&&(g=p,E+=1),E}function f(g){this.m=g}function m(g){this.m=g,this.mp=g.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<g.DB-15)-1,this.mt2=2*g.t}function _(g,p){return g&p}function w(g,p){return g|p}function y(g,p){return g^p}function v(g,p){return g&~p}function C(g){if(g==0)return-1;var p=0;return!(65535&g)&&(g>>=16,p+=16),!(255&g)&&(g>>=8,p+=8),!(15&g)&&(g>>=4,p+=4),!(3&g)&&(g>>=2,p+=2),!(1&g)&&++p,p}function b(g){for(var p=0;g!=0;)g&=g-1,++p;return p}function A(){}function x(g){return g}function I(g){this.r2=i(),this.q3=i(),r.ONE.dlShiftTo(2*g.t,this.r2),this.mu=this.r2.divide(g),this.m=g}f.prototype.convert=function(g){return g.s<0||g.compareTo(this.m)>=0?g.mod(this.m):g},f.prototype.revert=function(g){return g},f.prototype.reduce=function(g){g.divRemTo(this.m,null,g)},f.prototype.mulTo=function(g,p,E){g.multiplyTo(p,E),this.reduce(E)},f.prototype.sqrTo=function(g,p){g.squareTo(p),this.reduce(p)},m.prototype.convert=function(g){var p=i();return g.abs().dlShiftTo(this.m.t,p),p.divRemTo(this.m,null,p),g.s<0&&p.compareTo(r.ZERO)>0&&this.m.subTo(p,p),p},m.prototype.revert=function(g){var p=i();return g.copyTo(p),this.reduce(p),p},m.prototype.reduce=function(g){for(;g.t<=this.mt2;)g[g.t++]=0;for(var p=0;p<this.m.t;++p){var E=32767&g[p],D=E*this.mpl+((E*this.mph+(g[p]>>15)*this.mpl&this.um)<<15)&g.DM;for(g[E=p+this.m.t]+=this.m.am(0,D,g,p,0,this.m.t);g[E]>=g.DV;)g[E]-=g.DV,g[++E]++}g.clamp(),g.drShiftTo(this.m.t,g),g.compareTo(this.m)>=0&&g.subTo(this.m,g)},m.prototype.mulTo=function(g,p,E){g.multiplyTo(p,E),this.reduce(E)},m.prototype.sqrTo=function(g,p){g.squareTo(p),this.reduce(p)},r.prototype.copyTo=function(g){for(var p=this.t-1;p>=0;--p)g[p]=this[p];g.t=this.t,g.s=this.s},r.prototype.fromInt=function(g){this.t=1,this.s=g<0?-1:0,g>0?this[0]=g:g<-1?this[0]=g+this.DV:this.t=0},r.prototype.fromString=function(g,p){var E;if(p==16)E=4;else if(p==8)E=3;else if(p==256)E=8;else if(p==2)E=1;else if(p==32)E=5;else{if(p!=4)return void this.fromRadix(g,p);E=2}this.t=0,this.s=0;for(var D=g.length,M=!1,P=0;--D>=0;){var H=E==8?255&g[D]:u(g,D);H<0?g.charAt(D)=="-"&&(M=!0):(M=!1,P==0?this[this.t++]=H:P+E>this.DB?(this[this.t-1]|=(H&(1<<this.DB-P)-1)<<P,this[this.t++]=H>>this.DB-P):this[this.t-1]|=H<<P,(P+=E)>=this.DB&&(P-=this.DB))}E==8&&128&g[0]&&(this.s=-1,P>0&&(this[this.t-1]|=(1<<this.DB-P)-1<<P)),this.clamp(),M&&r.ZERO.subTo(this,this)},r.prototype.clamp=function(){for(var g=this.s&this.DM;this.t>0&&this[this.t-1]==g;)--this.t},r.prototype.dlShiftTo=function(g,p){var E;for(E=this.t-1;E>=0;--E)p[E+g]=this[E];for(E=g-1;E>=0;--E)p[E]=0;p.t=this.t+g,p.s=this.s},r.prototype.drShiftTo=function(g,p){for(var E=g;E<this.t;++E)p[E-g]=this[E];p.t=Math.max(this.t-g,0),p.s=this.s},r.prototype.lShiftTo=function(g,p){var E,D=g%this.DB,M=this.DB-D,P=(1<<M)-1,H=Math.floor(g/this.DB),J=this.s<<D&this.DM;for(E=this.t-1;E>=0;--E)p[E+H+1]=this[E]>>M|J,J=(this[E]&P)<<D;for(E=H-1;E>=0;--E)p[E]=0;p[H]=J,p.t=this.t+H+1,p.s=this.s,p.clamp()},r.prototype.rShiftTo=function(g,p){p.s=this.s;var E=Math.floor(g/this.DB);if(E>=this.t)p.t=0;else{var D=g%this.DB,M=this.DB-D,P=(1<<D)-1;p[0]=this[E]>>D;for(var H=E+1;H<this.t;++H)p[H-E-1]|=(this[H]&P)<<M,p[H-E]=this[H]>>D;D>0&&(p[this.t-E-1]|=(this.s&P)<<M),p.t=this.t-E,p.clamp()}},r.prototype.subTo=function(g,p){for(var E=0,D=0,M=Math.min(g.t,this.t);E<M;)D+=this[E]-g[E],p[E++]=D&this.DM,D>>=this.DB;if(g.t<this.t){for(D-=g.s;E<this.t;)D+=this[E],p[E++]=D&this.DM,D>>=this.DB;D+=this.s}else{for(D+=this.s;E<g.t;)D-=g[E],p[E++]=D&this.DM,D>>=this.DB;D-=g.s}p.s=D<0?-1:0,D<-1?p[E++]=this.DV+D:D>0&&(p[E++]=D),p.t=E,p.clamp()},r.prototype.multiplyTo=function(g,p){var E=this.abs(),D=g.abs(),M=E.t;for(p.t=M+D.t;--M>=0;)p[M]=0;for(M=0;M<D.t;++M)p[M+E.t]=E.am(0,D[M],p,M,0,E.t);p.s=0,p.clamp(),this.s!=g.s&&r.ZERO.subTo(p,p)},r.prototype.squareTo=function(g){for(var p=this.abs(),E=g.t=2*p.t;--E>=0;)g[E]=0;for(E=0;E<p.t-1;++E){var D=p.am(E,p[E],g,2*E,0,1);(g[E+p.t]+=p.am(E+1,2*p[E],g,2*E+1,D,p.t-E-1))>=p.DV&&(g[E+p.t]-=p.DV,g[E+p.t+1]=1)}g.t>0&&(g[g.t-1]+=p.am(E,p[E],g,2*E,0,1)),g.s=0,g.clamp()},r.prototype.divRemTo=function(g,p,E){var D=g.abs();if(!(D.t<=0)){var M=this.abs();if(M.t<D.t)return p?.fromInt(0),void(E!=null&&this.copyTo(E));E==null&&(E=i());var P=i(),H=this.s,J=g.s,ke=this.DB-h(D[D.t-1]);ke>0?(D.lShiftTo(ke,P),M.lShiftTo(ke,E)):(D.copyTo(P),M.copyTo(E));var Xe=P.t,ut=P[Xe-1];if(ut!=0){var xt=ut*(1<<this.F1)+(Xe>1?P[Xe-2]>>this.F2:0),Ur=this.FV/xt,mn=(1<<this.F1)/xt,Fn=1<<this.F2,Lt=E.t,cs=Lt-Xe,fr=p??i();for(P.dlShiftTo(cs,fr),E.compareTo(fr)>=0&&(E[E.t++]=1,E.subTo(fr,E)),r.ONE.dlShiftTo(Xe,fr),fr.subTo(P,P);P.t<Xe;)P[P.t++]=0;for(;--cs>=0;){var Zn=E[--Lt]==ut?this.DM:Math.floor(E[Lt]*Ur+(E[Lt-1]+Fn)*mn);if((E[Lt]+=P.am(0,Zn,E,cs,0,Xe))<Zn)for(P.dlShiftTo(cs,fr),E.subTo(fr,E);E[Lt]<--Zn;)E.subTo(fr,E)}p!=null&&(E.drShiftTo(Xe,p),H!=J&&r.ZERO.subTo(p,p)),E.t=Xe,E.clamp(),ke>0&&E.rShiftTo(ke,E),H<0&&r.ZERO.subTo(E,E)}}},r.prototype.invDigit=function(){if(this.t<1)return 0;var g=this[0];if(!(1&g))return 0;var p=3&g;return(p=(p=(p=(p=p*(2-(15&g)*p)&15)*(2-(255&g)*p)&255)*(2-((65535&g)*p&65535))&65535)*(2-g*p%this.DV)%this.DV)>0?this.DV-p:-p},r.prototype.isEven=function(){return(this.t>0?1&this[0]:this.s)==0},r.prototype.exp=function(g,p){if(g>4294967295||g<1)return r.ONE;var E=i(),D=i(),M=p.convert(this),P=h(g)-1;for(M.copyTo(E);--P>=0;)if(p.sqrTo(E,D),(g&1<<P)>0)p.mulTo(D,M,E);else{var H=E;E=D,D=H}return p.revert(E)},r.prototype.toString=function(g){if(this.s<0)return"-"+this.negate().toString(g);var p;if(g==16)p=4;else if(g==8)p=3;else if(g==2)p=1;else if(g==32)p=5;else{if(g!=4)return this.toRadix(g);p=2}var E,D=(1<<p)-1,M=!1,P="",H=this.t,J=this.DB-H*this.DB%p;if(H-- >0)for(J<this.DB&&(E=this[H]>>J)>0&&(M=!0,P=l(E));H>=0;)J<p?(E=(this[H]&(1<<J)-1)<<p-J,E|=this[--H]>>(J+=this.DB-p)):(E=this[H]>>(J-=p)&D,J<=0&&(J+=this.DB,--H)),E>0&&(M=!0),M&&(P+=l(E));return M?P:"0"},r.prototype.negate=function(){var g=i();return r.ZERO.subTo(this,g),g},r.prototype.abs=function(){return this.s<0?this.negate():this},r.prototype.compareTo=function(g){var p=this.s-g.s;if(p!=0)return p;var E=this.t;if((p=E-g.t)!=0)return this.s<0?-p:p;for(;--E>=0;)if((p=this[E]-g[E])!=0)return p;return 0},r.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+h(this[this.t-1]^this.s&this.DM)},r.prototype.mod=function(g){var p=i();return this.abs().divRemTo(g,null,p),this.s<0&&p.compareTo(r.ZERO)>0&&g.subTo(p,p),p},r.prototype.modPowInt=function(g,p){var E;return E=g<256||p.isEven()?new f(p):new m(p),this.exp(g,E)},r.ZERO=d(0),r.ONE=d(1),A.prototype.convert=x,A.prototype.revert=x,A.prototype.mulTo=function(g,p,E){g.multiplyTo(p,E)},A.prototype.sqrTo=function(g,p){g.squareTo(p)},I.prototype.convert=function(g){if(g.s<0||g.t>2*this.m.t)return g.mod(this.m);if(g.compareTo(this.m)<0)return g;var p=i();return g.copyTo(p),this.reduce(p),p},I.prototype.revert=function(g){return g},I.prototype.reduce=function(g){for(g.drShiftTo(this.m.t-1,this.r2),g.t>this.m.t+1&&(g.t=this.m.t+1,g.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);g.compareTo(this.r2)<0;)g.dAddOffset(1,this.m.t+1);for(g.subTo(this.r2,g);g.compareTo(this.m)>=0;)g.subTo(this.m,g)},I.prototype.mulTo=function(g,p,E){g.multiplyTo(p,E),this.reduce(E)},I.prototype.sqrTo=function(g,p){g.squareTo(p),this.reduce(p)};var T,R,L,N=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],S=(1<<26)/N[N.length-1];function $(){var g;g=new Date().getTime(),R[L++]^=255&g,R[L++]^=g>>8&255,R[L++]^=g>>16&255,R[L++]^=g>>24&255,L>=K&&(L-=K)}if(r.prototype.chunkSize=function(g){return Math.floor(Math.LN2*this.DB/Math.log(g))},r.prototype.toRadix=function(g){if(g==null&&(g=10),this.signum()==0||g<2||g>36)return"0";var p=this.chunkSize(g),E=Math.pow(g,p),D=d(E),M=i(),P=i(),H="";for(this.divRemTo(D,M,P);M.signum()>0;)H=(E+P.intValue()).toString(g).substr(1)+H,M.divRemTo(D,M,P);return P.intValue().toString(g)+H},r.prototype.fromRadix=function(g,p){this.fromInt(0),p==null&&(p=10);for(var E=this.chunkSize(p),D=Math.pow(p,E),M=!1,P=0,H=0,J=0;J<g.length;++J){var ke=u(g,J);ke<0?g.charAt(J)=="-"&&this.signum()==0&&(M=!0):(H=p*H+ke,++P>=E&&(this.dMultiply(D),this.dAddOffset(H,0),P=0,H=0))}P>0&&(this.dMultiply(Math.pow(p,P)),this.dAddOffset(H,0)),M&&r.ZERO.subTo(this,this)},r.prototype.fromNumber=function(g,p,E){if(typeof p=="number")if(g<2)this.fromInt(1);else for(this.fromNumber(g,E),this.testBit(g-1)||this.bitwiseTo(r.ONE.shiftLeft(g-1),w,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(p);)this.dAddOffset(2,0),this.bitLength()>g&&this.subTo(r.ONE.shiftLeft(g-1),this);else{var D=new Array,M=7&g;D.length=1+(g>>3),p.nextBytes(D),M>0?D[0]&=(1<<M)-1:D[0]=0,this.fromString(D,256)}},r.prototype.bitwiseTo=function(g,p,E){var D,M,P=Math.min(g.t,this.t);for(D=0;D<P;++D)E[D]=p(this[D],g[D]);if(g.t<this.t){for(M=g.s&this.DM,D=P;D<this.t;++D)E[D]=p(this[D],M);E.t=this.t}else{for(M=this.s&this.DM,D=P;D<g.t;++D)E[D]=p(M,g[D]);E.t=g.t}E.s=p(this.s,g.s),E.clamp()},r.prototype.changeBit=function(g,p){var E=r.ONE.shiftLeft(g);return this.bitwiseTo(E,p,E),E},r.prototype.addTo=function(g,p){for(var E=0,D=0,M=Math.min(g.t,this.t);E<M;)D+=this[E]+g[E],p[E++]=D&this.DM,D>>=this.DB;if(g.t<this.t){for(D+=g.s;E<this.t;)D+=this[E],p[E++]=D&this.DM,D>>=this.DB;D+=this.s}else{for(D+=this.s;E<g.t;)D+=g[E],p[E++]=D&this.DM,D>>=this.DB;D+=g.s}p.s=D<0?-1:0,D>0?p[E++]=D:D<-1&&(p[E++]=this.DV+D),p.t=E,p.clamp()},r.prototype.dMultiply=function(g){this[this.t]=this.am(0,g-1,this,0,0,this.t),++this.t,this.clamp()},r.prototype.dAddOffset=function(g,p){if(g!=0){for(;this.t<=p;)this[this.t++]=0;for(this[p]+=g;this[p]>=this.DV;)this[p]-=this.DV,++p>=this.t&&(this[this.t++]=0),++this[p]}},r.prototype.multiplyLowerTo=function(g,p,E){var D,M=Math.min(this.t+g.t,p);for(E.s=0,E.t=M;M>0;)E[--M]=0;for(D=E.t-this.t;M<D;++M)E[M+this.t]=this.am(0,g[M],E,M,0,this.t);for(D=Math.min(g.t,p);M<D;++M)this.am(0,g[M],E,M,0,p-M);E.clamp()},r.prototype.multiplyUpperTo=function(g,p,E){--p;var D=E.t=this.t+g.t-p;for(E.s=0;--D>=0;)E[D]=0;for(D=Math.max(p-this.t,0);D<g.t;++D)E[this.t+D-p]=this.am(p-D,g[D],E,0,0,this.t+D-p);E.clamp(),E.drShiftTo(1,E)},r.prototype.modInt=function(g){if(g<=0)return 0;var p=this.DV%g,E=this.s<0?g-1:0;if(this.t>0)if(p==0)E=this[0]%g;else for(var D=this.t-1;D>=0;--D)E=(p*E+this[D])%g;return E},r.prototype.millerRabin=function(g){var p=this.subtract(r.ONE),E=p.getLowestSetBit();if(E<=0)return!1;var D=p.shiftRight(E);(g=g+1>>1)>N.length&&(g=N.length);for(var M=i(),P=0;P<g;++P){M.fromInt(N[Math.floor(Math.random()*N.length)]);var H=M.modPow(D,this);if(H.compareTo(r.ONE)!=0&&H.compareTo(p)!=0){for(var J=1;J++<E&&H.compareTo(p)!=0;)if((H=H.modPowInt(2,this)).compareTo(r.ONE)==0)return!1;if(H.compareTo(p)!=0)return!1}}return!0},r.prototype.clone=function(){var g=i();return this.copyTo(g),g},r.prototype.intValue=function(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},r.prototype.byteValue=function(){return this.t==0?this.s:this[0]<<24>>24},r.prototype.shortValue=function(){return this.t==0?this.s:this[0]<<16>>16},r.prototype.signum=function(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1},r.prototype.toByteArray=function(){var g=this.t,p=new Array;p[0]=this.s;var E,D=this.DB-g*this.DB%8,M=0;if(g-- >0)for(D<this.DB&&(E=this[g]>>D)!=(this.s&this.DM)>>D&&(p[M++]=E|this.s<<this.DB-D);g>=0;)D<8?(E=(this[g]&(1<<D)-1)<<8-D,E|=this[--g]>>(D+=this.DB-8)):(E=this[g]>>(D-=8)&255,D<=0&&(D+=this.DB,--g)),128&E&&(E|=-256),M==0&&(128&this.s)!=(128&E)&&++M,(M>0||E!=this.s)&&(p[M++]=E);return p},r.prototype.equals=function(g){return this.compareTo(g)==0},r.prototype.min=function(g){return this.compareTo(g)<0?this:g},r.prototype.max=function(g){return this.compareTo(g)>0?this:g},r.prototype.and=function(g){var p=i();return this.bitwiseTo(g,_,p),p},r.prototype.or=function(g){var p=i();return this.bitwiseTo(g,w,p),p},r.prototype.xor=function(g){var p=i();return this.bitwiseTo(g,y,p),p},r.prototype.andNot=function(g){var p=i();return this.bitwiseTo(g,v,p),p},r.prototype.not=function(){for(var g=i(),p=0;p<this.t;++p)g[p]=this.DM&~this[p];return g.t=this.t,g.s=~this.s,g},r.prototype.shiftLeft=function(g){var p=i();return g<0?this.rShiftTo(-g,p):this.lShiftTo(g,p),p},r.prototype.shiftRight=function(g){var p=i();return g<0?this.lShiftTo(-g,p):this.rShiftTo(g,p),p},r.prototype.getLowestSetBit=function(){for(var g=0;g<this.t;++g)if(this[g]!=0)return g*this.DB+C(this[g]);return this.s<0?this.t*this.DB:-1},r.prototype.bitCount=function(){for(var g=0,p=this.s&this.DM,E=0;E<this.t;++E)g+=b(this[E]^p);return g},r.prototype.testBit=function(g){var p=Math.floor(g/this.DB);return p>=this.t?this.s!=0:(this[p]&1<<g%this.DB)!=0},r.prototype.setBit=function(g){return this.changeBit(g,w)},r.prototype.clearBit=function(g){return this.changeBit(g,v)},r.prototype.flipBit=function(g){return this.changeBit(g,y)},r.prototype.add=function(g){var p=i();return this.addTo(g,p),p},r.prototype.subtract=function(g){var p=i();return this.subTo(g,p),p},r.prototype.multiply=function(g){var p=i();return this.multiplyTo(g,p),p},r.prototype.divide=function(g){var p=i();return this.divRemTo(g,p,null),p},r.prototype.remainder=function(g){var p=i();return this.divRemTo(g,null,p),p},r.prototype.divideAndRemainder=function(g){var p=i(),E=i();return this.divRemTo(g,p,E),new Array(p,E)},r.prototype.modPow=function(g,p){var E,D,M=g.bitLength(),P=d(1);if(M<=0)return P;E=M<18?1:M<48?3:M<144?4:M<768?5:6,D=M<8?new f(p):p.isEven()?new I(p):new m(p);var H=new Array,J=3,ke=E-1,Xe=(1<<E)-1;if(H[1]=D.convert(this),E>1){var ut=i();for(D.sqrTo(H[1],ut);J<=Xe;)H[J]=i(),D.mulTo(ut,H[J-2],H[J]),J+=2}var xt,Ur,mn=g.t-1,Fn=!0,Lt=i();for(M=h(g[mn])-1;mn>=0;){for(M>=ke?xt=g[mn]>>M-ke&Xe:(xt=(g[mn]&(1<<M+1)-1)<<ke-M,mn>0&&(xt|=g[mn-1]>>this.DB+M-ke)),J=E;!(1&xt);)xt>>=1,--J;if((M-=J)<0&&(M+=this.DB,--mn),Fn)H[xt].copyTo(P),Fn=!1;else{for(;J>1;)D.sqrTo(P,Lt),D.sqrTo(Lt,P),J-=2;J>0?D.sqrTo(P,Lt):(Ur=P,P=Lt,Lt=Ur),D.mulTo(Lt,H[xt],P)}for(;mn>=0&&!(g[mn]&1<<M);)D.sqrTo(P,Lt),Ur=P,P=Lt,Lt=Ur,--M<0&&(M=this.DB-1,--mn)}return D.revert(P)},r.prototype.modInverse=function(g){var p=g.isEven();if(this.isEven()&&p||g.signum()==0)return r.ZERO;for(var E=g.clone(),D=this.clone(),M=d(1),P=d(0),H=d(0),J=d(1);E.signum()!=0;){for(;E.isEven();)E.rShiftTo(1,E),p?(M.isEven()&&P.isEven()||(M.addTo(this,M),P.subTo(g,P)),M.rShiftTo(1,M)):P.isEven()||P.subTo(g,P),P.rShiftTo(1,P);for(;D.isEven();)D.rShiftTo(1,D),p?(H.isEven()&&J.isEven()||(H.addTo(this,H),J.subTo(g,J)),H.rShiftTo(1,H)):J.isEven()||J.subTo(g,J),J.rShiftTo(1,J);E.compareTo(D)>=0?(E.subTo(D,E),p&&M.subTo(H,M),P.subTo(J,P)):(D.subTo(E,D),p&&H.subTo(M,H),J.subTo(P,J))}return D.compareTo(r.ONE)!=0?r.ZERO:J.compareTo(g)>=0?J.subtract(g):J.signum()<0?(J.addTo(g,J),J.signum()<0?J.add(g):J):J},r.prototype.pow=function(g){return this.exp(g,new A)},r.prototype.gcd=function(g){var p=this.s<0?this.negate():this.clone(),E=g.s<0?g.negate():g.clone();if(p.compareTo(E)<0){var D=p;p=E,E=D}var M=p.getLowestSetBit(),P=E.getLowestSetBit();if(P<0)return p;for(M<P&&(P=M),P>0&&(p.rShiftTo(P,p),E.rShiftTo(P,E));p.signum()>0;)(M=p.getLowestSetBit())>0&&p.rShiftTo(M,p),(M=E.getLowestSetBit())>0&&E.rShiftTo(M,E),p.compareTo(E)>=0?(p.subTo(E,p),p.rShiftTo(1,p)):(E.subTo(p,E),E.rShiftTo(1,E));return P>0&&E.lShiftTo(P,E),E},r.prototype.isProbablePrime=function(g){var p,E=this.abs();if(E.t==1&&E[0]<=N[N.length-1]){for(p=0;p<N.length;++p)if(E[0]==N[p])return!0;return!1}if(E.isEven())return!1;for(p=1;p<N.length;){for(var D=N[p],M=p+1;M<N.length&&D<S;)D*=N[M++];for(D=E.modInt(D);p<M;)if(D%N[p++]==0)return!1}return E.millerRabin(g)},r.prototype.square=function(){var g=i();return this.squareTo(g),g},r.prototype.Barrett=I,R==null){var F;if(R=new Array,L=0,typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var re=new Uint8Array(32);for(window.crypto.getRandomValues(re),F=0;F<32;++F)R[L++]=re[F]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var ce=window.crypto.random(32);for(F=0;F<ce.length;++F)R[L++]=255&ce.charCodeAt(F)}}for(;L<K;)F=Math.floor(65536*Math.random()),R[L++]=F>>>8,R[L++]=255&F;L=0,$()}function Ee(){if(T==null){for($(),(T=new q).init(R),L=0;L<R.length;++L)R[L]=0;L=0}return T.next()}function Ne(){}function q(){this.i=0,this.j=0,this.S=new Array}Ne.prototype.nextBytes=function(g){var p;for(p=0;p<g.length;++p)g[p]=Ee()},q.prototype.init=function(g){var p,E,D;for(p=0;p<256;++p)this.S[p]=p;for(E=0,p=0;p<256;++p)D=this.S[p],this.S[p]=this.S[E=E+this.S[p]+g[p%g.length]&255],this.S[E]=D;this.i=0,this.j=0},q.prototype.next=function(){var g;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,g=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=g,this.S[g+this.S[this.i]&255]};var K=256;t.exports={default:r,BigInteger:r,SecureRandom:Ne}}).call(ac)}),GO={sha1:"3021300906052b0e03021a05000414",sha224:"302d300d06096086480165030402040500041c",sha256:"3031300d060960864801650304020105000420",sha384:"3041300d060960864801650304020205000430",sha512:"3051300d060960864801650304020305000440",md2:"3020300c06082a864886f70d020205000410",md5:"3020300c06082a864886f70d020505000410",ripemd160:"3021300906052b2403020105000414"},KO={sha256:w4};function x4(t,e){if(this.n=null,this.e=0,!(t!=null&&e!=null&&t.length>0&&e.length>0))throw new Error("Invalid key data");this.n=new E4.BigInteger(t,16),this.e=parseInt(e,16)}x4.prototype.verify=function(t,e){e=e.replace(/[^0-9a-f]|[\s\n]]/gi,"");var n=new E4.BigInteger(e,16);if(n.bitLength()>this.n.bitLength())throw new Error("Signature does not match with the key modulus.");var r=function(o){for(var s in GO){var a=GO[s],c=a.length;if(o.substring(0,c)===a)return{alg:s,hash:o.substring(c)}}return[]}(n.modPowInt(this.e,this.n).toString(16).replace(/^1f+00/,""));if(r.length===0)return!1;if(!KO.hasOwnProperty(r.alg))throw new Error("Hashing algorithm is not supported.");var i=KO[r.alg](t).toString();return r.hash===i};for(QO=[],Nr=[],C4=typeof Uint8Array<"u"?Uint8Array:Array,m1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Za=0;Za<64;++Za)QO[Za]=m1[Za],Nr[m1.charCodeAt(Za)]=Za;var QO,Nr,C4,m1,Za;Nr[45]=62,Nr[95]=63;var b4=function(t){var e,n,r=function(l){var u=l.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=l.indexOf("=");return d===-1&&(d=u),[d,d===u?0:4-d%4]}(t),i=r[0],o=r[1],s=new C4(function(l,u,d){return 3*(u+d)/4-d}(0,i,o)),a=0,c=o>0?i-4:i;for(n=0;n<c;n+=4)e=Nr[t.charCodeAt(n)]<<18|Nr[t.charCodeAt(n+1)]<<12|Nr[t.charCodeAt(n+2)]<<6|Nr[t.charCodeAt(n+3)],s[a++]=e>>16&255,s[a++]=e>>8&255,s[a++]=255&e;return o===2&&(e=Nr[t.charCodeAt(n)]<<2|Nr[t.charCodeAt(n+1)]>>4,s[a++]=255&e),o===1&&(e=Nr[t.charCodeAt(n)]<<10|Nr[t.charCodeAt(n+1)]<<4|Nr[t.charCodeAt(n+2)]>>2,s[a++]=e>>8&255,s[a++]=255&e),s};function I4(t){var e=t.length%4;return e===0?t:t+new Array(4-e+1).join("=")}function YO(t){return t=I4(t).replace(/\-/g,"+").replace(/_/g,"/"),decodeURIComponent(function(e){for(var n="",r=0;r<e.length;r++)n+=String.fromCharCode(e[r]);return n}(b4(t)).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function g1(t){return function(e){for(var n="",r=0;r<e.length;r++){var i=e[r].toString(16);n+=i.length===2?i:"0"+i}return n}(b4(I4(t)))}var ZX=uc(function(t){var e,n;e=ac,n=function(){return function(){return function(r){var i=[];if(r.length===0)return"";if(typeof r[0]!="string")throw new TypeError("Url must be a string. Received "+r[0]);if(r[0].match(/^[^/:]+:\/*$/)&&r.length>1){var o=r.shift();r[0]=o+r[0]}r[0]=r[0].match(/^file:\/\/\//)?r[0].replace(/^([^/:]+):\/*/,"$1:///"):r[0].replace(/^([^/:]+):\/*/,"$1://");for(var s=0;s<r.length;s++){var a=r[s];if(typeof a!="string")throw new TypeError("Url must be a string. Received "+a);a!==""&&(s>0&&(a=a.replace(/^[\/]+/,"")),a=a.replace(/[\/]+$/,s<r.length-1?"":"/"),i.push(a))}var c=i.join("/"),l=(c=c.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return l.shift()+(l.length>0?"?":"")+l.join("&")}(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}},t.exports?t.exports=n():e.urljoin=n()});function JX(t,e){return e=e||{},new Promise(function(n,r){var i=new XMLHttpRequest,o=[],s=[],a={},c=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:c,headers:{keys:function(){return o},entries:function(){return s},get:function(u){return a[u.toLowerCase()]},has:function(u){return u.toLowerCase()in a}}}};for(var l in i.open(e.method||"get",t,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(u,d,h){o.push(d=d.toLowerCase()),s.push([d,h]),a[d]=a[d]?a[d]+","+h:h}),n(c())},i.onerror=r,i.withCredentials=e.credentials=="include",e.headers)i.setRequestHeader(l,e.headers[l]);i.send(e.body||null)})}function eZ(t){if(t.ok)return t.json();var e=new Error(t.statusText);return e.response=t,Promise.reject(e)}function D1(t){this.name="ConfigurationError",this.message=t||""}function Tt(t){this.name="TokenValidationError",this.message=t||""}D1.prototype=Error.prototype,Tt.prototype=Error.prototype;var tZ=function(){function t(){}var e=t.prototype;return e.get=function(){return null},e.has=function(){return null},e.set=function(){return null},t}();QX.polyfill();var T1="RS256",Q0=function(t){return typeof t=="number"},nZ=function(){return new Date};function nc(t){var e=t||{};if(this.jwksCache=e.jwksCache||new tZ,this.expectedAlg=e.expectedAlg||"RS256",this.issuer=e.issuer,this.audience=e.audience,this.leeway=e.leeway===0?0:e.leeway||60,this.jwksURI=e.jwksURI,this.maxAge=e.maxAge,this.__clock=typeof e.__clock=="function"?e.__clock:nZ,this.leeway<0||this.leeway>300)throw new D1("The leeway should be positive and lower than five minutes.");if(T1!==this.expectedAlg)throw new D1('Signature algorithm of "'+this.expectedAlg+'" is not supported. Expected the ID token to be signed with "'+T1+'".')}function D4(t,e){this.plugins=e;for(var n=0;n<this.plugins.length;n++){if(this.plugins[n].version!==ny.raw){var r="";throw this.plugins[n].constructor&&this.plugins[n].constructor.name&&(r=this.plugins[n].constructor.name),new Error("Plugin "+r+" version ("+this.plugins[n].version+") is not compatible with the SDK version ("+ny.raw+")")}this.plugins[n].setWebAuth(t)}}nc.prototype.verify=function(t,e,n){if(!n&&e&&typeof e=="function"&&(n=e,e=void 0),!t)return n(new Tt("ID token is required but missing"),null);var r=this.decode(t);if(r instanceof Error)return n(new Tt("ID token could not be decoded"),null);var i=r.encoded.header+"."+r.encoded.payload,o=g1(r.encoded.signature),s=r.header.alg,a=r.header.kid,c=r.payload.aud,l=r.payload.sub,u=r.payload.iss,d=r.payload.exp,h=r.payload.nbf,f=r.payload.iat,m=r.payload.azp,_=r.payload.auth_time,w=r.payload.nonce,y=this.__clock(),v=this;if(v.expectedAlg!==s)return n(new Tt('Signature algorithm of "'+s+'" is not supported. Expected the ID token to be signed with "'+T1+'".'),null);this.getRsaVerifier(u,a,function(C,b){if(C)return n(C,null);if(!b.verify(i,o))return n(new Tt("Invalid ID token signature."),null);if(!u||typeof u!="string")return n(new Tt("Issuer (iss) claim must be a string present in the ID token"),null);if(v.issuer!==u)return n(new Tt('Issuer (iss) claim mismatch in the ID token, expected "'+v.issuer+'", found "'+u+'"'),null);if(!l||typeof l!="string")return n(new Tt("Subject (sub) claim must be a string present in the ID token"),null);if(!c||typeof c!="string"&&!Array.isArray(c))return n(new Tt("Audience (aud) claim must be a string or array of strings present in the ID token"),null);if(Array.isArray(c)&&!c.includes(v.audience))return n(new Tt('Audience (aud) claim mismatch in the ID token; expected "'+v.audience+'" but was not one of "'+c.join(", ")+'"'),null);if(typeof c=="string"&&v.audience!==c)return n(new Tt('Audience (aud) claim mismatch in the ID token; expected "'+v.audience+'" but found "'+c+'"'),null);if(e){if(!w||typeof w!="string")return n(new Tt("Nonce (nonce) claim must be a string present in the ID token"),null);if(w!==e)return n(new Tt('Nonce (nonce) claim value mismatch in the ID token; expected "'+e+'", found "'+w+'"'),null)}if(Array.isArray(c)&&c.length>1){if(!m||typeof m!="string")return n(new Tt("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values"),null);if(m!==v.audience)return n(new Tt('Authorized Party (azp) claim mismatch in the ID token; expected "'+v.audience+'", found "'+m+'"'),null)}if(!d||!Q0(d))return n(new Tt("Expiration Time (exp) claim must be a number present in the ID token"),null);if(!f||!Q0(f))return n(new Tt("Issued At (iat) claim must be a number present in the ID token"),null);var A=d+v.leeway,x=new Date(0);if(x.setUTCSeconds(A),y>x)return n(new Tt('Expiration Time (exp) claim error in the ID token; current time "'+y+'" is after expiration time "'+x+'"'),null);if(h&&Q0(h)){var I=h-v.leeway,T=new Date(0);if(T.setUTCSeconds(I),y<T)return n(new Tt('Not Before Time (nbf) claim error in the ID token; current time "'+y+'" is before the not before time "'+T+'"'),null)}if(v.maxAge){if(!_||!Q0(_))return n(new Tt("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified"),null);var R=_+v.maxAge+v.leeway,L=new Date(0);if(L.setUTCSeconds(R),y>L)return n(new Tt('Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time "'+y+'" is after last auth time at "'+L+'"'),null)}return n(null,r.payload)})},nc.prototype.getRsaVerifier=function(t,e,n){var r=this,i=t+e;Promise.resolve(this.jwksCache.has(i)).then(function(o){return o?r.jwksCache.get(i):(a=(s={jwksURI:r.jwksURI,iss:t,kid:e}).jwksURI||ZX(s.iss,".well-known","jwks.json"),(fetch=="undefined"?JX:fetch)(a).then(eZ).then(function(c){var l,u,d,h=null;for(l=0;l<c.keys.length&&h===null;l++)(u=c.keys[l]).kid===s.kid&&(h=u);if(!h)throw new Error('Could not find a public key for Key ID (kid) "'+s.kid+'"');return{modulus:g1((d=h).n),exp:g1(d.e)}}).catch(function(c){throw c}));var s,a}).then(function(o){if(!o||!o.modulus||!o.exp)throw new Error("Empty keyInfo in response");return Promise.resolve(r.jwksCache.set(i,o)).then(function(){n&&n(null,new x4(o.modulus,o.exp))})}).catch(function(o){n&&n(o)})},nc.prototype.decode=function(t){var e,n,r=t.split(".");if(r.length!==3)return new Tt("Cannot decode a malformed JWT");try{e=JSON.parse(YO(r[0])),n=JSON.parse(YO(r[1]))}catch{return new Tt("Token header or payload is not valid JSON")}return{header:e,payload:n,encoded:{header:r[0],payload:r[1],signature:r[2]}}},nc.prototype.validateAccessToken=function(t,e,n,r){if(this.expectedAlg!==e)return r(new Tt('Signature algorithm of "'+e+'" is not supported. Expected "'+this.expectedAlg+'"'));var i,o=w4(t),s=WO.stringify(o),a=s.substring(0,s.length/2),c=WO.parse(a),l=XX.stringify(c);return r((i={"+":"-","/":"_","=":""},l.replace(/[+/=]/g,function(u){return i[u]})!==n?new Tt("Invalid access_token"):null))},D4.prototype.get=function(t){for(var e=0;e<this.plugins.length;e++)if(this.plugins[e].supports(t))return this.plugins[e].init();return null};var XO={randomString:function(t){var e=new Uint8Array(t),n=[],r="0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~",i=pt.getWindow().crypto||pt.getWindow().msCrypto;if(!i)return null;for(var o=i.getRandomValues(e),s=0;s<o.length;s++)n.push(r[o[s]%r.length]);return n.join("")}};function rc(t){var e=t.transaction||{};this.namespace=e.namespace||"com.auth0.auth.",this.keyLength=e.keyLength||32,this.stateExpiration=t.stateExpiration?t.stateExpiration/60/24:1/48,this.storage=new au(t),this.options=t}function nu(t){if(this.url=t.url,this.callback=t.callback,this.timeout=t.timeout||6e4,this.timeoutCallback=t.timeoutCallback||null,this.eventListenerType=t.eventListenerType||"message",this.iframe=null,this.timeoutHandle=null,this._destroyTimeout=null,this.transientMessageEventListener=null,this.proxyEventListener=null,this.eventValidator=t.eventValidator||{isValid:function(){return!0}},typeof this.callback!="function")throw new Error("options.callback must be a function")}function O1(t){this.webAuth=t,this.warn=new lc(t.baseOptions)}function zh(t,e){this.webAuth=t,this.baseOptions=e,this.request=new Xi(e),this.webMessageHandler=new O1(t),this.storage=new au(e)}function ZO(t,e){return["co/verifier",encodeURIComponent(t),encodeURIComponent(e)].join("/")}function A1(t,e){this.webAuth=t,this.baseOptions=e,this.crossOriginAuthentication=new zh(t,this.baseOptions),this.warn=new lc({disableWarnings:!!e._disableDeprecationWarnings})}rc.prototype.process=function(t){if(!t.responseType)throw new Error("responseType is required");var e=t.realm||t.connection,n=t.responseType.indexOf("id_token")!==-1,r=this.generateTransaction(t.appState,t.state,t.nonce,e,n,t.organization);return t.state||(t.state=r.state),n&&!t.nonce&&(t.nonce=r.nonce),t},rc.prototype.generateTransaction=function(t,e,n,r,i,o){if(e=e||XO.randomString(this.keyLength),n=n||(i?XO.randomString(this.keyLength):null),pt.getWindow().location.host!==this.options.domain){var s={nonce:n,appState:t,state:e,lastUsedConnection:r};o&&(s.organization=o),this.storage.setItem(this.namespace+e,s,{expires:this.stateExpiration})}return{state:e,nonce:n}},rc.prototype.getStoredTransaction=function(t){var e;return e=this.storage.getItem(this.namespace+t),this.clearTransaction(t),e},rc.prototype.clearTransaction=function(t){this.storage.removeItem(this.namespace+t)},nu.prototype.init=function(){var t=this,e=pt.getWindow();switch(this.iframe=e.document.createElement("iframe"),this.iframe.style.display="none",this.proxyEventListener=function(n){t.eventListener(n)},this.eventListenerType){case"message":this.eventSourceObject=e;break;case"load":this.eventSourceObject=this.iframe;break;default:throw new Error("Unsupported event listener type: "+this.eventListenerType)}this.eventSourceObject.addEventListener(this.eventListenerType,this.proxyEventListener,!1),e.document.body.appendChild(this.iframe),this.iframe.src=this.url,this.timeoutHandle=setTimeout(function(){t.timeoutHandler()},this.timeout)},nu.prototype.eventListener=function(t){var e={event:t,sourceObject:this.eventSourceObject};this.eventValidator.isValid(e)&&(this.destroy(),this.callback(e))},nu.prototype.timeoutHandler=function(){this.destroy(),this.timeoutCallback&&this.timeoutCallback()},nu.prototype.destroy=function(){var t=this;clearTimeout(this.timeoutHandle),this._destroyTimeout=setTimeout(function(){t.eventSourceObject.removeEventListener(t.eventListenerType,t.proxyEventListener,!1),t.iframe.parentNode&&t.iframe.parentNode.removeChild(t.iframe)},0)},O1.prototype.run=function(t,e){var n=this;t.responseMode="web_message",t.prompt="none";var r=pt.getOrigin(),i=he.getOriginFromUrl(t.redirectUri);if(i&&r!==i)return e({error:"origin_mismatch",error_description:"The redirectUri's origin ("+i+") should match the window's origin ("+r+")."});(function(o,s,a){new nu({url:o,eventListenerType:"message",callback:function(c){a(null,c)},timeout:s.timeout,eventValidator:{isValid:function(c){return!(!c.event.data||c.event.data.type!=="authorization_response"||s.state!==c.event.data.response.state)}},timeoutCallback:function(){a({error:"timeout",error_description:"Timeout during executing web_message communication",state:s.state})}}).init()})(this.webAuth.client.buildAuthorizeUrl(t),t,function(o,s){var a=o;if(!o&&s.event.data.response.error&&(a=s.event.data.response),!a){var c=s.event.data.response;return n.webAuth.validateAuthenticationResponse(t,c,e)}return a.error==="consent_required"&&pt.getWindow().location.hostname==="localhost"&&n.warn.warning("Consent Required. Consent can't be skipped on localhost. Read more here: https://auth0.com/docs/api-auth/user-consent#skipping-consent-for-first-party-clients"),n.webAuth.transactionManager.clearTransaction(a.state),e(he.pick(a,["error","error_description"]))})},zh.prototype.login=function(t,e){var n=this,r=kt(this.baseOptions.rootUrl,"/co/authenticate");t.username=t.username||t.email,delete t.email;var i={client_id:t.clientID||this.baseOptions.clientID,username:t.username};t.password&&(i.password=t.password),t.otp&&(i.otp=t.otp);var o=t.realm||this.baseOptions.realm;if(o){var s=t.credentialType||this.baseOptions.credentialType||"http://auth0.com/oauth/grant-type/password-realm";i.realm=o,i.credential_type=s}else i.credential_type="password";this.request.post(r).withCredentials().send(i).end(function(a,c){if(a){var l=a.response&&a.response.body||{error:"request_error",error_description:JSON.stringify(a)};return Xt(e,{forceLegacyError:!0})(l)}function u(){var d=t.popup===!0;t=he.blacklist(t,["password","credentialType","otp","popup","onRedirecting"]);var h=he.merge(t).with({loginTicket:c.body.login_ticket}),f=ZO(n.baseOptions.rootUrl,c.body.co_id);n.storage.setItem(f,c.body.co_verifier,{expires:1/96}),d?n.webMessageHandler.run(h,Xt(e,{forceLegacyError:!0})):n.webAuth.authorize(h)}typeof t.onRedirecting=="function"?t.onRedirecting(u):u()})},zh.prototype.callback=function(){var t=decodeURIComponent(function(r){var i=("&"+pt.getWindow().location.hash.substring(1)).split("&"+r+"=");if(i.length===2)return i.pop().split("&").shift()}("origin")),e=pt.getWindow(),n=this;e.addEventListener("message",function(r){if(r.data.type==="co_verifier_request"){var i=ZO(r.origin,r.data.request.id),o=function(s,a){try{var c=s.getItem(a);return s.removeItem(a),c||""}catch{return""}}(n.storage,i);r.source.postMessage({type:"co_verifier_response",response:{verifier:o}},r.origin)}}),e.parent.postMessage({type:"ready"},t)},A1.prototype.loginWithCredentials=function(t,e){t.realm=t.realm||t.connection,delete t.connection,this.crossOriginAuthentication.login(t,e)},A1.prototype.signupAndLogin=function(t,e){var n=this;return this.webAuth.client.dbConnection.signup(t,function(r){return r?e(r):(t.realm=t.realm||t.connection,delete t.connection,n.webAuth.login(t,e))})};var JO=cc(function(t){var e=function(){function n(s,a,c){s.attachEvent?s.attachEvent("on"+a,c):s.addEventListener&&s.addEventListener(a,c,!1)}function r(s,a,c){s.detachEvent?s.detachEvent("on"+a,c):s.removeEventListener&&s.removeEventListener(a,c,!1)}function i(s){/^https?:\/\//.test(s)||(s=window.location.href);var a=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(s);return a?a[1]:s}var o=function(){if(typeof navigator>"u")return!1;var s=-1,a=navigator.userAgent;return navigator.appName==="Microsoft Internet Explorer"?new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(a)!=null&&(s=parseFloat(RegExp.$1)):a.indexOf("Trident")>-1&&new RegExp("rv:([0-9]{2,2}[.0-9]{0,})").exec(a)!==null&&(s=parseFloat(RegExp.$1)),s>=8}();return typeof window<"u"&&window.JSON&&window.JSON.stringify&&window.JSON.parse&&window.postMessage?{open:function(s,a){if(!a)throw"missing required callback argument";var c,l;s.url||(c="missing required 'url' parameter"),s.relay_url||(c="missing required 'relay_url' parameter"),c&&setTimeout(function(){a(c)},0),s.window_name||(s.window_name=null),s.window_features&&!function(){try{var y=navigator.userAgent;return y.indexOf("Fennec/")!=-1||y.indexOf("Firefox/")!=-1&&y.indexOf("Android")!=-1}catch{}return!1}()||(s.window_features=void 0);var u,d=s.origin||i(s.url);if(d!==i(s.relay_url))return setTimeout(function(){a("invalid arguments: origin of url and relay_url must match")},0);o&&((l=document.createElement("iframe")).setAttribute("src",s.relay_url),l.style.display="none",l.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(l),u=l.contentWindow);var h=s.popup||window.open(s.url,s.window_name,s.window_features);s.popup&&(h.location.href=s.url),u||(u=h);var f=setInterval(function(){h&&h.closed&&(_(),a&&(a("User closed the popup window"),a=null))},500),m=JSON.stringify({a:"request",d:s.params});function _(){if(l&&document.body.removeChild(l),l=void 0,f&&(f=clearInterval(f)),r(window,"message",w),r(window,"unload",_),h)try{h.close()}catch{u.postMessage("die",d)}h=u=void 0}function w(y){if(y.origin===d){try{var v=JSON.parse(y.data)}catch(C){if(a)return a(C);throw C}v.a==="ready"?u.postMessage(m,d):v.a==="error"?(_(),a&&(a(v.d),a=null)):v.a==="response"&&(_(),a&&(a(null,v.d),a=null))}}return n(window,"unload",_),n(window,"message",w),{originalPopup:h,close:_,focus:function(){if(h)try{h.focus()}catch{}}}},onOpen:function(s){var a="*",c=o?function(){for(var h=window.opener.frames,f=h.length-1;f>=0;f--)try{if(h[f].location.protocol===window.location.protocol&&h[f].location.host===window.location.host&&h[f].name==="__winchan_relay_frame")return h[f]}catch{}}():window.opener;if(!c)throw"can't find relay frame";function l(h){h=JSON.stringify(h),o?c.doPost(h,a):c.postMessage(h,a)}function u(h){if(h.data==="die")try{window.close()}catch{}}n(o?c:window,"message",function h(f){var m;try{m=JSON.parse(f.data)}catch{}m&&m.a==="request"&&(r(window,"message",h),a=f.origin,s&&setTimeout(function(){s(a,m.d,function(_){s=void 0,l({a:"response",d:_})})},0))}),n(o?c:window,"message",u);try{l({a:"ready"})}catch{n(c,"load",function(f){l({a:"ready"})})}var d=function(){try{r(o?c:window,"message",u)}catch{}s&&l({a:"error",d:"client closed window"}),s=void 0;try{window.close()}catch{}};return n(window,"unload",d),{detach:function(){r(window,"unload",d)}}}}:{open:function(s,a,c,l){setTimeout(function(){l("unsupported browser")},0)},onOpen:function(s){setTimeout(function(){s("unsupported browser")},0)}}}();t.exports&&(t.exports=e)}),rZ={extractOrigin:function(t){/^https?:\/\//.test(t)||(t=window.location.href);var e=/^(https?:\/\/[-_a-zA-Z.0-9:]+)/.exec(t);return e?e[1]:t}};function Y0(){this._current_popup=null}function qo(t,e){this.baseOptions=e,this.baseOptions.popupOrigin=e.popupOrigin,this.client=t.client,this.webAuth=t,this.transactionManager=new rc(this.baseOptions),this.crossOriginAuthentication=new zh(t,this.baseOptions),this.warn=new lc({disableWarnings:!!e._disableDeprecationWarnings})}function ru(t){this.authenticationUrl=t.authenticationUrl,this.timeout=t.timeout||6e4,this.handler=null,this.postMessageDataType=t.postMessageDataType||!1,this.postMessageOrigin=t.postMessageOrigin||pt.getWindow().location.origin||pt.getWindow().location.protocol+"//"+pt.getWindow().location.hostname+(pt.getWindow().location.port?":"+pt.getWindow().location.port:"")}function y1(t){this.baseOptions=t,this.request=new Xi(t),this.transactionManager=new rc(this.baseOptions)}function J0(t,e){this.baseOptions=e,this.client=t,this.baseOptions.universalLoginPage=!0,this.request=new Xi(this.baseOptions),this.warn=new lc({disableWarnings:!!e._disableDeprecationWarnings})}Y0.prototype.calculatePosition=function(t){var e=t.width||500,n=t.height||600,r=pt.getWindow(),i=r.screenX!==void 0?r.screenX:r.screenLeft,o=r.screenY!==void 0?r.screenY:r.screenTop,s=r.outerWidth!==void 0?r.outerWidth:r.document.body.clientWidth,a=r.outerHeight!==void 0?r.outerHeight:r.document.body.clientHeight;return{width:e,height:n,left:t.left||i+(s-e)/2,top:t.top||o+(a-n)/2}},Y0.prototype.preload=function(t){var e=this,n=pt.getWindow(),r=this.calculatePosition(t.popupOptions||{}),i=he.merge(r).with(t.popupOptions),o=t.url||"about:blank",s=Ls.stringify(i,{encode:!1,delimiter:","});return this._current_popup&&!this._current_popup.closed||(this._current_popup=n.open(o,"auth0_signup_popup",s),this._current_popup.kill=function(){this.close(),e._current_popup=null}),this._current_popup},Y0.prototype.load=function(t,e,n,r){var i=this,o=this.calculatePosition(n.popupOptions||{}),s=he.merge(o).with(n.popupOptions),a=he.merge({url:t,relay_url:e,window_features:Ls.stringify(s,{delimiter:",",encode:!1}),popup:this._current_popup}).with(n),c=JO.open(a,function(l,u){if(!l||l.name!=="SyntaxError")return i._current_popup=null,r(l,u)});return c.focus(),c},qo.prototype.buildPopupHandler=function(){var t=this.baseOptions.plugins.get("popup.getPopupHandler");return t?t.getPopupHandler():new Y0},qo.prototype.preload=function(t){t=t||{};var e=this.buildPopupHandler();return e.preload(t),e},qo.prototype.getPopupHandler=function(t,e){return t.popupHandler?t.popupHandler:e?this.preload(t):this.buildPopupHandler()},qo.prototype.callback=function(t){var e=this,n=pt.getWindow(),r=(t=t||{}).popupOrigin||this.baseOptions.popupOrigin||pt.getOrigin();n.opener?JO.onOpen(function(i,o,s){if(i!==r)return s({error:"origin_mismatch",error_description:"The popup's origin ("+i+") should match the `popupOrigin` parameter ("+r+")."});e.webAuth.parseHash(t||{},function(a,c){return s(a||c)})}):n.doPost=function(i){n.parent&&n.parent.postMessage(i,r)}},qo.prototype.authorize=function(t,e){var n,r,i={},o=this.baseOptions.plugins.get("popup.authorize"),s=he.merge(this.baseOptions,["clientID","scope","domain","audience","tenant","responseType","redirectUri","_csrf","state","_intstate","nonce","organization","invitation"]).with(he.blacklist(t,["popupHandler"]));return ye.check(s,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),r=kt(this.baseOptions.rootUrl,"relay.html"),t.owp?s.owp=!0:(i.origin=rZ.extractOrigin(s.redirectUri),r=s.redirectUri),t.popupOptions&&(i.popupOptions=he.pick(t.popupOptions,["width","height","top","left"])),o&&(s=o.processParams(s)),(s=this.transactionManager.process(s)).scope=s.scope||"openid profile email",delete s.domain,n=this.client.buildAuthorizeUrl(s),this.getPopupHandler(t).load(n,r,i,Xt(e,{keepOriginalCasing:!0}))},qo.prototype.loginWithCredentials=function(t,e){t.realm=t.realm||t.connection,t.popup=!0,t=he.merge(this.baseOptions,["redirectUri","responseType","state","nonce","timeout"]).with(he.blacklist(t,["popupHandler","connection"])),t=this.transactionManager.process(t),this.crossOriginAuthentication.login(t,e)},qo.prototype.passwordlessVerify=function(t,e){var n=this;return this.client.passwordless.verify(he.blacklist(t,["popupHandler"]),function(r){if(r)return e(r);t.username=t.phoneNumber||t.email,t.password=t.verificationCode,delete t.email,delete t.phoneNumber,delete t.verificationCode,delete t.type,n.client.loginWithResourceOwner(t,e)})},qo.prototype.signupAndLogin=function(t,e){var n=this;return this.client.dbConnection.signup(t,function(r){if(r)return e(r);n.loginWithCredentials(t,e)})},ru.create=function(t){return new ru(t)},ru.prototype.login=function(t,e){this.handler=new nu({auth0:this.auth0,url:this.authenticationUrl,eventListenerType:t?"message":"load",callback:this.getCallbackHandler(e,t),timeout:this.timeout,eventValidator:this.getEventValidator(),timeoutCallback:function(){e(null,"#error=timeout&error_description=Timeout+during+authentication+renew.")},usePostMessage:t||!1}),this.handler.init()},ru.prototype.getEventValidator=function(){var t=this;return{isValid:function(e){switch(e.event.type){case"message":return e.event.origin===t.postMessageOrigin&&e.event.source===t.handler.iframe.contentWindow&&(t.postMessageDataType===!1||e.event.data.type&&e.event.data.type===t.postMessageDataType);case"load":if(e.sourceObject.contentWindow.location.protocol==="about:")return!1;default:return!0}}}},ru.prototype.getCallbackHandler=function(t,e){return function(n){var r;r=e?typeof n.event.data=="object"&&n.event.data.hash?n.event.data.hash:n.event.data:n.sourceObject.contentWindow.location.hash,t(null,r)}},y1.prototype.login=function(t,e){var n,r;return n=kt(this.baseOptions.rootUrl,"usernamepassword","login"),t.username=t.username||t.email,t=he.blacklist(t,["email","onRedirecting"]),r=he.merge(this.baseOptions,["clientID","redirectUri","tenant","responseType","responseMode","scope","audience"]).with(t),r=this.transactionManager.process(r),r=he.toSnakeCase(r,["auth0Client"]),this.request.post(n).send(r).end(Xt(e))},y1.prototype.callback=function(t){var e,n=pt.getDocument();(e=n.createElement("div")).innerHTML=t,n.body.appendChild(e).children[0].submit()},J0.prototype.login=function(t,e){if(pt.getWindow().location.host!==this.baseOptions.domain)throw new Error("This method is meant to be used only inside the Universal Login Page.");var n,r=he.merge(this.baseOptions,["clientID","redirectUri","tenant","responseType","responseMode","scope","audience","_csrf","state","_intstate","nonce"]).with(t);return ye.check(r,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),(n=new y1(this.baseOptions)).login(r,function(i,o){if(i)return e(i);function s(){n.callback(o)}if(typeof t.onRedirecting=="function")return t.onRedirecting(function(){s()});s()})},J0.prototype.signupAndLogin=function(t,e){var n=this;return n.client.client.dbConnection.signup(t,function(r){return r?e(r):n.login(t,e)})},J0.prototype.getSSOData=function(t,e){var n,r="";return typeof t=="function"&&(e=t,t=!1),ye.check(t,{type:"boolean",message:"withActiveDirectories parameter is not valid"}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),t&&(r="?"+Ls.stringify({ldaps:1,client_id:this.baseOptions.clientID})),n=kt(this.baseOptions.rootUrl,"user","ssodata",r),this.request.get(n,{noHeaders:!0}).withCredentials().end(Xt(e))};var S1=function(){},R1=S1,e4={lang:"en",templates:{auth0:function(t){var e=t.type==="code"?"Enter the code shown above":"Solve the formula shown above";return`<div class="captcha-challenge">
  <img src="`+t.image+`" />
  <button type="button" class="captcha-reload">\u21BA</button>
</div>
<input type="text" name="captcha"
  class="form-control captcha-control"
  placeholder="`+e+'" />'},recaptcha_v2:function(){return'<div class="recaptcha" ></div><input type="hidden" name="captcha" />'},recaptcha_enterprise:function(){return'<div class="recaptcha" ></div><input type="hidden" name="captcha" />'},hcaptcha:function(){return'<div class="hcaptcha" ></div><input type="hidden" name="captcha" />'},friendly_captcha:function(){return'<div class="friendly-captcha" ></div><input type="hidden" name="captcha" />'},arkose:function(){return'<div class="arkose" ></div><input type="hidden" name="captcha" />'},auth0_v2:function(){return'<div class="auth0_v2" ></div><input type="hidden" name="captcha" />'},error:function(){return'<div class="error" style="color: red;">Error getting the bot detection challenge. Please contact the system administrator.</div>'}}};function t4(t,e,n,r){t.innerHTML=e.templates[n.provider](n),t.querySelector(".captcha-reload").addEventListener("click",function(i){i.preventDefault(),r()})}function Ja(t){switch(t){case"recaptcha_v2":return window.grecaptcha;case"recaptcha_enterprise":return window.grecaptcha.enterprise;case"hcaptcha":return window.hcaptcha;case"friendly_captcha":return window.friendlyChallenge;case"arkose":return window.arkose;case"auth0_v2":return window.turnstile;default:throw new Error("Unknown captcha provider")}}function n4(t,e){var n=window.document.createElement("script");for(var r in e)r.startsWith("data-")?n.dataset[r.replace("data-","")]=e[r]:n[r]=e[r];n.src=t,window.document.body.appendChild(n)}function r4(t){window.document.querySelectorAll('script[src="'+t+'"]').forEach(function(e){e.remove()})}function iZ(t,e,n,r){var i=e.provider+"Callback_"+Math.floor(1000001*Math.random()),o={async:!0,defer:!0},s=function(c,l,u,d,h){switch(c){case"recaptcha_v2":return"https://www.recaptcha.net/recaptcha/api.js?hl="+l+"&onload="+u;case"recaptcha_enterprise":return"https://www.recaptcha.net/recaptcha/enterprise.js?render=explicit&hl="+l+"&onload="+u;case"hcaptcha":return"https://js.hcaptcha.com/1/api.js?hl="+l+"&onload="+u;case"friendly_captcha":return"https://cdn.jsdelivr.net/npm/friendly-challenge@0.9.12/widget.min.js";case"arkose":return"https://"+d+".arkoselabs.com/v2/"+h+"/api.js";case"auth0_v2":return"https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit&onload="+u;default:throw new Error("Unknown captcha provider")}}(e.provider,e.lang,i,e.clientSubdomain,e.siteKey);if(e.provider==="arkose"||e.provider==="auth0_v2"){var a=0;o["data-callback"]=i,o.onerror=function(){if(a<3)return r4(s),n4(s,o),void a++;r4(s),r("BYPASS_CAPTCHA")},window[i]=function(c){window.arkose=c,n(c)}}else window[i]=function(){delete window[i],n()},e.provider==="friendly_captcha"&&(o.onload=window[i]);n4(s,o)}function i4(t,e,n){var r,i=t.hasAttribute("data-wid")&&t.getAttribute("data-wid");function o(a){t.querySelector('input[name="captcha"]').value=a||""}if(n.provider==="friendly_captcha"&&window.auth0FCInstance)return o(),void window.auth0FCInstance.reset();if(n.provider==="arkose"&&Ja(n.provider))return o(),void Ja(n.provider).reset();if(i)return o(),void Ja(n.provider).reset(i);switch(t.innerHTML=e.templates[n.provider](n),n.provider){case"recaptcha_enterprise":case"recaptcha_v2":r=".recaptcha";break;case"hcaptcha":r=".hcaptcha";break;case"friendly_captcha":r=".friendly-captcha";break;case"arkose":r=".arkose";break;case"auth0_v2":r=".auth0_v2"}var s=t.querySelector(r);iZ(0,{lang:e.lang,provider:n.provider,clientSubdomain:n.clientSubdomain,siteKey:n.siteKey},function(a){var c=Ja(n.provider);if(n.provider==="arkose"){var l=0;a.setConfig({onCompleted:function(d){o(d.token),R1()},onError:function(){l<3?(o(),a.reset(),setTimeout(function(){a.run()},500),l++):o("BYPASS_CAPTCHA")}})}else if(n.provider==="friendly_captcha")window.auth0FCInstance=new c.WidgetInstance(s,{sitekey:n.siteKey,language:e.lang,doneCallback:function(d){o(d)},errorCallback:function(){o()}});else{var u={callback:o,"expired-callback":function(){o()},"error-callback":function(){o()},sitekey:n.siteKey};n.provider==="auth0_v2"&&(l=0,u.language=e.lang,u.theme="light",u.retry="never",u["response-field"]=!1,u["error-callback"]=function(){return l<3?(o(),Ja(n.provider).reset(i),l++):o("BYPASS_CAPTCHA"),!0}),i=c.render(s,u),t.setAttribute("data-wid",i)}},o)}var o4={render:function(t,e,n,r){function i(o){o=o||S1,t.getChallenge(function(s,a){return s?(e.innerHTML=n.templates.error(s),o(s)):a.required?(e.style.display="",a.provider==="auth0"?t4(e,n,a,i):a.provider!=="recaptcha_v2"&&a.provider!=="recaptcha_enterprise"&&a.provider!=="hcaptcha"&&a.provider!=="friendly_captcha"&&a.provider!=="arkose"&&a.provider!=="auth0_v2"||i4(e,n,a),void(a.provider==="arkose"?o(null,{triggerCaptcha:function(c){Ja(a.provider).run(),R1=c}}):o())):(e.style.display="none",void(e.innerHTML=""))})}return n=he.merge(e4).with(n||{}),i(r),{reload:i,getValue:function(){var o=e.querySelector('input[name="captcha"]');if(o)return o.value}}},renderPasswordless:function(t,e,n,r){function i(o){o=o||S1,t.passwordless.getChallenge(function(s,a){return s?(e.innerHTML=n.templates.error(s),o(s)):a.required?(e.style.display="",a.provider==="auth0"?t4(e,n,a,i):a.provider!=="recaptcha_v2"&&a.provider!=="recaptcha_enterprise"&&a.provider!=="hcaptcha"&&a.provider!=="friendly_captcha"&&a.provider!=="arkose"&&a.provider!=="auth0_v2"||i4(e,n,a),void(a.provider==="arkose"?o(null,{triggerCaptcha:function(c){Ja(a.provider).run(),R1=c}}):o())):(e.style.display="none",void(e.innerHTML=""))})}return n=he.merge(e4).with(n||{}),i(r),{reload:i,getValue:function(){var o=e.querySelector('input[name="captcha"]');if(o)return o.value}}}};function oZ(){return new Date}function Yt(t){ye.check(t,{type:"object",message:"options parameter is not valid"},{domain:{type:"string",message:"domain option is required"},clientID:{type:"string",message:"clientID option is required"},responseType:{optional:!0,type:"string",message:"responseType is not valid"},responseMode:{optional:!0,type:"string",message:"responseMode is not valid"},redirectUri:{optional:!0,type:"string",message:"redirectUri is not valid"},scope:{optional:!0,type:"string",message:"scope is not valid"},audience:{optional:!0,type:"string",message:"audience is not valid"},popupOrigin:{optional:!0,type:"string",message:"popupOrigin is not valid"},leeway:{optional:!0,type:"number",message:"leeway is not valid"},plugins:{optional:!0,type:"array",message:"plugins is not valid"},maxAge:{optional:!0,type:"number",message:"maxAge is not valid"},stateExpiration:{optional:!0,type:"number",message:"stateExpiration is not valid"},legacySameSiteCookie:{optional:!0,type:"boolean",message:"legacySameSiteCookie option is not valid"},_disableDeprecationWarnings:{optional:!0,type:"boolean",message:"_disableDeprecationWarnings option is not valid"},_sendTelemetry:{optional:!0,type:"boolean",message:"_sendTelemetry option is not valid"},_telemetryInfo:{optional:!0,type:"object",message:"_telemetryInfo option is not valid"},_timesToRetryFailedRequests:{optional:!0,type:"number",message:"_timesToRetryFailedRequests option is not valid"}}),t.overrides&&ye.check(t.overrides,{type:"object",message:"overrides option is not valid"},{__tenant:{optional:!0,type:"string",message:"__tenant option is required"},__token_issuer:{optional:!0,type:"string",message:"__token_issuer option is required"},__jwks_uri:{optional:!0,type:"string",message:"__jwks_uri is required"}}),this.baseOptions=t,this.baseOptions.plugins=new D4(this,this.baseOptions.plugins||[]),this.baseOptions._sendTelemetry=this.baseOptions._sendTelemetry!==!1||this.baseOptions._sendTelemetry,this.baseOptions._timesToRetryFailedRequests=t._timesToRetryFailedRequests?parseInt(t._timesToRetryFailedRequests):0,this.baseOptions.tenant=this.baseOptions.overrides&&this.baseOptions.overrides.__tenant||this.baseOptions.domain.split(".")[0],this.baseOptions.token_issuer=this.baseOptions.overrides&&this.baseOptions.overrides.__token_issuer||"https://"+this.baseOptions.domain+"/",this.baseOptions.jwksURI=this.baseOptions.overrides&&this.baseOptions.overrides.__jwks_uri,t.legacySameSiteCookie!==!1&&(this.baseOptions.legacySameSiteCookie=!0),this.transactionManager=new rc(this.baseOptions),this.client=new ei(this.baseOptions),this.redirect=new A1(this,this.baseOptions),this.popup=new qo(this,this.baseOptions),this.crossOriginAuthentication=new zh(this,this.baseOptions),this.webMessageHandler=new O1(this),this._universalLogin=new J0(this,this.baseOptions),this.ssodataStorage=new ry(this.baseOptions)}function $h(t,e){this.baseOptions=e,this.request=t}function M1(t,e){this.baseOptions=e,this.request=t}function ei(t,e){arguments.length===2?this.auth0=t:e=t,ye.check(e,{type:"object",message:"options parameter is not valid"},{domain:{type:"string",message:"domain option is required"},clientID:{type:"string",message:"clientID option is required"},responseType:{optional:!0,type:"string",message:"responseType is not valid"},responseMode:{optional:!0,type:"string",message:"responseMode is not valid"},redirectUri:{optional:!0,type:"string",message:"redirectUri is not valid"},scope:{optional:!0,type:"string",message:"scope is not valid"},audience:{optional:!0,type:"string",message:"audience is not valid"},_disableDeprecationWarnings:{optional:!0,type:"boolean",message:"_disableDeprecationWarnings option is not valid"},_sendTelemetry:{optional:!0,type:"boolean",message:"_sendTelemetry option is not valid"},_telemetryInfo:{optional:!0,type:"object",message:"_telemetryInfo option is not valid"}}),this.baseOptions=e,this.baseOptions._sendTelemetry=this.baseOptions._sendTelemetry!==!1||this.baseOptions._sendTelemetry,this.baseOptions.rootUrl=this.baseOptions.domain&&this.baseOptions.domain.toLowerCase().indexOf("http")===0?this.baseOptions.domain:"https://"+this.baseOptions.domain,this.request=new Xi(this.baseOptions),this.passwordless=new $h(this.request,this.baseOptions),this.dbConnection=new M1(this.request,this.baseOptions),this.warn=new lc({disableWarnings:!!e._disableDeprecationWarnings}),this.ssodataStorage=new ry(this.baseOptions)}function X0(t){ye.check(t,{type:"object",message:"options parameter is not valid"},{domain:{type:"string",message:"domain option is required"},token:{type:"string",message:"token option is required"},_sendTelemetry:{optional:!0,type:"boolean",message:"_sendTelemetry option is not valid"},_telemetryInfo:{optional:!0,type:"object",message:"_telemetryInfo option is not valid"}}),this.baseOptions=t,this.baseOptions.headers={Authorization:"Bearer "+this.baseOptions.token},this.request=new Xi(this.baseOptions),this.baseOptions.rootUrl=kt("https://"+this.baseOptions.domain,"api","v2")}Yt.prototype.parseHash=function(t,e){var n,r;e||typeof t!="function"?t=t||{}:(e=t,t={});var i=t.hash===void 0?pt.getWindow().location.hash:t.hash;if(i=i.replace(/^#?\/?/,""),(n=Ls.parse(i)).hasOwnProperty("error"))return r=Ki.buildResponse(n.error,n.error_description),n.state&&(r.state=n.state),e(r);if(!n.hasOwnProperty("access_token")&&!n.hasOwnProperty("id_token")&&!n.hasOwnProperty("refresh_token"))return e(null,null);var o=(this.baseOptions.responseType||t.responseType||"").split(" ");return o.length>0&&o.indexOf("token")!==-1&&!n.hasOwnProperty("access_token")?e(Ki.buildResponse("invalid_hash","response_type contains `token`, but the parsed hash does not contain an `access_token` property")):o.length>0&&o.indexOf("id_token")!==-1&&!n.hasOwnProperty("id_token")?e(Ki.buildResponse("invalid_hash","response_type contains `id_token`, but the parsed hash does not contain an `id_token` property")):this.validateAuthenticationResponse(t,n,e)},Yt.prototype.validateAuthenticationResponse=function(t,e,n){var r=this;t.__enableIdPInitiatedLogin=t.__enableIdPInitiatedLogin||t.__enableImpersonation;var i=e.state,o=this.transactionManager.getStoredTransaction(i),s=t.state||o&&o.state||null,a=s===i;if(!(!i&&!s&&t.__enableIdPInitiatedLogin)&&!a)return n({error:"invalid_token",errorDescription:"`state` does not match."});var c=t.nonce||o&&o.nonce||null,l=o&&o.organization,u=t.state||o&&o.appState||null,d=function(h,f){if(h)return n(h);var m;return o&&o.lastUsedConnection&&(f&&(m=f.sub),r.ssodataStorage.set(o.lastUsedConnection,m)),n(null,function(_,w,y){return{accessToken:_.access_token||null,idToken:_.id_token||null,idTokenPayload:y||null,appState:w||null,refreshToken:_.refresh_token||null,state:_.state||null,expiresIn:_.expires_in?parseInt(_.expires_in,10):null,tokenType:_.token_type||null,scope:_.scope||null}}(e,u,f))};return e.id_token?this.validateToken(e.id_token,c,function(h,f){if(!h){if(l)if(l.indexOf("org_")===0){if(!f.org_id)return d(Ki.invalidToken("Organization Id (org_id) claim must be a string present in the ID token"));if(f.org_id!==l)return d(Ki.invalidToken('Organization Id (org_id) claim value mismatch in the ID token; expected "'+l+'", found "'+f.org_id+'"'))}else{if(!f.org_name)return d(Ki.invalidToken("Organization Name (org_name) claim must be a string present in the ID token"));if(f.org_name!==l.toLowerCase())return d(Ki.invalidToken('Organization Name (org_name) claim value mismatch in the ID token; expected "'+l+'", found "'+f.org_name+'"'))}return e.access_token&&f.at_hash?new nc().validateAccessToken(e.access_token,"RS256",f.at_hash,function(_){return _?d(Ki.invalidToken(_.message)):d(null,f)}):d(null,f)}if(h.error!=="invalid_token"||h.errorDescription&&h.errorDescription.indexOf("Nonce (nonce) claim value mismatch in the ID token")>-1)return d(h);var m=new nc().decode(e.id_token);return m.header.alg!=="HS256"?d(h):(m.payload.nonce||null)!==c?d({error:"invalid_token",errorDescription:'Nonce (nonce) claim value mismatch in the ID token; expected "'+c+'", found "'+m.payload.nonce+'"'}):e.access_token?r.client.userInfo(e.access_token,function(_,w){return _?d(_):d(null,w)}):d({error:"invalid_token",description:"The id_token cannot be validated because it was signed with the HS256 algorithm and public clients (like a browser) can\u2019t store secrets. Please read the associated doc for possible ways to fix this. Read more: https://auth0.com/docs/errors/libraries/auth0-js/invalid-token#parsing-an-hs256-signed-id-token-without-an-access-token"})}):d(null,null)},Yt.prototype.validateToken=function(t,e,n){new nc({issuer:this.baseOptions.token_issuer,jwksURI:this.baseOptions.jwksURI,audience:this.baseOptions.clientID,leeway:this.baseOptions.leeway||60,maxAge:this.baseOptions.maxAge,__clock:this.baseOptions.__clock||oZ}).verify(t,e,function(r,i){if(r)return n(Ki.invalidToken(r.message));n(null,i)})},Yt.prototype.renewAuth=function(t,e){var n=!!t.usePostMessage,r=t.postMessageDataType||!1,i=t.postMessageOrigin||pt.getWindow().origin,o=t.timeout,s=this,a=he.merge(this.baseOptions,["clientID","redirectUri","responseType","scope","audience","_csrf","state","_intstate","nonce"]).with(t);a.responseType=a.responseType||"token",a.responseMode=a.responseMode||"fragment",a=this.transactionManager.process(a),ye.check(a,{type:"object",message:"options parameter is not valid"}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),a.prompt="none",a=he.blacklist(a,["usePostMessage","tenant","postMessageDataType","postMessageOrigin"]),ru.create({authenticationUrl:this.client.buildAuthorizeUrl(a),postMessageDataType:r,postMessageOrigin:i,timeout:o}).login(n,function(c,l){if(typeof l=="object")return e(c,l);s.parseHash({hash:l},e)})},Yt.prototype.checkSession=function(t,e){var n=he.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce"]).with(t);return n.responseType==="code"?e({error:"error",error_description:"responseType can't be `code`"}):(t.nonce||(n=this.transactionManager.process(n)),n.redirectUri?(ye.check(n,{type:"object",message:"options parameter is not valid"}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=he.blacklist(n,["usePostMessage","tenant","postMessageDataType"]),void this.webMessageHandler.run(n,Xt(e,{forceLegacyError:!0,ignoreCasing:!0}))):e({error:"error",error_description:"redirectUri can't be empty"}))},Yt.prototype.changePassword=function(t,e){return this.client.dbConnection.changePassword(t,e)},Yt.prototype.passwordlessStart=function(t,e){var n=he.merge(this.baseOptions,["responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce"]).with(t.authParams);return t.authParams=this.transactionManager.process(n),this.client.passwordless.start(t,e)},Yt.prototype.signup=function(t,e){return this.client.dbConnection.signup(t,e)},Yt.prototype.authorize=function(t){var e=he.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce","organization","invitation"]).with(t);ye.check(e,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),(e=this.transactionManager.process(e)).scope=e.scope||"openid profile email",pt.redirect(this.client.buildAuthorizeUrl(e))},Yt.prototype.signupAndAuthorize=function(t,e){var n=this;return this.client.dbConnection.signup(he.blacklist(t,["popupHandler"]),function(r){if(r)return e(r);t.realm=t.connection,t.username||(t.username=t.email),n.client.login(t,e)})},Yt.prototype.login=function(t,e){var n=he.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting","organization","invitation"]).with(t);n=this.transactionManager.process(n),pt.getWindow().location.host===this.baseOptions.domain?(n.connection=n.realm,delete n.realm,this._universalLogin.login(n,e)):this.crossOriginAuthentication.login(n,e)},Yt.prototype.passwordlessLogin=function(t,e){var n=he.merge(this.baseOptions,["clientID","responseType","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting"]).with(t);if(n=this.transactionManager.process(n),pt.getWindow().location.host===this.baseOptions.domain)this.passwordlessVerify(n,e);else{var r=he.extend({credentialType:"http://auth0.com/oauth/grant-type/passwordless/otp",realm:n.connection,username:n.email||n.phoneNumber,otp:n.verificationCode},he.blacklist(n,["connection","email","phoneNumber","verificationCode"]));this.crossOriginAuthentication.login(r,e)}},Yt.prototype.crossOriginAuthenticationCallback=function(){this.crossOriginVerification()},Yt.prototype.crossOriginVerification=function(){this.crossOriginAuthentication.callback()},Yt.prototype.logout=function(t){pt.redirect(this.client.buildLogoutUrl(t))},Yt.prototype.passwordlessVerify=function(t,e){var n=this,r=he.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","nonce","onRedirecting"]).with(t);return ye.check(r,{type:"object",message:"options parameter is not valid"},{responseType:{type:"string",message:"responseType option is required"}}),r=this.transactionManager.process(r),this.client.passwordless.verify(r,function(i){if(i)return e(i);function o(){pt.redirect(n.client.passwordless.buildVerifyUrl(r))}if(typeof t.onRedirecting=="function")return t.onRedirecting(function(){o()});o()})},Yt.prototype.renderCaptcha=function(t,e,n){return o4.render(this.client,t,e,n)},Yt.prototype.renderPasswordlessCaptcha=function(t,e,n){return o4.renderPasswordless(this.client,t,e,n)},$h.prototype.buildVerifyUrl=function(t){var e,n;return ye.check(t,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},verificationCode:{type:"string",message:"verificationCode option is required"},phoneNumber:{optional:!1,type:"string",message:"phoneNumber option is required",condition:function(r){return!r.email}},email:{optional:!1,type:"string",message:"email option is required",condition:function(r){return!r.phoneNumber}}}),e=he.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience","_csrf","state","_intstate","protocol","nonce"]).with(t),this.baseOptions._sendTelemetry&&(e.auth0Client=this.request.getTelemetryData()),e=he.toSnakeCase(e,["auth0Client"]),n=Ls.stringify(e),kt(this.baseOptions.rootUrl,"passwordless","verify_redirect","?"+n)},$h.prototype.start=function(t,e){var n,r;ye.check(t,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},send:{type:"string",message:"send option is required",values:["link","code"],value_message:"send is not valid ([link, code])"},phoneNumber:{optional:!0,type:"string",message:"phoneNumber option is required",condition:function(s){return s.send==="code"||!s.email}},email:{optional:!0,type:"string",message:"email option is required",condition:function(s){return s.send==="link"||!s.phoneNumber}},authParams:{optional:!0,type:"object",message:"authParams option is required"}}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=kt(this.baseOptions.rootUrl,"passwordless","start");var i=t.xRequestLanguage;delete t.xRequestLanguage,(r=he.merge(this.baseOptions,["clientID","responseType","redirectUri","scope"]).with(t)).scope&&(r.authParams=r.authParams||{},r.authParams.scope=r.authParams.scope||r.scope),r.redirectUri&&(r.authParams=r.authParams||{},r.authParams.redirect_uri=r.authParams.redirectUri||r.redirectUri),r.responseType&&(r.authParams=r.authParams||{},r.authParams.response_type=r.authParams.responseType||r.responseType),delete r.redirectUri,delete r.responseType,delete r.scope,r=he.toSnakeCase(r,["auth0Client","authParams"]);var o=i?{xRequestLanguage:i}:void 0;return this.request.post(n,o).send(r).end(Xt(e))},$h.prototype.verify=function(t,e){var n,r;return ye.check(t,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},verificationCode:{type:"string",message:"verificationCode option is required"},phoneNumber:{optional:!1,type:"string",message:"phoneNumber option is required",condition:function(i){return!i.email}},email:{optional:!1,type:"string",message:"email option is required",condition:function(i){return!i.phoneNumber}}}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),r=he.pick(t,["connection","verificationCode","phoneNumber","email","auth0Client","clientID"]),r=he.toSnakeCase(r,["auth0Client"]),n=kt(this.baseOptions.rootUrl,"passwordless","verify"),this.request.post(n).send(r).end(Xt(e))},$h.prototype.getChallenge=function(t){if(ye.check(t,{type:"function",message:"cb parameter is not valid"}),!this.baseOptions.state)return t();var e=kt(this.baseOptions.rootUrl,"passwordless","challenge");return this.request.post(e).send({state:this.baseOptions.state}).end(Xt(t,{ignoreCasing:!0}))},M1.prototype.signup=function(t,e){var n,r,i;return ye.check(t,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},email:{type:"string",message:"email option is required"},password:{type:"string",message:"password option is required"}}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=kt(this.baseOptions.rootUrl,"dbconnections","signup"),i=(r=he.merge(this.baseOptions,["clientID","state"]).with(t)).user_metadata||r.userMetadata,r=he.blacklist(r,["scope","userMetadata","user_metadata"]),r=he.toSnakeCase(r,["auth0Client"]),i&&(r.user_metadata=i),this.request.post(n).send(r).end(Xt(e))},M1.prototype.changePassword=function(t,e){var n,r;return ye.check(t,{type:"object",message:"options parameter is not valid"},{connection:{type:"string",message:"connection option is required"},email:{type:"string",message:"email option is required"}}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=kt(this.baseOptions.rootUrl,"dbconnections","change_password"),r=he.merge(this.baseOptions,["clientID"]).with(t,["email","connection"]),r=he.toSnakeCase(r,["auth0Client"]),this.request.post(n).send(r).end(Xt(e))},ei.prototype.buildAuthorizeUrl=function(t){var e,n;return ye.check(t,{type:"object",message:"options parameter is not valid"}),e=he.merge(this.baseOptions,["clientID","responseType","responseMode","redirectUri","scope","audience"]).with(t),ye.check(e,{type:"object",message:"options parameter is not valid"},{clientID:{type:"string",message:"clientID option is required"},redirectUri:{optional:!0,type:"string",message:"redirectUri option is required"},responseType:{type:"string",message:"responseType option is required"},nonce:{type:"string",message:"nonce option is required",condition:function(r){return r.responseType.indexOf("code")===-1&&r.responseType.indexOf("id_token")!==-1}},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),this.baseOptions._sendTelemetry&&(e.auth0Client=this.request.getTelemetryData()),e.connection_scope&&ye.isArray(e.connection_scope)&&(e.connection_scope=e.connection_scope.join(",")),e=he.blacklist(e,["username","popupOptions","domain","tenant","timeout","appState"]),e=he.toSnakeCase(e,["auth0Client"]),e=zO.oauthAuthorizeParams(this.warn,e),n=Ls.stringify(e),kt(this.baseOptions.rootUrl,"authorize","?"+n)},ei.prototype.buildLogoutUrl=function(t){var e,n;return ye.check(t,{optional:!0,type:"object",message:"options parameter is not valid"}),e=he.merge(this.baseOptions,["clientID"]).with(t||{}),this.baseOptions._sendTelemetry&&(e.auth0Client=this.request.getTelemetryData()),e=he.toSnakeCase(e,["auth0Client","returnTo"]),n=Ls.stringify(he.blacklist(e,["federated"])),t&&t.federated!==void 0&&t.federated!==!1&&t.federated!=="false"&&(n+="&federated"),kt(this.baseOptions.rootUrl,"v2","logout","?"+n)},ei.prototype.loginWithDefaultDirectory=function(t,e){return ye.check(t,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),t.grantType="password",this.oauthToken(t,e)},ei.prototype.login=function(t,e){return ye.check(t,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},realm:{type:"string",message:"realm option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),t.grantType="http://auth0.com/oauth/grant-type/password-realm",this.oauthToken(t,e)},ei.prototype.oauthToken=function(t,e){var n,r;return ye.check(t,{type:"object",message:"options parameter is not valid"}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=kt(this.baseOptions.rootUrl,"oauth","token"),r=he.merge(this.baseOptions,["clientID","scope","audience"]).with(t),ye.check(r,{type:"object",message:"options parameter is not valid"},{clientID:{type:"string",message:"clientID option is required"},grantType:{type:"string",message:"grantType option is required"},scope:{optional:!0,type:"string",message:"scope option is required"},audience:{optional:!0,type:"string",message:"audience option is required"}}),r=he.toSnakeCase(r,["auth0Client"]),r=zO.oauthTokenParams(this.warn,r),this.request.post(n).send(r).end(Xt(e))},ei.prototype.loginWithResourceOwner=function(t,e){var n,r;return ye.check(t,{type:"object",message:"options parameter is not valid"},{username:{type:"string",message:"username option is required"},password:{type:"string",message:"password option is required"},connection:{type:"string",message:"connection option is required"},scope:{optional:!0,type:"string",message:"scope option is required"}}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=kt(this.baseOptions.rootUrl,"oauth","ro"),r=he.merge(this.baseOptions,["clientID","scope"]).with(t,["username","password","scope","connection","device"]),(r=he.toSnakeCase(r,["auth0Client"])).grant_type=r.grant_type||"password",this.request.post(n).send(r).end(Xt(e))},ei.prototype.getSSOData=function(t,e){if(this.auth0||(this.auth0=new Yt(this.baseOptions)),pt.getWindow().location.host===this.baseOptions.domain)return this.auth0._universalLogin.getSSOData(t,e);typeof t=="function"&&(e=t),ye.check(e,{type:"function",message:"cb parameter is not valid"});var n=this.baseOptions.clientID,r=this.ssodataStorage.get()||{};this.auth0.checkSession({responseType:"token id_token",scope:"openid profile email",connection:r.lastUsedConnection,timeout:5e3},function(i,o){return i?i.error==="login_required"?e(null,{sso:!1}):(i.error==="consent_required"&&(i.error_description="Consent required. When using `getSSOData`, the user has to be authenticated with the following scope: `openid profile email`."),e(i,{sso:!1})):r.lastUsedSub&&r.lastUsedSub!==o.idTokenPayload.sub?e(i,{sso:!1}):e(null,{lastUsedConnection:{name:r.lastUsedConnection},lastUsedUserID:o.idTokenPayload.sub,lastUsedUsername:o.idTokenPayload.email||o.idTokenPayload.name,lastUsedClientID:n,sessionClients:[n],sso:!0})})},ei.prototype.userInfo=function(t,e){var n;return ye.check(t,{type:"string",message:"accessToken parameter is not valid"}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=kt(this.baseOptions.rootUrl,"userinfo"),this.request.get(n).set("Authorization","Bearer "+t).end(Xt(e,{ignoreCasing:!0}))},ei.prototype.getChallenge=function(t){if(ye.check(t,{type:"function",message:"cb parameter is not valid"}),!this.baseOptions.state)return t();var e=kt(this.baseOptions.rootUrl,"usernamepassword","challenge");return this.request.post(e).send({state:this.baseOptions.state}).end(Xt(t,{ignoreCasing:!0}))},ei.prototype.delegation=function(t,e){var n,r;return ye.check(t,{type:"object",message:"options parameter is not valid"},{grant_type:{type:"string",message:"grant_type option is required"}}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=kt(this.baseOptions.rootUrl,"delegation"),r=he.merge(this.baseOptions,["clientID"]).with(t),r=he.toSnakeCase(r,["auth0Client"]),this.request.post(n).send(r).end(Xt(e))},ei.prototype.getUserCountry=function(t){var e;return ye.check(t,{type:"function",message:"cb parameter is not valid"}),e=kt(this.baseOptions.rootUrl,"user","geoloc","country"),this.request.get(e).end(Xt(t))},X0.prototype.getUser=function(t,e){var n;return ye.check(t,{type:"string",message:"userId parameter is not valid"}),ye.check(e,{type:"function",message:"cb parameter is not valid"}),n=kt(this.baseOptions.rootUrl,"users",t),this.request.get(n).end(Xt(e,{ignoreCasing:!0}))},X0.prototype.patchUserMetadata=function(t,e,n){var r;return ye.check(t,{type:"string",message:"userId parameter is not valid"}),ye.check(e,{type:"object",message:"userMetadata parameter is not valid"}),ye.check(n,{type:"function",message:"cb parameter is not valid"}),r=kt(this.baseOptions.rootUrl,"users",t),this.request.patch(r).send({user_metadata:e}).end(Xt(n,{ignoreCasing:!0}))},X0.prototype.patchUserAttributes=function(t,e,n){var r;return ye.check(t,{type:"string",message:"userId parameter is not valid"}),ye.check(e,{type:"object",message:"user parameter is not valid"}),ye.check(n,{type:"function",message:"cb parameter is not valid"}),r=kt(this.baseOptions.rootUrl,"users",t),this.request.patch(r).send(e).end(Xt(n,{ignoreCasing:!0}))},X0.prototype.linkUser=function(t,e,n){var r;return ye.check(t,{type:"string",message:"userId parameter is not valid"}),ye.check(e,{type:"string",message:"secondaryUserToken parameter is not valid"}),ye.check(n,{type:"function",message:"cb parameter is not valid"}),r=kt(this.baseOptions.rootUrl,"users",t,"identities"),this.request.post(r).send({link_with:e}).end(Xt(n,{ignoreCasing:!0}))};var Wo={_origin:"https://api.emailjs.com"};var T4=(t,e="https://api.emailjs.com")=>{Wo._userID=t,Wo._origin=e};var iy=(t,e,n)=>{if(!t)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};var Wh=class{constructor(e){this.status=e.status,this.text=e.responseText}};var oy=(t,e,n={})=>new Promise((r,i)=>{let o=new XMLHttpRequest;o.addEventListener("load",({target:s})=>{let a=new Wh(s);a.status===200||a.text==="OK"?r(a):i(a)}),o.addEventListener("error",({target:s})=>{i(new Wh(s))}),o.open("POST",Wo._origin+t,!0),Object.keys(n).forEach(s=>{o.setRequestHeader(s,n[s])}),o.send(e)});var A4=(t,e,n,r)=>{let i=r||Wo._userID;return iy(i,t,e),oy("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:i,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"})};var aZ=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},S4=(t,e,n,r)=>{let i=r||Wo._userID,o=aZ(n);iy(i,t,e);let s=new FormData(o);return s.append("lib_version","3.2.0"),s.append("service_id",t),s.append("template_id",e),s.append("user_id",i),oy("/api/v1.0/email/send-form",s)};var R4={init:T4,send:A4,sendForm:S4};var Ut=(()=>{let e=class e{constructor(r,i,o,s){this.router=r,this.http=i,this.platformId=o,this.activatedRoute=s,this.auth0=new Yt({clientID:"cSab7XYHx9yKcfOqYU9LJpUOFE9AA77b",domain:"dev-u5hvg8wb8m85i4jl.eu.auth0.com",responseType:"token id_token",redirectUri:"https://0maxwelle4.github.io/no-frontiers/",audience:"https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/",scope:"openid profile email read:current_user user_metadata create:users update:users update:users_app_metadata update:current_user_metadata"}),this.isAuthenticatedSubject=new yn(!1),this.isAuthenticated$=this.isAuthenticatedSubject.asObservable()}handleAuthentication(){typeof window<"u"?this.auth0.parseHash((r,i)=>{i?i.accessToken&&i.idToken&&i.expiresIn?(this.setSession(i),this.router.navigate(["/"])):console.error("Authentication result is missing required properties."):console.error(r?`Error: ${r.error}`:"Authentication result is undefined.")}):console.error("handleAuthentication can only be called in the browser environment.")}setSession(r){if(r.expiresIn!==void 0){let i=JSON.stringify(r.expiresIn*1e3+new Date().getTime());localStorage.setItem("access_token",r.accessToken||""),localStorage.setItem("id_token",r.idToken||""),localStorage.setItem("expires_at",i),this.getUserProfile().subscribe(o=>{localStorage.setItem("picture",o.picture)})}else console.error("Auth result does not contain expiresIn property.")}login(){typeof window<"u"?this.auth0.authorize():console.error("login can only be called in the browser environment.")}logout(){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),localStorage.removeItem("expires_at"),localStorage.removeItem("picture"),this.isAuthenticatedSubject.next(!1),this.router.navigate(["/"])}isAuthenticated(){if(typeof localStorage<"u"){let r=JSON.parse(localStorage.getItem("expires_at")||"{}");return new Date().getTime()<r}else return!1}getUserProfile(){if(JC(this.platformId)){let r=localStorage.getItem("access_token");return r?this.http.get("https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/userinfo",{headers:new ln().set("Authorization",`Bearer ${r}`)}):(console.error("ERROR: Access token not found in localStorage."),wo("Access token not found in localStorage."))}else return console.error("ERROR: getUserProfile() cannot be called in a non-browser environment."),wo("getUserProfile() cannot be called in a non-browser environment.")}metaData(r){let i=localStorage.getItem("access_token");console.log(i);let s=`https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/users/${r}`,a=new ln({Accept:"application/json",Authorization:`Bearer ${i}`});return this.http.get(encodeURI(s),{headers:a})}CrearProfesor(r){return be(this.tokenApi()).pipe(He(i=>{console.log(i);let o=JSON.stringify(r),s="https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/users",a=new ln({"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${i}`});return this.http.post(s,o,{headers:a})}))}getUserbyId(r){return be(this.tokenApi()).pipe(He(i=>{let o=`https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/users/${r}`,s=new ln({Authorization:`Bearer ${i}`});return this.http.get(o,{headers:s})}))}getAllUsers(){return be(this.tokenApi()).pipe(He(r=>{let i="https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/users",o=new ln({Authorization:`Bearer ${r}`});return this.http.get(i,{headers:o})}))}updatePicture(r,i){return be(this.tokenApi()).pipe(He(o=>{let s=`https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/users/${r}`,a=new ln({"Content-Type":"application/json",Authorization:`Bearer ${o}`}),c={picture:i};return this.http.patch(s,c,{headers:a})}))}updateProfesorDesc(r,i){return be(this.tokenApi()).pipe(He(o=>{let s=`https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/users/${r}`,a=new ln({"Content-Type":"application/json",Authorization:`Bearer ${o}`}),c={user_metadata:{descripcion:i}};return this.http.patch(s,c,{headers:a})}))}deleteUserById(r){return be(this.tokenApi()).pipe(He(i=>{let o=`https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/users/${r}`,s=new ln({Authorization:`Bearer ${i}`});return this.http.delete(o,{headers:s})}))}sendEmail(r,i){return R4.send("service_orvenuu",r,i,"N8OI897r4wP6q-f5G")}tokenApi(){let r="",i=new ln({"content-type":"application/x-www-form-urlencoded"}),o=new URLSearchParams({grant_type:"client_credentials",client_id:"hymDxVjcTI8Tp24mbisLeSn7x7yfmrqD",client_secret:"JP5UPRCe_tSXUGL5a7d2gsjHme5Rps8zd3LZzddcVFoCPdK3FXRcfK8irBpfAEgy",audience:"https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/"});return this.http.post("https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/oauth/token",o.toString(),{headers:i}).toPromise().then(a=>(r=a.access_token,r)).catch(a=>{throw console.error("Error while fetching token:",a),a})}};e.\u0275fac=function(i){return new(i||e)(U(ft),U(Wa),U(Kt),U(ir))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();var M4=(()=>{let e=class e{constructor(r){this.document=r,this.selector="globalLoader"}getElement(){return this.document.getElementById(this.selector)}hide(){let r=this.getElement();r&&(r.classList.contains("global-loader-hidden")||(r.className+=" global-loader-fade-in"))}};e.\u0275fac=function(i){return new(i||e)(U(wn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var j4=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(X(ko),X(Ar))},e.\u0275dir=_n({type:e});let t=e;return t})(),lZ=(()=>{let e=class e extends j4{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Fl(e)))(o||e)}})(),e.\u0275dir=_n({type:e,features:[Fo]});let t=e;return t})(),U4=new te("");var uZ={provide:U4,useExisting:ja(()=>hy),multi:!0};function dZ(){let t=qi()?qi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hZ=new te(""),hy=(()=>{let e=class e extends j4{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dZ())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(X(ko),X(Ar),X(hZ,8))},e.\u0275dir=_n({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&we("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[sh([uZ]),Fo]});let t=e;return t})();function fZ(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var V1=new te(""),$4=new te("");function pZ(t){return fZ(t.value)?{required:!0}:null}function P4(t){return null}function q4(t){return t!=null}function H4(t){return Ha(t)?be(t):t}function z4(t){let e={};return t.forEach(n=>{e=n!=null?ae(ae({},e),n):e}),Object.keys(e).length===0?null:e}function W4(t,e){return e.map(n=>n(t))}function mZ(t){return!t.validate}function G4(t){return t.map(e=>mZ(e)?e:n=>e.validate(n))}function gZ(t){if(!t)return null;let e=t.filter(q4);return e.length==0?null:function(n){return z4(W4(n,e))}}function B1(t){return t!=null?gZ(G4(t)):null}function yZ(t){if(!t)return null;let e=t.filter(q4);return e.length==0?null:function(n){let r=W4(n,e).map(H4);return vE(r).pipe(fe(z4))}}function j1(t){return t!=null?yZ(G4(t)):null}function N4(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function vZ(t){return t._rawValidators}function _Z(t){return t._rawAsyncValidators}function L1(t){return t?Array.isArray(t)?t:[t]:[]}function ay(t,e){return Array.isArray(t)?t.includes(e):t===e}function k4(t,e){let n=L1(e);return L1(t).forEach(i=>{ay(n,i)||n.push(i)}),n}function F4(t,e){return L1(e).filter(n=>!ay(t,n))}var cy=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=B1(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=j1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},hu=class extends cy{get formDirective(){return null}get path(){return null}},Yh=class extends cy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ly=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},wZ={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Gme=st(ae({},wZ),{"[class.ng-submitted]":"isSubmitted"}),K4=(()=>{let e=class e extends ly{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(X(Yh,2))},e.\u0275dir=_n({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&qg("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Fo]});let t=e;return t})(),fy=(()=>{let e=class e extends ly{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(X(hu,10))},e.\u0275dir=_n({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&qg("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Fo]});let t=e;return t})();var Gh="VALID",sy="INVALID",du="PENDING",Kh="DISABLED";function Q4(t){return(py(t)?t.validators:t)||null}function EZ(t){return Array.isArray(t)?B1(t):t||null}function Y4(t,e){return(py(e)?e.asyncValidators:t)||null}function xZ(t){return Array.isArray(t)?j1(t):t||null}function py(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function CZ(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new de(1e3,"");if(!r[n])throw new de(1001,"")}function bZ(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new de(1002,"")})}var uy=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Gh}get invalid(){return this.status===sy}get pending(){return this.status==du}get disabled(){return this.status===Kh}get enabled(){return this.status!==Kh}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(k4(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(k4(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(F4(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(F4(e,this._rawAsyncValidators))}hasValidator(e){return ay(this._rawValidators,e)}hasAsyncValidator(e){return ay(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=du,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Kh,this.errors=null,this._forEachChild(r=>{r.disable(st(ae({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(st(ae({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Gh,this._forEachChild(r=>{r.enable(st(ae({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(st(ae({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gh||this.status===du)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kh:Gh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=du,this._hasOwnPendingAsyncValidator=!0;let n=H4(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Bt,this.statusChanges=new Bt}_calculateStatus(){return this._allControlsDisabled()?Kh:this.errors?sy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(du)?du:this._anyControlsHaveStatus(sy)?sy:Gh}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){py(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=EZ(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=xZ(this._rawAsyncValidators)}},dy=class extends uy{constructor(e,n,r){super(Q4(n),Y4(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){bZ(this,!0,e),Object.keys(e).forEach(r=>{CZ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var U1=new te("CallSetDisabledState",{providedIn:"root",factory:()=>$1}),$1="always";function IZ(t,e){return[...e.path,t]}function X4(t,e,n=$1){Z4(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),TZ(t,e),SZ(t,e),AZ(t,e),DZ(t,e)}function O4(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function DZ(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Z4(t,e){let n=vZ(t);e.validator!==null?t.setValidators(N4(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=_Z(t);e.asyncValidator!==null?t.setAsyncValidators(N4(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();O4(e._rawValidators,i),O4(e._rawAsyncValidators,i)}function TZ(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&J4(t,e)})}function AZ(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&J4(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function J4(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function SZ(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function RZ(t,e){t==null,Z4(t,e)}function MZ(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function PZ(t){return Object.getPrototypeOf(t.constructor)===lZ}function NZ(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kZ(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===hy?n=o:PZ(o)?r=o:i=o}),i||r||n||null}var FZ={provide:hu,useExisting:ja(()=>Xh)},Qh=Promise.resolve(),Xh=(()=>{let e=class e extends hu{constructor(r,i,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Bt,this.form=new dy({},B1(r),j1(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Qh.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),X4(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Qh.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Qh.then(()=>{let i=this._findContainer(r.path),o=new dy({});RZ(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Qh.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Qh.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,NZ(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(X(V1,10),X($4,10),X(U1,8))},e.\u0275dir=_n({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&we("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[Vn.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sh([FZ]),Fo]});let t=e;return t})();function L4(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function V4(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var OZ=class extends uy{constructor(e=null,n,r){super(Q4(n),Y4(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),py(n)&&(n.nonNullable||n.initialValueIsDefault)&&(V4(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){L4(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){L4(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){V4(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var LZ={provide:Yh,useExisting:ja(()=>q1)},B4=Promise.resolve(),q1=(()=>{let e=class e extends Yh{constructor(r,i,o,s,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new OZ,this._registered=!1,this.name="",this.update=new Bt,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=kZ(this,s)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),MZ(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){X4(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){B4.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&As(i);B4.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?IZ(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(X(hu,9),X(V1,10),X($4,10),X(U4,10),X(Ts,8),X(U1,8))},e.\u0275dir=_n({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Vn.None,"disabled","isDisabled"],model:[Vn.None,"ngModel","model"],options:[Vn.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sh([LZ]),Fo,Po]});let t=e;return t})(),my=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=_n({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var VZ=(()=>{let e=class e{constructor(){this._validator=P4}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):P4,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=_n({type:e,features:[Po]});let t=e;return t})();var BZ={provide:V1,useExisting:ja(()=>H1),multi:!0};var H1=(()=>{let e=class e extends VZ{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=As,this.createValidator=r=>pZ}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Fl(e)))(o||e)}})(),e.\u0275dir=_n({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&rh("required",o._enabled?"":null)},inputs:{required:"required"},features:[sh([BZ]),Fo]});let t=e;return t})();var jZ=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({});let t=e;return t})();var eL=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:U1,useValue:r.callSetDisabledState??$1}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({imports:[jZ]});let t=e;return t})();function UZ(t,e){if(t&1){let n=dt();k(0,"button",16),we("click",function(){et(n);let i=nt();return tt(i.login())}),z(1,"Sign in"),O()}}var $Z=()=>["resgisterProfes"];function qZ(t,e){t&1&&(k(0,"button",17),z(1,"Sign in like Teacher"),O()),t&2&&ee("routerLink",Bn(1,$Z))}var HZ=()=>["peticiones"];function zZ(t,e){t&1&&(k(0,"a",25),z(1,"Peticiones"),O()),t&2&&ee("routerLink",Bn(1,HZ))}var WZ=()=>["manejar"];function GZ(t,e){t&1&&(k(0,"a",25),z(1,"Manejar"),O()),t&2&&ee("routerLink",Bn(1,WZ))}var rL=()=>["conversaciones"];function KZ(t,e){t&1&&(k(0,"a",25),z(1,"Citas"),O()),t&2&&ee("routerLink",Bn(1,rL))}function QZ(t,e){t&1&&(k(0,"a",25),z(1,"Chats"),O()),t&2&&ee("routerLink",Bn(1,rL))}var YZ=()=>["perfil"];function XZ(t,e){t&1&&(k(0,"a",25),z(1,"Profile"),O()),t&2&&ee("routerLink",Bn(1,YZ))}function ZZ(t,e){if(t&1){let n=dt();k(0,"a",26),we("click",function(){et(n);let i=nt(2);return tt(i.logout())}),z(1,"Sign out"),O()}t&2&&Oo("cursor","pointer")}function JZ(t,e){if(t&1&&(k(0,"div",18)(1,"a",19),le(2,"img",20),O(),k(3,"ul",21)(4,"li"),Ie(5,zZ,2,2,"a",22),O(),k(6,"li"),Ie(7,GZ,2,2,"a",22),O(),k(8,"li"),Ie(9,KZ,2,2,"a",22),O(),k(10,"li"),Ie(11,QZ,2,2,"a",22),O(),k(12,"li"),Ie(13,XZ,2,2,"a",22),O(),k(14,"li"),le(15,"hr",23),O(),k(16,"li"),Ie(17,ZZ,2,2,"a",24),O()()()),t&2){let n=nt();Z(2),ee("src",n.avatarImg,jt),Z(3),ee("ngIf",n.isLoggedIn()&&n.gerente),Z(2),ee("ngIf",n.isLoggedIn()&&n.gerente),Z(2),ee("ngIf",n.isLoggedIn()&&n.profe),Z(2),ee("ngIf",n.isLoggedIn()),Z(2),ee("ngIf",n.isLoggedIn()),Z(4),ee("ngIf",n.isLoggedIn())}}var nL=()=>["home"],eJ=()=>["equipo"],tJ=()=>["about"],iL=(()=>{let e=class e{constructor(r,i){this.router=r,this.authService=i,this.role="",this.profe=!1,this.gerente=!1,this.avatarImg=""}ngOnInit(){setTimeout(()=>{this.avatarImg=localStorage.getItem("picture")||"https://github.com/mdo.png",this.sesion()},900)}goToEquipo(){localStorage.setItem("isRefreshed","false")}buscar(r){this.router.navigate(["/buscar",r])}login(){this.authService.login()}logout(){this.authService.logout()}isLoggedIn(){return this.authService.isAuthenticated()}sesion(){this.authService.getUserProfile().subscribe(r=>{this.avatarImg=r.picture,console.log("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",r),this.authService.metaData(r.sub).subscribe(i=>{i.app_metadata?.role=="profesor"&&(this.profe=!0),i.app_metadata?.role=="gerente"&&(this.gerente=!0)})})}};e.\u0275fac=function(i){return new(i||e)(X(ft),X(Ut))},e.\u0275cmp=Je({type:e,selectors:[["app-navbar"]],decls:21,vars:11,consts:[[1,"p-3","mb-3"],[1,"container"],[1,"d-flex","flex-wrap","align-items-center","justify-content-center","justify-content-lg-start"],[1,"d-flex","align-items-center","mb-2","mb-lg-0","text-white","text-decoration-none",3,"routerLink"],["src","https://i.ibb.co/5GnrrKn/logo.png","alt","logo",2,"max-width","80px","max-height","80px"],[1,"nav","col-12","col-lg-auto","me-lg-auto","mb-2","justify-content-center","mb-md-0","nav-masthead",2,"margin-left","5px"],["routerLinkActive","active",1,"nav-item"],["routerLinkActive","active","aria-current","page",1,"nav-link",3,"routerLink"],["routerLinkActive","active",1,"nav-link",2,"cursor","pointer",3,"routerLink","click"],["routerLinkActive","active",1,"nav-link",3,"routerLink"],[1,"col-12","col-lg-auto","mb-3","mb-lg-0","me-lg-3"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2",3,"keyup"],["termino",""],["class","btn btn-outline-success","type","button",3,"click",4,"ngIf"],["class","btn btn-outline-success","type","button","style","margin-left: 20px;",3,"routerLink",4,"ngIf"],["class","dropdown text-end",4,"ngIf"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-success",2,"margin-left","20px",3,"routerLink"],[1,"dropdown","text-end"],["href","#","id","dropdownUser1","data-bs-toggle","dropdown","aria-expanded","false",1,"d-block","link-light","text-decoration-none","dropdown-toggle"],["alt","mdo","width","32","height","32",1,"rounded-circle",3,"src"],["aria-labelledby","dropdownUser1",1,"dropdown-menu","text-small"],["class","dropdown-item",3,"routerLink",4,"ngIf"],[1,"dropdown-divider"],["class","dropdown-item",3,"cursor","click",4,"ngIf"],[1,"dropdown-item",3,"routerLink"],[1,"dropdown-item",3,"click"]],template:function(i,o){if(i&1){let s=dt();k(0,"header",0)(1,"div",1)(2,"div",2)(3,"a",3),le(4,"img",4),O(),k(5,"ul",5)(6,"li",6)(7,"a",7),z(8,"Home"),O()(),k(9,"li",6)(10,"a",8),we("click",function(){return o.goToEquipo()}),z(11,"Plantilla"),O()(),k(12,"li",6)(13,"a",9),z(14,"Sobre Nosotros"),O()()(),k(15,"form",10)(16,"input",11,12),we("keyup",function(){et(s);let c=sn(17);return tt(o.buscar(c.value))}),O()(),Ie(18,UZ,2,0,"button",13)(19,qZ,2,2,"button",14)(20,JZ,18,7,"div",15),O()()()}i&2&&(Z(3),ee("routerLink",Bn(7,nL)),Z(4),ee("routerLink",Bn(8,nL)),Z(3),ee("routerLink",Bn(9,eJ)),Z(3),ee("routerLink",Bn(10,tJ)),Z(5),ee("ngIf",!o.isLoggedIn()),Z(),ee("ngIf",!o.isLoggedIn()),Z(),ee("ngIf",o.isLoggedIn()))},dependencies:[cn,Ps,iO,my,fy,Xh],styles:["h3[_ngcontent-%COMP%]{cursor:pointer}"]});let t=e;return t})();var rJ=()=>["/about"],iJ=()=>["/equipo"],oL=(()=>{let e=class e{goToEquipo(){localStorage.setItem("isRefreshed","false")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Je({type:e,selectors:[["app-footer"]],decls:38,vars:4,consts:[[1,"py-4","text-white-50"],[1,"container"],[1,"row","align-items-center","py-4"],[1,"col-12","col-lg-3","text-center","text-lg-start","mb-3","mb-lg-0"],["alt","","height","","src","","width","300",1,"img-fluid"],[1,"col-12","col-lg-6","navbar-expand","text-center","mb-3","mb-lg-0","text-white-50"],[1,"list-unstyled","d-block","d-lg-flex","justify-content-center"],[1,"nav-item"],["href","/",1,"text-light","text-decoration-none","me-lg-3"],[1,"text-light","text-decoration-none","me-lg-3",3,"routerLink"],[1,"text-light","text-decoration-none","me-lg-3",3,"routerLink","click"],[1,"col-12","col-lg-3","small","text-center","text-lg-end"],[1,"border-top","d-lg-none"],[1,"text-center","py-3"],["href","",1,"me-2"],["fill","currentColor","height","20","viewbox","0 0 16 16","width","20","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-pinterest","text-primary"],["d","M8 0a8 8 0 0 0-2.915 15.452c-.07-.633-.134-1.606.027-2.297.146-.625.938-3.977.938-3.977s-.239-.479-.239-1.187c0-1.113.645-1.943 1.448-1.943.682 0 1.012.512 1.012 1.127 0 .686-.437 1.712-.663 2.663-.188.796.4 1.446 1.185 1.446 1.422 0 2.515-1.5 2.515-3.664 0-1.915-1.377-3.254-3.342-3.254-2.276 0-3.612 1.707-3.612 3.471 0 .688.265 1.425.595 1.826a.24.24 0 0 1 .056.23c-.061.252-.196.796-.222.907-.035.146-.116.177-.268.107-1-.465-1.624-1.926-1.624-3.1 0-2.523 1.834-4.84 5.286-4.84 2.775 0 4.932 1.977 4.932 4.62 0 2.757-1.739 4.976-4.151 4.976-.811 0-1.573-.421-1.834-.919l-.498 1.902c-.181.695-.669 1.566-.995 2.097A8 8 0 1 0 8 0z"],["fill","currentColor","height","20","viewbox","0 0 16 16","width","20","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-twitter","text-primary"],["d","M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"],["fill","currentColor","height","20","viewbox","0 0 16 16","width","20","xmlns","http://www.w3.org/2000/svg",1,"bi","bi-facebook","text-primary"],["d","M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"],[1,"pt-lg-4","pb-4","pb-lg-3","text-center","small"],[1,"mb-0"],["href","",1,"d-block","d-lg-inline","text-muted","mx-lg-1","mb-2","mb-lg-0"],[1,"text-muted","mb-0"]],template:function(i,o){i&1&&(k(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3),le(4,"img",4),O(),k(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),z(9,"Home"),O()(),k(10,"li",7)(11,"a",9),z(12,"Sobre Nosotros"),O()(),k(13,"li",7)(14,"a",10),we("click",function(){return o.goToEquipo()}),z(15,"Nuestra Plantilla"),O()()()(),le(16,"div",11),O(),le(17,"div",12),k(18,"div",13)(19,"a",14),Cg(),k(20,"svg",15),le(21,"path",16),O()(),bg(),k(22,"a",14),Cg(),k(23,"svg",17),le(24,"path",18),O()(),bg(),k(25,"a",14),Cg(),k(26,"svg",19),le(27,"path",20),O()()(),bg(),k(28,"div",21)(29,"p",22)(30,"a",23),z(31,"Privacy Policy"),O(),k(32,"a",23),z(33,"Terms of Service"),O(),k(34,"a",23),z(35,"Site Map"),O()(),k(36,"p",24),z(37,"\xA9 2023 FreeFrontend.dev. All rights reserved."),O()()()()),i&2&&(Z(11),ee("routerLink",Bn(2,rJ)),Z(3),ee("routerLink",Bn(3,iJ)))},dependencies:[Ps]});let t=e;return t})();var sL=(()=>{let e=class e{constructor(r,i){this.authService=r,this.preloader=i,this.title="ProyectoFinal"}ngOnInit(){this.authService.handleAuthentication()}ngAfterViewInit(){}};e.\u0275fac=function(i){return new(i||e)(X(Ut),X(M4))},e.\u0275cmp=Je({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"d-flex","h-100","text-center","text-white","bg-dark","app_component"],[1,"px-3"]],template:function(i,o){i&1&&(k(0,"div",0),le(1,"app-navbar"),k(2,"main",1),le(3,"router-outlet"),O(),le(4,"app-footer"),O())},dependencies:[Qb,iL,oL],styles:[".app_component[_ngcontent-%COMP%]{flex-direction:column}main[_ngcontent-%COMP%]{min-height:100vh}"]});let t=e;return t})();var Ji=(()=>{let e=class e{constructor(r,i){this.http=r,this._authService=i,this.URL="assets/server/profes.php"}getProfesores(){return this.http.get(this.URL)}buscarProfesor(r,i){let o=[];return i.forEach(s=>{s.name.toLowerCase().includes(r.toLowerCase())&&(console.log(s),o.push(s))}),o}buscarProfesorId(r,i){let o=[];return i.forEach(s=>{s.user_id==r&&o.push(s)}),o}usersAuth0(){return be(this._authService.tokenApi()).pipe(He(r=>{let i="https://dev-u5hvg8wb8m85i4jl.eu.auth0.com/api/v2/users",o=new Hi().set("q",'app_metadata.role:"profesor"').set("search_engine","v3"),s=new ln({Authorization:`Bearer ${r}`});return this.http.get(i,{params:o,headers:s})}))}};e.\u0275fac=function(i){return new(i||e)(U(Wa),U(Ut))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wr=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Je({type:e,selectors:[["app-loading"]],decls:3,vars:0,consts:[["id","globalLoader",1,"global-loader"]],template:function(i,o){i&1&&(k(0,"div",0)(1,"h1"),z(2,"LOADING..."),O()())},styles:[".global-loader[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;z-index:1;width:100%;height:100%;background-color:#fff;opacity:1;transition:opacity .5s ease-in-out}.global-loader-fade-in[_ngcontent-%COMP%]{opacity:0}.global-loader-hidden[_ngcontent-%COMP%]{display:none}.global-loader[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-family:Helvetica Neue,Helvetica,sans-serif;font-weight:400;font-size:24px;letter-spacing:.04rem;white-space:pre;-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;background-image:repeating-linear-gradient(to right,#f44336,#9c27b0,#3f51b5,#03a9f4,#009688,#8bc34a,#ffeb3b,#ff9800);background-size:750% auto;background-position:0 100%;animation:_ngcontent-%COMP%_gradient 20s infinite;animation-fill-mode:forwards;animation-timing-function:linear}@keyframes _ngcontent-%COMP%_gradient{0%{background-position:0 0}to{background-position:-750% 0}}"]});let t=e;return t})();function sJ(t,e){t&1&&le(0,"app-loading")}function aJ(t,e){if(t&1){let n=dt();k(0,"div",41),we("click",function(){let o=et(n).$implicit,s=nt();return tt(s.PerfilProfesor(o.user_id))}),k(1,"div",42),le(2,"img",43),k(3,"div",44)(4,"h5",45),z(5),O(),le(6,"p",46),O()()()}if(t&2){let n=e.$implicit;Z(2),ee("src",n.picture,jt),Z(3),Dt(n.name)}}function cJ(t,e){t&1&&(k(0,"div",47),z(1,"Nombre no v\xE1lido. "),O())}function lJ(t,e){t&1&&(k(0,"div",48),z(1,"Email no v\xE1lido. "),O())}function uJ(t,e){t&1&&(k(0,"div",49),z(1,"N\xFAmero de tel\xE9fono no v\xE1lido. "),O())}function dJ(t,e){t&1&&(k(0,"div",50),z(1,"Mensaje no v\xE1lido. "),O())}var hJ=()=>["/equipo"],fJ=()=>["/about"],gy=(t,e)=>({"is-invalid":t,"is-valid":e}),aL=(()=>{let e=class e{constructor(r,i,o){this._profesoresService=r,this.router=i,this.authService=o,this.profesores=[],this.profes=[],this.loading=!0}ngOnInit(){this._profesoresService.usersAuth0().subscribe(r=>{this.profesores=r,this.profes=this.profesores.slice(0,3),console.log(this.profesores)})}ngAfterViewInit(){setTimeout(()=>{this.loading=!1},1500)}PerfilProfesor(r){console.log(r),this.router.navigate(["/profesor",r])}formMail(r){Object.keys(r.controls).forEach(s=>{r.controls[s].markAsTouched({onlySelf:!0})}),r.controls.name.value||r.controls.name.setErrors({required:!0});let i=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;(!r.controls.email.value||!i.test(r.controls.email.value))&&r.controls.email.setErrors({required:!0,email:!0});let o=/^[0-9]{9}$/;(!r.controls.phone.value||!o.test(r.controls.phone.value))&&r.controls.phone.setErrors({required:!0,pattern:!0}),r.controls.mensaje.value||r.controls.mensaje.setErrors({required:!0}),r.valid&&this.sendEmail(r.value.name,r.value.email,r.value.phone,r.value.mensaje)}sendEmail(r,i,o,s){let a="template_r1hv71p",c={to_name:"No Frontiers",from_name:"No Frontiers",message:`Nombre: ${r}
Email: ${i}
Telefono: ${o}
Mensaje:
${s}`};this.authService.sendEmail(a,c).then(l=>{console.log("Email sent successfully:",l)},l=>{console.error("Error sending email:",l)})}};e.\u0275fac=function(i){return new(i||e)(X(Ji),X(ft),X(Ut))},e.\u0275cmp=Je({type:e,selectors:[["app-home"]],decls:57,vars:26,consts:[[4,"ngIf"],[1,"bg-dark","py-5"],[1,"container","px-5"],[1,"row","gx-5","justify-content-center"],[1,"col-lg-6"],[1,"text-center","my-5"],[1,"display-5","fw-bolder","text-white","mb-2"],[1,"lead","text-white-50","mb-4"],[1,"d-grid","gap-3","d-sm-flex","justify-content-sm-center"],[1,"btn","btn-primary","btn-lg","px-4","me-sm-3",3,"routerLink"],[1,"btn","btn-outline-light","btn-lg","px-4",3,"routerLink"],["id","features",1,"py-5","border-bottom","text-muted",2,"background-color","white"],[1,"container","px-5","my-5",2,"background-color","white"],[1,"row","gx-5"],[1,"container","mt-3","text-light"],[1,"row","row-cols-1","row-cols-md-3","g-4","d-flex","justify-content-center"],["class","col","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],[1,"bg-light","py-5","text-muted"],[1,"container","px-5","my-5","px-5"],[1,"text-center","mb-5"],[1,"feature","bg-primary","bg-gradient","text-white","rounded-3","mb-3"],[1,"bi","bi-envelope"],[1,"fw-bolder"],[1,"lead","mb-0"],["id","contactForm",3,"ngSubmit"],["form","ngForm"],[1,"form-floating","mb-3"],["id","name","name","name","ngModel","","required","","type","text","placeholder","Inserte su nombre...","aria-describedby","nameHelp",1,"form-control",3,"ngClass"],["for","name"],["id","nameHelp","class","invalid-feedback",4,"ngIf"],["id","email","type","email","name","email","ngModel","","required","","placeholder","nombre@ejemplo.com","aria-describedby","emailHelp",1,"form-control",3,"ngClass"],["for","email"],["id","emailHelp","class","invalid-feedback",4,"ngIf"],["id","phone","name","phone","ngModel","","required","","type","tel","placeholder","657-694-544","aria-describedby","phoneHelp",1,"form-control",3,"ngClass"],["for","phone"],["id","phoneHelp","class","invalid-feedback",4,"ngIf"],["id","message","name","mensaje","ngModel","","required","","placeholder","Inserte su mensaje...","aria-describedby","messageHelp",1,"form-control",2,"height","10rem",3,"ngClass"],["for","message"],["id","messageHelp","class","invalid-feedback",4,"ngIf"],[1,"d-grid"],["id","submitButton","type","submit",1,"btn","btn-primary","btn-lg"],[1,"col",2,"cursor","pointer",3,"click"],[1,"card","bg-secondary",2,"box-shadow","0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["id","nameHelp",1,"invalid-feedback"],["id","emailHelp",1,"invalid-feedback"],["id","phoneHelp",1,"invalid-feedback"],["id","messageHelp",1,"invalid-feedback"]],template:function(i,o){if(i&1){let s=dt();Ie(0,sJ,1,0,"app-loading",0),k(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),z(7," No Frontiers "),O(),k(8,"p",7),z(9," \xABNo Frontiers\xBB es un sitio web din\xE1mico e interactivo dise\xF1ado para derribar las barreras ling\xFC\xEDsticas y facilitar una comunicaci\xF3n fluida entre estudiantes y profesores de todo el mundo. Como su nombre indica, la plataforma adopta un enfoque sin fronteras del aprendizaje de idiomas, dando la bienvenida a usuarios de diversos or\xEDgenes y ubicaciones geogr\xE1ficas. "),O(),k(10,"div",8)(11,"a",9),z(12,"Empezemos"),O(),k(13,"a",10),z(14,"Mas Sobre Nosotros"),O()()()()()()(),k(15,"div",11)(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15),Ie(20,aJ,7,2,"div",16),O()()()()(),k(21,"div",17)(22,"div",18)(23,"div",19)(24,"div",20),le(25,"i",21),O(),k(26,"h2",22),z(27,"Ponte en Contacto"),O(),k(28,"p",23),z(29,"Nos encataria saber mas de ti"),O()(),k(30,"div",3)(31,"div",4)(32,"form",24,25),we("ngSubmit",function(){et(s);let c=sn(33);return tt(o.formMail(c))}),k(34,"div",26),le(35,"input",27),k(36,"label",28),z(37,"Nombre completo"),O(),Ie(38,cJ,2,0,"div",29),O(),k(39,"div",26),le(40,"input",30),k(41,"label",31),z(42,"Direcci\xF3n de correo electr\xF3nico"),O(),Ie(43,lJ,2,0,"div",32),O(),k(44,"div",26),le(45,"input",33),k(46,"label",34),z(47,"Tel\xE9fono"),O(),Ie(48,uJ,2,0,"div",35),O(),k(49,"div",26),le(50,"textarea",36),k(51,"label",37),z(52,"Mensaje"),O(),Ie(53,dJ,2,0,"div",38),O(),k(54,"div",39)(55,"button",40),z(56,"Enviar"),O()()()()()()()}if(i&2){let s=sn(33);ee("ngIf",o.loading),Z(11),ee("routerLink",Bn(12,hJ)),Z(2),ee("routerLink",Bn(13,fJ)),Z(7),ee("ngForOf",o.profes),Z(15),ee("ngClass",qa(14,gy,(s.controls.name==null?null:s.controls.name.invalid)&&(s.controls.name==null?null:s.controls.name.touched),(s.controls.name==null?null:s.controls.name.valid)&&(s.controls.name==null?null:s.controls.name.touched))),Z(3),ee("ngIf",(s.controls.name==null||s.controls.name.errors==null?null:s.controls.name.errors.required)&&(s.controls.name==null?null:s.controls.name.touched)),Z(2),ee("ngClass",qa(17,gy,(s.controls.email==null?null:s.controls.email.invalid)&&(s.controls.email==null?null:s.controls.email.touched),(s.controls.email==null?null:s.controls.email.valid)&&(s.controls.email==null?null:s.controls.email.touched))),Z(3),ee("ngIf",(s.controls.email==null||s.controls.email.errors==null?null:s.controls.email.errors.required)&&(s.controls.email==null?null:s.controls.email.touched)),Z(2),ee("ngClass",qa(20,gy,(s.controls.phone==null?null:s.controls.phone.invalid)&&(s.controls.phone==null?null:s.controls.phone.touched),(s.controls.phone==null?null:s.controls.phone.valid)&&(s.controls.phone==null?null:s.controls.phone.touched))),Z(3),ee("ngIf",(s.controls.phone==null||s.controls.phone.errors==null?null:s.controls.phone.errors.required)&&(s.controls.phone==null?null:s.controls.phone.touched)),Z(2),ee("ngClass",qa(23,gy,(s.controls.mensaje==null?null:s.controls.mensaje.invalid)&&(s.controls.mensaje==null?null:s.controls.mensaje.touched),(s.controls.mensaje==null?null:s.controls.mensaje.valid)&&(s.controls.mensaje==null?null:s.controls.mensaje.touched))),Z(3),ee("ngIf",(s.controls.mensaje==null||s.controls.mensaje.errors==null?null:s.controls.mensaje.errors.required)&&(s.controls.mensaje==null?null:s.controls.mensaje.touched))}},dependencies:[u0,Hn,cn,Ps,my,hy,K4,fy,H1,q1,Xh,wr],styles:[".my-overlay[_ngcontent-%COMP%]{left:0!important;top:0!important;z-index:10000!important;width:100%!important;height:100%!important;position:fixed!important;background-color:#000000e6!important;cursor:pointer!important;visibility:visible!important;transition:visibility 0s,opacity .4s linear!important;display:flex;align-items:center;justify-content:center;cursor:wait!important}.my-overlay[_ngcontent-%COMP%]   i.fa.fa-spinner.fa-spin[_ngcontent-%COMP%], .spinner-big[_ngcontent-%COMP%]{font-size:100px!important}"]});let t=e;return t})();var cL=(()=>{let e=class e{constructor(){}transform(r){return!r||r.length<=0||r==="null"?(console.log(r),"https://i.ibb.co/vJdBBPb/no-profe-profile.jpg"):`${r}`}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=Rl({name:"noimage",type:e,pure:!0});let t=e;return t})();function mJ(t,e){t&1&&le(0,"app-loading")}function gJ(t,e){if(t&1){let n=dt();k(0,"div",4),we("click",function(){let o=et(n).$implicit,s=nt();return tt(s.PerfilProfesor(o.user_id))}),k(1,"div",5),le(2,"img",6),Ds(3,"noimage"),k(4,"div",7)(5,"h5",8),z(6),O(),k(7,"p",9),z(8),O()()()()}if(t&2){let n=e.$implicit;Z(2),ee("src",Hg(3,3,n.picture),jt),Z(4),Dt(n.name),Z(2),Dt(n.user_metadata.descripcion)}}var lL=(()=>{let e=class e{ngAfterViewInit(){this.initializeMasonry()}constructor(r,i,o){this._profesoresService=r,this.router=i,this.location=o,this.profesores=[],this.loading=!0}ngOnInit(){this._profesoresService.usersAuth0().subscribe(r=>{this.profesores=r,console.log(this.profesores),console.log(this.profesores[2].user_metadata.fotoPerfil)})}initializeMasonry(){let r=document.querySelector("#masonry-grid");new Masonry(r,{percentPosition:!0}),this.refresh()}refresh(){let r=localStorage.getItem("isRefreshed");console.log(r),r!=="true"?(console.log("AAAAAAAAAAAAAAAAAAAA"),window.location.reload(),localStorage.setItem("isRefreshed","true")):setTimeout(()=>{this.loading=!1},1500)}PerfilProfesor(r){console.log(r),this.router.navigate(["/profesor",r])}};e.\u0275fac=function(i){return new(i||e)(X(Ji),X(ft),X(_r))},e.\u0275cmp=Je({type:e,selectors:[["app-equipo"]],decls:4,vars:2,consts:[[4,"ngIf"],[1,"container","mt-3"],["id","masonry-grid",1,"row","row-cols-1","row-cols-md-3","g-4"],["class","card-columns",3,"click",4,"ngFor","ngForOf"],[1,"card-columns",3,"click"],[1,"card","bg-secondary","pointer"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(i,o){i&1&&(Ie(0,mJ,1,0,"app-loading",0),k(1,"div",1)(2,"div",2),Ie(3,gJ,9,5,"div",3),O()()),i&2&&(ee("ngIf",o.loading),Z(3),ee("ngForOf",o.profesores))},dependencies:[Hn,cn,wr,cL],styles:[".pointer[_ngcontent-%COMP%]{cursor:pointer}"]});let t=e;return t})();var uL=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Je({type:e,selectors:[["app-about"]],decls:28,vars:0,consts:[[1,"about-us"],[1,"py-5"],[1,"container"],[1,"row","gx-4","align-items-center","justify-content-between"],[1,"col-md-5","order-2","order-md-1"],[1,"mt-5","mt-md-0"],[1,"text-muted"],[1,"display-5","fw-bold"],[1,"lead"],[1,"col-md-6","offset-md-1","order-1","order-md-2"],[1,"row","gx-2","gx-lg-3"],[1,"col-6"],[1,"mb-2"],["src","https://format-e.es/wp-content/uploads/2016/01/profesor-ingles.jpg",1,"img-fluid","rounded-3"],["src","https://www.nosequeestudiar.net/site/assets/files/55255/profesor-profesora-de-idiomas_hr.jpg",1,"img-fluid","rounded-3"],["src","https://st3.depositphotos.com/3332767/33564/i/1600/depositphotos_335643456-stock-photo-english-language-teacher-standing-in.jpg",1,"img-fluid","rounded-3"],["src","https://www.aprendemas.com/co/blog/images/2022/08/profesor_ingles_idiomas.jpg",1,"img-fluid","rounded-3"]],template:function(i,o){i&1&&(k(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"span",6),z(7,"Nuestra Historia"),O(),k(8,"h2",7),z(9,"Sobre Nosotros"),O(),k(10,"p",8),z(11,"\xABNo Frontiers\xBB es un sitio web din\xE1mico e interactivo dise\xF1ado para derribar las barreras ling\xFC\xEDsticas y facilitar una comunicaci\xF3n fluida entre alumnos y profesores de todo el mundo. Como su nombre indica, la plataforma como su nombre indica, la plataforma adopta un enfoque sin fronteras para el aprendizaje de idiomas, dando la bienvenida a usuarios de diversos or\xEDgenes y ubicaciones geogr\xE1ficas. geogr\xE1fica."),O(),k(12,"p",8),z(13,"\xABNo Frontiers\xBB da prioridad a la flexibilidad y la comodidad, y ofrece opciones de horarios que se adaptan al ajetreado estilo de vida de los estudiantes y a las diferencias horarias. que se adaptan al ajetreado estilo de vida de los estudiantes y a las diferencias horarias. Tanto si prefieres estudiar fines de semana, o incluso entre compromisos laborales, la plataforma te permite establecer tu propio ritmo y adaptar su experiencia de aprendizaje a su horario."),O()()(),k(14,"div",9)(15,"div",10)(16,"div",11)(17,"div",12),le(18,"img",13),O()(),k(19,"div",11)(20,"div",12),le(21,"img",14),O()(),k(22,"div",11)(23,"div",12),le(24,"img",15),O()(),k(25,"div",11)(26,"div",12),le(27,"img",16),O()()()()()()()())},styles:[".about-us[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center;width:100%}"]});let t=e;return t})();function yJ(t,e){if(t&1&&(k(0,"div",4)(1,"div",5)(2,"div",6),le(3,"img",7),O(),k(4,"div",8)(5,"div",9)(6,"h5",10),z(7),O(),k(8,"p",11),z(9),O(),k(10,"p",11)(11,"small",12),z(12),Ds(13,"date"),O()()()()()()),t&2){let n=e.$implicit;Z(3),ee("src",n.picture,jt),Z(4),Dt(n.name),Z(2),Dt(n.user_metadata.descripcion),Z(3),Qr("Editado: ",zg(13,4,n.updated_at,"short"),"")}}var dL=(()=>{let e=class e{constructor(r,i,o,s){this._activatedRoute=r,this._profesoresService=i,this.router=o,this.location=s,this.profesorDetalles=[],this.allProfes=[],this.id="",this._activatedRoute.params.subscribe(a=>{this.id=a.id,this.getProfesFromService()})}getProfesFromService(){this._profesoresService.usersAuth0().subscribe(r=>{this.allProfes=r,console.log(this.allProfes),this.profesorDetalles=this._profesoresService.buscarProfesorId(this.id,this.allProfes),console.log(this.profesorDetalles)})}regresar(){localStorage.setItem("isRefreshed","false"),this.location.back()}chat(){this.router.navigate(["chat",this.id])}};e.\u0275fac=function(i){return new(i||e)(X(ir),X(Ji),X(ft),X(_r))},e.\u0275cmp=Je({type:e,selectors:[["app-detalles-profesores"]],decls:6,vars:1,consts:[[1,"px-3"],[1,"btn","btn-outline-danger","mt-3","ms-3",3,"click"],[1,"btn","btn-outline-primary","mt-3","ms-3",2,"width","120px",3,"click"],["class","card mb-3 container mt-3 bg-secondary",4,"ngFor","ngForOf"],[1,"card","mb-3","container","mt-3","bg-secondary"],[1,"row","g-0"],[1,"col-md-4"],["alt","...",1,"img-fluid","rounded-start",3,"src"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"text-white"]],template:function(i,o){i&1&&(k(0,"main",0)(1,"button",1),we("click",function(){return o.regresar()}),z(2," <== Regresar "),O(),k(3,"button",2),we("click",function(){return o.chat()}),z(4," Charlar "),O(),Ie(5,yJ,14,7,"div",3),O()),i&2&&(Z(5),ee("ngForOf",o.profesorDetalles))},dependencies:[Hn,d0]});let t=e;return t})();function vJ(t,e){if(t&1){let n=dt();k(0,"div",4),we("click",function(){let o=et(n).$implicit,s=nt();return tt(s.PerfilProfesor(o.user_id))}),k(1,"div",5),le(2,"img",6),k(3,"div",7)(4,"h5",8),z(5),O(),k(6,"p",9),z(7),O()()()()}if(t&2){let n=e.$implicit;Z(2),ee("src",n.picture,jt),Z(3),Dt(n.name),Z(2),Dt(n.user_metadata.descripcion)}}function _J(t,e){t&1&&(k(0,"div",10),z(1," No encontramos al profesor que busca !!!!! "),O())}var hL=(()=>{let e=class e{constructor(r,i,o){this._profesoresservice=r,this._activateRoute=i,this.router=o,this.allProfes=[],this.profesores=[],this.termino=""}ngOnInit(){this._profesoresservice.usersAuth0().subscribe(r=>{this.allProfes=r,this._activateRoute.params.subscribe(i=>{console.log("EEEEEEEEEEEEEEEEEEEEEEEEE"),i.termino==""?this.profesores=this.allProfes:(console.log(1111111111111111e4,this.termino),this.termino=i.termino,console.log(0x1ed6eb565788e400,this.termino),this.profesores=this._profesoresservice.buscarProfesor(i.termino,this.allProfes),console.log(this.profesores))})})}PerfilProfesor(r){console.log(r),this.router.navigate(["/profesor",r])}};e.\u0275fac=function(i){return new(i||e)(X(Ji),X(ir),X(ft))},e.\u0275cmp=Je({type:e,selectors:[["app-buscador"]],decls:5,vars:2,consts:[[1,"container","mt-3","text-light"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col","style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["class","alert alert-danger container mt-5","role","alert",4,"ngIf"],[1,"col",2,"cursor","pointer",3,"click"],[1,"card","bg-secondary"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["role","alert",1,"alert","alert-danger","container","mt-5"]],template:function(i,o){i&1&&(k(0,"main")(1,"div",0)(2,"div",1),Ie(3,vJ,8,3,"div",2),O()(),Ie(4,_J,2,0,"div",3),O()),i&2&&(Z(3),ee("ngForOf",o.profesores),Z(),ee("ngIf",o.profesores.length==0))},dependencies:[Hn,cn]});let t=e;return t})();var Zv=S9(EV());var wJ="firebase",EJ="10.8.1";li(wJ,EJ,"app");var hc=new Mo("ANGULARFIRE2_VERSION");var xJ=(t,e)=>{let n=e?[e]:dM(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ko=class{constructor(){return xJ(CJ)}},CJ="app-check";function G1(){}var tv=class{zone;delegate;constructor(e,n=mE){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,r)}},K1=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",G1,{},G1,G1)),n.pipe(Vt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},fu=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new tv(Zone.current)),this.insideAngular=n.run(()=>new tv(Zone.current,ba)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(U(je))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function bJ(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Zt(t){return IJ(bJ())(t)}function IJ(t){return function(n){return n=n.lift(new K1(t.ngZone)),n.pipe(di(t.outsideAngular),zr(t.insideAngular))}}var DJ=new Map,TJ={activated:!1,tokenObservers:[]},AJ={initialized:!1,enabled:!1};function Ei(t){return DJ.get(t)||Object.assign({},TJ)}function AV(){return AJ}var SJ="https://content-firebaseappcheck.googleapis.com/v1";var RJ="exchangeDebugToken",xV={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Cge=24*60*60*1e3;var X1=class{constructor(e,n,r,i,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return j(this,null,function*(){this.stop();try{this.pending=new Cn,this.pending.promise.catch(n=>{}),yield MJ(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Cn,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function MJ(t){return new Promise(e=>{setTimeout(e,t)})}var PJ={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},js=new oM("appCheck","AppCheck",PJ);function SV(t){if(!Ei(t).activated)throw js.create("use-before-activation",{appName:t.name})}function RV(r,i){return j(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let f=yield s.getHeartbeatsHeader();f&&(o["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(t,a)}catch(f){throw js.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw js.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw js.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw js.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function MV(t,e){let{projectId:n,appId:r,apiKey:i}=t.options;return{url:`${SJ}/projects/${n}/apps/${r}:${RJ}?key=${i}`,body:{debug_token:e}}}var NJ="firebase-app-check-database",kJ=1,Z1="firebase-app-check-store";var nv=null;function FJ(){return nv||(nv=new Promise((t,e)=>{try{let n=indexedDB.open(NJ,kJ);n.onsuccess=r=>{t(r.target.result)},n.onerror=r=>{var i;e(js.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Z1,{keyPath:"compositeKey"})}}}catch(n){e(js.create("storage-open",{originalErrorMessage:n?.message}))}}),nv)}function OJ(t,e){return LJ(VJ(t),e)}function LJ(t,e){return j(this,null,function*(){let r=(yield FJ()).transaction(Z1,"readwrite"),o=r.objectStore(Z1).put({compositeKey:t,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(js.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function VJ(t){return`${t.options.appId}-${t.name}`}var J1=new hs("@firebase/app-check");function Y1(t,e){return rm()?OJ(t,e).catch(n=>{J1.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function PV(){return AV().enabled}function NV(){return j(this,null,function*(){let t=AV();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var BJ={error:"UNKNOWN_ERROR"};function jJ(t){return tm.encodeString(JSON.stringify(t),!1)}function eI(t,e=!1){return j(this,null,function*(){let n=t.app;SV(n);let r=Ei(n),i=r.token,o;if(i&&!ef(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(ef(c)?i=c:yield Y1(n,void 0))}if(!e&&i&&ef(i))return{token:i.token};let s=!1;if(PV()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RV(MV(n,yield NV()),t.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield Y1(n,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Ei(n).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?J1.warn(c.message):J1.error(c),o=c}let a;return i?o?ef(i)?a={token:i.token,internalError:o}:a=bV(o):(a={token:i.token},r.token=i,yield Y1(n,i)):a=bV(o),s&&HJ(n,a),a})}function UJ(t){return j(this,null,function*(){let e=t.app;SV(e);let{provider:n}=Ei(e);if(PV()){let r=yield NV(),{token:i}=yield RV(MV(e,r),t.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield n.getToken();return{token:r}}})}function $J(t,e,n,r){let{app:i}=t,o=Ei(i),s={next:n,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&ef(o.token)){let a=o.token;Promise.resolve().then(()=>{n({token:a.token}),CV(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>CV(t))}function kV(t,e){let n=Ei(t),r=n.tokenObservers.filter(i=>i.next!==e);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function CV(t){let{app:e}=t,n=Ei(e),r=n.tokenRefresher;r||(r=qJ(t),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function qJ(t){let{app:e}=t;return new X1(()=>j(this,null,function*(){let n=Ei(e),r;if(n.token?r=yield eI(t,!0):r=yield eI(t),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let n=Ei(e);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},xV.RETRIAL_MIN_WAIT,xV.RETRIAL_MAX_WAIT)}function HJ(t,e){let n=Ei(t).tokenObservers;for(let r of n)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ef(t){return t.expireTimeMillis-Date.now()>0}function bV(t){return{token:jJ(BJ),error:t}}var tI=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Ei(this.app);for(let n of e)kV(this.app,n.next);return Promise.resolve()}};function zJ(t,e){return new tI(t,e)}function WJ(t){return{getToken:e=>eI(t,e),getLimitedUseToken:()=>UJ(t),addTokenListener:e=>$J(t,"INTERNAL",e),removeTokenListener:e=>kV(t.app,e)}}var GJ="@firebase/app-check",KJ="0.8.2";var QJ="app-check",IV="app-check-internal";function YJ(){_a(new Cr(QJ,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return zJ(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(IV).initialize()})),_a(new Cr(IV,t=>{let e=t.getProvider("app-check").getImmediate();return WJ(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),li(GJ,KJ)}YJ();var XJ=["localhost","0.0.0.0","127.0.0.1"],Fge=typeof window<"u"&&XJ.includes(window.location.hostname);var ZJ="firebase",JJ="10.8.1";On.registerVersion(ZJ,JJ,"app-compat");var eee=["ngOnDestroy"],OV=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{if(t[o])return r?.spy?.get&&r.spy.get(o,t[o]),t[o];if(eee.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let c=a?.[o];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>n.run(()=>l)):n.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>s[c],apply:(a,c,l)=>s.then(u=>{let d=u?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,d),d})})})});var rv=class{constructor(e){return e}},Us=new te("angularfire2.app.options"),$s=new te("angularfire2.app.name");function fc(t,e,n){let r=typeof n=="string"&&n||"[DEFAULT]",i=typeof n=="object"&&n||{};i.name=i.name||r;let s=On.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>On.initializeApp(t,i));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let a=!!module.hot;tee("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new rv(s)}var tee=(t,...e)=>{BC()&&typeof console<"u"&&console[t](...e)},nee={provide:rv,useFactory:fc,deps:[Us,je,[new Nl,$s]]},LV=(()=>{class t{static initializeApp(n,r){return{ngModule:t,providers:[{provide:Us,useValue:n},{provide:$s,useValue:r}]}}constructor(n){On.registerVersion("angularfire",hc.full,"core"),On.registerVersion("angularfire",hc.full,"app-compat"),On.registerVersion("angular",gk.full,n.toString())}static \u0275fac=function(r){return new(r||t)(U(Kt))};static \u0275mod=Rt({type:t});static \u0275inj=Mt({providers:[nee]})}return t})();function pu(t,e,n,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===t)||[];if(o)return ree(i,s)||(FV("error",`${e} was already initialized on the ${n} Firebase App with different settings.${iee?" You may need to reload as Firebase is not HMR aware.":""}`),FV("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([t,a,i]),a}}function ree(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var iee=typeof module<"u"&&!!module.hot,FV=(t,...e)=>{BC()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var tf=new te("angularfire2.auth.use-emulator"),nf=new te("angularfire2.auth.settings"),rf=new te("angularfire2.auth.tenant-id"),of=new te("angularfire2.auth.langugage-code"),sf=new te("angularfire2.auth.use-device-language"),af=new te("angularfire.auth.persistence"),cf=(t,e,n,r,i,o,s,a)=>pu(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let c=e.runOutsideAngular(()=>t.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,o&&c.useDeviceLanguage(),s)for(let[l,u]of Object.entries(s))c.settings[l]=u;return a&&c.setPersistence(a),c},[n,r,i,o,s,a]),iv=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,r,i,o,s,a,c,l,u,d,h,f){let m=new rn,_=pe(void 0).pipe(zr(s.outsideAngular),He(()=>o.runOutsideAngular(()=>import("./chunk-YNB3E7Q7.js"))),fe(()=>fc(n,o,r)),fe(w=>cf(w,o,a,l,u,d,c,h)),Nm({bufferSize:1,refCount:!1}));if(za(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pe(null);else{_.pipe(br()).subscribe();let w=_.pipe(He(C=>C.getRedirectResult().then(b=>b,()=>null)),Zt,Nm({bufferSize:1,refCount:!1})),y=_.pipe(He(C=>new Fe(b=>({unsubscribe:o.runOutsideAngular(()=>C.onAuthStateChanged(A=>b.next(A),A=>b.error(A),()=>b.complete()))})))),v=_.pipe(He(C=>new Fe(b=>({unsubscribe:o.runOutsideAngular(()=>C.onIdTokenChanged(A=>b.next(A),A=>b.error(A),()=>b.complete()))}))));this.authState=w.pipe(km(y),di(s.outsideAngular),zr(s.insideAngular)),this.user=w.pipe(km(v),di(s.outsideAngular),zr(s.insideAngular)),this.idToken=this.user.pipe(He(C=>C?be(C.getIdToken()):pe(null))),this.idTokenResult=this.user.pipe(He(C=>C?be(C.getIdTokenResult()):pe(null))),this.credential=pl(w,m,this.authState.pipe(vn(C=>!C))).pipe(fe(C=>C?.user?C:null),di(s.outsideAngular),zr(s.insideAngular))}return OV(this,_,o,{spy:{apply:(w,y,v)=>{(w.startsWith("signIn")||w.startsWith("createUser"))&&v.then(C=>m.next(C))}}})}static \u0275fac=function(r){return new(r||t)(U(Us),U($s,8),U(Kt),U(je),U(fu),U(tf,8),U(nf,8),U(rf,8),U(of,8),U(sf,8),U(af,8),U(Ko,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var BV="@firebase/database",jV="1.0.3";var pD="";function mD(t){pD=t}var uI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),nn(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:im(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var dI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return qr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var y3=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new uI(e)}}catch{}return new dI},mc=y3("localStorage"),hI=y3("sessionStorage");var vu=new hs("@firebase/database"),v3=function(){let t=1;return function(){return t++}}(),_3=function(t){let e=uM(t),n=new lM;n.update(e);let r=n.digest();return tm.encodeByteArray(r)},Pf=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Pf.apply(null,r):typeof r=="object"?e+=nn(r):e+=r,e+=" "}return e},gc=null,UV=!0,w3=function(t,e){Q(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(vu.logLevel=Hr.VERBOSE,gc=vu.log.bind(vu),e&&hI.set("logging_enabled",!0)):typeof t=="function"?gc=t:(gc=null,hI.remove("logging_enabled"))},Sn=function(...t){if(UV===!0&&(UV=!1,gc===null&&hI.get("logging_enabled")===!0&&w3(!0)),gc){let e=Pf.apply(null,t);gc(e)}},Nf=function(t){return function(...e){Sn(t,...e)}},fI=function(...t){let e="FIREBASE INTERNAL ERROR: "+Pf(...t);vu.error(e)},no=function(...t){let e=`FIREBASE FATAL ERROR: ${Pf(...t)}`;throw vu.error(e),new Error(e)},Gn=function(...t){let e="FIREBASE WARNING: "+Pf(...t);vu.warn(e)},see=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Pv=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},aee=function(t){if(Ri()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ws="[MIN_NAME]",Qo="[MAX_NAME]",vc=function(t,e){if(t===e)return 0;if(t===Ws||e===Qo)return-1;if(e===Ws||t===Qo)return 1;{let n=$V(t),r=$V(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},cee=function(t,e){return t===e?0:t<e?-1:1},lf=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+nn(e))},gD=function(t){if(typeof t!="object"||t===null)return nn(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=nn(e[r]),n+=":",n+=gD(t[e[r]]);return n+="}",n},E3=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Rn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var x3=function(t){Q(!Pv(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,o,s,a,c;t===0?(o=0,s=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),o=a+r,s=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(o=0,s=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),d="";for(c=0;c<64;c+=8){let h=parseInt(u.substr(c,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},lee=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},uee=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function dee(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var hee=new RegExp("^-?(0*)\\d{1,10}$"),fee=-2147483648,pee=2147483647,$V=function(t){if(hee.test(t)){let e=Number(t);if(e>=fee&&e<=pee)return e}return null},Tu=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Gn("Exception was thrown by user callback.",n),e},Math.floor(0))}},mee=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ff=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var pI=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Gn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var mI=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gn(e)}},pf=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),sv="5",C3="v",b3="s",I3="r",D3="f",T3=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,A3="ls",S3="p",gI="ac",R3="websocket",M3="long_polling";var av=class{constructor(e,n,r,i,o=!1,s="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mc.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mc.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function gee(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function P3(t,e,n){Q(typeof e=="string","typeof type must == string"),Q(typeof n=="object","typeof params must == object");let r;if(e===R3)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===M3)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);gee(t)&&(n.ns=t.namespace);let i=[];return Rn(n,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var yI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){qr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return nM(this.counters_)}};var rI={},iI={};function yD(t){let e=t.toString();return rI[e]||(rI[e]=new yI),rI[e]}function yee(t,e){let n=t.toString();return iI[n]||(iI[n]=e()),iI[n]}var vI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Tu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var qV="start",vee="close",_ee="pLPCommand",wee="pRTLPCB",N3="id",k3="pw",F3="ser",Eee="cb",xee="seg",Cee="ts",bee="d",Iee="dframe",O3=1870,L3=30,Dee=O3-L3,Tee=25e3,Aee=3e4,vf=class t{constructor(e,n,r,i,o,s,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Nf(e),this.stats_=yD(n),this.urlFn=c=>(this.appCheckToken&&(c[gI]=this.appCheckToken),P3(n,M3,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new vI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Aee)),aee(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _I((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===qV)this.id=a,this.password=c;else if(s===vee)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[qV]="t",r[F3]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Eee]=this.scriptTagHolder.uniqueCallbackIdentifier),r[C3]=sv,this.transportSessionId&&(r[b3]=this.transportSessionId),this.lastSessionId&&(r[A3]=this.lastSessionId),this.applicationId&&(r[S3]=this.applicationId),this.appCheckToken&&(r[gI]=this.appCheckToken),typeof location<"u"&&location.hostname&&T3.test(location.hostname)&&(r[I3]=D3);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Ri()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!lee()&&!uee()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=nn(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=tM(n),i=E3(r,Dee);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Ri())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Iee]="t",r[N3]=e,r[k3]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=nn(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},_I=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ri())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=v3(),window[_ee+this.uniqueCallbackIdentifier]=e,window[wee+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Sn("frame writing exception"),a.stack&&Sn(a.stack),Sn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Sn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[N3]=this.myID,e[k3]=this.myPW,e[F3]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+L3+r.length<=O3;){let s=this.pendingSegs.shift();r=r+"&"+xee+i+"="+s.seg+"&"+Cee+i+"="+s.ts+"&"+bee+i+"="+s.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(Tee)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,n){Ri()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Sn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var See=16384,Ree=45e3,cv=null;typeof MozWebSocket<"u"?cv=MozWebSocket:typeof WebSocket<"u"&&(cv=WebSocket);var gu=(()=>{class t{constructor(n,r,i,o,s,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Nf(this.connId),this.stats_=yD(r),this.connURL=t.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,o,s){let a={};return a[C3]=sv,!Ri()&&typeof location<"u"&&location.hostname&&T3.test(location.hostname)&&(a[I3]=D3),r&&(a[b3]=r),i&&(a[A3]=i),o&&(a[gI]=o),s&&(a[S3]=s),P3(n,R3,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mc.set("previous_websocket_failure",!0);try{let i;if(Ri()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${sv}/${pD}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new cv(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&cv!==null&&!t.forceDisallow_}static previouslyFailed(){return mc.isInMemoryStorage||mc.get("previous_websocket_failure")===!0}markConnectionHealthy(){mc.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=im(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(Q(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=nn(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=E3(r,See);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Ree))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),V3=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[vf,gu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=gu&&gu.isAvailable(),i=r&&!gu.previouslyFailed();if(n.webSocketOnly&&(r||Gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[gu];else{let o=this.transports_=[];for(let s of t.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),Mee=6e4,Pee=5e3,Nee=10*1024,kee=100*1024,oI="t",HV="d",Fee="s",zV="r",Oee="e",WV="o",GV="a",KV="n",QV="p",Lee="h",wI=class{constructor(e,n,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Nf("c:"+this.id+":"),this.transportManager_=new V3(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ff(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>kee?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Nee?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(oI in e){let n=e[oI];n===GV?this.upgradeIfSecondaryHealthy_():n===zV?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===WV&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=lf("t",e),r=lf("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:QV,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:GV,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:KV,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=lf("t",e),r=lf("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=lf(oI,e);if(HV in e){let r=e[HV];if(n===Lee){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===KV){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===Fee?this.onConnectionShutdown_(r):n===zV?this.onReset_(r):n===Oee?fI("Server Error: "+r):n===WV?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fI("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),sv!==r&&Gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ff(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Mee))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ff(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Pee))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:QV,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mc.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var lv=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var uv=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===n&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){Q(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var dv=class t extends uv{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Xw()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return Q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var YV=32,XV=768,ot=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function it(){return new ot("")}function Le(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Gs(t){return t.pieces_.length-t.pieceNum_}function wt(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new ot(t.pieces_,e)}function vD(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Vee(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function _f(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function B3(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ot(e,0)}function Pt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ot)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new ot(n,0)}function Ve(t){return t.pieceNum_>=t.pieces_.length}function sr(t,e){let n=Le(t),r=Le(e);if(n===null)return e;if(n===r)return sr(wt(t),wt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Bee(t,e){let n=_f(t,0),r=_f(e,0);for(let i=0;i<n.length&&i<r.length;i++){let o=vc(n[i],r[i]);if(o!==0)return o}return n.length===r.length?0:n.length<r.length?-1:1}function _D(t,e){if(Gs(t)!==Gs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ti(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Gs(t)>Gs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var EI=class{constructor(e,n){this.errorPrefix_=n,this.parts_=_f(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Ad(this.parts_[r]);j3(this)}};function jee(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Ad(e),j3(t)}function Uee(t){let e=t.parts_.pop();t.byteLength_-=Ad(e),t.parts_.length>0&&(t.byteLength_-=1)}function j3(t){if(t.byteLength_>XV)throw new Error(t.errorPrefix_+"has a key path longer than "+XV+" bytes ("+t.byteLength_+").");if(t.parts_.length>YV)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+YV+") or object contains a cycle "+pc(t))}function pc(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var xI=class t extends uv{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return Q(e==="visible","Unknown event type: "+e),[this.visible_]}};var uf=1e3,$ee=60*5*1e3,ZV=30*1e3,qee=1.3,Hee=3e4,zee="server_kill",JV=3,wD=(()=>{class t extends lv{constructor(n,r,i,o,s,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Nf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=uf,this.maxReconnectDelay_=$ee,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Ri())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xI.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&dv.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let o=++this.requestNumber_,s={r:o,a:n,b:r};this.log_(nn(s)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(n){this.initConnection_();let r=new Cn,o={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(n,r,i,o){this.initConnection_();let s=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Q(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:n,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";n.tag&&(s.q=r._queryObject,s.t=n.tag),s.h=n.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===n&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),n.onComplete&&n.onComplete(u,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&qr(n,"w")){let i=ds(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||aM(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ZV)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=sM(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===n&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),o=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Q(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,n._queryObject,r)}sendUnlisten_(n,r,i,o){this.log_("Unlisten on "+n+" for "+r);let s={p:n},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+n,s),this.sendRequest(n,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(n,r,i,o){this.putInternal("p",n,r,i,o)}merge(n,r,i,o){this.putInternal("m",n,r,i,o)}putInternal(n,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:n,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,o=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+nn(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):fI("Unrecognized action received from server: "+nn(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=uf,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=uf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Hee&&(this.reconnectDelay_=uf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*qee)}this.onConnectStatus_(!1)}establishConnection_(){return j(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(h){Q(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(h)};this.realtime_={close:l,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Sn("getToken() completed but was canceled"):(Sn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,c=new wI(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,m=>{Gn(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(zee)},s))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Gn(h),l())}}})}interrupt(n){Sn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Sn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],om(this.interruptReasons_)&&(this.reconnectDelay_=uf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(s=>gD(s)).join("$"):i="default";let o=this.removeListen_(n,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(n,r){let i=new ot(n).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(n,r){Sn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=JV&&(this.reconnectDelay_=ZV,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Sn("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=JV&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Ri()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+pD.replace(/\./g,"-")]=1,Xw()?n["framework.cordova"]=1:rM()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=dv.getInstance().currentlyOnline();return om(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Ue=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var _u=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Ue(Ws,e),i=new Ue(Ws,n);return this.compare(r,i)!==0}minPost(){return Ue.MIN}};var ov,hv=class extends _u{static get __EMPTY_NODE(){return ov}static set __EMPTY_NODE(e){ov=e}compare(e,n){return vc(e.name,n.name)}isDefinedOn(e){throw nl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ue.MIN}maxPost(){return new Ue(Qo,ov)}makePost(e,n){return Q(typeof e=="string","KeyIndex indexValue must always be a string."),new Ue(e,ov)}toString(){return".key"}},to=new hv;var yu=class{constructor(e,n,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=n?r(e.key,n):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},xi=(()=>{class t{constructor(n,r,i,o,s){this.key=n,this.value=r,this.color=i??t.RED,this.left=o??ni.EMPTY_NODE,this.right=s??ni.EMPTY_NODE}copy(n,r,i,o,s){return new t(n??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let o=this,s=i(n,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(n,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(n,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ni.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,o;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return ni.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),CI=class{copy(e,n,r,i,o){return this}insert(e,n,r){return new xi(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ni=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xi.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xi.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new yu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new yu(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new yu(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new yu(this.root_,null,this.comparator_,!0,e)}};ni.EMPTY_NODE=new CI;function Wee(t,e){return vc(t.name,e.name)}function ED(t,e){return vc(t,e)}var bI;function Gee(t){bI=t}var U3=function(t){return typeof t=="number"?"number:"+x3(t):"string:"+t},$3=function(t){if(t.isLeafNode()){let e=t.val();Q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&qr(e,".sv"),"Priority must be a string or number.")}else Q(t===bI||t.isEmpty(),"priority of unexpected type.");Q(t===bI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var e3,wu=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),$3(this.priorityNode_)}static set __childrenNodeConstructor(n){e3=n}static get __childrenNodeConstructor(){return e3}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Ve(n)?this:Le(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Le(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Q(i!==".priority"||Gs(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(wt(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+U3(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=x3(this.value_):n+=this.value_,this.lazyHash_=_3(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(Q(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(r),s=t.VALUE_TYPE_ORDER.indexOf(i);return Q(o>=0,"Unknown leaf type: "+r),Q(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),q3,H3;function Kee(t){q3=t}function Qee(t){H3=t}var II=class extends _u{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),o=r.compareTo(i);return o===0?vc(e.name,n.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ue.MIN}maxPost(){return new Ue(Qo,new wu("[PRIORITY-POST]",H3))}makePost(e,n){let r=q3(e);return new Ue(n,new wu("[PRIORITY-POST]",r))}toString(){return".priority"}},bt=new II;var Yee=Math.log(2),DI=class{constructor(e){let n=o=>parseInt(Math.log(o)/Yee,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},fv=function(t,e,n,r){t.sort(e);let i=function(c,l){let u=l-c,d,h;if(u===0)return null;if(u===1)return d=t[c],h=n?n(d):d,new xi(h,d.node,xi.BLACK,null,null);{let f=parseInt(u/2,10)+c,m=i(c,f),_=i(f+1,l);return d=t[f],h=n?n(d):d,new xi(h,d.node,xi.BLACK,m,_)}},o=function(c){let l=null,u=null,d=t.length,h=function(m,_){let w=d-m,y=d;d-=m;let v=i(w+1,y),C=t[w],b=n?n(C):C;f(new xi(b,C.node,_,null,v))},f=function(m){l?(l.left=m,l=m):(u=m,l=m)};for(let m=0;m<c.count;++m){let _=c.nextBitIsOne(),w=Math.pow(2,c.count-(m+1));_?h(w,xi.BLACK):(h(w,xi.BLACK),h(w,xi.RED))}return u},s=new DI(t.length),a=o(s);return new ni(r||e,a)};var sI,mu={},Eu=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return Q(mu&&bt,"ChildrenNode.ts has not been loaded"),sI=sI||new t({".priority":mu},{".priority":bt}),sI}get(e){let n=ds(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof ni?n:null}hasIndex(e){return qr(this.indexSet_,e.toString())}addIndex(e,n){Q(e!==to,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=n.getIterator(Ue.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=fv(r,e.getCompare()):a=mu;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new t(u,l)}addToIndexes(e,n){let r=Td(this.indexes_,(i,o)=>{let s=ds(this.indexSet_,o);if(Q(s,"Missing index implementation for "+o),i===mu)if(s.isDefinedOn(e.node)){let a=[],c=n.getIterator(Ue.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),fv(a,s.getCompare())}else return mu;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Ue(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Td(this.indexes_,i=>{if(i===mu)return i;{let o=n.get(e.name);return o?i.remove(new Ue(e.name,o)):i}});return new t(r,this.indexSet_)}};var df,Se=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&$3(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return df||(df=new t(new ni(ED),null,Eu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||df}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?df:r}}getChild(n){let r=Le(n);return r===null?this:this.getImmediateChild(r).getChild(wt(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(Q(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Ue(n,r),o,s;r.isEmpty()?(o=this.children_.remove(n),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(n,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?df:this.priorityNode_;return new t(o,a,s)}}updateChild(n,r){let i=Le(n);if(i===null)return r;{Q(Le(n)!==".priority"||Gs(n)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(wt(n),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(bt,(a,c)=>{r[a]=c.val(n),i++,s&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!n&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+U3(this.getPriority().val())+":"),this.forEachChild(bt,(r,i)=>{let o=i.hash();o!==""&&(n+=":"+r+":"+o)}),this.lazyHash_=n===""?"":_3(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Ue(n,r));return s?s.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Ue(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Ue(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,o=>o);{let o=this.children_.getIteratorFrom(n.name,Ue.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,o=>o);{let o=this.children_.getReverseIteratorFrom(n.name,Ue.Wrap),s=o.peek();for(;s!=null&&r.compare(s,n)>0;)o.getNext(),s=o.peek();return o}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===kf?-1:0}withIndex(n){if(n===to||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===to||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(bt),o=r.getIterator(bt),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===to?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),TI=class extends Se{constructor(){super(new ni(ED),Se.EMPTY_NODE,Eu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Se.EMPTY_NODE}isEmpty(){return!1}},kf=new TI;Object.defineProperties(Ue,{MIN:{value:new Ue(Ws,Se.EMPTY_NODE)},MAX:{value:new Ue(Qo,kf)}});hv.__EMPTY_NODE=Se.EMPTY_NODE;wu.__childrenNodeConstructor=Se;Gee(kf);Qee(kf);var Xee=!0;function Ft(t,e=null){if(t===null)return Se.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),Q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new wu(n,Ft(e))}if(!(t instanceof Array)&&Xee){let n=[],r=!1;if(Rn(t,(s,a)=>{if(s.substring(0,1)!=="."){let c=Ft(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Ue(s,c)))}}),n.length===0)return Se.EMPTY_NODE;let o=fv(n,Wee,s=>s.name,ED);if(r){let s=fv(n,bt.getCompare());return new Se(o,Ft(e),new Eu({".priority":s},{".priority":bt}))}else return new Se(o,Ft(e),Eu.Default)}else{let n=Se.EMPTY_NODE;return Rn(t,(r,i)=>{if(qr(t,r)&&r.substring(0,1)!=="."){let o=Ft(i);(o.isLeafNode()||!o.isEmpty())&&(n=n.updateImmediateChild(r,o))}}),n.updatePriority(Ft(e))}}Kee(Ft);var wf=class extends _u{constructor(e){super(),this.indexPath_=e,Q(!Ve(e)&&Le(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),o=r.compareTo(i);return o===0?vc(e.name,n.name):o}makePost(e,n){let r=Ft(e),i=Se.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ue(n,i)}maxPost(){let e=Se.EMPTY_NODE.updateChild(this.indexPath_,kf);return new Ue(Qo,e)}toString(){return _f(this.indexPath_,0).join("/")}};var AI=class extends _u{compare(e,n){let r=e.node.compareTo(n.node);return r===0?vc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ue.MIN}maxPost(){return Ue.MAX}makePost(e,n){let r=Ft(e);return new Ue(n,r)}toString(){return".value"}},xD=new AI;function z3(t){return{type:"value",snapshotNode:t}}function xu(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ef(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function xf(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function Zee(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Cf=class{constructor(e){this.index_=e}updateChild(e,n,r,i,o,s){Q(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(s!=null&&(r.isEmpty()?e.hasChild(n)?s.trackChildChange(Ef(n,a)):Q(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(xu(n,r)):s.trackChildChange(xf(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(bt,(i,o)=>{n.hasChild(i)||r.trackChildChange(Ef(i,o))}),n.isLeafNode()||n.forEachChild(bt,(i,o)=>{if(e.hasChild(i)){let s=e.getImmediateChild(i);s.equals(o)||r.trackChildChange(xf(i,o,s))}else r.trackChildChange(xu(i,o))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?Se.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var pv=class t{constructor(e){this.indexedFilter_=new Cf(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,o,s){return this.matches(new Ue(n,r))||(r=Se.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,o,s)}updateFullNode(e,n,r){n.isLeafNode()&&(n=Se.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(Se.EMPTY_NODE);let o=this;return n.forEachChild(bt,(s,a)=>{o.matches(new Ue(s,a))||(i=i.updateImmediateChild(s,Se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var SI=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new pv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,o,s){return this.rangedFilter_.matches(new Ue(n,r))||(r=Se.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,o,s):this.fullLimitUpdateChild_(e,n,r,o,s)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=Se.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=Se.EMPTY_NODE.withIndex(this.index_);let o;this.reverse_?o=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let s=0;for(;o.hasNext()&&s<this.limit_;){let a=o.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),s++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(Se.EMPTY_NODE);let o;this.reverse_?o=i.getReverseIterator(this.index_):o=i.getIterator(this.index_);let s=0;for(;o.hasNext();){let a=o.getNext();s<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?s++:i=i.updateImmediateChild(a.name,Se.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,o){let s;if(this.reverse_){let d=this.index_.getCompare();s=(h,f)=>d(f,h)}else s=this.index_.getCompare();let a=e;Q(a.numChildren()===this.limit_,"");let c=new Ue(n,r),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=i.getChildAfterChild(this.index_,l,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=i.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:s(h,c);if(u&&!r.isEmpty()&&f>=0)return o?.trackChildChange(xf(n,r,d)),a.updateImmediateChild(n,r);{o?.trackChildChange(Ef(n,d));let _=a.updateImmediateChild(n,Se.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(o?.trackChildChange(xu(h.name,h.node)),_.updateImmediateChild(h.name,h.node)):_}}else return r.isEmpty()?e:u&&s(l,c)>=0?(o!=null&&(o.trackChildChange(Ef(l.name,l.node)),o.trackChildChange(xu(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(l.name,Se.EMPTY_NODE)):e}};var bf=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ws}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function Jee(t){return t.loadsAllData()?new Cf(t.getIndex()):t.hasLimit()?new SI(t):new pv(t)}function ete(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function tte(t,e){let n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function RI(t,e,n){let r=t.copy();return r.startSet_=!0,e===void 0&&(e=null),r.indexStartValue_=e,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function nte(t,e,n){let r;return t.index_===to||n?r=RI(t,e,n):r=RI(t,e,Qo),r.startAfterSet_=!0,r}function MI(t,e,n){let r=t.copy();return r.endSet_=!0,e===void 0&&(e=null),r.indexEndValue_=e,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function rte(t,e,n){let r;return t.index_===to||n?r=MI(t,e,n):r=MI(t,e,Ws),r.endBeforeSet_=!0,r}function Nv(t,e){let n=t.copy();return n.index_=e,n}function t3(t){let e={};if(t.isDefault())return e;let n;if(t.index_===bt?n="$priority":t.index_===xD?n="$value":t.index_===to?n="$key":(Q(t.index_ instanceof wf,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=nn(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=nn(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+nn(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=nn(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+nn(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function n3(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==bt&&(e.i=t.index_.toString()),e}var PI=class t extends lv{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Nf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(Q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=t.getListenId_(e,r),a={};this.listens_[s]=a;let c=t3(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let d=u;if(l===404&&(d=null,l=null),l===null&&this.onDataUpdate_(o,d,!1,r),ds(this.listens_,s)===a){let h;l?l===401?h="permission_denied":h="rest_error:"+l:h="ok",i(h,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=t3(e._queryParams),r=e._path.toString(),i=new Cn;return this.restRequest_(r+".json",n,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(n.auth=i.accessToken),o&&o.token&&(n.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+cM(n);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=im(a.responseText)}catch{Gn("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Gn("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var NI=class{constructor(){this.rootNode_=Se.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function mv(){return{value:null,children:new Map}}function Au(t,e,n){if(Ve(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Le(e);t.children.has(r)||t.children.set(r,mv());let i=t.children.get(r);e=wt(e),Au(i,e,n)}}function kI(t,e){if(Ve(e))return t.value=null,t.children.clear(),!0;if(t.value!==null){if(t.value.isLeafNode())return!1;{let n=t.value;return t.value=null,n.forEachChild(bt,(r,i)=>{Au(t,new ot(r),i)}),kI(t,e)}}else if(t.children.size>0){let n=Le(e);return e=wt(e),t.children.has(n)&&kI(t.children.get(n),e)&&t.children.delete(n),t.children.size===0}else return!0}function FI(t,e,n){t.value!==null?n(e,t.value):ite(t,(r,i)=>{let o=new ot(e.toString()+"/"+r);FI(i,o,n)})}function ite(t,e){t.children.forEach((n,r)=>{e(r,n)})}var OI=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Rn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var r3=10*1e3,ote=30*1e3,ste=5*60*1e3,LI=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new OI(e);let r=r3+(ote-r3)*Math.random();ff(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Rn(e,(i,o)=>{o>0&&qr(this.statsToReport_,i)&&(n[i]=o,r=!0)}),r&&this.server_.reportStats(n),ff(this.reportStats_.bind(this),Math.floor(Math.random()*2*ste))}};var eo=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(eo||{});function CD(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bD(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ID(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var VI=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=eo.ACK_USER_WRITE,this.source=CD()}operationForChild(e){if(Ve(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new ot(e));return new t(it(),n,this.revert)}}else return Q(Le(this.path)===e,"operationForChild called for unrelated child."),new t(wt(this.path),this.affectedTree,this.revert)}};var gv=class t{constructor(e,n){this.source=e,this.path=n,this.type=eo.LISTEN_COMPLETE}operationForChild(e){return Ve(this.path)?new t(this.source,it()):new t(this.source,wt(this.path))}};var Cu=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=eo.OVERWRITE}operationForChild(e){return Ve(this.path)?new t(this.source,it(),this.snap.getImmediateChild(e)):new t(this.source,wt(this.path),this.snap)}};var If=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=eo.MERGE}operationForChild(e){if(Ve(this.path)){let n=this.children.subtree(new ot(e));return n.isEmpty()?null:n.value?new Cu(this.source,it(),n.value):new t(this.source,it(),n)}else return Q(Le(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var ro=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ve(e))return this.isFullyInitialized()&&!this.filtered_;let n=Le(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var BI=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function ate(t,e,n,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&t.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(Zee(s.childName,s.snapshotNode))}),hf(t,i,"child_removed",e,r,n),hf(t,i,"child_added",e,r,n),hf(t,i,"child_moved",o,r,n),hf(t,i,"child_changed",e,r,n),hf(t,i,"value",e,r,n),i}function hf(t,e,n,r,i,o){let s=r.filter(a=>a.type===n);s.sort((a,c)=>lte(t,a,c)),s.forEach(a=>{let c=cte(t,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function cte(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function lte(t,e,n){if(e.childName==null||n.childName==null)throw nl("Should only compare child_ events.");let r=new Ue(e.childName,e.snapshotNode),i=new Ue(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function kv(t,e){return{eventCache:t,serverCache:e}}function mf(t,e,n,r){return kv(new ro(e,n,r),t.serverCache)}function W3(t,e,n,r){return kv(t.eventCache,new ro(e,n,r))}function yv(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function yc(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var aI,ute=()=>(aI||(aI=new ni(cee)),aI),ar=class t{constructor(e,n=ute()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Rn(e,(r,i)=>{n=n.set(new ot(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:it(),value:this.value};if(Ve(e))return null;{let r=Le(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(wt(e),n);return o!=null?{path:Pt(new ot(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ve(e))return this;{let n=Le(e),r=this.children.get(n);return r!==null?r.subtree(wt(e)):new t(null)}}set(e,n){if(Ve(e))return new t(n,this.children);{let r=Le(e),o=(this.children.get(r)||new t(null)).set(wt(e),n),s=this.children.insert(r,o);return new t(this.value,s)}}remove(e){if(Ve(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Le(e),r=this.children.get(n);if(r){let i=r.remove(wt(e)),o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(e){if(Ve(e))return this.value;{let n=Le(e),r=this.children.get(n);return r?r.get(wt(e)):null}}setTree(e,n){if(Ve(e))return n;{let r=Le(e),o=(this.children.get(r)||new t(null)).setTree(wt(e),n),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new t(this.value,s)}}fold(e){return this.fold_(it(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Pt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,it(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Ve(e))return null;{let o=Le(e),s=this.children.get(o);return s?s.findOnPath_(wt(e),Pt(n,o),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,it(),n)}foreachOnPath_(e,n,r){if(Ve(e))return this;{this.value&&r(n,this.value);let i=Le(e),o=this.children.get(i);return o?o.foreachOnPath_(wt(e),Pt(n,i),r):new t(null)}}foreach(e){this.foreach_(it(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Pt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Ci=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new ar(null))}};function gf(t,e,n){if(Ve(e))return new Ci(new ar(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=sr(i,e);return o=o.updateChild(s,n),new Ci(t.writeTree_.set(i,o))}else{let i=new ar(n),o=t.writeTree_.setTree(e,i);return new Ci(o)}}}function jI(t,e,n){let r=t;return Rn(n,(i,o)=>{r=gf(r,Pt(e,i),o)}),r}function i3(t,e){if(Ve(e))return Ci.empty();{let n=t.writeTree_.setTree(e,new ar(null));return new Ci(n)}}function UI(t,e){return _c(t,e)!=null}function _c(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(sr(n.path,e)):null}function o3(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(bt,(r,i)=>{e.push(new Ue(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ue(r,i.value))}),e}function Hs(t,e){if(Ve(e))return t;{let n=_c(t,e);return n!=null?new Ci(new ar(n)):new Ci(t.writeTree_.subtree(e))}}function $I(t){return t.writeTree_.isEmpty()}function bu(t,e){return G3(it(),t.writeTree_,e)}function G3(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(Q(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):n=G3(Pt(t,i),o,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Pt(t,".priority"),r)),n}}function Fv(t,e){return X3(e,t)}function dte(t,e,n,r,i){Q(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=gf(t.visibleWrites,e,n)),t.lastWriteId=r}function hte(t,e,n,r){Q(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=jI(t.visibleWrites,e,n),t.lastWriteId=r}function fte(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function pte(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);Q(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,o=!1,s=t.allWrites.length-1;for(;i&&s>=0;){let a=t.allWrites[s];a.visible&&(s>=n&&mte(a,r.path)?i=!1:ti(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return gte(t),!0;if(r.snap)t.visibleWrites=i3(t.visibleWrites,r.path);else{let a=r.children;Rn(a,c=>{t.visibleWrites=i3(t.visibleWrites,Pt(r.path,c))})}return!0}else return!1}function mte(t,e){if(t.snap)return ti(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&ti(Pt(t.path,n),e))return!0;return!1}function gte(t){t.visibleWrites=K3(t.allWrites,yte,it()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function yte(t){return t.visible}function K3(t,e,n){let r=Ci.empty();for(let i=0;i<t.length;++i){let o=t[i];if(e(o)){let s=o.path,a;if(o.snap)ti(n,s)?(a=sr(n,s),r=gf(r,a,o.snap)):ti(s,n)&&(a=sr(s,n),r=gf(r,it(),o.snap.getChild(a)));else if(o.children){if(ti(n,s))a=sr(n,s),r=jI(r,a,o.children);else if(ti(s,n))if(a=sr(s,n),Ve(a))r=jI(r,it(),o.children);else{let c=ds(o.children,Le(a));if(c){let l=c.getChild(wt(a));r=gf(r,it(),l)}}}else throw nl("WriteRecord should have .snap or .children")}}return r}function Q3(t,e,n,r,i){if(!r&&!i){let o=_c(t.visibleWrites,e);if(o!=null)return o;{let s=Hs(t.visibleWrites,e);if($I(s))return n;if(n==null&&!UI(s,it()))return null;{let a=n||Se.EMPTY_NODE;return bu(s,a)}}}else{let o=Hs(t.visibleWrites,e);if(!i&&$I(o))return n;if(!i&&n==null&&!UI(o,it()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(ti(l.path,e)||ti(e,l.path))},a=K3(t.allWrites,s,e),c=n||Se.EMPTY_NODE;return bu(a,c)}}}function vte(t,e,n){let r=Se.EMPTY_NODE,i=_c(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(bt,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(n){let o=Hs(t.visibleWrites,e);return n.forEachChild(bt,(s,a)=>{let c=bu(Hs(o,new ot(s)),a);r=r.updateImmediateChild(s,c)}),o3(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Hs(t.visibleWrites,e);return o3(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function _te(t,e,n,r,i){Q(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Pt(e,n);if(UI(t.visibleWrites,o))return null;{let s=Hs(t.visibleWrites,o);return $I(s)?i.getChild(n):bu(s,i.getChild(n))}}function wte(t,e,n,r){let i=Pt(e,n),o=_c(t.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(n)){let s=Hs(t.visibleWrites,i);return bu(s,r.getNode().getImmediateChild(n))}else return null}function Ete(t,e){return _c(t.visibleWrites,e)}function xte(t,e,n,r,i,o,s){let a,c=Hs(t.visibleWrites,e),l=_c(c,it());if(l!=null)a=l;else if(n!=null)a=bu(c,n);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=h.getNext();for(;f&&u.length<i;)d(f,r)!==0&&u.push(f),f=h.getNext();return u}else return[]}function Cte(){return{visibleWrites:Ci.empty(),allWrites:[],lastWriteId:-1}}function vv(t,e,n,r){return Q3(t.writeTree,t.treePath,e,n,r)}function DD(t,e){return vte(t.writeTree,t.treePath,e)}function s3(t,e,n,r){return _te(t.writeTree,t.treePath,e,n,r)}function _v(t,e){return Ete(t.writeTree,Pt(t.treePath,e))}function bte(t,e,n,r,i,o){return xte(t.writeTree,t.treePath,e,n,r,i,o)}function TD(t,e,n){return wte(t.writeTree,t.treePath,e,n)}function Y3(t,e){return X3(Pt(t.treePath,e),t.writeTree)}function X3(t,e){return{treePath:t,writeTree:e}}var qI=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;Q(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),Q(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(n==="child_added"&&o==="child_removed")this.changeMap.set(r,xf(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ef(r,i.oldSnap));else if(n==="child_changed"&&o==="child_added")this.changeMap.set(r,xu(r,e.snapshotNode));else if(n==="child_changed"&&o==="child_changed")this.changeMap.set(r,xf(r,e.snapshotNode,i.oldSnap));else throw nl("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var HI=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Z3=new HI,Df=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new ro(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return TD(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:yc(this.viewCache_),o=bte(this.writes_,i,n,1,r,e);return o.length===0?null:o[0]}};function Ite(t){return{filter:t}}function Dte(t,e){Q(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),Q(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Tte(t,e,n,r,i){let o=new qI,s,a;if(n.type===eo.OVERWRITE){let l=n;l.source.fromUser?s=zI(t,e,l.path,l.snap,r,i,o):(Q(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ve(l.path),s=wv(t,e,l.path,l.snap,r,i,a,o))}else if(n.type===eo.MERGE){let l=n;l.source.fromUser?s=Ste(t,e,l.path,l.children,r,i,o):(Q(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=WI(t,e,l.path,l.children,r,i,a,o))}else if(n.type===eo.ACK_USER_WRITE){let l=n;l.revert?s=Pte(t,e,l.path,r,i,o):s=Rte(t,e,l.path,l.affectedTree,r,i,o)}else if(n.type===eo.LISTEN_COMPLETE)s=Mte(t,e,n.path,r,o);else throw nl("Unknown operation type: "+n.type);let c=o.getChanges();return Ate(e,s,c),{viewCache:s,changes:c}}function Ate(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=yv(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(z3(yv(e)))}}function J3(t,e,n,r,i,o){let s=e.eventCache;if(_v(r,n)!=null)return e;{let a,c;if(Ve(n))if(Q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=yc(e),u=l instanceof Se?l:Se.EMPTY_NODE,d=DD(r,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,o)}else{let l=vv(r,yc(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=Le(n);if(l===".priority"){Q(Gs(n)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let d=s3(r,n,u,c);d!=null?a=t.filter.updatePriority(u,d):a=s.getNode()}else{let u=wt(n),d;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let h=s3(r,n,s.getNode(),c);h!=null?d=s.getNode().getImmediateChild(l).updateChild(u,h):d=s.getNode().getImmediateChild(l)}else d=TD(r,l,e.serverCache);d!=null?a=t.filter.updateChild(s.getNode(),l,d,u,i,o):a=s.getNode()}}return mf(e,a,s.isFullyInitialized()||Ve(n),t.filter.filtersNodes())}}function wv(t,e,n,r,i,o,s,a){let c=e.serverCache,l,u=s?t.filter:t.filter.getIndexedFilter();if(Ve(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let f=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),f,null)}else{let f=Le(n);if(!c.isCompleteForPath(n)&&Gs(n)>1)return e;let m=wt(n),w=c.getNode().getImmediateChild(f).updateChild(m,r);f===".priority"?l=u.updatePriority(c.getNode(),w):l=u.updateChild(c.getNode(),f,w,m,Z3,null)}let d=W3(e,l,c.isFullyInitialized()||Ve(n),u.filtersNodes()),h=new Df(i,d,o);return J3(t,d,n,i,h,a)}function zI(t,e,n,r,i,o,s){let a=e.eventCache,c,l,u=new Df(i,e,o);if(Ve(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,s),c=mf(e,l,!0,t.filter.filtersNodes());else{let d=Le(n);if(d===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=mf(e,l,a.isFullyInitialized(),a.isFiltered());else{let h=wt(n),f=a.getNode().getImmediateChild(d),m;if(Ve(h))m=r;else{let _=u.getCompleteChild(d);_!=null?vD(h)===".priority"&&_.getChild(B3(h)).isEmpty()?m=_:m=_.updateChild(h,r):m=Se.EMPTY_NODE}if(f.equals(m))c=e;else{let _=t.filter.updateChild(a.getNode(),d,m,h,u,s);c=mf(e,_,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function a3(t,e){return t.eventCache.isCompleteForChild(e)}function Ste(t,e,n,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=Pt(n,c);a3(e,Le(u))&&(a=zI(t,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Pt(n,c);a3(e,Le(u))||(a=zI(t,a,u,l,i,o,s))}),a}function c3(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function WI(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ve(n)?l=r:l=new ar(null).setTree(n,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),m=c3(t,f,h);c=wv(t,c,new ot(d),m,i,o,s,a)}}),l.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let m=e.serverCache.getNode().getImmediateChild(d),_=c3(t,m,h);c=wv(t,c,new ot(d),_,i,o,s,a)}}),c}function Rte(t,e,n,r,i,o,s){if(_v(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ve(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return wv(t,e,n,c.getNode().getChild(n),i,o,a,s);if(Ve(n)){let l=new ar(null);return c.getNode().forEachChild(to,(u,d)=>{l=l.set(new ot(u),d)}),WI(t,e,n,l,i,o,a,s)}else return e}else{let l=new ar(null);return r.foreach((u,d)=>{let h=Pt(n,u);c.isCompleteForPath(h)&&(l=l.set(u,c.getNode().getChild(h)))}),WI(t,e,n,l,i,o,a,s)}}function Mte(t,e,n,r,i){let o=e.serverCache,s=W3(e,o.getNode(),o.isFullyInitialized()||Ve(n),o.isFiltered());return J3(t,s,n,r,Z3,i)}function Pte(t,e,n,r,i,o){let s;if(_v(r,n)!=null)return e;{let a=new Df(r,e,i),c=e.eventCache.getNode(),l;if(Ve(n)||Le(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=vv(r,yc(e));else{let d=e.serverCache.getNode();Q(d instanceof Se,"serverChildren would be complete if leaf node"),u=DD(r,d)}u=u,l=t.filter.updateFullNode(c,u,o)}else{let u=Le(n),d=TD(r,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=c.getImmediateChild(u)),d!=null?l=t.filter.updateChild(c,u,d,wt(n),a,o):e.eventCache.getNode().hasChild(u)?l=t.filter.updateChild(c,u,Se.EMPTY_NODE,wt(n),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=vv(r,yc(e)),s.isLeafNode()&&(l=t.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||_v(r,it())!=null,mf(e,l,s,t.filter.filtersNodes())}}var GI=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new Cf(r.getIndex()),o=Jee(r);this.processor_=Ite(o);let s=n.serverCache,a=n.eventCache,c=i.updateFullNode(Se.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(Se.EMPTY_NODE,a.getNode(),null),u=new ro(c,s.isFullyInitialized(),i.filtersNodes()),d=new ro(l,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=kv(d,u),this.eventGenerator_=new BI(this.query_)}get query(){return this.query_}};function Nte(t){return t.viewCache_.serverCache.getNode()}function kte(t){return yv(t.viewCache_)}function Fte(t,e){let n=yc(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ve(e)&&!n.getImmediateChild(Le(e)).isEmpty())?n.getChild(e):null}function l3(t){return t.eventRegistrations_.length===0}function Ote(t,e){t.eventRegistrations_.push(e)}function u3(t,e,n){let r=[];if(n){Q(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(o=>{let s=o.createCancelEvent(n,i);s&&r.push(s)})}if(e){let i=[];for(let o=0;o<t.eventRegistrations_.length;++o){let s=t.eventRegistrations_[o];if(!s.matches(e))i.push(s);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(o+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function d3(t,e,n,r){e.type===eo.MERGE&&e.source.queryId!==null&&(Q(yc(t.viewCache_),"We should always have a full cache before handling merges"),Q(yv(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,o=Tte(t.processor_,i,e,n,r);return Dte(t.processor_,o.viewCache),Q(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,eB(t,o.changes,o.viewCache.eventCache.getNode(),null)}function Lte(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(bt,(o,s)=>{r.push(xu(o,s))}),n.isFullyInitialized()&&r.push(z3(n.getNode())),eB(t,r,n.getNode(),e)}function eB(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return ate(t.eventGenerator_,e,n,i)}var Ev,xv=class{constructor(){this.views=new Map}};function Vte(t){Q(!Ev,"__referenceConstructor has already been defined"),Ev=t}function Bte(){return Q(Ev,"Reference.ts has not been loaded"),Ev}function jte(t){return t.views.size===0}function AD(t,e,n,r){let i=e.source.queryId;if(i!==null){let o=t.views.get(i);return Q(o!=null,"SyncTree gave us an op for an invalid query."),d3(o,e,n,r)}else{let o=[];for(let s of t.views.values())o=o.concat(d3(s,e,n,r));return o}}function tB(t,e,n,r,i){let o=e._queryIdentifier,s=t.views.get(o);if(!s){let a=vv(n,i?r:null),c=!1;a?c=!0:r instanceof Se?(a=DD(n,r),c=!1):(a=Se.EMPTY_NODE,c=!1);let l=kv(new ro(a,c,!1),new ro(r,i,!1));return new GI(e,l)}return s}function Ute(t,e,n,r,i,o){let s=tB(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),Ote(s,n),Lte(s,n)}function $te(t,e,n,r){let i=e._queryIdentifier,o=[],s=[],a=Ks(t);if(i==="default")for(let[c,l]of t.views.entries())s=s.concat(u3(l,n,r)),l3(l)&&(t.views.delete(c),l.query._queryParams.loadsAllData()||o.push(l.query));else{let c=t.views.get(i);c&&(s=s.concat(u3(c,n,r)),l3(c)&&(t.views.delete(i),c.query._queryParams.loadsAllData()||o.push(c.query)))}return a&&!Ks(t)&&o.push(new(Bte())(e._repo,e._path)),{removed:o,events:s}}function nB(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function zs(t,e){let n=null;for(let r of t.views.values())n=n||Fte(r,e);return n}function rB(t,e){if(e._queryParams.loadsAllData())return Ov(t);{let r=e._queryIdentifier;return t.views.get(r)}}function iB(t,e){return rB(t,e)!=null}function Ks(t){return Ov(t)!=null}function Ov(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Cv;function qte(t){Q(!Cv,"__referenceConstructor has already been defined"),Cv=t}function Hte(){return Q(Cv,"Reference.ts has not been loaded"),Cv}var zte=1,bv=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ar(null),this.pendingWriteTree_=Cte(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function SD(t,e,n,r,i){return dte(t.pendingWriteTree_,e,n,r,i),i?Su(t,new Cu(CD(),e,n)):[]}function Wte(t,e,n,r){hte(t.pendingWriteTree_,e,n,r);let i=ar.fromObject(n);return Su(t,new If(CD(),e,i))}function qs(t,e,n=!1){let r=fte(t.pendingWriteTree_,e);if(pte(t.pendingWriteTree_,e)){let o=new ar(null);return r.snap!=null?o=o.set(it(),!0):Rn(r.children,s=>{o=o.set(new ot(s),!0)}),Su(t,new VI(r.path,o,n))}else return[]}function Ff(t,e,n){return Su(t,new Cu(bD(),e,n))}function Gte(t,e,n){let r=ar.fromObject(n);return Su(t,new If(bD(),e,r))}function Kte(t,e){return Su(t,new gv(bD(),e))}function Qte(t,e,n){let r=RD(t,n);if(r){let i=MD(r),o=i.path,s=i.queryId,a=sr(o,e),c=new gv(ID(s),a);return PD(t,o,c)}else return[]}function Iv(t,e,n,r,i=!1){let o=e._path,s=t.syncPointTree_.get(o),a=[];if(s&&(e._queryIdentifier==="default"||iB(s,e))){let c=$te(s,e,n,r);jte(s)&&(t.syncPointTree_=t.syncPointTree_.remove(o));let l=c.removed;if(a=c.events,!i){let u=l.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(o,(h,f)=>Ks(f));if(u&&!d){let h=t.syncPointTree_.subtree(o);if(!h.isEmpty()){let f=Zte(h);for(let m=0;m<f.length;++m){let _=f[m],w=_.query,y=cB(t,_);t.listenProvider_.startListening(yf(w),Tf(t,w),y.hashFn,y.onComplete)}}}!d&&l.length>0&&!r&&(u?t.listenProvider_.stopListening(yf(e),null):l.forEach(h=>{let f=t.queryToTagMap.get(Vv(h));t.listenProvider_.stopListening(yf(h),f)}))}Jte(t,l)}return a}function oB(t,e,n,r){let i=RD(t,r);if(i!=null){let o=MD(i),s=o.path,a=o.queryId,c=sr(s,e),l=new Cu(ID(a),c,n);return PD(t,s,l)}else return[]}function Yte(t,e,n,r){let i=RD(t,r);if(i){let o=MD(i),s=o.path,a=o.queryId,c=sr(s,e),l=ar.fromObject(n),u=new If(ID(a),c,l);return PD(t,s,u)}else return[]}function KI(t,e,n,r=!1){let i=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(i,(h,f)=>{let m=sr(h,i);o=o||zs(f,m),s=s||Ks(f)});let a=t.syncPointTree_.get(i);a?(s=s||Ks(a),o=o||zs(a,it())):(a=new xv,t.syncPointTree_=t.syncPointTree_.set(i,a));let c;o!=null?c=!0:(c=!1,o=Se.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((f,m)=>{let _=zs(m,it());_&&(o=o.updateImmediateChild(f,_))}));let l=iB(a,e);if(!l&&!e._queryParams.loadsAllData()){let h=Vv(e);Q(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=ene();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let u=Fv(t.pendingWriteTree_,i),d=Ute(a,e,n,u,o,c);if(!l&&!s&&!r){let h=rB(a,e);d=d.concat(tne(t,e,h))}return d}function Lv(t,e,n){let i=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(e,(s,a)=>{let c=sr(s,e),l=zs(a,c);if(l)return l});return Q3(i,e,o,n,!0)}function Xte(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(l,u)=>{let d=sr(l,n);r=r||zs(u,d)});let i=t.syncPointTree_.get(n);i?r=r||zs(i,it()):(i=new xv,t.syncPointTree_=t.syncPointTree_.set(n,i));let o=r!=null,s=o?new ro(r,!0,!1):null,a=Fv(t.pendingWriteTree_,e._path),c=tB(i,e,a,o?s.getNode():Se.EMPTY_NODE,o);return kte(c)}function Su(t,e){return sB(e,t.syncPointTree_,null,Fv(t.pendingWriteTree_,it()))}function sB(t,e,n,r){if(Ve(t.path))return aB(t,e,n,r);{let i=e.get(it());n==null&&i!=null&&(n=zs(i,it()));let o=[],s=Le(t.path),a=t.operationForChild(s),c=e.children.get(s);if(c&&a){let l=n?n.getImmediateChild(s):null,u=Y3(r,s);o=o.concat(sB(a,c,l,u))}return i&&(o=o.concat(AD(i,t,r,n))),o}}function aB(t,e,n,r){let i=e.get(it());n==null&&i!=null&&(n=zs(i,it()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=n?n.getImmediateChild(s):null,l=Y3(r,s),u=t.operationForChild(s);u&&(o=o.concat(aB(u,a,c,l)))}),i&&(o=o.concat(AD(i,t,r,n))),o}function cB(t,e){let n=e.query,r=Tf(t,n);return{hashFn:()=>(Nte(e)||Se.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?Qte(t,n._path,r):Kte(t,n._path);{let o=dee(i,n);return Iv(t,n,null,o)}}}}function Tf(t,e){let n=Vv(e);return t.queryToTagMap.get(n)}function Vv(t){return t._path.toString()+"$"+t._queryIdentifier}function RD(t,e){return t.tagToQueryMap.get(e)}function MD(t){let e=t.indexOf("$");return Q(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ot(t.substr(0,e))}}function PD(t,e,n){let r=t.syncPointTree_.get(e);Q(r,"Missing sync point for query tag that we're tracking");let i=Fv(t.pendingWriteTree_,e);return AD(r,n,i,null)}function Zte(t){return t.fold((e,n,r)=>{if(n&&Ks(n))return[Ov(n)];{let i=[];return n&&(i=nB(n)),Rn(r,(o,s)=>{i=i.concat(s)}),i}})}function yf(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Hte())(t._repo,t._path):t}function Jte(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=Vv(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}function ene(){return zte++}function tne(t,e,n){let r=e._path,i=Tf(t,e),o=cB(t,n),s=t.listenProvider_.startListening(yf(e),i,o.hashFn,o.onComplete),a=t.syncPointTree_.subtree(r);if(i)Q(!Ks(a.value),"If we're adding a query, it shouldn't be shadowed");else{let c=a.fold((l,u,d)=>{if(!Ve(l)&&u&&Ks(u))return[Ov(u).query];{let h=[];return u&&(h=h.concat(nB(u).map(f=>f.query))),Rn(d,(f,m)=>{h=h.concat(m)}),h}});for(let l=0;l<c.length;++l){let u=c[l];t.listenProvider_.stopListening(yf(u),Tf(t,u))}}return s}var QI=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},YI=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Pt(this.path_,e);return new t(this.syncTree_,n)}node(){return Lv(this.syncTree_,this.path_)}},nne=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},h3=function(t,e,n){if(!t||typeof t!="object")return t;if(Q(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return rne(t[".sv"],e,n);if(typeof t[".sv"]=="object")return ine(t[".sv"],e);Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},rne=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Q(!1,"Unexpected server value: "+t)}},ine=function(t,e,n){t.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&Q(!1,"Unexpected increment value: "+r);let i=e.node();if(Q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},lB=function(t,e,n,r){return kD(e,new YI(n,t),r)},ND=function(t,e,n){return kD(t,new QI(e),n)};function kD(t,e,n){let r=t.getPriority().val(),i=h3(r,e.getImmediateChild(".priority"),n),o;if(t.isLeafNode()){let s=t,a=h3(s.getValue(),e,n);return a!==s.getValue()||i!==s.getPriority().val()?new wu(a,Ft(i)):t}else{let s=t;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new wu(i))),s.forEachChild(bt,(a,c)=>{let l=kD(c,e.getImmediateChild(a),n);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Af=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function Bv(t,e){let n=e instanceof ot?e:new ot(e),r=t,i=Le(n);for(;i!==null;){let o=ds(r.node.children,i)||{children:{},childCount:0};r=new Af(i,r,o),n=wt(n),i=Le(n)}return r}function wc(t){return t.node.value}function FD(t,e){t.node.value=e,XI(t)}function uB(t){return t.node.childCount>0}function one(t){return wc(t)===void 0&&!uB(t)}function jv(t,e){Rn(t.node.children,(n,r)=>{e(new Af(n,t,r))})}function dB(t,e,n,r){n&&!r&&e(t),jv(t,i=>{dB(i,e,!0,r)}),n&&r&&e(t)}function sne(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Of(t){return new ot(t.parent===null?t.name:Of(t.parent)+"/"+t.name)}function XI(t){t.parent!==null&&ane(t.parent,t.name,t)}function ane(t,e,n){let r=one(n),i=qr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,XI(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,XI(t))}var cne=/[\[\].#$\/\u0000-\u001F\u007F]/,lne=/[\[\].#$\u0000-\u001F\u007F]/,cI=10*1024*1024,Uv=function(t){return typeof t=="string"&&t.length!==0&&!cne.test(t)},hB=function(t){return typeof t=="string"&&t.length!==0&&!lne.test(t)},une=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hB(t)},Sf=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Pv(t)||t&&typeof t=="object"&&qr(t,".sv")},io=function(t,e,n,r){r&&e===void 0||Lf(pr(t,"value"),e,n)},Lf=function(t,e,n){let r=n instanceof ot?new EI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+pc(r));if(typeof e=="function")throw new Error(t+"contains a function "+pc(r)+" with contents = "+e.toString());if(Pv(e))throw new Error(t+"contains "+e.toString()+" "+pc(r));if(typeof e=="string"&&e.length>cI/3&&Ad(e)>cI)throw new Error(t+"contains a string greater than "+cI+" utf8 bytes "+pc(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(Rn(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!Uv(s)))throw new Error(t+" contains an invalid key ("+s+") "+pc(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);jee(r,s),Lf(t,a,r),Uee(r)}),i&&o)throw new Error(t+' contains ".value" child '+pc(r)+" in addition to actual children.")}},dne=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let o=_f(r);for(let s=0;s<o.length;s++)if(!(o[s]===".priority"&&s===o.length-1)){if(!Uv(o[s]))throw new Error(t+"contains an invalid key ("+o[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(Bee);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&ti(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},fB=function(t,e,n,r){if(r&&e===void 0)return;let i=pr(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let o=[];Rn(e,(s,a)=>{let c=new ot(s);if(Lf(i,a,Pt(n,c)),vD(c)===".priority"&&!Sf(a))throw new Error(i+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(c)}),dne(i,o)},OD=function(t,e,n){if(!(n&&e===void 0)){if(Pv(e))throw new Error(pr(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sf(e))throw new Error(pr(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Vf=function(t,e,n,r){if(!(r&&n===void 0)&&!Uv(n))throw new Error(pr(t,e)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Ru=function(t,e,n,r){if(!(r&&n===void 0)&&!hB(n))throw new Error(pr(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},hne=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Ru(t,e,n,r)},kr=function(t,e){if(Le(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},pB=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Uv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!une(n))throw new Error(pr(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var ZI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function $v(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();n!==null&&!_D(o,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function mB(t,e,n){$v(t,n),gB(t,r=>_D(r,e))}function Fr(t,e,n){$v(t,n),gB(t,r=>ti(r,e)||ti(e,r))}function gB(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let o=i.path;e(o)?(fne(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function fne(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();gc&&Sn("event: "+n.toString()),Tu(r)}}}var yB="repo_interrupt",pne=25,JI=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ZI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mv(),this.transactionQueueTree_=new Af,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function mne(t,e,n){if(t.stats_=yD(t.repoInfo_),t.forceRestClient_||mee())t.server_=new PI(t.repoInfo_,(r,i,o,s)=>{f3(t,r,i,o,s)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>p3(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{nn(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new wD(t.repoInfo_,e,(r,i,o,s)=>{f3(t,r,i,o,s)},r=>{p3(t,r)},r=>{gne(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=yee(t.repoInfo_,()=>new LI(t.stats_,t.server_)),t.infoData_=new NI,t.infoSyncTree_=new bv({startListening:(r,i,o,s)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=Ff(t.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),LD(t,"connected",!1),t.serverSyncTree_=new bv({startListening:(r,i,o,s)=>(t.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Fr(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function vB(t){let n=t.infoData_.getNode(new ot(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Bf(t){return nne({timestamp:vB(t)})}function f3(t,e,n,r,i){t.dataUpdateCount++;let o=new ot(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let s=[];if(i)if(r){let c=Td(n,l=>Ft(l));s=Yte(t.serverSyncTree_,o,c,i)}else{let c=Ft(n);s=oB(t.serverSyncTree_,o,c,i)}else if(r){let c=Td(n,l=>Ft(l));s=Gte(t.serverSyncTree_,o,c)}else{let c=Ft(n);s=Ff(t.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Iu(t,o)),Fr(t.eventQueue_,a,s)}function p3(t,e){LD(t,"connected",e),e===!1&&_ne(t)}function gne(t,e){Rn(e,(n,r)=>{LD(t,n,r)})}function LD(t,e,n){let r=new ot("/.info/"+e),i=Ft(n);t.infoData_.updateSnapshot(r,i);let o=Ff(t.infoSyncTree_,r,i);Fr(t.eventQueue_,r,o)}function qv(t){return t.nextWriteId_++}function yne(t,e,n){let r=Xte(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let o=Ft(i).withIndex(e._queryParams.getIndex());KI(t.serverSyncTree_,e,n,!0);let s;if(e._queryParams.loadsAllData())s=Ff(t.serverSyncTree_,e._path,o);else{let a=Tf(t.serverSyncTree_,e);s=oB(t.serverSyncTree_,e._path,o,a)}return Fr(t.eventQueue_,e._path,s),Iv(t.serverSyncTree_,e,n,null,!0),o},i=>(Mu(t,"get for query "+nn(e)+" failed: "+i),Promise.reject(new Error(i))))}function VD(t,e,n,r,i){Mu(t,"set",{path:e.toString(),value:n,priority:r});let o=Bf(t),s=Ft(n,r),a=Lv(t.serverSyncTree_,e),c=ND(s,a,o),l=qv(t),u=SD(t.serverSyncTree_,e,c,l,!0);$v(t.eventQueue_,u),t.server_.put(e.toString(),s.val(!0),(h,f)=>{let m=h==="ok";m||Gn("set at "+e+" failed: "+h);let _=qs(t.serverSyncTree_,l,!m);Fr(t.eventQueue_,e,_),Qs(t,i,h,f)});let d=jD(t,e);Iu(t,d),Fr(t.eventQueue_,d,[])}function vne(t,e,n,r){Mu(t,"update",{path:e.toString(),value:n});let i=!0,o=Bf(t),s={};if(Rn(n,(a,c)=>{i=!1,s[a]=lB(Pt(e,a),Ft(c),t.serverSyncTree_,o)}),i)Sn("update() called with empty data.  Don't do anything."),Qs(t,r,"ok",void 0);else{let a=qv(t),c=Wte(t.serverSyncTree_,e,s,a);$v(t.eventQueue_,c),t.server_.merge(e.toString(),n,(l,u)=>{let d=l==="ok";d||Gn("update at "+e+" failed: "+l);let h=qs(t.serverSyncTree_,a,!d),f=h.length>0?Iu(t,e):e;Fr(t.eventQueue_,f,h),Qs(t,r,l,u)}),Rn(n,l=>{let u=jD(t,Pt(e,l));Iu(t,u)}),Fr(t.eventQueue_,e,[])}}function _ne(t){Mu(t,"onDisconnectEvents");let e=Bf(t),n=mv();FI(t.onDisconnect_,it(),(i,o)=>{let s=lB(i,o,t.serverSyncTree_,e);Au(n,i,s)});let r=[];FI(n,it(),(i,o)=>{r=r.concat(Ff(t.serverSyncTree_,i,o));let s=jD(t,i);Iu(t,s)}),t.onDisconnect_=mv(),Fr(t.eventQueue_,it(),r)}function wne(t,e,n){t.server_.onDisconnectCancel(e.toString(),(r,i)=>{r==="ok"&&kI(t.onDisconnect_,e),Qs(t,n,r,i)})}function m3(t,e,n,r){let i=Ft(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(o,s)=>{o==="ok"&&Au(t.onDisconnect_,e,i),Qs(t,r,o,s)})}function Ene(t,e,n,r,i){let o=Ft(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(s,a)=>{s==="ok"&&Au(t.onDisconnect_,e,o),Qs(t,i,s,a)})}function xne(t,e,n,r){if(om(n)){Sn("onDisconnect().update() called with empty data.  Don't do anything."),Qs(t,r,"ok",void 0);return}t.server_.onDisconnectMerge(e.toString(),n,(i,o)=>{i==="ok"&&Rn(n,(s,a)=>{let c=Ft(a);Au(t.onDisconnect_,Pt(e,s),c)}),Qs(t,r,i,o)})}function Cne(t,e,n){let r;Le(e._path)===".info"?r=KI(t.infoSyncTree_,e,n):r=KI(t.serverSyncTree_,e,n),mB(t.eventQueue_,e._path,r)}function eD(t,e,n){let r;Le(e._path)===".info"?r=Iv(t.infoSyncTree_,e,n):r=Iv(t.serverSyncTree_,e,n),mB(t.eventQueue_,e._path,r)}function _B(t){t.persistentConnection_&&t.persistentConnection_.interrupt(yB)}function bne(t){t.persistentConnection_&&t.persistentConnection_.resume(yB)}function Mu(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Sn(n,...e)}function Qs(t,e,n,r){e&&Tu(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),o=i;r&&(o+=": "+r);let s=new Error(o);s.code=i,e(s)}})}function Ine(t,e,n,r,i,o){Mu(t,"transaction on "+e);let s={path:e,update:n,onComplete:r,status:null,order:v3(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=BD(t,e,void 0);s.currentInputSnapshot=a;let c=s.update(a.val());if(c===void 0)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{Lf("transaction failed: Data returned ",c,s.path),s.status=0;let l=Bv(t.transactionQueueTree_,e),u=wc(l)||[];u.push(s),FD(l,u);let d;typeof c=="object"&&c!==null&&qr(c,".priority")?(d=ds(c,".priority"),Q(Sf(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(Lv(t.serverSyncTree_,e)||Se.EMPTY_NODE).getPriority().val();let h=Bf(t),f=Ft(c,d),m=ND(f,a,h);s.currentOutputSnapshotRaw=f,s.currentOutputSnapshotResolved=m,s.currentWriteId=qv(t);let _=SD(t.serverSyncTree_,e,m,s.currentWriteId,s.applyLocally);Fr(t.eventQueue_,e,_),Hv(t,t.transactionQueueTree_)}}function BD(t,e,n){return Lv(t.serverSyncTree_,e,n)||Se.EMPTY_NODE}function Hv(t,e=t.transactionQueueTree_){if(e||zv(t,e),wc(e)){let n=EB(t,e);Q(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&Dne(t,Of(e),n)}else uB(e)&&jv(e,n=>{Hv(t,n)})}function Dne(t,e,n){let r=n.map(l=>l.currentWriteId),i=BD(t,e,r),o=i,s=i.hash();for(let l=0;l<n.length;l++){let u=n[l];Q(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=sr(e,u.path);o=o.updateChild(d,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Mu(t,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(qs(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();zv(t,Bv(t.transactionQueueTree_,e)),Hv(t,t.transactionQueueTree_),Fr(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Tu(d[h])}else{if(l==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Gn("transaction at "+c.toString()+" failed: "+l);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=l}Iu(t,e)}},s)}function Iu(t,e){let n=wB(t,e),r=Of(n),i=EB(t,n);return Tne(t,i,r),r}function Tne(t,e,n){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=sr(n,c.path),u=!1,d;if(Q(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,d=c.abortReason,i=i.concat(qs(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=pne)u=!0,d="maxretry",i=i.concat(qs(t.serverSyncTree_,c.currentWriteId,!0));else{let h=BD(t,c.path,s);c.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){Lf("transaction failed: Data returned ",f,c.path);let m=Ft(f);typeof f=="object"&&f!=null&&qr(f,".priority")||(m=m.updatePriority(h.getPriority()));let w=c.currentWriteId,y=Bf(t),v=ND(m,h,y);c.currentOutputSnapshotRaw=m,c.currentOutputSnapshotResolved=v,c.currentWriteId=qv(t),s.splice(s.indexOf(w),1),i=i.concat(SD(t.serverSyncTree_,c.path,v,c.currentWriteId,c.applyLocally)),i=i.concat(qs(t.serverSyncTree_,w,!0))}else u=!0,d="nodata",i=i.concat(qs(t.serverSyncTree_,c.currentWriteId,!0))}Fr(t.eventQueue_,n,i),i=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(d),!1,null))))}zv(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Tu(r[a]);Hv(t,t.transactionQueueTree_)}function wB(t,e){let n,r=t.transactionQueueTree_;for(n=Le(e);n!==null&&wc(r)===void 0;)r=Bv(r,n),e=wt(e),n=Le(e);return r}function EB(t,e){let n=[];return xB(t,e,n),n.sort((r,i)=>r.order-i.order),n}function xB(t,e,n){let r=wc(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);jv(e,i=>{xB(t,i,n)})}function zv(t,e){let n=wc(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,FD(e,n.length>0?n:void 0)}jv(e,r=>{zv(t,r)})}function jD(t,e){let n=Of(wB(t,e)),r=Bv(t.transactionQueueTree_,e);return sne(r,i=>{lI(t,i)}),lI(t,r),dB(r,i=>{lI(t,i)}),n}function lI(t,e){let n=wc(e);if(n){let r=[],i=[],o=-1;for(let s=0;s<n.length;s++)n[s].status===3||(n[s].status===1?(Q(o===s-1,"All SENT items should be at beginning of queue."),o=s,n[s].status=3,n[s].abortReason="set"):(Q(n[s].status===0,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(qs(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?FD(e,void 0):n.length=o+1,Fr(t.eventQueue_,Of(e),i);for(let s=0;s<r.length;s++)Tu(r[s])}}function Ane(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function Sne(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Gn(`Invalid query segment '${n}' in query '${t}'`)}return e}var tD=function(t,e){let n=Rne(t),r=n.namespace;n.domain==="firebase.com"&&no(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&no("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||see();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new av(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new ot(n.pathString)}},Rne=function(t){let e="",n="",r="",i="",o="",s=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(i=Ane(t.substring(u,d)));let h=Sne(t.substring(Math.min(t.length,d)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let f=e.slice(0,l);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let m=e.indexOf(".");r=e.substring(0,m).toLowerCase(),n=e.substring(m+1),o=r}"ns"in h&&(o=h.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var g3="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Mne=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,o=new Array(8);for(i=7;i>=0;i--)o[i]=g3.charAt(n%64),n=Math.floor(n/64);Q(n===0,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)s+=g3.charAt(e[i]);return Q(s.length===20,"nextPushId: Length should be 20."),s}}();var Dv=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+nn(this.snapshot.exportVal())}},Tv=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var Rf=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return Q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Av=class{constructor(e,n){this._repo=e,this._path=n}cancel(){let e=new Cn;return wne(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){kr("OnDisconnect.remove",this._path);let e=new Cn;return m3(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){kr("OnDisconnect.set",this._path),io("OnDisconnect.set",e,this._path,!1);let n=new Cn;return m3(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){kr("OnDisconnect.setWithPriority",this._path),io("OnDisconnect.setWithPriority",e,this._path,!1),OD("OnDisconnect.setWithPriority",n,!1);let r=new Cn;return Ene(this._repo,this._path,e,n,r.wrapCallback(()=>{})),r.promise}update(e){kr("OnDisconnect.update",this._path),fB("OnDisconnect.update",e,this._path,!1);let n=new Cn;return xne(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}};var cr=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ve(this._path)?null:vD(this._path)}get ref(){return new Or(this._repo,this._path)}get _queryIdentifier(){let e=n3(this._queryParams),n=gD(e);return n==="{}"?"default":n}get _queryObject(){return n3(this._queryParams)}isEqual(e){if(e=qe(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=_D(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+Vee(this._path)}};function Wv(t,e){if(t._orderByCalled===!0)throw new Error(e+": You can't combine multiple orderBy calls.")}function Xs(t){let e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===to){let r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Ws)throw new Error(r);if(typeof e!="string")throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Qo)throw new Error(r);if(typeof n!="string")throw new Error(i)}}else if(t.getIndex()===bt){if(e!=null&&!Sf(e)||n!=null&&!Sf(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Q(t.getIndex()instanceof wf||t.getIndex()===xD,"unknown index type."),e!=null&&typeof e=="object"||n!=null&&typeof n=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Gv(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Or=class t extends cr{constructor(e,n){super(e,n,new bf,!1)}get parent(){let e=B3(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Du=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new ot(e),r=Ys(this.ref,e);return new t(this._node.getChild(n),r,bt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,Ys(this.ref,r),bt)))}hasChild(e){let n=new ot(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function UD(t,e){return t=qe(t),t._checkNotDeleted("ref"),e!==void 0?Ys(t._root,e):t._root}function $D(t,e){t=qe(t),t._checkNotDeleted("refFromURL");let n=tD(e,t._repo.repoInfo_.nodeAdmin);pB("refFromURL",n);let r=n.repoInfo;return!t._repo.repoInfo_.isCustomHost()&&r.host!==t._repo.repoInfo_.host&&no("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),UD(t,n.path.toString())}function Ys(t,e){return t=qe(t),Le(t._path)===null?hne("child","path",e,!1):Ru("child","path",e,!1),new Or(t._repo,Pt(t._path,e))}function CB(t,e){t=qe(t),kr("push",t._path),io("push",e,t._path,!0);let n=vB(t._repo),r=Mne(n),i=Ys(t,r),o=Ys(t,r),s;return e!=null?s=Kv(o,e).then(()=>o):s=Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}function bB(t){return kr("remove",t._path),Kv(t,null)}function Kv(t,e){t=qe(t),kr("set",t._path),io("set",e,t._path,!1);let n=new Cn;return VD(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function IB(t,e){t=qe(t),kr("setPriority",t._path),OD("setPriority",e,!1);let n=new Cn;return VD(t._repo,Pt(t._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}function DB(t,e,n){if(kr("setWithPriority",t._path),io("setWithPriority",e,t._path,!1),OD("setWithPriority",n,!1),t.key===".length"||t.key===".keys")throw"setWithPriority failed: "+t.key+" is a read-only object.";let r=new Cn;return VD(t._repo,t._path,e,n,r.wrapCallback(()=>{})),r.promise}function TB(t,e){fB("update",e,t._path,!1);let n=new Cn;return vne(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function AB(t){t=qe(t);let e=new Rf(()=>{}),n=new Mf(e);return yne(t._repo,t,n).then(r=>new Du(r,new Or(t._repo,t._path),t._queryParams.getIndex()))}var Mf=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new Dv("value",this,new Du(e.snapshotNode,new Or(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Tv(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Sv=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Tv(this,e,n):null}createEvent(e,n){Q(e.childName!=null,"Child events should have a childName.");let r=Ys(new Or(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new Dv(e.type,this,new Du(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function jf(t,e,n,r,i){let o;if(typeof r=="object"&&(o=void 0,i=r),typeof r=="function"&&(o=r),i&&i.onlyOnce){let c=n,l=(u,d)=>{eD(t._repo,t,a),c(u,d)};l.userCallback=n.userCallback,l.context=n.context,n=l}let s=new Rf(n,o||void 0),a=e==="value"?new Mf(s):new Sv(e,s);return Cne(t._repo,t,a),()=>eD(t._repo,t,a)}function Qv(t,e,n,r){return jf(t,"value",e,n,r)}function qD(t,e,n,r){return jf(t,"child_added",e,n,r)}function HD(t,e,n,r){return jf(t,"child_changed",e,n,r)}function zD(t,e,n,r){return jf(t,"child_moved",e,n,r)}function WD(t,e,n,r){return jf(t,"child_removed",e,n,r)}function GD(t,e,n){let r=null,i=n?new Rf(n):null;e==="value"?r=new Mf(i):e&&(r=new Sv(e,i)),eD(t._repo,t,r)}var Lr=class{},Rv=class extends Lr{constructor(e,n){super(),this._value=e,this._key=n,this.type="endAt"}_apply(e){io("endAt",this._value,e._path,!0);let n=MI(e._queryParams,this._value,this._key);if(Gv(n),Xs(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cr(e._repo,e._path,n,e._orderByCalled)}};function SB(t,e){return Vf("endAt","key",e,!0),new Rv(t,e)}var nD=class extends Lr{constructor(e,n){super(),this._value=e,this._key=n,this.type="endBefore"}_apply(e){io("endBefore",this._value,e._path,!1);let n=rte(e._queryParams,this._value,this._key);if(Gv(n),Xs(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new cr(e._repo,e._path,n,e._orderByCalled)}};function RB(t,e){return Vf("endBefore","key",e,!0),new nD(t,e)}var Mv=class extends Lr{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAt"}_apply(e){io("startAt",this._value,e._path,!0);let n=RI(e._queryParams,this._value,this._key);if(Gv(n),Xs(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new cr(e._repo,e._path,n,e._orderByCalled)}};function MB(t=null,e){return Vf("startAt","key",e,!0),new Mv(t,e)}var rD=class extends Lr{constructor(e,n){super(),this._value=e,this._key=n,this.type="startAfter"}_apply(e){io("startAfter",this._value,e._path,!1);let n=nte(e._queryParams,this._value,this._key);if(Gv(n),Xs(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new cr(e._repo,e._path,n,e._orderByCalled)}};function PB(t,e){return Vf("startAfter","key",e,!0),new rD(t,e)}var iD=class extends Lr{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new cr(e._repo,e._path,ete(e._queryParams,this._limit),e._orderByCalled)}};function NB(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new iD(t)}var oD=class extends Lr{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new cr(e._repo,e._path,tte(e._queryParams,this._limit),e._orderByCalled)}};function kB(t){if(typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new oD(t)}var sD=class extends Lr{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){Wv(e,"orderByChild");let n=new ot(this._path);if(Ve(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let r=new wf(n),i=Nv(e._queryParams,r);return Xs(i),new cr(e._repo,e._path,i,!0)}};function FB(t){if(t==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(t==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(t==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Ru("orderByChild","path",t,!1),new sD(t)}var aD=class extends Lr{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){Wv(e,"orderByKey");let n=Nv(e._queryParams,to);return Xs(n),new cr(e._repo,e._path,n,!0)}};function OB(){return new aD}var cD=class extends Lr{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){Wv(e,"orderByPriority");let n=Nv(e._queryParams,bt);return Xs(n),new cr(e._repo,e._path,n,!0)}};function LB(){return new cD}var lD=class extends Lr{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){Wv(e,"orderByValue");let n=Nv(e._queryParams,xD);return Xs(n),new cr(e._repo,e._path,n,!0)}};function VB(){return new lD}var uD=class extends Lr{constructor(e,n){super(),this._value=e,this._key=n,this.type="equalTo"}_apply(e){if(io("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Rv(this._value,this._key)._apply(new Mv(this._value,this._key)._apply(e))}};function BB(t,e){return Vf("equalTo","key",e,!0),new uD(t,e)}function ri(t,...e){let n=qe(t);for(let r of e)n=r._apply(n);return n}Vte(Or);qte(Or);var Pne="FIREBASE_DATABASE_EMULATOR_HOST",dD={},Nne=!1;function kne(t,e,n,r){t.repoInfo_=new av(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function KD(t,e,n,r,i){let o=r||t.options.databaseURL;o===void 0&&(t.options.projectId||no("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Sn("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let s=tD(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Pne]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=tD(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new pf(pf.OWNER):new mI(t.name,t.options,e);pB("Invalid Firebase Database URL",s),Ve(s.path)||no("Database URL must point to the root of a Firebase Database (not including a child path).");let d=One(a,t,u,new pI(t.name,n));return new hD(d,t)}function Fne(t,e){let n=dD[e];(!n||n[t.key]!==t)&&no(`Database ${e}(${t.repoInfo_}) has already been deleted.`),_B(t),delete n[t.key]}function One(t,e,n,r){let i=dD[e.name];i||(i={},dD[e.name]=i);let o=i[t.toURLString()];return o&&no("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new JI(t,Nne,n,r),i[t.toURLString()]=o,o}var hD=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(mne(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Or(this._repo,it())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Fne(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&no("Cannot call "+e+" on a deleted database.")}};function jB(){V3.IS_TRANSPORT_INITIALIZED&&Gn("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function UB(){jB(),vf.forceDisallow()}function $B(){jB(),gu.forceDisallow(),vf.forceAllow()}function qB(t,e,n,r={}){t=qe(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&no("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&no('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new pf(pf.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:nm(r.mockUserToken,t.app.options.projectId);o=new pf(s)}kne(i,e,n,o)}function HB(t){t=qe(t),t._checkNotDeleted("goOffline"),_B(t._repo)}function zB(t){t=qe(t),t._checkNotDeleted("goOnline"),bne(t._repo)}function WB(t,e){w3(t,e)}function Lne(t){mD(am),_a(new Cr("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return KD(r,i,o,n)},"PUBLIC").setMultipleInstances(!0)),li(BV,jV,t),li(BV,jV,"esm2017")}var Vne={".sv":"timestamp"};function GB(){return Vne}function KB(t){return{".sv":{increment:t}}}var fD=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function QB(t,e,n){var r;if(t=qe(t),kr("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";let i=(r=n?.applyLocally)!==null&&r!==void 0?r:!0,o=new Cn,s=(c,l,u)=>{let d=null;c?o.reject(c):(d=new Du(u,new Or(t._repo,t._path),bt),o.resolve(new fD(l,d)))},a=Qv(t,()=>{});return Ine(t._repo,t._path,e,s,a,i),o.promise}wD.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};wD.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Lne();var Bne="@firebase/database-compat",jne="1.0.3";var Une=new hs("@firebase/database-compat"),YB=function(t){let e="FIREBASE WARNING: "+t;Une.warn(e)};var $ne=function(t,e,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(pr(t,e)+"must be a boolean.")},qne=function(t,e,n){if(!(n&&e===void 0))switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(pr(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var QD=class{constructor(e){this._delegate=e}cancel(e){ve("OnDisconnect.cancel",0,1,arguments.length),gn("OnDisconnect.cancel","onComplete",e,!0);let n=this._delegate.cancel();return e&&n.then(()=>e(null),r=>e(r)),n}remove(e){ve("OnDisconnect.remove",0,1,arguments.length),gn("OnDisconnect.remove","onComplete",e,!0);let n=this._delegate.remove();return e&&n.then(()=>e(null),r=>e(r)),n}set(e,n){ve("OnDisconnect.set",1,2,arguments.length),gn("OnDisconnect.set","onComplete",n,!0);let r=this._delegate.set(e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){ve("OnDisconnect.setWithPriority",2,3,arguments.length),gn("OnDisconnect.setWithPriority","onComplete",r,!0);let i=this._delegate.setWithPriority(e,n);return r&&i.then(()=>r(null),o=>r(o)),i}update(e,n){if(ve("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,YB("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}gn("OnDisconnect.update","onComplete",n,!0);let r=this._delegate.update(e);return n&&r.then(()=>n(null),i=>n(i)),r}};var YD=class{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return ve("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Ec=class t{constructor(e,n){this._database=e,this._delegate=n}val(){return ve("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return ve("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return ve("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return ve("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return ve("DataSnapshot.child",0,1,arguments.length),e=String(e),Ru("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))}hasChild(e){return ve("DataSnapshot.hasChild",1,1,arguments.length),Ru("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return ve("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return ve("DataSnapshot.forEach",1,1,arguments.length),gn("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new t(this._database,n)))}hasChildren(){return ve("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return ve("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return ve("DataSnapshot.ref",0,0,arguments.length),new Yo(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Yv=class t{constructor(e,n){this.database=e,this._delegate=n}on(e,n,r,i){var o;ve("Query.on",2,4,arguments.length),gn("Query.on","callback",n,!1);let s=t.getCancelAndContextArgs_("Query.on",r,i),a=(l,u)=>{n.call(s.context,new Ec(this.database,l),u)};a.userCallback=n,a.context=s.context;let c=(o=s.cancel)===null||o===void 0?void 0:o.bind(s.context);switch(e){case"value":return Qv(this._delegate,a,c),n;case"child_added":return qD(this._delegate,a,c),n;case"child_removed":return WD(this._delegate,a,c),n;case"child_changed":return HD(this._delegate,a,c),n;case"child_moved":return zD(this._delegate,a,c),n;default:throw new Error(pr("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,r){if(ve("Query.off",0,3,arguments.length),qne("Query.off",e,!0),gn("Query.off","callback",n,!0),eE("Query.off","context",r,!0),n){let i=()=>{};i.userCallback=n,i.context=r,GD(this._delegate,e,i)}else GD(this._delegate,e)}get(){return AB(this._delegate).then(e=>new Ec(this.database,e))}once(e,n,r,i){ve("Query.once",1,4,arguments.length),gn("Query.once","callback",n,!0);let o=t.getCancelAndContextArgs_("Query.once",r,i),s=new Cn,a=(l,u)=>{let d=new Ec(this.database,l);n&&n.call(o.context,d,u),s.resolve(d)};a.userCallback=n,a.context=o.context;let c=l=>{o.cancel&&o.cancel.call(o.context,l),s.reject(l)};switch(e){case"value":Qv(this._delegate,a,c,{onlyOnce:!0});break;case"child_added":qD(this._delegate,a,c,{onlyOnce:!0});break;case"child_removed":WD(this._delegate,a,c,{onlyOnce:!0});break;case"child_changed":HD(this._delegate,a,c,{onlyOnce:!0});break;case"child_moved":zD(this._delegate,a,c,{onlyOnce:!0});break;default:throw new Error(pr("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return ve("Query.limitToFirst",1,1,arguments.length),new t(this.database,ri(this._delegate,NB(e)))}limitToLast(e){return ve("Query.limitToLast",1,1,arguments.length),new t(this.database,ri(this._delegate,kB(e)))}orderByChild(e){return ve("Query.orderByChild",1,1,arguments.length),new t(this.database,ri(this._delegate,FB(e)))}orderByKey(){return ve("Query.orderByKey",0,0,arguments.length),new t(this.database,ri(this._delegate,OB()))}orderByPriority(){return ve("Query.orderByPriority",0,0,arguments.length),new t(this.database,ri(this._delegate,LB()))}orderByValue(){return ve("Query.orderByValue",0,0,arguments.length),new t(this.database,ri(this._delegate,VB()))}startAt(e=null,n){return ve("Query.startAt",0,2,arguments.length),new t(this.database,ri(this._delegate,MB(e,n)))}startAfter(e=null,n){return ve("Query.startAfter",0,2,arguments.length),new t(this.database,ri(this._delegate,PB(e,n)))}endAt(e=null,n){return ve("Query.endAt",0,2,arguments.length),new t(this.database,ri(this._delegate,SB(e,n)))}endBefore(e=null,n){return ve("Query.endBefore",0,2,arguments.length),new t(this.database,ri(this._delegate,RB(e,n)))}equalTo(e,n){return ve("Query.equalTo",1,2,arguments.length),new t(this.database,ri(this._delegate,BB(e,n)))}toString(){return ve("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return ve("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if(ve("Query.isEqual",1,1,arguments.length),!(e instanceof t)){let n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,r){let i={cancel:void 0,context:void 0};if(n&&r)i.cancel=n,gn(e,"cancel",i.cancel,!0),i.context=r,eE(e,"context",i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(pr(e,"cancelOrContext")+" must either be a cancel callback or a context object.");return i}get ref(){return new Yo(this.database,new Or(this._delegate._repo,this._delegate._path))}},Yo=class t extends Yv{constructor(e,n){super(e,new cr(n._repo,n._path,new bf,!1)),this.database=e,this._delegate=n}getKey(){return ve("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return ve("Reference.child",1,1,arguments.length),typeof e=="number"&&(e=String(e)),new t(this.database,Ys(this._delegate,e))}getParent(){ve("Reference.parent",0,0,arguments.length);let e=this._delegate.parent;return e?new t(this.database,e):null}getRoot(){return ve("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)}set(e,n){ve("Reference.set",1,2,arguments.length),gn("Reference.set","onComplete",n,!0);let r=Kv(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}update(e,n){if(ve("Reference.update",1,2,arguments.length),Array.isArray(e)){let i={};for(let o=0;o<e.length;++o)i[""+o]=e[o];e=i,YB("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}kr("Reference.update",this._delegate._path),gn("Reference.update","onComplete",n,!0);let r=TB(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}setWithPriority(e,n,r){ve("Reference.setWithPriority",2,3,arguments.length),gn("Reference.setWithPriority","onComplete",r,!0);let i=DB(this._delegate,e,n);return r&&i.then(()=>r(null),o=>r(o)),i}remove(e){ve("Reference.remove",0,1,arguments.length),gn("Reference.remove","onComplete",e,!0);let n=bB(this._delegate);return e&&n.then(()=>e(null),r=>e(r)),n}transaction(e,n,r){ve("Reference.transaction",1,3,arguments.length),gn("Reference.transaction","transactionUpdate",e,!1),gn("Reference.transaction","onComplete",n,!0),$ne("Reference.transaction","applyLocally",r,!0);let i=QB(this._delegate,e,{applyLocally:r}).then(o=>new YD(o.committed,new Ec(this.database,o.snapshot)));return n&&i.then(o=>n(null,o.committed,o.snapshot),o=>n(o,!1,null)),i}setPriority(e,n){ve("Reference.setPriority",1,2,arguments.length),gn("Reference.setPriority","onComplete",n,!0);let r=IB(this._delegate,e);return n&&r.then(()=>n(null),i=>n(i)),r}push(e,n){ve("Reference.push",0,2,arguments.length),gn("Reference.push","onComplete",n,!0);let r=CB(this._delegate,e),i=r.then(s=>new t(this.database,s));n&&i.then(()=>n(null),s=>n(s));let o=new t(this.database,r);return o.then=i.then.bind(i),o.catch=i.catch.bind(i,void 0),o}onDisconnect(){return kr("Reference.onDisconnect",this._delegate._path),new QD(new Av(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var xc=class{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:UB,forceLongPolling:$B}}useEmulator(e,n,r={}){qB(this._delegate,e,n,r)}ref(e){if(ve("database.ref",0,1,arguments.length),e instanceof Yo){let n=$D(this._delegate,e.toString());return new Yo(this,n)}else{let n=UD(this._delegate,e);return new Yo(this,n)}}refFromURL(e){ve("database.refFromURL",1,1,arguments.length);let r=$D(this._delegate,e);return new Yo(this,r)}goOffline(){return ve("database.goOffline",0,0,arguments.length),HB(this._delegate)}goOnline(){return ve("database.goOnline",0,0,arguments.length),zB(this._delegate)}};xc.ServerValue={TIMESTAMP:GB(),increment:t=>KB(t)};function Hne({app:t,url:e,version:n,customAuthImpl:r,customAppCheckImpl:i,namespace:o,nodeAdmin:s=!1}){mD(n);let a=new tE("database-standalone"),c=new sm("auth-internal",a);c.setComponent(new Cr("auth-internal",()=>r,"PRIVATE"));let l;return i&&(l=new sm("app-check-internal",a),l.setComponent(new Cr("app-check-internal",()=>i,"PRIVATE"))),{instance:new xc(KD(t,c,l,e,s),t),namespace:o}}var zne=Object.freeze({__proto__:null,initStandalone:Hne});var Wne=xc.ServerValue;function Gne(t){t.INTERNAL.registerComponent(new Cr("database-compat",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new xc(i,r)},"PUBLIC").setServiceProps({Reference:Yo,Query:Yv,Database:xc,DataSnapshot:Ec,enableLogging:WB,INTERNAL:zne,ServerValue:Wne}).setMultipleInstances(!0)),t.registerVersion(Bne,jne)}Gne(On);function Uf(t,e,n="on",r=ba){return new Fe(i=>{let o=null;return o=t[n](e,(s,a)=>{r.schedule(()=>{i.next({snapshot:s,prevKey:a})}),n==="once"&&r.schedule(()=>i.complete())},s=>{r.schedule(()=>i.error(s))}),n==="on"?{unsubscribe(){o!=null&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(fe(i=>{let{snapshot:o,prevKey:s}=i,a=null;return o.exists()&&(a=o.key),{type:e,payload:o,prevKey:s,key:a}}),kd())}function Kne(t){return typeof t=="string"}function Qne(t){return typeof t.exportVal=="function"}function t8(t){return t==null}function n8(t){return typeof t.set=="function"}function XB(t,e){return n8(e)?e:t.ref(e)}function r8(t,e){if(Kne(t))return e.stringCase();if(n8(t))return e.firebaseCase();if(Qne(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function i8(t){return(t8(t)||t.length===0)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function o8(t,e,n){e=i8(e);let r=e.map(i=>Uf(t,i,"on",n));return pl(...r)}function Yne(t,e,n){let r=o8(t,e).pipe(Ni((i,o)=>[...i,o],[]));return Zne(t,r,n)}function Xne(t,e){return Uf(t,"value","on",e).pipe(fe(n=>{let r;return n.payload.forEach(i=>(r=i.key,!1)),{data:n,lastKeyToLoad:r}}))}function Zne(t,e,n){return Xne(t,n).pipe(bE(e),fe(([i,o])=>{let s=i.lastKeyToLoad,a=o.map(c=>c.key);return{actions:o,lastKeyToLoad:s,loadedKeys:a}}),xE(i=>i.loadedKeys.indexOf(i.lastKeyToLoad)===-1),fe(i=>i.actions))}function ZB(t,e){return function(r,i){return r8(r,{stringCase:()=>t.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Jne(t){return function(n){return n?r8(n,{stringCase:()=>t.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):t.remove()}}function ere(t,e,n){return Uf(t,"value","once",n).pipe(He(r=>{let i=[pe(r)];return e.forEach(o=>i.push(Uf(t,o,"on",n))),pl(...i).pipe(Ni(nre,[]))}),Pd())}function s8(t,e){let n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function tre(t,e){if(t8(e))return 0;{let n=s8(t,e);return n===-1?t.length:n+1}}function nre(t,e){let{payload:n,prevKey:r,key:i}=e,o=s8(t,i),s=tre(t,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(c=>{let l={payload:c,type:"value",prevKey:a,key:c.key};return a=c.key,t=[...t,l],!1})}return t;case"child_added":if(o>-1)(t[o-1]?.key||null)!==r&&(t=t.filter(c=>c.payload.key!==n.key),t.splice(s,0,e));else{if(r==null)return[e,...t];t=t.slice(),t.splice(s,0,e)}return t;case"child_removed":return t.filter(a=>a.payload.key!==n.key);case"child_changed":return t.map(a=>a.payload.key===i?e:a);case"child_moved":if(o>-1){let a=t.splice(o,1)[0];return t=t.slice(),t.splice(s,0,a),t}return t;default:return t}}function JB(t,e,n){return e=i8(e),ere(t,e,n)}function rre(t,e){let n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:ZB(r,"update"),set:ZB(r,"set"),push:i=>r.push(i),remove:Jne(r),snapshotChanges(i){return JB(t,i,n).pipe(Zt)},stateChanges(i){return o8(t,i,n).pipe(Zt)},auditTrail(i){return Yne(t,i,n).pipe(Zt)},valueChanges(i,o){return JB(t,i,n).pipe(fe(a=>a.map(c=>o&&o.idField?st(ae({},c.payload.val()),{[o.idField]:c.key}):c.payload.val())),Zt)}}}function e8(t,e){return function(){return Uf(t,"value","on",e)}}function ire(t,e){return{query:t,snapshotChanges(){return e8(t,e.schedulers.outsideAngular)().pipe(Zt)},update(n){return t.ref.update(n)},set(n){return t.ref.set(n)},remove(){return t.ref.remove()},valueChanges(){return e8(t,e.schedulers.outsideAngular)().pipe(Zt,fe(r=>r.payload.exists()?r.payload.val():null))}}}var ore=new te("angularfire2.realtimeDatabaseURL"),sre=new te("angularfire2.database.use-emulator"),Xv=(()=>{class t{schedulers;database;constructor(n,r,i,o,s,a,c,l,u,d,h,f,m,_,w){this.schedulers=a;let y=c,v=fc(n,s,r);l&&cf(v,s,u,h,f,m,d,_),this.database=pu(`${v.name}.database.${i}`,"AngularFireDatabase",v.name,()=>{let C=s.runOutsideAngular(()=>v.database(i||void 0));return y&&C.useEmulator(...y),C},[y])}list(n,r){let i=this.schedulers.ngZone.runOutsideAngular(()=>XB(this.database,n)),o=i;return r&&(o=r(i)),rre(o,this)}object(n){let r=this.schedulers.ngZone.runOutsideAngular(()=>XB(this.database,n));return ire(r,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(r){return new(r||t)(U(Us),U($s,8),U(ore,8),U(Kt),U(je),U(fu),U(sre,8),U(iv,8),U(tf,8),U(nf,8),U(rf,8),U(of,8),U(sf,8),U(af,8),U(Ko,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Pu=(()=>{let e=class e{constructor(r,i,o,s){this.db=r,this.router=i,this._authService=o,this.http=s,this.autentificado=!1,this.localStorageKey="currentUser",this.apiImageUrl="https://api.imgbb.com/1/upload?expiration=15552000&key=5c314ade97137ecb2c1b88c6b02b504b"}enviarSolicitud(r,i,o,s,a,c){let l=this.generateUniqueKey();this.db.list("/solicitudes").push({nombre:r,apellido:i,email:o,password:s,descripcion:a,foto:c,timestamp:Date.now()}).then(()=>{console.log("Solicitud enviada successfully with key:",l)}).catch(u=>{console.error("Error sending solicitud:",u)})}listaSolicitudes(){return this.db.list("/solicitudes").snapshotChanges()}aceptarProfesor(r){let i=new FormData;i.append("image",r.foto);let o={email:r.email,user_metadata:{descripcion:r.descripcion},blocked:!1,email_verified:!0,app_metadata:{role:"profesor"},picture:"",user_id:r.id,given_name:r.nombre,family_name:r.apellido,name:`${r.nombre} ${r.apellido}`,nickname:"TCH",connection:"Username-Password-Authentication",password:r.password,verify_email:!0};r.foto!==""?this.http.post(this.apiImageUrl,i).subscribe(s=>{o.picture=s.data,this.db.list("/").set(`/CuentasProfesores/${r.id}`,{nuevoProfe:o}),this.db.list("/solicitudes").remove(r.id),this._authService.CrearProfesor(o).subscribe(a=>console.log(a))}):(o.picture="https://i.ibb.co/vJdBBPb/no-profe-profile.jpg",this.db.list("/").set(`/CuentasProfesores/${r.id}`,{nuevoProfe:o}),this.db.list("/solicitudes").remove(r.id),this._authService.CrearProfesor(o).subscribe(s=>console.log(s)))}uploadImageOnline(r){let i=new FormData;return i.append("image",r),this.http.post(this.apiImageUrl,i)}rechazarPeticion(r){this.db.list("/solicitudes").remove(r.id)}hashEmail(r){return Zv.SHA256(r).toString(Zv.enc.Hex)}generateUniqueKey(){return this.db.createPushId()}};e.\u0275fac=function(i){return new(i||e)(U(Xv),U(ft),U(Ut),U(Wa))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function are(t,e){t&1&&le(0,"app-loading")}function cre(t,e){if(t&1){let n=dt();k(0,"button",12),we("click",function(){et(n);let i=nt();return tt(i.verify())}),z(1,"Verificar"),O()}}function lre(t,e){if(t&1){let n=dt();ih(0),k(1,"p",10),z(2),O(),k(3,"p",10)(4,"span")(5,"button",12),we("click",function(){et(n);let i=nt();return tt(i.changeDesc=!i.changeDesc)}),z(6,"Editar Descripcion"),O()()(),oh()}if(t&2){let n=nt();Z(2),Dt(n.perfil.user_metadata.descripcion)}}function ure(t,e){if(t&1){let n=dt();ih(0),le(1,"textarea",13,14),k(3,"p",10)(4,"span")(5,"button",12),we("click",function(){et(n);let i=sn(2),o=nt();return tt(o.updateProfesorDesc(i.value))}),z(6,"Guardar"),O()()(),oh()}if(t&2){let n=nt();Z(),ee("value",n.perfil.user_metadata.descripcion)}}function dre(t,e){if(t&1){let n=dt();ih(0),k(1,"p",10)(2,"span")(3,"button",12),we("click",function(){et(n);let i=sn(6);return tt(i.click())}),z(4,"Cambiar Photo de perfil"),O()()(),k(5,"input",15,16),we("change",function(i){et(n);let o=nt();return tt(o.previewImage(i))}),O(),oh()}}var c8=(()=>{let e=class e{ngAfterViewInit(){setTimeout(()=>{this.loading=!1},1e3)}constructor(r,i,o){this.authService=r,this.location=i,this._profesService=o,this.perfil=[],this.imageSrc="",this.changeDesc=!1,this.loading=!0}ngOnInit(){this.authService.getUserProfile().subscribe(r=>{this.perfil=r,console.log(this.perfil),this.authService.metaData(this.perfil.sub).subscribe(i=>{this.perfil=i,console.log(i)})})}Atras(){this.location.back()}isGoogle(){return this.perfil?.identities[0].connection!=="google-oauth2"}verify(){}previewImage(r){let i=r.target.files[0];if(i){let o=new FileReader;o.onload=s=>{let c=(s.target?.result).split(",")[1],l=this.base64ToBlob(c);this.imageSrc=c,console.log(c),this._profesService.uploadImageOnline(this.imageSrc).subscribe(u=>{this.authService.updatePicture(this.perfil.user_id,u.data.url).subscribe(d=>{this.perfil.picture=u.data.url,console.log(d)})})},o.readAsDataURL(i)}}base64ToBlob(r){let i=atob(r),o=new ArrayBuffer(i.length),s=new Uint8Array(o);for(let a=0;a<i.length;a++)s[a]=i.charCodeAt(a);return new Blob([o],{type:"image/jpeg"})}updateProfesorDesc(r){this.authService.updateProfesorDesc(this.perfil.user_id,r).subscribe(i=>{console.log(i),this.perfil.user_metadata.descripcion=r,this.changeDesc=!this.changeDesc})}};e.\u0275fac=function(i){return new(i||e)(X(Ut),X(_r),X(Pu))},e.\u0275cmp=Je({type:e,selectors:[["app-perfil"]],decls:19,vars:8,consts:[[4,"ngIf"],[1,"btn","btn-outline-danger",3,"click"],[1,"container","mt-5"],[1,"card","mb-3","bg-secondary",2,"max-width","540px","min-height","350px"],[1,"row","g-0"],[1,"col-md-4","mt-5"],["alt","...",1,"img-fluid","rounded-start",2,"min-height","150px",3,"src"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["class","btn btn-outline-primary",3,"click",4,"ngIf"],[1,"btn","btn-outline-primary",3,"click"],["name","descricion","id","descricion","cols","60","rows","10",3,"value"],["newDesc",""],["type","file","hidden","",3,"change"],["inpFoto",""]],template:function(i,o){i&1&&(Ie(0,are,1,0,"app-loading",0),k(1,"button",1),we("click",function(){return o.Atras()}),z(2,` < < < < BACK
`),O(),k(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),le(7,"img",6),O(),k(8,"div",7)(9,"div",8)(10,"h5",9),z(11),O(),k(12,"p",10),z(13),k(14,"span"),Ie(15,cre,2,0,"button",11),O()(),Ie(16,lre,7,1,"ng-container",0)(17,ure,7,1,"ng-container",0)(18,dre,7,0,"ng-container",0),O()()()()()),i&2&&(ee("ngIf",o.loading),Z(7),ee("src",o.perfil.picture,jt),Z(4),Dt(o.perfil.given_name),Z(2),Qr("",o.perfil.email," "),Z(2),ee("ngIf",!o.perfil.email_verified),Z(),ee("ngIf",o.perfil.nickname=="TCH"&&!o.changeDesc),Z(),ee("ngIf",o.changeDesc),Z(),ee("ngIf",o.isGoogle()))},dependencies:[cn,wr]});let t=e;return t})();var Jv=(()=>{let e=class e{constructor(r){this.db=r}sendMessage(r,i,o){let s=this.generateConversationId(i,o);this.db.list(`/conversations/${s}`).push({message:r,participants:{userId:i,recipientId:o},timestamp:Date.now()})}getConversation(r,i){let o=this.generateConversationId(r,i);return this.db.list(`/conversations/${o}`).valueChanges()}searchWordInList(r){return this.db.object(r).valueChanges()}generateConversationId(r,i){return r<i?`${r}_${i}`:`${i}_${r}`}};e.\u0275fac=function(i){return new(i||e)(U(Xv))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hre(t,e){t&1&&le(0,"app-loading")}function fre(t,e){if(t&1){let n=dt();k(0,"img",17),we("click",function(){et(n);let i=nt(2);return tt(i.perfil())}),O()}if(t&2){let n=nt(2);Oo("cursor","pointer"),ee("src",n.user.picture,jt)}}function pre(t,e){if(t&1){let n=dt();k(0,"img",17),we("click",function(){et(n);let i=nt().$implicit,o=nt();return tt(o.perfilProfe(i.participants.userId))}),O()}if(t&2){let n=nt(2);Oo("cursor","pointer"),ee("src",n.profePicture,jt)}}function mre(t,e){if(t&1&&(k(0,"div",18),z(1),O()),t&2){let n=nt(2);Z(),Dt(n.user.name)}}function gre(t,e){t&1&&(k(0,"div",18),z(1,"Profesor"),O())}var yre=(t,e)=>({"chat-message-right":t,"chat-message-left":e});function vre(t,e){if(t&1&&(k(0,"div",12)(1,"div"),Ie(2,fre,1,3,"img",13)(3,pre,1,3,"img",13),k(4,"div",14),z(5),Ds(6,"date"),O()(),k(7,"div",15),Ie(8,mre,2,1,"div",16)(9,gre,2,0,"div",16),z(10),O()()),t&2){let n=e.$implicit,r=nt();ee("ngClass",qa(10,yre,n.participants.userId==r.user.sub,n.participants.userId!==r.user.sub)),Z(2),ee("ngIf",n.participants.userId==r.user.sub),Z(),ee("ngIf",n.participants.userId!==r.user.sub),Z(2),Dt(zg(6,7,n.timestamp,"short")),Z(3),ee("ngIf",n.participants.userId==r.user.sub),Z(),ee("ngIf",n.participants.userId!==r.user.sub),Z(),Qr(" ",n.message," ")}}var u8=(()=>{let e=class e{ngAfterViewInit(){setTimeout(()=>{this.loading=!1},1e3)}constructor(r,i,o,s,a){this.authService=r,this.chatService=i,this._activatedRoute=o,this.router=s,this.location=a,this.id=[],this.user=[],this.conversations=[],this.path="conversations",this.profePicture="",this.loading=!0}ngOnInit(){this._activatedRoute.params.subscribe(r=>{this.id=r.id,this.authService.getUserProfile().subscribe(i=>{console.log(i),this.user=i,this.profePicture=localStorage.getItem("pictureProfe")||"https://bootdey.com/img/Content/avatar/avatar1.png",this.chatService.getConversation(this.user.sub,this.id).subscribe(o=>this.conversations=o)})})}Atras(){this.location.back()}enviar(r){r.value==""||(this.chatService.sendMessage(r.value,this.user.sub,this.id),r.value=""),r.focus();let i=document.getElementById("miChat");i!==null&&(i.scrollTop=i.scrollHeight)}buscar(){this.chatService.searchWordInList(this.path).subscribe(r=>{let i=r;Object.keys(i).forEach(s=>{s.includes(this.user.sub)&&(console.log(s),console.log(i[s]))})})}perfil(){this.router.navigate(["perfil"])}perfilProfe(r){r.includes("-N")&&this.router.navigate([`profesor/${r}`])}};e.\u0275fac=function(i){return new(i||e)(X(Ut),X(Jv),X(ir),X(ft),X(_r))},e.\u0275cmp=Je({type:e,selectors:[["app-chat"]],decls:14,vars:2,consts:[[4,"ngIf"],[1,"btn","btn-outline-danger",2,"margin-bottom","20px",3,"click"],[1,"d-flex","justify-content-center"],[1,"col-12","col-lg-7","col-xl-9",2,"background-color","aliceblue","border-radius","30px"],[1,"position-relative"],["id","miChat",1,"chat-messages","p-4"],["class","pb-4",3,"ngClass",4,"ngFor","ngForOf"],[1,"flex-grow-0","py-3","px-4","border-top"],[1,"input-group"],["type","text","placeholder","Type your message",1,"form-control"],["mensaje",""],["type","button",1,"btn","btn-primary",2,"z-index","0",3,"click"],[1,"pb-4",3,"ngClass"],["class","rounded-circle mr-1","alt","Chris Wood","width","40","height","40",3,"src","cursor","click",4,"ngIf"],[1,"text-muted","small","text-nowrap","mt-2"],[1,"flex-shrink-1","bg-primary","mx-3","rounded","py-2","px-3","mr-3","rounded-3"],["class","font-weight-bold mb-1","style","text-decoration: underline;",4,"ngIf"],["alt","Chris Wood","width","40","height","40",1,"rounded-circle","mr-1",3,"src","click"],[1,"font-weight-bold","mb-1",2,"text-decoration","underline"]],template:function(i,o){if(i&1){let s=dt();Ie(0,hre,1,0,"app-loading",0),k(1,"button",1),we("click",function(){return o.Atras()}),z(2,` < < < < Regresar
`),O(),k(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),Ie(7,vre,11,13,"div",6),O()(),k(8,"div",7)(9,"div",8),le(10,"input",9,10),k(12,"button",11),we("click",function(){et(s);let c=sn(11);return tt(o.enviar(c))})("click",function(){return o.buscar()}),z(13,"Send"),O()()()()()}i&2&&(ee("ngIf",o.loading),Z(7),ee("ngForOf",o.conversations))},dependencies:[u0,Hn,cn,wr,d0],styles:["body[_ngcontent-%COMP%]{margin-top:20px}.chat-online[_ngcontent-%COMP%]{color:#34ce57}.chat-offline[_ngcontent-%COMP%]{color:#e4606d}.chat-messages[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:800px;overflow-y:scroll}.chat-message-left[_ngcontent-%COMP%], .chat-message-right[_ngcontent-%COMP%]{display:flex;flex-shrink:0}.chat-message-left[_ngcontent-%COMP%]{margin-right:auto}.chat-message-right[_ngcontent-%COMP%]{flex-direction:row-reverse;margin-left:auto}.py-3[_ngcontent-%COMP%]{padding-top:1rem!important;padding-bottom:1rem!important}.px-4[_ngcontent-%COMP%]{padding-right:1.5rem!important;padding-left:1.5rem!important}.flex-grow-0[_ngcontent-%COMP%]{flex-grow:0!important}.border-top[_ngcontent-%COMP%]{border-top:1px solid #dee2e6!important}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}"]});let t=e;return t})();function _re(t,e){t&1&&le(0,"app-loading")}function wre(t,e){if(t&1){let n=dt();k(0,"a",10),we("click",function(){let o=et(n).$implicit,s=nt();return tt(s.irchat(o.user_id,o.picture))}),k(1,"div",11),z(2),O(),k(3,"div",12),le(4,"img",13),k(5,"div",14),z(6),k(7,"div",15),le(8,"span",16),O()()(),le(9,"hr",17),O()}if(t&2){let n=e.$implicit;Oo("cursor","pointer"),Z(2),Dt(n==null?null:n.email),Z(2),ee("src",n==null?null:n.picture,jt),Z(2),Qr(" ",n==null?null:n.name," ")}}function Ere(t,e){t&1&&(k(0,"div",18),z(1," No encontramos chat que busca !!!!! "),O())}var d8=(()=>{let e=class e{ngAfterViewInit(){}constructor(r,i,o,s){this.authService=r,this.chatService=i,this.profesoresSerice=o,this.router=s,this.path="conversations",this.user=[],this.convsList=[],this.profesores=[],this.nombreProfesor=[],this.displayedProfesor=[],this.loading=!0}ngOnInit(){this.authService.getUserProfile().subscribe(r=>{console.log(r),this.user=r,this.profesoresSerice.usersAuth0().subscribe(i=>{this.profesores=i,console.log(this.profesores),this.buscar()})})}buscar(){this.chatService.searchWordInList(this.path).subscribe(r=>{let i=r;Object.keys(i).forEach(s=>{s.includes(this.user.sub)&&(console.log(s),console.log(i[s]),this.convsList.push(i[s]))}),this.getNames(),setTimeout(()=>{this.loading=!1},1500)})}getNames(){for(let r=0;r<this.convsList.length;r++){let i="",o=Object.values(this.convsList[r])[0],s=o.participants.recipientId.split("|");console.log(s),console.log(o.participants.recipientId),console.log(this.profesores),s[1].includes("-N")?(console.log("VAAAEAAARARARARARA"),o.participants.recipientId!==this.user.sub?this.authService.getUserbyId(o.participants.recipientId).subscribe(a=>{console.log(a),i=a,this.nombreProfesor.push(i)}):this.authService.getUserbyId(o.participants.userId).subscribe(a=>{console.log(a),i=a,this.nombreProfesor.push(i)}),console.log(this.nombreProfesor)):(o.participants.recipientId!==this.user.sub?i=this.profesoresSerice.buscarProfesorId(o.participants.recipientId,this.profesores):i=this.profesoresSerice.buscarProfesorId(o.participants.userId,this.profesores),console.log(i),this.nombreProfesor.push(i[0])),console.log(this.nombreProfesor),this.displayedProfesor=this.nombreProfesor}}filter(r){this.displayedProfesor=this.nombreProfesor.filter(i=>i.name.toLowerCase().includes(r.toLowerCase()))}irchat(r,i){localStorage.setItem("pictureProfe",i),this.router.navigate(["chat",r])}};e.\u0275fac=function(i){return new(i||e)(X(Ut),X(Jv),X(Ji),X(ft))},e.\u0275cmp=Je({type:e,selectors:[["app-lista-chat"]],decls:10,vars:3,consts:[[4,"ngIf"],[1,"row","g-0","d-flex","justify-content-center"],[1,"col-12","col-lg-5","col-xl-3","border-right"],[1,"px-4","d-none","d-md-block"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],["type","text","placeholder","Search...",1,"form-control","my-3",3,"keyup"],["termino",""],["class","list-group-item list-group-item-action border-0",3,"cursor","click",4,"ngFor","ngForOf"],["class","alert alert-danger container mt-5","role","alert",4,"ngIf"],[1,"list-group-item","list-group-item-action","border-0",3,"click"],[1,"badge","bg-success","float-right"],[1,"d-flex","align-items-start"],["alt","logo_perfil","width","40","height","40",1,"rounded-circle","mr-1",3,"src"],[1,"flex-grow-1","ml-3"],[1,"small"],[1,"fas","fa-circle","chat-online"],[1,"d-block","d-lg-none","mt-1","mb-0"],["role","alert",1,"alert","alert-danger","container","mt-5"]],template:function(i,o){if(i&1){let s=dt();Ie(0,_re,1,0,"app-loading",0),k(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"input",6,7),we("keyup",function(){et(s);let c=sn(7);return tt(o.filter(c.value))}),O()()()(),Ie(8,wre,10,5,"a",8)(9,Ere,2,0,"div",9),O()()}i&2&&(ee("ngIf",o.loading),Z(8),ee("ngForOf",o.displayedProfesor),Z(),ee("ngIf",o.displayedProfesor.length==0))},dependencies:[Hn,cn,wr]});let t=e;return t})();var e_=(()=>{let e=class e{constructor(r,i){this.authService=r,this.router=i}canActivate(r,i){let o=this.authService.isAuthenticated();return o||(this.authService.login(),!1)}};e.\u0275fac=function(i){return new(i||e)(U(Ut),U(ft))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xre(t,e){t&1&&le(0,"app-loading")}var h8=(()=>{let e=class e{ngAfterViewInit(){setTimeout(()=>{this.loading=!1},1e3)}constructor(r){this._authProfe=r,this.loading=!0,this.imageSrc=""}loginProfe(r,i,o,s,a){this.validarForm(r,i,o,s,a)&&(this._authProfe.enviarSolicitud(r.value,i.value,o.value,s.value,a.value,this.imageSrc),this._authProfe.listaSolicitudes().subscribe(c=>console.log(c)),r.value="",i.value="",o.value="",s.value="",a.value="",r.classList.remove("is-valid"),i.classList.remove("is-valid"),o.classList.remove("is-valid"),s.classList.remove("is-valid"),a.classList.remove("is-valid"),r.focus())}previewImage(r){let i=r.target.files[0];if(i){let o=new FileReader;o.onload=s=>{let c=(s.target?.result).split(",")[1],l=this.base64ToBlob(c);this.imageSrc=c,console.log(c)},o.readAsDataURL(i)}}base64ToBlob(r){let i=atob(r),o=new ArrayBuffer(i.length),s=new Uint8Array(o);for(let a=0;a<i.length;a++)s[a]=i.charCodeAt(a);return new Blob([o],{type:"image/jpeg"})}validarForm(r,i,o,s,a){let c=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{8,}$/,l=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,u=!0,d=document.getElementById("duplicado");return r.value.length<1?(r.classList.add("is-invalid"),u=!1):(r.classList.remove("is-invalid"),r.classList.add("is-valid")),i.value.length<1?(i.classList.add("is-invalid"),u=!1):(i.classList.remove("is-invalid"),i.classList.add("is-valid")),l.test(o.value)?(o.classList.remove("is-invalid"),o.classList.add("is-valid")):(o.classList.add("is-invalid"),u=!1),c.test(s.value)?(s.classList.remove("is-invalid"),s.classList.add("is-valid")):(s.classList.add("is-invalid"),u=!1),a.value.length<1?(a.classList.add("is-invalid"),u=!1):(a.classList.remove("is-invalid"),a.classList.add("is-valid")),u}checkMail(r){let i=!1;return this._authProfe.listaSolicitudes().subscribe(o=>(o.forEach(s=>{s.email==r&&(i=!0,console.log(s.email))}),i)),i}};e.\u0275fac=function(i){return new(i||e)(X(Pu))},e.\u0275cmp=Je({type:e,selectors:[["app-register-profes"]],decls:84,vars:1,consts:[[4,"ngIf"],[1,"container","h-100","text-muted"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-xl-9"],[1,"text-white","mb-4"],[1,"card",2,"border-radius","15px"],[1,"card-body"],[1,"row","align-items-center","pt-4","pb-3"],[1,"col-md-3","ps-5"],[1,"mb-0"],[1,"col-md-9","pe-5"],["type","text",1,"form-control","form-control-lg"],["name",""],[1,"invalid-feedback"],[1,"mx-n3"],["apell",""],[1,"row","align-items-center","py-3"],["type","email","placeholder","example@example.com",1,"form-control","form-control-lg"],["mail1",""],["id","duplicado",1,"invalid-feedback"],["type","password",1,"form-control","form-control-lg"],["password",""],["rows","3","placeholder","Message sent to the employer",1,"form-control"],["desc",""],["id","formFileLg","type","file",1,"form-control","form-control-lg",3,"change"],[1,"small","text-muted","mt-2"],[1,"px-5","py-4"],["type","button",1,"btn","btn-primary","btn-lg",3,"click"]],template:function(i,o){if(i&1){let s=dt();Ie(0,xre,1,0,"app-loading",0),k(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),z(5,"Submit your profile"),O(),k(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8)(10,"h6",9),z(11,"Nombre"),O()(),k(12,"div",10),le(13,"input",11,12),k(15,"div",13),z(16," Introduce un nombre valido. "),O()()(),le(17,"hr",14),k(18,"div",7)(19,"div",8)(20,"h6",9),z(21,"Apellido"),O()(),k(22,"div",10),le(23,"input",11,15),k(25,"div",13),z(26," Introduce un apellido valido. "),O()()(),le(27,"hr",14),k(28,"div",16)(29,"div",8)(30,"h6",9),z(31,"Email address"),O()(),k(32,"div",10),le(33,"input",17,18),k(35,"div",19),z(36," Introduce un correo valido. "),O()()(),le(37,"hr",14),k(38,"div",16)(39,"div",8)(40,"h6",9),z(41,"Contrase\xF1a"),O()(),k(42,"div",10),le(43,"input",20,21),k(45,"div",13)(46,"ul"),z(47," La contrase\xF1a debe tener: "),k(48,"li"),z(49,"almenos 8 caracteres."),O(),k(50,"li"),z(51,"almenos 1 de cada lo siguiente. "),k(52,"ul")(53,"li"),z(54,"Numero (0-9)"),O(),k(55,"li"),z(56,"Miniscula (a-)"),O(),k(57,"li"),z(58,"Mayuscula (A-Z)"),O(),k(59,"li"),z(60,"Caracter Special (e.g. !@#%^&*)"),O()()()()()()(),le(61,"hr",14),k(62,"div",16)(63,"div",8)(64,"h6",9),z(65,"Bibliografia"),O()(),k(66,"div",10),le(67,"textarea",22,23),k(69,"div",13),z(70," La descripcion debe de tener almenos 150 caracteres. "),O()()(),le(71,"hr",14),k(72,"div",16)(73,"div",8)(74,"h6",9),z(75,"Upload CV"),O()(),k(76,"div",10)(77,"input",24),we("change",function(c){return o.previewImage(c)}),O(),k(78,"div",25),z(79,"Upload your profile picture. Max file size 50 MB "),O()()(),le(80,"hr",14),k(81,"div",26)(82,"button",27),we("click",function(){et(s);let c=sn(14),l=sn(24),u=sn(34),d=sn(44),h=sn(68);return tt(o.loginProfe(c,l,u,d,h))}),z(83,"Send application"),O()()()()()()()}i&2&&ee("ngIf",o.loading)},dependencies:[cn,wr],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%}body[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:40px;padding-bottom:40px;background-color:#f5f5f5}.form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]});let t=e;return t})();var f8=(()=>{let e=class e{constructor(r){this.sanitizer=r}transform(r){return!r||r.length<=0||r==="null"?this.sanitizer.bypassSecurityTrustResourceUrl("https://i.ibb.co/vJdBBPb/no-profe-profile.jpg"):this.sanitizer.bypassSecurityTrustResourceUrl(`data:image/jpg;base64,${r}`)}};e.\u0275fac=function(i){return new(i||e)(X(mb,16))},e.\u0275pipe=Rl({name:"convertBase64",type:e,pure:!0});let t=e;return t})();function bre(t,e){t&1&&le(0,"app-loading")}function Ire(t,e){t&1&&(k(0,"div")(1,"div",3),z(2," No hay Ninguna Peticon Actualmente. "),O()())}function Dre(t,e){if(t&1){let n=dt();k(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10),le(7,"img",11),Ds(8,"convertBase64"),k(9,"a",12)(10,"div",13),le(11,"div",14),O()()()(),k(12,"div",15)(13,"h5"),z(14),O(),k(15,"div",16)(16,"div",17),le(17,"i",18)(18,"i",18)(19,"i",18)(20,"i",18),O(),k(21,"span",19),z(22),O()(),k(23,"p",20),z(24),O()(),k(25,"div",21)(26,"div",22)(27,"button",23),we("click",function(){let o=et(n).$implicit,s=nt();return tt(s.aceptarPeticion(o))}),z(28,"Aceptar Peticion "),O(),k(29,"button",24),we("click",function(){let o=et(n).$implicit,s=nt();return tt(s.BorrarPeticion(o))}),z(30," Rechazar Peticion "),O()()()()()()()()}if(t&2){let n=e.$implicit;Z(7),ee("src",Hg(8,5,n.foto),jt),Z(7),kC("",n.nombre," ",n.apellido,""),Z(8),Dt(n.email),Z(2),Qr(" ",n.descripcion," ")}}var p8=(()=>{let e=class e{ngAfterViewInit(){setTimeout(()=>{this.loading=!1},1e3)}constructor(r){this._authProfes=r,this.peticiones=[],this.loading=!0,this.listaPeticiones()}listaPeticiones(){this._authProfes.listaSolicitudes().subscribe(r=>{r.forEach(i=>{let o=i.payload.val();o.id=i.key,this.peticiones.push(o)}),console.log(this.peticiones)})}aceptarPeticion(r){console.log(r),this._authProfes.aceptarProfesor(r),this.peticiones=[]}BorrarPeticion(r){console.log(r.id),this._authProfes.rechazarPeticion(r),this.peticiones=[]}};e.\u0275fac=function(i){return new(i||e)(X(Pu))},e.\u0275cmp=Je({type:e,selectors:[["app-peticiones"]],decls:5,vars:3,consts:[[4,"ngIf"],[1,"container","py-5"],["class","row justify-content-center mb-3",4,"ngFor","ngForOf"],["role","alert",1,"alert","alert-danger"],[1,"row","justify-content-center","mb-3"],[1,"col-md-12","col-xl-10"],[1,"card","shadow-0","border","rounded-3"],[1,"card-body"],[1,"row"],[1,"col-md-12","col-lg-3","col-xl-3","mb-4","mb-lg-0"],[1,"bg-image","hover-zoom","ripple","rounded","ripple-surface"],[1,"w-100",2,"width","100%",3,"src"],["href","#!"],[1,"hover-overlay"],[1,"mask",2,"background-color","rgba(253, 253, 253, 0.15)"],[1,"col-md-6","col-lg-6","col-xl-6","text-muted"],[1,"d-flex","flex-row"],[1,"text-danger","mb-1","me-2"],[1,"fa","fa-star"],[1,"col-md-6","col-lg-6","col-xl-6","text-muted","w-100"],[1,"mb-4","mb-md-0"],[1,"col-md-6","col-lg-3","col-xl-3","border-sm-start-none","border-start"],[1,"d-flex","flex-column","mt-4"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["type","button",1,"btn","btn-outline-danger","btn-sm","mt-2",3,"click"]],template:function(i,o){i&1&&(Ie(0,bre,1,0,"app-loading",0),k(1,"section"),Ie(2,Ire,3,0,"div",0),k(3,"div",1),Ie(4,Dre,31,7,"div",2),O()()),i&2&&(ee("ngIf",o.loading),Z(2),ee("ngIf",o.peticiones.length==0),Z(2),ee("ngForOf",o.peticiones))},dependencies:[Hn,cn,wr,f8]});let t=e;return t})();function Tre(t,e){if(t&1){let n=dt();k(0,"div",10)(1,"div",11),le(2,"img",12),k(3,"div",13)(4,"h5",14),z(5),O(),k(6,"p",15),z(7),O(),k(8,"a",16),we("click",function(){let o=et(n).$implicit,s=nt();return tt(s.deleteUser(o.user_id))}),z(9,"Bannear"),O()()()()}if(t&2){let n=e.$implicit;Z(2),ee("src",n.picture,jt),Z(3),Dt(n.name),Z(2),Dt(n.email)}}function Are(t,e){t&1&&(k(0,"div",17),z(1," No encontramos al usuario que busca !!!!! "),O())}var m8=(()=>{let e=class e{constructor(r){this.authService=r,this.allUsers=[],this.usersProfe=[],this.displayedUsers=[]}ngOnInit(){this.authService.getAllUsers().subscribe(r=>{this.allUsers=r,this.displayedUsers=this.allUsers,console.log(this.allUsers)})}filter(r){this.displayedUsers=this.allUsers.filter(i=>i.name.toLowerCase().includes(r.toLowerCase()))}deleteUser(r){this.authService.deleteUserById(r).subscribe(i=>{this.allUsers=this.allUsers.filter(o=>o.user_id!==r),this.displayedUsers=this.displayedUsers.filter(o=>o.user_id!==r)})}};e.\u0275fac=function(i){return new(i||e)(X(Ut))},e.\u0275cmp=Je({type:e,selectors:[["app-manage"]],decls:10,vars:2,consts:[[1,"row","g-0","d-flex","justify-content-center"],[1,"col-12","col-lg-5","col-xl-3","px-4"],[1,"d-flex","align-items-center"],[1,"flex-grow-1"],["type","text","placeholder","Search...",1,"form-control","my-3",3,"keyup"],["termino",""],[1,"container","mt-3"],["id","masonry-grid",1,"row","row-cols-2","row-cols-md-5","g-4"],["class","card-columns",4,"ngFor","ngForOf"],["class","alert alert-danger container mt-5","role","alert",4,"ngIf"],[1,"card-columns"],[1,"card","bg-secondary","pointer"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-outline-danger",3,"click"],["role","alert",1,"alert","alert-danger","container","mt-5"]],template:function(i,o){if(i&1){let s=dt();k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4,5),we("keyup",function(){et(s);let c=sn(5);return tt(o.filter(c.value))}),O()()()(),k(6,"div",6)(7,"div",7),Ie(8,Tre,10,3,"div",8),O()(),Ie(9,Are,2,0,"div",9),O()}i&2&&(Z(8),ee("ngForOf",o.displayedUsers),Z(),ee("ngIf",o.displayedUsers.length==0))},dependencies:[Hn,cn]});let t=e;return t})();var Sre=[{path:"home",component:aL},{path:"equipo",component:lL},{path:"about",component:uL},{path:"perfil",component:c8},{path:"profesor/:id",component:dL,canActivate:[e_]},{path:"chat/:id",component:u8,canActivate:[e_]},{path:"buscar/:termino",component:hL},{path:"resgisterProfes",component:h8},{path:"peticiones",component:p8},{path:"manejar",component:m8},{path:"conversaciones",component:d8,canActivate:[e_]},{path:"**",pathMatch:"full",redirectTo:"home"}],g8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({imports:[Yl.forChild(Sre),Yl]});let t=e;return t})();var y8={production:!1,firebase:{apiKey:"AIzaSyAtiSOrNOjwt6yo2N5aJYaSKncHaTPfI_U",authDomain:"test1-8b6e2.firebaseapp.com",databaseURL:"https://test1-8b6e2-default-rtdb.firebaseio.com",projectId:"test1-8b6e2",storageBucket:"test1-8b6e2.appspot.com",messagingSenderId:"261086468732",appId:"1:261086468732:web:72890e06b762d1d7d0c7f9",measurementId:"G-W3SCG6SWDL"}};var Rre=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ii={},oe,_T=_T||{},De=Rre||self;function p_(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function tp(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function Mre(t){return Object.prototype.hasOwnProperty.call(t,ZD)&&t[ZD]||(t[ZD]=++Pre)}var ZD="closure_uid_"+(1e9*Math.random()>>>0),Pre=0;function Nre(t,e,n){return t.call.apply(t.bind,arguments)}function kre(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Kn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Kn=Nre:Kn=kre,Kn.apply(null,arguments)}function t_(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Pn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function Zs(){this.s=this.s,this.o=this.o}var Fre=0;Zs.prototype.s=!1;Zs.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Fre!=0)&&Mre(this)};Zs.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var R8=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function wT(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function v8(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(p_(r)){let i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Qn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Qn.prototype.h=function(){this.defaultPrevented=!0};var Ore=function(){if(!De.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};De.addEventListener("test",n,e),De.removeEventListener("test",n,e)}catch{}return t}();function Gf(t){return/^[\s\xa0]*$/.test(t)}function m_(){var t=De.navigator;return t&&(t=t.userAgent)?t:""}function oo(t){return m_().indexOf(t)!=-1}function ET(t){return ET[" "](t),t}ET[" "]=function(){};function Lre(t,e){var n=Iie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var Vre=oo("Opera"),Ou=oo("Trident")||oo("MSIE"),M8=oo("Edge"),rT=M8||Ou,P8=oo("Gecko")&&!(m_().toLowerCase().indexOf("webkit")!=-1&&!oo("Edge"))&&!(oo("Trident")||oo("MSIE"))&&!oo("Edge"),Bre=m_().toLowerCase().indexOf("webkit")!=-1&&!oo("Edge");function N8(){var t=De.document;return t?t.documentMode:void 0}var iT;e:{if(n_="",r_=function(){var t=m_();if(P8)return/rv:([^\);]+)(\)|;)/.exec(t);if(M8)return/Edge\/([\d\.]+)/.exec(t);if(Ou)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(Bre)return/WebKit\/(\S+)/.exec(t);if(Vre)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),r_&&(n_=r_?r_[1]:""),Ou&&(i_=N8(),i_!=null&&i_>parseFloat(n_))){iT=String(i_);break e}iT=n_}var n_,r_,i_,oT;De.document&&Ou?(JD=N8(),oT=JD||parseInt(iT,10)||void 0):oT=void 0;var JD,jre=oT;function Kf(t,e){if(Qn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(P8){e:{try{ET(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:Ure[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Kf.$.h.call(this)}}Pn(Kf,Qn);var Ure={2:"touch",3:"pen",4:"mouse"};Kf.prototype.h=function(){Kf.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var np="closure_listenable_"+(1e6*Math.random()|0),$re=0;function qre(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++$re,this.fa=this.ia=!1}function g_(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function xT(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function Hre(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function k8(t){let e={};for(let n in t)e[n]=t[n];return e}var _8="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F8(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<_8.length;o++)n=_8[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function y_(t){this.src=t,this.g={},this.h=0}y_.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=aT(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new qre(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function sT(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=R8(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(g_(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function aT(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var CT="closure_lm_"+(1e6*Math.random()|0),eT={};function O8(t,e,n,r,i){if(r&&r.once)return V8(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)O8(t,e[o],n,r,i);return null}return n=DT(n),t&&t[np]?t.O(e,n,tp(r)?!!r.capture:!!r,i):L8(t,e,n,!1,r,i)}function L8(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=tp(i)?!!i.capture:!!i,a=IT(t);if(a||(t[CT]=a=new y_(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=zre(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ore||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(j8(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function zre(){function t(n){return e.call(t.src,t.listener,n)}let e=Wre;return t}function V8(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)V8(t,e[o],n,r,i);return null}return n=DT(n),t&&t[np]?t.P(e,n,tp(r)?!!r.capture:!!r,i):L8(t,e,n,!0,r,i)}function B8(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)B8(t,e[o],n,r,i);else r=tp(r)?!!r.capture:!!r,n=DT(n),t&&t[np]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=aT(o,n,r,i),-1<n&&(g_(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=IT(t))&&(e=t.g[e.toString()],t=-1,e&&(t=aT(e,n,r,i)),(n=-1<t?e[t]:null)&&bT(n))}function bT(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[np])sT(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(j8(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=IT(e))?(sT(n,t),n.h==0&&(n.src=null,e[CT]=null)):g_(t)}}}function j8(t){return t in eT?eT[t]:eT[t]="on"+t}function Wre(t,e){if(t.fa)t=!0;else{e=new Kf(e,this);var n=t.listener,r=t.la||t.src;t.ia&&bT(t),t=n.call(r,e)}return t}function IT(t){return t=t[CT],t instanceof y_?t:null}var tT="__closure_events_fn_"+(1e9*Math.random()>>>0);function DT(t){return typeof t=="function"?t:(t[tT]||(t[tT]=function(e){return t.handleEvent(e)}),t[tT])}function Mn(){Zs.call(this),this.i=new y_(this),this.S=this,this.J=null}Pn(Mn,Zs);Mn.prototype[np]=!0;Mn.prototype.removeEventListener=function(t,e,n,r){B8(this,t,e,n,r)};function Un(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Qn(e,t);else if(e instanceof Qn)e.target=e.target||t;else{var i=e;e=new Qn(r,t),F8(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=o_(s,r,!0,e)&&i}if(s=e.g=t,i=o_(s,r,!0,e)&&i,i=o_(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=o_(s,r,!1,e)&&i}Mn.prototype.N=function(){if(Mn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)g_(n[r]);delete t.g[e],t.h--}}this.J=null};Mn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Mn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function o_(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,c=s.la||s.src;s.ia&&sT(t.i,s),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var TT=De.JSON.stringify,cT=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function Gre(){var t=AT;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var lT=class{constructor(){this.h=this.g=null}add(e,n){let r=U8.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},U8=new cT(()=>new uT,t=>t.reset()),uT=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function Kre(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Qre(t){De.setTimeout(()=>{throw t},0)}var Qf,Yf=!1,AT=new lT,$8=()=>{let t=De.Promise.resolve(void 0);Qf=()=>{t.then(Yre)}},Yre=()=>{for(var t;t=Gre();){try{t.h.call(t.g)}catch(n){Qre(n)}var e=U8;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Yf=!1};function v_(t,e){Mn.call(this),this.h=t||1,this.g=e||De,this.j=Kn(this.qb,this),this.l=Date.now()}Pn(v_,Mn);oe=v_.prototype;oe.ga=!1;oe.T=null;oe.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Un(this,"tick"),this.ga&&(ST(this),this.start()))}};oe.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ST(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}oe.N=function(){v_.$.N.call(this),ST(this),delete this.g};function RT(t,e,n){if(typeof t=="function")n&&(t=Kn(t,n));else if(t&&typeof t.handleEvent=="function")t=Kn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:De.setTimeout(t,e||0)}function q8(t){t.g=RT(()=>{t.g=null,t.i&&(t.i=!1,q8(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var dT=class extends Zs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:q8(this)}N(){super.N(),this.g&&(De.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Xf(t){Zs.call(this),this.h=t,this.g={}}Pn(Xf,Zs);var w8=[];function H8(t,e,n,r){Array.isArray(n)||(n&&(w8[0]=n.toString()),n=w8);for(var i=0;i<n.length;i++){var o=O8(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function z8(t){xT(t.g,function(e,n){this.g.hasOwnProperty(n)&&bT(e)},t),t.g={}}Xf.prototype.N=function(){Xf.$.N.call(this),z8(this)};Xf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function __(){this.g=!0}__.prototype.Ea=function(){this.g=!1};function Xre(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+l+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function Zre(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function ku(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+eie(t,n)+(r?" "+r:"")})}function Jre(t,e){t.info(function(){return"TIMEOUT: "+e})}__.prototype.info=function(){};function eie(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return TT(n)}catch{return e}}var Dc={},E8=null;function w_(){return E8=E8||new Mn}Dc.Ta="serverreachability";function W8(t){Qn.call(this,Dc.Ta,t)}Pn(W8,Qn);function Zf(t){let e=w_();Un(e,new W8(e))}Dc.STAT_EVENT="statevent";function G8(t,e){Qn.call(this,Dc.STAT_EVENT,t),this.stat=e}Pn(G8,Qn);function lr(t){let e=w_();Un(e,new G8(e,t))}Dc.Ua="timingevent";function K8(t,e){Qn.call(this,Dc.Ua,t),this.size=e}Pn(K8,Qn);function rp(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return De.setTimeout(function(){t()},e)}var E_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Q8={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function MT(){}MT.prototype.h=null;function x8(t){return t.h||(t.h=t.i())}function Y8(){}var ip={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function PT(){Qn.call(this,"d")}Pn(PT,Qn);function NT(){Qn.call(this,"c")}Pn(NT,Qn);var hT;function x_(){}Pn(x_,MT);x_.prototype.g=function(){return new XMLHttpRequest};x_.prototype.i=function(){return{}};hT=new x_;function op(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Xf(this),this.P=tie,t=rT?125:void 0,this.V=new v_(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new X8}function X8(){this.i=null,this.g="",this.h=!1}var tie=45e3,Z8={},fT={};oe=op.prototype;oe.setTimeout=function(t){this.P=t};function pT(t,e,n){t.L=1,t.A=b_(Zo(e)),t.u=n,t.S=!0,J8(t,null)}function J8(t,e){t.G=Date.now(),sp(t),t.B=Zo(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),a6(n.i,"t",r),t.o=0,n=t.l.J,t.h=new X8,t.g=A6(t.l,n?e:null,!t.u),0<t.O&&(t.M=new dT(Kn(t.Pa,t,t.g),t.O)),H8(t.U,t.g,"readystatechange",t.nb),e=t.I?k8(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Zf(),Xre(t.j,t.v,t.B,t.m,t.W,t.u)}oe.nb=function(t){t=t.target;let e=this.M;e&&so(t)==3?e.l():this.Pa(t)};oe.Pa=function(t){try{if(t==this.g)e:{let u=so(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||rT||this.g&&(this.h.h||this.g.ja()||D8(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Zf(3):Zf(2)),C_(this);var n=this.g.da();this.ca=n;t:if(e6(this)){var r=D8(this.g);t="";var i=r.length,o=so(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cc(this),Wf(this);var s="";break t}this.h.i=new De.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,Zre(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Gf(a)){var l=a;break t}}l=null}if(n=l)ku(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mT(this,n);else{this.i=!1,this.s=3,lr(12),Cc(this),Wf(this);break e}}this.S?(t6(this,u,s),rT&&this.i&&u==3&&(H8(this.U,this.V,"tick",this.mb),this.V.start())):(ku(this.j,this.m,s,null),mT(this,s)),u==4&&Cc(this),this.i&&!this.J&&(u==4?b6(this.l,this):(this.i=!1,sp(this)))}else xie(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,lr(12)):(this.s=0,lr(13)),Cc(this),Wf(this)}}}catch{}finally{}};function e6(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function t6(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=nie(t,n),i==fT){e==4&&(t.s=4,lr(14),r=!1),ku(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Z8){t.s=4,lr(15),ku(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ku(t.j,t.m,i,null),mT(t,i);e6(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,lr(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),BT(e),e.M=!0,lr(11))):(ku(t.j,t.m,n,"[Invalid Chunked Response]"),Cc(t),Wf(t))}oe.mb=function(){if(this.g){var t=so(this.g),e=this.g.ja();this.o<e.length&&(C_(this),t6(this,t,e),this.i&&t!=4&&sp(this))}};function nie(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?fT:(n=Number(e.substring(n,r)),isNaN(n)?Z8:(r+=1,r+n>e.length?fT:(e=e.slice(r,r+n),t.o=r+n,e)))}oe.cancel=function(){this.J=!0,Cc(this)};function sp(t){t.Y=Date.now()+t.P,n6(t,t.P)}function n6(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=rp(Kn(t.lb,t),e)}function C_(t){t.C&&(De.clearTimeout(t.C),t.C=null)}oe.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(Jre(this.j,this.B),this.L!=2&&(Zf(),lr(17)),Cc(this),this.s=2,Wf(this)):n6(this,this.Y-t)};function Wf(t){t.l.H==0||t.J||b6(t.l,t)}function Cc(t){C_(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,ST(t.V),z8(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function mT(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||gT(n.i,t))){if(!t.K&&gT(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)u_(n),T_(n);else break e;VT(n),lr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=rp(Kn(n.ib,n),6e3));if(1>=u6(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else bc(n,11)}else if((t.K||n.g==t)&&u_(n),!Gf(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];let u=l[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=r.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(kT(o,o.h),o.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,At(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=T6(r,r.J?r.pa:null,r.Y),s.K){d6(r.i,s);var a=s,c=r.L;c&&a.setTimeout(c),a.C&&(C_(a),sp(a)),r.g=s}else x6(r);0<n.j.length&&A_(n)}else l[0]!="stop"&&l[0]!="close"||bc(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?bc(n,7):LT(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Zf(4)}catch{}}function rie(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(p_(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function iie(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(p_(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function r6(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(p_(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=iie(t),r=rie(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var i6=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oie(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ic(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ic){this.h=t.h,c_(this,t.j),this.s=t.s,this.g=t.g,l_(this,t.m),this.l=t.l;var e=t.i,n=new Jf;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),C8(this,n),this.o=t.o}else t&&(e=String(t).match(i6))?(this.h=!1,c_(this,e[1]||"",!0),this.s=Hf(e[2]||""),this.g=Hf(e[3]||"",!0),l_(this,e[4]),this.l=Hf(e[5]||"",!0),C8(this,e[6]||"",!0),this.o=Hf(e[7]||"")):(this.h=!1,this.i=new Jf(null,this.h))}Ic.prototype.toString=function(){var t=[],e=this.j;e&&t.push(zf(e,b8,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(zf(e,b8,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(zf(n,n.charAt(0)=="/"?cie:aie,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",zf(n,uie)),t.join("")};function Zo(t){return new Ic(t)}function c_(t,e,n){t.j=n?Hf(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function l_(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function C8(t,e,n){e instanceof Jf?(t.i=e,die(t.i,t.h)):(n||(e=zf(e,lie)),t.i=new Jf(e,t.h))}function At(t,e,n){t.i.set(e,n)}function b_(t){return At(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Hf(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function zf(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,sie),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sie(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var b8=/[#\/\?@]/g,aie=/[#\?:]/g,cie=/[#\?]/g,lie=/[#\?@]/g,uie=/#/g;function Jf(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Js(t){t.g||(t.g=new Map,t.h=0,t.i&&oie(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}oe=Jf.prototype;oe.add=function(t,e){Js(this),this.i=null,t=Lu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function o6(t,e){Js(t),e=Lu(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function s6(t,e){return Js(t),e=Lu(t,e),t.g.has(e)}oe.forEach=function(t,e){Js(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};oe.ta=function(){Js(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};oe.Z=function(t){Js(this);let e=[];if(typeof t=="string")s6(this,t)&&(e=e.concat(this.g.get(Lu(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};oe.set=function(t,e){return Js(this),this.i=null,t=Lu(this,t),s6(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};oe.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function a6(t,e,n){o6(t,e),0<n.length&&(t.i=null,t.g.set(Lu(t,e),wT(n)),t.h+=n.length)}oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Lu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function die(t,e){e&&!t.j&&(Js(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(o6(this,r),a6(this,i,n))},t)),t.j=e}var hie=class{constructor(t,e){this.g=t,this.map=e}};function c6(t){this.l=t||fie,De.PerformanceNavigationTiming?(t=De.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(De.g&&De.g.Ka&&De.g.Ka()&&De.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fie=10;function l6(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function u6(t){return t.h?1:t.g?t.g.size:0}function gT(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function kT(t,e){t.g?t.g.add(e):t.h=e}function d6(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}c6.prototype.cancel=function(){if(this.i=h6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function h6(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return wT(t.i)}var pie=class{stringify(t){return De.JSON.stringify(t,void 0)}parse(t){return De.JSON.parse(t,void 0)}};function mie(){this.g=new pie}function gie(t,e,n){let r=n||"";try{r6(t,function(i,o){let s=i;tp(i)&&(s=TT(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function yie(t,e){let n=new __;if(De.Image){let r=new Image;r.onload=t_(s_,n,r,"TestLoadImage: loaded",!0,e),r.onerror=t_(s_,n,r,"TestLoadImage: error",!1,e),r.onabort=t_(s_,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=t_(s_,n,r,"TestLoadImage: timeout",!1,e),De.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function s_(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ap(t){this.l=t.ec||null,this.j=t.ob||!1}Pn(ap,MT);ap.prototype.g=function(){return new I_(this.l,this.j)};ap.prototype.i=function(t){return function(){return t}}({});function I_(t,e){Mn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=FT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pn(I_,Mn);var FT=0;oe=I_.prototype;oe.open=function(t,e){if(this.readyState!=FT)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,ep(this)};oe.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||De).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cp(this)),this.readyState=FT};oe.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,ep(this)),this.g&&(this.readyState=3,ep(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof De.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;f6(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function f6(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}oe.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?cp(this):ep(this),this.readyState==3&&f6(this)}};oe.Za=function(t){this.g&&(this.response=this.responseText=t,cp(this))};oe.Ya=function(t){this.g&&(this.response=t,cp(this))};oe.ka=function(){this.g&&cp(this)};function cp(t){t.readyState=4,t.l=null,t.j=null,t.A=null,ep(t)}oe.setRequestHeader=function(t,e){this.v.append(t,e)};oe.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};oe.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function ep(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(I_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var vie=De.JSON.parse;function $t(t){Mn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=p6,this.L=this.M=!1}Pn($t,Mn);var p6="",_ie=/^https?$/i,wie=["POST","PUT"];oe=$t.prototype;oe.Oa=function(t){this.M=t};oe.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():hT.g(),this.C=this.u?x8(this.u):x8(hT),this.g.onreadystatechange=Kn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){I8(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=De.FormData&&t instanceof De.FormData,!(0<=R8(wie,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{y6(this),0<this.B&&((this.L=Eie(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Kn(this.ua,this)):this.A=RT(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){I8(this,o)}};function Eie(t){return Ou&&typeof t.timeout=="number"&&t.ontimeout!==void 0}oe.ua=function(){typeof _T<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Un(this,"timeout"),this.abort(8))};function I8(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,m6(t),D_(t)}function m6(t){t.F||(t.F=!0,Un(t,"complete"),Un(t,"error"))}oe.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Un(this,"complete"),Un(this,"abort"),D_(this))};oe.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),D_(this,!0)),$t.$.N.call(this)};oe.La=function(){this.s||(this.G||this.v||this.l?g6(this):this.kb())};oe.kb=function(){g6(this)};function g6(t){if(t.h&&typeof _T<"u"&&(!t.C[1]||so(t)!=4||t.da()!=2)){if(t.v&&so(t)==4)RT(t.La,0,t);else if(Un(t,"readystatechange"),so(t)==4){t.h=!1;try{let s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(i6)[1]||null;!i&&De.self&&De.self.location&&(i=De.self.location.protocol.slice(0,-1)),r=!_ie.test(i?i.toLowerCase():"")}n=r}if(n)Un(t,"complete"),Un(t,"success");else{t.m=6;try{var o=2<so(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",m6(t)}}finally{D_(t)}}}}function D_(t,e){if(t.g){y6(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Un(t,"ready");try{n.onreadystatechange=r}catch{}}}function y6(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(De.clearTimeout(t.A),t.A=null)}oe.isActive=function(){return!!this.g};function so(t){return t.g?t.g.readyState:0}oe.da=function(){try{return 2<so(this)?this.g.status:-1}catch{return-1}};oe.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};oe.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),vie(e)}};function D8(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case p6:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function xie(t){let e={};t=(t.g&&2<=so(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Gf(t[r]))continue;var n=Kre(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let o=e[i]||[];e[i]=o,o.push(n)}Hre(e,function(r){return r.join(", ")})}oe.Ia=function(){return this.m};oe.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function v6(t){let e="";return xT(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function OT(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=v6(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):At(t,e,n))}function $f(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function _6(t){this.Ga=0,this.j=[],this.l=new __,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$f("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$f("baseRetryDelayMs",5e3,t),this.hb=$f("retryDelaySeedMs",1e4,t),this.eb=$f("forwardChannelMaxRetries",2,t),this.xa=$f("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new c6(t&&t.concurrentRequestLimit),this.Ja=new mie,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}oe=_6.prototype;oe.ra=8;oe.H=1;function LT(t){if(w6(t),t.H==3){var e=t.W++,n=Zo(t.I);if(At(n,"SID",t.K),At(n,"RID",e),At(n,"TYPE","terminate"),lp(t,n),e=new op(t,t.l,e),e.L=2,e.A=b_(Zo(n)),n=!1,De.navigator&&De.navigator.sendBeacon)try{n=De.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&De.Image&&(new Image().src=e.A,n=!0),n||(e.g=A6(e.l,null),e.g.ha(e.A)),e.G=Date.now(),sp(e)}D6(t)}function T_(t){t.g&&(BT(t),t.g.cancel(),t.g=null)}function w6(t){T_(t),t.u&&(De.clearTimeout(t.u),t.u=null),u_(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&De.clearTimeout(t.m),t.m=null)}function A_(t){if(!l6(t.i)&&!t.m){t.m=!0;var e=t.Na;Qf||$8(),Yf||(Qf(),Yf=!0),AT.add(e,t),t.C=0}}function Cie(t,e){return u6(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=rp(Kn(t.Na,t,e),I6(t,t.C)),t.C++,!0)}oe.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new op(this,this.l,t),o=this.s;if(this.U&&(o?(o=k8(o),F8(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=E6(this,i,e),n=Zo(this.I),At(n,"RID",t),At(n,"CVER",22),this.F&&At(n,"X-HTTP-Session-Id",this.F),lp(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(v6(o)))+"&"+e:this.o&&OT(n,this.o,o)),kT(this.i,i),this.bb&&At(n,"TYPE","init"),this.P?(At(n,"$req",e),At(n,"SID","null"),i.aa=!0,pT(i,n,null)):pT(i,n,e),this.H=2}}else this.H==3&&(t?T8(this,t):this.j.length==0||l6(this.i)||T8(this))};function T8(t,e){var n;e?n=e.m:n=t.W++;let r=Zo(t.I);At(r,"SID",t.K),At(r,"RID",n),At(r,"AID",t.V),lp(t,r),t.o&&t.s&&OT(r,t.o,t.s),n=new op(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=E6(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),kT(t.i,n),pT(n,r,e)}function lp(t,e){t.na&&xT(t.na,function(n,r){At(e,r,n)}),t.h&&r6({},function(n,r){At(e,r,n)})}function E6(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Kn(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){let s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let c=0;c<n;c++){let l=i[c].g,u=i[c].map;if(l-=o,0>l)o=Math.max(0,i[c].g-100),a=!1;else try{gie(u,s,"req"+l+"_")}catch{r&&r(u)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function x6(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Qf||$8(),Yf||(Qf(),Yf=!0),AT.add(e,t),t.A=0}}function VT(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=rp(Kn(t.Ma,t),I6(t,t.A)),t.A++,!0)}oe.Ma=function(){if(this.u=null,C6(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=rp(Kn(this.jb,this),t)}};oe.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,lr(10),T_(this),C6(this))};function BT(t){t.B!=null&&(De.clearTimeout(t.B),t.B=null)}function C6(t){t.g=new op(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Zo(t.wa);At(e,"RID","rpc"),At(e,"SID",t.K),At(e,"AID",t.V),At(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&At(e,"TO",t.qa),At(e,"TYPE","xmlhttp"),lp(t,e),t.o&&t.s&&OT(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=b_(Zo(e)),n.u=null,n.S=!0,J8(n,t)}oe.ib=function(){this.v!=null&&(this.v=null,T_(this),VT(this),lr(19))};function u_(t){t.v!=null&&(De.clearTimeout(t.v),t.v=null)}function b6(t,e){var n=null;if(t.g==e){u_(t),BT(t),t.g=null;var r=2}else if(gT(t.i,e))n=e.F,d6(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=w_(),Un(r,new K8(r,n)),A_(t)}else x6(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&Cie(t,e)||r==2&&VT(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:bc(t,5);break;case 4:bc(t,10);break;case 3:bc(t,6);break;default:bc(t,2)}}}function I6(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function bc(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Kn(t.pb,t);n||(n=new Ic("//www.google.com/images/cleardot.gif"),De.location&&De.location.protocol=="http"||c_(n,"https"),b_(n)),yie(n.toString(),r)}else lr(2);t.H=0,t.h&&t.h.za(e),D6(t),w6(t)}oe.pb=function(t){t?(this.l.info("Successfully pinged google.com"),lr(2)):(this.l.info("Failed to ping google.com"),lr(1))};function D6(t){if(t.H=0,t.ma=[],t.h){let e=h6(t.i);(e.length!=0||t.j.length!=0)&&(v8(t.ma,e),v8(t.ma,t.j),t.i.i.length=0,wT(t.j),t.j.length=0),t.h.ya()}}function T6(t,e,n){var r=n instanceof Ic?Zo(n):new Ic(n);if(r.g!="")e&&(r.g=e+"."+r.g),l_(r,r.m);else{var i=De.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Ic(null);r&&c_(o,r),e&&(o.g=e),i&&l_(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&At(r,n,e),At(r,"VER",t.ra),lp(t,r),r}function A6(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new $t(new ap({ob:n})):new $t(t.va),e.Oa(t.J),e}oe.isActive=function(){return!!this.h&&this.h.isActive(this)};function S6(){}oe=S6.prototype;oe.Ba=function(){};oe.Aa=function(){};oe.za=function(){};oe.ya=function(){};oe.isActive=function(){return!0};oe.Va=function(){};function d_(){if(Ou&&!(10<=Number(jre)))throw Error("Environmental error: no available transport.")}d_.prototype.g=function(t,e){return new Vr(t,e)};function Vr(t,e){Mn.call(this),this.g=new _6(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Gf(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Gf(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Vu(this)}Pn(Vr,Mn);Vr.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;lr(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=T6(t,null,t.Y),A_(t)};Vr.prototype.close=function(){LT(this.g)};Vr.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=TT(t),t=n);e.j.push(new hie(e.fb++,t)),e.H==3&&A_(e)};Vr.prototype.N=function(){this.g.h=null,delete this.j,LT(this.g),delete this.g,Vr.$.N.call(this)};function R6(t){PT.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Pn(R6,PT);function M6(){NT.call(this),this.status=1}Pn(M6,NT);function Vu(t){this.g=t}Pn(Vu,S6);Vu.prototype.Ba=function(){Un(this.g,"a")};Vu.prototype.Aa=function(t){Un(this.g,new R6(t))};Vu.prototype.za=function(t){Un(this.g,new M6)};Vu.prototype.ya=function(){Un(this.g,"b")};function bie(){this.blockSize=-1}function bi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Pn(bi,bie);bi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function nT(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}bi.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)nT(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){nT(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){nT(this,r),i=0;break}}this.h=i,this.i+=e};bi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function mt(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var Iie={};function jT(t){return-128<=t&&128>t?Lre(t,function(e){return new mt([e|0],0>e?-1:0)}):new mt([t|0],0>t?-1:0)}function ao(t){if(isNaN(t)||!isFinite(t))return Fu;if(0>t)return jn(ao(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=yT;return new mt(e,0)}function P6(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return jn(P6(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ao(Math.pow(e,8)),r=Fu,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=ao(Math.pow(e,o)),r=r.R(o).add(ao(s))):(r=r.R(n),r=r.add(ao(s)))}return r}var yT=4294967296,Fu=jT(0),vT=jT(1),A8=jT(16777216);oe=mt.prototype;oe.ea=function(){if(ii(this))return-jn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:yT+r)*e,e*=yT}return t};oe.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Xo(this))return"0";if(ii(this))return"-"+jn(this).toString(t);for(var e=ao(Math.pow(t,6)),n=this,r="";;){var i=f_(n,e).g;n=h_(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Xo(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};oe.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Xo(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function ii(t){return t.h==-1}oe.X=function(t){return t=h_(this,t),ii(t)?-1:Xo(t)?0:1};function jn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new mt(n,~t.h).add(vT)}oe.abs=function(){return ii(this)?jn(this):this};oe.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new mt(n,n[n.length-1]&-2147483648?-1:0)};function h_(t,e){return t.add(jn(e))}oe.R=function(t){if(Xo(this)||Xo(t))return Fu;if(ii(this))return ii(t)?jn(this).R(jn(t)):jn(jn(this).R(t));if(ii(t))return jn(this.R(jn(t)));if(0>this.X(A8)&&0>t.X(A8))return ao(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=s*c,a_(n,2*r+2*i),n[2*r+2*i+1]+=o*c,a_(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,a_(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,a_(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new mt(n,0)};function a_(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function qf(t,e){this.g=t,this.h=e}function f_(t,e){if(Xo(e))throw Error("division by zero");if(Xo(t))return new qf(Fu,Fu);if(ii(t))return e=f_(jn(t),e),new qf(jn(e.g),jn(e.h));if(ii(e))return e=f_(t,jn(e)),new qf(jn(e.g),e.h);if(30<t.g.length){if(ii(t)||ii(e))throw Error("slowDivide_ only works with positive integers.");for(var n=vT,r=e;0>=r.X(t);)n=S8(n),r=S8(r);var i=Nu(n,1),o=Nu(r,1);for(r=Nu(r,2),n=Nu(n,2);!Xo(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Nu(r,1),n=Nu(n,1)}return e=h_(t,i.R(e)),new qf(i,e)}for(i=Fu;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=ao(n),s=o.R(e);ii(s)||0<s.X(t);)n-=r,o=ao(n),s=o.R(e);Xo(o)&&(o=vT),i=i.add(o),t=h_(t,s)}return new qf(i,t)}oe.gb=function(t){return f_(this,t).h};oe.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new mt(n,this.h&t.h)};oe.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new mt(n,this.h|t.h)};oe.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new mt(n,this.h^t.h)};function S8(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new mt(n,t.h)}function Nu(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new mt(i,t.h)}d_.prototype.createWebChannel=d_.prototype.g;Vr.prototype.send=Vr.prototype.u;Vr.prototype.open=Vr.prototype.m;Vr.prototype.close=Vr.prototype.close;E_.NO_ERROR=0;E_.TIMEOUT=8;E_.HTTP_ERROR=6;Q8.COMPLETE="complete";Y8.EventType=ip;ip.OPEN="a";ip.CLOSE="b";ip.ERROR="c";ip.MESSAGE="d";Mn.prototype.listen=Mn.prototype.O;$t.prototype.listenOnce=$t.prototype.P;$t.prototype.getLastError=$t.prototype.Sa;$t.prototype.getLastErrorCode=$t.prototype.Ia;$t.prototype.getStatus=$t.prototype.da;$t.prototype.getResponseJson=$t.prototype.Wa;$t.prototype.getResponseText=$t.prototype.ja;$t.prototype.send=$t.prototype.ha;$t.prototype.setWithCredentials=$t.prototype.Oa;bi.prototype.digest=bi.prototype.l;bi.prototype.reset=bi.prototype.reset;bi.prototype.update=bi.prototype.j;mt.prototype.add=mt.prototype.add;mt.prototype.multiply=mt.prototype.R;mt.prototype.modulo=mt.prototype.gb;mt.prototype.compare=mt.prototype.X;mt.prototype.toNumber=mt.prototype.ea;mt.prototype.toString=mt.prototype.toString;mt.prototype.getBits=mt.prototype.D;mt.fromNumber=ao;mt.fromString=P6;var N6=Ii.createWebChannelTransport=function(){return new d_},k6=Ii.getStatEventTarget=function(){return w_()},S_=Ii.ErrorCode=E_,F6=Ii.EventType=Q8,O6=Ii.Event=Dc,UT=Ii.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tye=Ii.FetchXmlHttpFactory=ap,up=Ii.WebChannel=Y8,L6=Ii.XhrIo=$t,V6=Ii.Md5=bi,Tc=Ii.Integer=mt;var B6="@firebase/firestore";var hn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");var pd="10.8.1";var sa=new hs("@firebase/firestore");function qu(){return sa.logLevel}function V5(t){sa.setLogLevel(t)}function G(t,...e){if(sa.logLevel<=Hr.DEBUG){let n=e.map(qS);sa.debug(`Firestore (${pd}): ${t}`,...n)}}function Jt(t,...e){if(sa.logLevel<=Hr.ERROR){let n=e.map(qS);sa.error(`Firestore (${pd}): ${t}`,...n)}}function si(t,...e){if(sa.logLevel<=Hr.WARN){let n=e.map(qS);sa.warn(`Firestore (${pd}): ${t}`,...n)}}function qS(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ue(t="Unexpected state"){let e=`FIRESTORE (${pd}) INTERNAL ASSERTION FAILED: `+t;throw Jt(e),new Error(e)}function me(t,e){t||ue()}function B5(t,e){t||ue()}function se(t,e){return t}var B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},W=class extends iM{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var fn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var j_=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},WT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(hn.UNAUTHENTICATED))}shutdown(){}},GT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},KT=class{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),o=new fn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new fn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>j(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new fn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new j_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new hn(e)}},QT=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},YT=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new QT(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},XT=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ZT=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=o=>{o.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,G("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new XT(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Die(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var U_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Die(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}};function Re(t,e){return t<e?-1:t>e?1:0}function Zu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function j5(t){return t+"\0"}var Ot=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new W(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ge=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ot(0,0))}static max(){return new t(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $_=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Qe=class t extends $_{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new W(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Tie=/^[_a-zA-Z][_a-zA-Z0-9]*$/,en=class t extends $_{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Tie.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new W(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new W(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new W(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ie=class t{constructor(e){this.path=e}static fromPath(e){return new t(Qe.fromString(e))}static fromName(e){return new t(Qe.fromString(e).popFirst(5))}static empty(){return new t(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Qe(e.slice()))}};var Ju=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};function JT(t){return t.fields.find(e=>e.kind===2)}function Sc(t){return t.fields.filter(e=>e.kind!==2)}Ju.UNKNOWN_ID=-1;var Qu=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var xp=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,ai.min())}};function U5(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new ai(i,ie.empty(),e)}function $5(t){return new ai(t.readTime,t.key,-1)}var ai=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ge.min(),ie.empty(),-1)}static max(){return new t(ge.max(),ie.empty(),-1)}};function HS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}var q5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",q_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ga(t){return j(this,null,function*(){if(t.code!==B.FAILED_PRECONDITION||t.message!==q5)throw t;G("LocalStore","Unexpectedly lost primary lease")})}var V=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},c=>r(c))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;n(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};var H_=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new fn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Fc(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=zS(r.target.error);this.V.reject(new Fc(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Fc(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(G("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new tA(n)}},ts=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(Dd())===12.2&&Jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return G("SimpleDb","Removing database:",e),Rc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!rm())return!1;if(t.C())return!0;let e=Dd(),n=t.S(e),r=0<n&&n<10,i=t.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return j(this,null,function*(){return this.db||(G("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;n(s)},i.onblocked=()=>{r(new Fc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new W(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new W(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new Fc(e,s))},i.onupgradeneeded=o=>{G("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{G("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return j(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.O(e);let a=H_.open(this.db,e,o?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),V.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&s<3;if(G("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},eA=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Rc(this.k.delete())}},Fc=class extends W{constructor(e,n){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ya(t){return t.name==="IndexedDbTransactionError"}var tA=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(G("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(G("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Rc(r)}add(e){return G("SimpleDb","ADD",this.store.name,e,e),Rc(this.store.add(e))}get(e){return Rc(this.store.get(e)).next(n=>(n===void 0&&(n=null),G("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return G("SimpleDb","DELETE",this.store.name,e),Rc(this.store.delete(e))}count(){return G("SimpleDb","COUNT",this.store.name),Rc(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new V((s,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{s(c.target.result)}})}{let o=this.cursor(r),s=[];return this.G(o,(a,c)=>{s.push(c)}).next(()=>s)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new V((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){G("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new V((r,i)=>{n.onerror=o=>{let s=zS(o.target.error);i(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){let r=[];return new V((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let c=new eA(a),l=n(a.primaryKey,a.value,c);if(l instanceof V){let u=l.catch(d=>(c.done(),V.reject(d)));r.push(u)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>V.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Rc(t){return new V((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=zS(r.target.error);n(i)}})}var j6=!1;function zS(t){let e=ts.S(Dd());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new W("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return j6||(j6=!0,setTimeout(()=>{throw r},0)),r}}return t}var nA=class{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){G("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>j(this,null,function*(){this.task=null;try{G("IndexBackfiller",`Documents written: ${yield this.X.te()}`)}catch(n){ya(n)?G("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ga(n)}yield this.ee(6e4)}))}},rA=class{constructor(e,n){this.localStore=e,this.persistence=n}te(e=50){return j(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))})}ne(e,n){let r=new Set,i=n,o=!0;return V.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return G("IndexBackfiller",`Processing collection: ${s}`),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(G("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{let s=$5(o);HS(s,r)>0&&(r=s)}),new ai(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}};var Br=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function zp(t){return t==null}function Cp(t){return t===0&&1/t==-1/0}function H5(t){return typeof t=="number"&&Number.isInteger(t)&&!Cp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function ur(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=U6(e)),e=Aie(t.get(n),e);return U6(e)}function Aie(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function U6(t){return t+""}function co(t){let e=t.length;if(me(e>=2),e===2)return me(t.charAt(0)===""&&t.charAt(1)===""),Qe.emptyPath();let n=e-2,r=[],i="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&ue(),t.charAt(s+1)){case"":let a=t.substring(o,s),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ue()}o=s+2}return new Qe(r)}var $6=["userId","batchId"];function k_(t,e){return[t,ur(e)]}function z5(t,e,n){return[t,ur(e),n]}var Sie={},Rie=["prefixPath","collectionGroup","readTime","documentId"],Mie=["prefixPath","collectionGroup","documentId"],Pie=["collectionGroup","readTime","prefixPath","documentId"],Nie=["canonicalId","targetId"],kie=["targetId","path"],Fie=["path","targetId"],Oie=["collectionId","parent"],Lie=["indexId","uid"],Vie=["uid","sequenceNumber"],Bie=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],jie=["indexId","uid","orderedDocumentKey"],Uie=["userId","collectionPath","documentId"],$ie=["userId","collectionPath","largestBatchId"],qie=["userId","collectionGroup","largestBatchId"],W5=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Hie=[...W5,"documentOverlays"],G5=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],K5=G5,zie=[...K5,"indexConfiguration","indexState","indexEntries"];var bp=class extends q_{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}};function kn(t,e){let n=se(t);return ts.M(n.ae,e)}function q6(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gc(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Q5(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var St=class t{constructor(e,n){this.comparator=e,this.root=n||uo.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,uo.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,uo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ku(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ku(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ku(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ku(this.root,e,this.comparator,!0)}},Ku=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},uo=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};uo.EMPTY=null,uo.RED=!0,uo.BLACK=!1;uo.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,i,o){return this}insert(e,n,r){return new uo(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Et=class t{constructor(e){this.comparator=e,this.data=new St(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new z_(this.data.getIterator())}getIteratorFrom(e){return new z_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},z_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Bu(t){return t.hasNext()?t.getNext():void 0}var jr=class t{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new t([])}unionWith(e){let n=new Et(en.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zu(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var W_=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Y5(){return typeof atob<"u"}var Nn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new W_("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nn.EMPTY_BYTE_STRING=new Nn("");var Wie=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function aa(t){if(me(!!t),typeof t=="string"){let e=0,n=Wie.exec(t);if(me(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ca(t){return typeof t=="string"?Nn.fromBase64String(t):Nn.fromUint8Array(t)}function Ow(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function WS(t){let e=t.mapValue.fields.__previous_value__;return Ow(e)?WS(e):e}function Ip(t){let e=aa(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}var iA=class{constructor(e,n,r,i,o,s,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},la=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ia={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},F_={nullValue:"NULL_VALUE"};function Oc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ow(t)?4:X5(t)?9007199254740991:10:ue()}function po(t,e){if(t===e)return!0;let n=Oc(t);if(n!==Oc(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ip(t).isEqual(Ip(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=aa(i.timestampValue),a=aa(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return ca(i.bytesValue).isEqual(ca(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return qt(i.geoPointValue.latitude)===qt(o.geoPointValue.latitude)&&qt(i.geoPointValue.longitude)===qt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return qt(i.integerValue)===qt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=qt(i.doubleValue),a=qt(o.doubleValue);return s===a?Cp(s)===Cp(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Zu(t.arrayValue.values||[],e.arrayValue.values||[],po);case 10:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(q6(s)!==q6(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!po(s[c],a[c])))return!1;return!0}(t,e);default:return ue()}}function Dp(t,e){return(t.values||[]).find(n=>po(n,e))!==void 0}function ua(t,e){if(t===e)return 0;let n=Oc(t),r=Oc(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(o,s){let a=qt(o.integerValue||o.doubleValue),c=qt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return H6(t.timestampValue,e.timestampValue);case 4:return H6(Ip(t),Ip(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(o,s){let a=ca(o),c=ca(s);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=Re(a[l],c[l]);if(u!==0)return u}return Re(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Re(qt(o.latitude),qt(s.latitude));return a!==0?a:Re(qt(o.longitude),qt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let a=o.values||[],c=s.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=ua(a[l],c[l]);if(u)return u}return Re(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===ia.mapValue&&s===ia.mapValue)return 0;if(o===ia.mapValue)return 1;if(s===ia.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=Re(c[d],u[d]);if(h!==0)return h;let f=ua(a[c[d]],l[u[d]]);if(f!==0)return f}return Re(c.length,u.length)}(t.mapValue,e.mapValue);default:throw ue()}}function H6(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);let n=aa(t),r=aa(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function ed(t){return oA(t)}function oA(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=aa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ca(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=oA(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${oA(n.fields[s])}`;return i+"}"}(t.mapValue):ue()}function Lc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function sA(t){return!!t&&"integerValue"in t}function Tp(t){return!!t&&"arrayValue"in t}function z6(t){return!!t&&"nullValue"in t}function W6(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function O_(t){return!!t&&"mapValue"in t}function yp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Gc(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=yp(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=yp(t.arrayValue.values[n]);return e}return Object.assign({},t)}function X5(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Gie(t){return"nullValue"in t?F_:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Lc(la.empty(),ie.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ue()}function Kie(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Lc(la.empty(),ie.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ia:ue()}function G6(t,e){let n=ua(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function K6(t,e){let n=ua(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Xn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!O_(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=yp(n)}setAll(e){let n=en.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=yp(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());O_(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return po(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];O_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gc(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(yp(this.value))}};function Z5(t){let e=[];return Gc(t.fields,(n,r)=>{let i=new en([n]);if(O_(r)){let o=Z5(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new jr(e)}var pn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ge.min(),ge.min(),ge.min(),Xn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ge.min(),ge.min(),Xn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ge.min(),ge.min(),Xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var mo=class{constructor(e,n){this.position=e,this.inclusive=n}};function Q6(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ie.comparator(ie.fromName(s.referenceValue),n.key):r=ua(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Y6(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!po(t.position[n],e.position[n]))return!1;return!0}var Vc=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Qie(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var G_=class{},Ge=class t extends G_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lA(e,n,r):n==="array-contains"?new hA(e,r):n==="in"?new K_(e,r):n==="not-in"?new fA(e,r):n==="array-contains-any"?new pA(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uA(e,r):new dA(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ua(n,this.value)):n!==null&&Oc(this.value)===Oc(n)&&this.matchesComparison(ua(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gt=class t extends G_{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return td(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function td(t){return t.op==="and"}function aA(t){return t.op==="or"}function GS(t){return J5(t)&&td(t)}function J5(t){for(let e of t.filters)if(e instanceof gt)return!1;return!0}function cA(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+ed(t.value);if(GS(t))return t.filters.map(e=>cA(e)).join(",");{let e=t.filters.map(n=>cA(n)).join(",");return`${t.op}(${e})`}}function ej(t,e){return t instanceof Ge?function(r,i){return i instanceof Ge&&r.op===i.op&&r.field.isEqual(i.field)&&po(r.value,i.value)}(t,e):t instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ej(s,i.filters[a]),!0):!1}(t,e):void ue()}function tj(t,e){let n=t.filters.concat(e);return gt.create(n,t.op)}function nj(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${ed(n.value)}`}(t):t instanceof gt?function(n){return n.op.toString()+" {"+n.getFilters().map(nj).join(" ,")+"}"}(t):"Filter"}var lA=class extends Ge{constructor(e,n,r){super(e,n,r),this.key=ie.fromName(r.referenceValue)}matches(e){let n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}},uA=class extends Ge{constructor(e,n){super(e,"in",n),this.keys=rj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},dA=class extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=rj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function rj(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ie.fromName(r.referenceValue))}var hA=class extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Tp(n)&&Dp(n.arrayValue,this.value)}},K_=class extends Ge{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Dp(this.value.arrayValue,n)}},fA=class extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Dp(this.value.arrayValue,n)}},pA=class extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Tp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dp(this.value.arrayValue,r))}};var mA=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}};function gA(t,e=null,n=[],r=[],i=null,o=null,s=null){return new mA(t,e,n,r,i,o,s)}function Bc(t){let e=se(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cA(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),zp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ed(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ed(r)).join(",")),e.ce=n}return e.ce}function Wp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qie(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ej(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Y6(t.startAt,e.startAt)&&Y6(t.endAt,e.endAt)}function Q_(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Y_(t,e){return t.filters.filter(n=>n instanceof Ge&&n.field.isEqual(e))}function X6(t,e,n){let r=F_,i=!0;for(let o of Y_(t,e)){let s=F_,a=!0;switch(o.op){case"<":case"<=":s=Gie(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=F_}G6({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];G6({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function Z6(t,e,n){let r=ia,i=!0;for(let o of Y_(t,e)){let s=ia,a=!0;switch(o.op){case">=":case">":s=Kie(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=ia}K6({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];K6({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}var Di=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function ij(t,e,n,r,i,o,s,a){return new Di(t,e,n,r,i,o,s,a)}function md(t){return new Di(t)}function J6(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KS(t){return t.collectionGroup!==null}function Yu(t){let e=se(t);if(e.le===null){e.le=[];let n=new Set;for(let o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Et(en.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new Vc(o,r))}),n.has(en.keyField().canonicalString())||e.le.push(new Vc(en.keyField(),r))}return e.le}function dr(t){let e=se(t);return e.he||(e.he=Yie(e,Yu(t))),e.he}function Yie(t,e){if(t.limitType==="F")return gA(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vc(i.field,o)});let n=t.endAt?new mo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mo(t.startAt.position,t.startAt.inclusive):null;return gA(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yA(t,e){let n=t.filters.concat([e]);return new Di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function X_(t,e,n){return new Di(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gp(t,e){return Wp(dr(t),dr(e))&&t.limitType===e.limitType}function oj(t){return`${Bc(dr(t))}|lt:${t.limitType}`}function Hu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nj(i)).join(", ")}]`),zp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ed(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ed(i)).join(",")),`Target(${r})`}(dr(t))}; limitType=${t.limitType})`}function Kp(t,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ie.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(let o of Yu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=Q6(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,Yu(r),i)||r.endAt&&!function(s,a,c){let l=Q6(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,Yu(r),i))}(t,e)}function sj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function aj(t){return(e,n)=>{let r=!1;for(let i of Yu(t)){let o=Xie(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Xie(t,e,n){let r=t.field.isKeyField()?ie.comparator(e.key,n.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?ua(c,l):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}var go=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gc(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Q5(this.inner)}size(){return this.innerSize}};var Zie=new St(ie.comparator);function Er(){return Zie}var cj=new St(ie.comparator);function mp(...t){let e=cj;for(let n of t)e=e.insert(n.key,n);return e}function lj(t){let e=cj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function lo(){return vp()}function uj(){return vp()}function vp(){return new go(t=>t.toString(),(t,e)=>t.isEqual(e))}var Jie=new St(ie.comparator),eoe=new Et(ie.comparator);function Pe(...t){let e=eoe;for(let n of t)e=e.add(n);return e}var toe=new Et(Re);function QS(){return toe}function dj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cp(e)?"-0":e}}function hj(t){return{integerValue:""+t}}function fj(t,e){return H5(e)?hj(e):dj(t,e)}var nd=class{constructor(){this._=void 0}};function noe(t,e,n){return t instanceof da?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Ow(o)&&(o=WS(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof ns?mj(t,e):t instanceof rs?gj(t,e):function(i,o){let s=pj(i,o),a=e5(s)+e5(i.Ie);return sA(s)&&sA(i.Ie)?hj(a):dj(i.serializer,a)}(t,e)}function roe(t,e,n){return t instanceof ns?mj(t,e):t instanceof rs?gj(t,e):n}function pj(t,e){return t instanceof ha?function(r){return sA(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var da=class extends nd{},ns=class extends nd{constructor(e){super(),this.elements=e}};function mj(t,e){let n=yj(e);for(let r of t.elements)n.some(i=>po(i,r))||n.push(r);return{arrayValue:{values:n}}}var rs=class extends nd{constructor(e){super(),this.elements=e}};function gj(t,e){let n=yj(e);for(let r of t.elements)n=n.filter(i=>!po(i,r));return{arrayValue:{values:n}}}var ha=class extends nd{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function e5(t){return qt(t.integerValue||t.doubleValue)}function yj(t){return Tp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var jc=class{constructor(e,n){this.field=e,this.transform=n}};function ioe(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ns&&i instanceof ns||r instanceof rs&&i instanceof rs?Zu(r.elements,i.elements,po):r instanceof ha&&i instanceof ha?po(r.Ie,i.Ie):r instanceof da&&i instanceof da}(t.transform,e.transform)}var vA=class{constructor(e,n){this.version=e,this.transformResults=n}},Ht=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function L_(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var rd=class{};function vj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pa(t.key,Ht.none()):new fa(t.key,t.data,Ht.none());{let n=t.data,r=Xn.empty(),i=new Et(en.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Ti(t.key,r,new jr(i.toArray()),Ht.none())}}function ooe(t,e,n){t instanceof fa?function(i,o,s){let a=i.value.clone(),c=n5(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ti?function(i,o,s){if(!L_(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=n5(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(_j(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function _p(t,e,n,r){return t instanceof fa?function(o,s,a,c){if(!L_(o.precondition,s))return a;let l=o.value.clone(),u=r5(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ti?function(o,s,a,c){if(!L_(o.precondition,s))return a;let l=r5(o.fieldTransforms,c,s),u=s.data;return u.setAll(_j(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return L_(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function soe(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=pj(r.transform,i||null);o!=null&&(n===null&&(n=Xn.empty()),n.set(r.field,o))}return n||null}function t5(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Zu(r,i,(o,s)=>ioe(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var fa=class extends rd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ti=class extends rd{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function _j(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function n5(t,e,n){let r=new Map;me(t.length===n.length);for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,roe(s,a,n[i]))}return r}function r5(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,noe(o,s,e))}return r}var pa=class extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Ap=class extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sp=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&ooe(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=_p(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=_p(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=uj();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let c=vj(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Zu(this.mutations,e.mutations,(n,r)=>t5(n,r))&&Zu(this.baseMutations,e.baseMutations,(n,r)=>t5(n,r))}},_A=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){me(e.mutations.length===r.length);let i=function(){return Jie}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Rp=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var wA=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var un,Ke;function wj(t){switch(t){default:return ue();case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0}}function Ej(t){if(t===void 0)return Jt("GRPC error has no .code"),B.UNKNOWN;switch(t){case un.OK:return B.OK;case un.CANCELLED:return B.CANCELLED;case un.UNKNOWN:return B.UNKNOWN;case un.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case un.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case un.INTERNAL:return B.INTERNAL;case un.UNAVAILABLE:return B.UNAVAILABLE;case un.UNAUTHENTICATED:return B.UNAUTHENTICATED;case un.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case un.NOT_FOUND:return B.NOT_FOUND;case un.ALREADY_EXISTS:return B.ALREADY_EXISTS;case un.PERMISSION_DENIED:return B.PERMISSION_DENIED;case un.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case un.ABORTED:return B.ABORTED;case un.OUT_OF_RANGE:return B.OUT_OF_RANGE;case un.UNIMPLEMENTED:return B.UNIMPLEMENTED;case un.DATA_LOSS:return B.DATA_LOSS;default:return ue()}}(Ke=un||(un={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";var i5=null;function xj(){return new TextEncoder}var aoe=new Tc([4294967295,4294967295],0);function o5(t){let e=xj().encode(t),n=new V6;return n.update(e),new Uint8Array(n.digest())}function s5(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Tc([n,r],0),new Tc([i,o],0)]}var EA=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new kc(`Invalid padding: ${n}`);if(r<0)throw new kc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new kc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new kc(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Tc.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Tc.fromNumber(r)));return i.compare(aoe)===1&&(i=new Tc([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=o5(e),[r,i]=s5(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let n=o5(e),[r,i]=s5(n);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Re(s)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},kc=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Mp=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Pp.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ge.min(),i,new St(Re),Er(),Pe())}},Pp=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Pe(),Pe(),Pe())}};var Xu=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Z_=class{constructor(e,n){this.targetId=e,this.fe=n}},J_=class{constructor(e,n,r=Nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},ew=class{constructor(){this.ge=0,this.pe=c5(),this.ye=Nn.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new Pp(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=c5()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,me(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},xA=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Er(),this.Qe=a5(),this.Ke=new St(Re)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let o=i.target;if(Q_(o))if(r===0){let s=new ie(o.path);this.We(n,s,pn.newNoDocument(s,ge.min()))}else me(r===1);else{let s=this.Ze(n);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}i5?.tt(function(u,d,h,f,m){var _,w,y,v,C,b;let A={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},x=d.unchangedNames;return x&&(A.bloomFilter={applied:m===0,hashCount:(_=x?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(v=(y=(w=x?.bits)===null||w===void 0?void 0:w.bitmap)===null||y===void 0?void 0:y.length)!==null&&v!==void 0?v:0,padding:(b=(C=x?.bits)===null||C===void 0?void 0:C.padding)!==null&&b!==void 0?b:0,mightContain:I=>{var T;return(T=f?.mightContain(I))!==null&&T!==void 0&&T}}),A}(s,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=ca(r).toUint8Array()}catch(c){if(c instanceof W_)return si("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new EA(s,i,o)}catch(c){return si(c instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Le.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&Q_(a.target)){let c=new ie(a.target.path);this.qe.get(c)!==null||this.st(s,c)||this.We(s,c,pn.newNoDocument(c,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Pe();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));let i=new Mp(e,n,this.Ke,this.qe,r);return this.qe=Er(),this.Qe=a5(),this.Ke=new St(Re),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new ew,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Et(Re),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ew),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function a5(){return new St(ie.comparator)}function c5(){return new St(ie.comparator)}var coe={asc:"ASCENDING",desc:"DESCENDING"},loe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uoe={and:"AND",or:"OR"},CA=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function bA(t,e){return t.useProto3Json||zp(e)?e:{value:e}}function id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function doe(t,e){return id(t,e.toTimestamp())}function tn(t){return me(!!t),ge.fromTimestamp(function(n){let r=aa(n);return new Ot(r.seconds,r.nanos)}(t))}function YS(t,e){return IA(t,e).canonicalString()}function IA(t,e){let n=function(i){return new Qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bj(t){let e=Qe.fromString(t);return me(kj(e)),e}function Np(t,e){return YS(t.databaseId,e.path)}function ho(t,e){let n=bj(e);if(n.get(1)!==t.databaseId.projectId)throw new W(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(Tj(n))}function Ij(t,e){return YS(t.databaseId,e)}function Dj(t){let e=bj(t);return e.length===4?Qe.emptyPath():Tj(e)}function DA(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Tj(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function l5(t,e,n){return{name:Np(t,e),fields:n.value.mapValue.fields}}function Aj(t,e,n){let r=ho(t,e.name),i=tn(e.updateTime),o=e.createTime?tn(e.createTime):ge.min(),s=new Xn({mapValue:{fields:e.fields}}),a=pn.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function hoe(t,e){return"found"in e?function(r,i){me(!!i.found),i.found.name,i.found.updateTime;let o=ho(r,i.found.name),s=tn(i.found.updateTime),a=i.found.createTime?tn(i.found.createTime):ge.min(),c=new Xn({mapValue:{fields:i.found.fields}});return pn.newFoundDocument(o,s,a,c)}(t,e):"missing"in e?function(r,i){me(!!i.missing),me(!!i.readTime);let o=ho(r,i.missing),s=tn(i.readTime);return pn.newNoDocument(o,s)}(t,e):ue()}function foe(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,u){return l.useProto3Json?(me(u===void 0||typeof u=="string"),Nn.fromBase64String(u||"")):(me(u===void 0||u instanceof Uint8Array),Nn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let u=l.code===void 0?B.UNKNOWN:Ej(l.code);return new W(u,l.message||"")}(s);n=new J_(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=ho(t,r.document.name),o=tn(r.document.updateTime),s=r.document.createTime?tn(r.document.createTime):ge.min(),a=new Xn({mapValue:{fields:r.document.fields}}),c=pn.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new Xu(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=ho(t,r.document),o=r.readTime?tn(r.readTime):ge.min(),s=pn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Xu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=ho(t,r.document),o=r.removedTargetIds||[];n=new Xu([],o,i,null)}else{if(!("filter"in e))return ue();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new wA(i,o),a=r.targetId;n=new Z_(a,s)}}return n}function kp(t,e){let n;if(e instanceof fa)n={update:l5(t,e.key,e.value)};else if(e instanceof pa)n={delete:Np(t,e.key)};else if(e instanceof Ti)n={update:l5(t,e.key,e.data),updateMask:_oe(e.fieldMask)};else{if(!(e instanceof Ap))return ue();n={verify:Np(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof da)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ns)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof rs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ha)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:doe(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue()}(t,e.precondition)),n}function TA(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ht.updateTime(tn(o.updateTime)):o.exists!==void 0?Ht.exists(o.exists):Ht.none()}(e.currentDocument):Ht.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let c=null;if("setToServerValue"in a)me(a.setToServerValue==="REQUEST_TIME"),c=new da;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new ns(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new rs(u)}else"increment"in a?c=new ha(s,a.increment):ue();let l=en.fromServerFormat(a.fieldPath);return new jc(l,c)}(t,i)):[];if(e.update){e.update.name;let i=ho(t,e.update.name),o=new Xn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(c){let l=c.fieldPaths||[];return new jr(l.map(u=>en.fromServerFormat(u)))}(e.updateMask);return new Ti(i,o,s,n,r)}return new fa(i,o,n,r)}if(e.delete){let i=ho(t,e.delete);return new pa(i,n)}if(e.verify){let i=ho(t,e.verify);return new Ap(i,n)}return ue()}function poe(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?tn(i.updateTime):tn(o);return s.isEqual(ge.min())&&(s=tn(o)),new vA(s,i.transformResults||[])}(n,e))):[]}function Sj(t,e){return{documents:[Ij(t,e.path)]}}function Rj(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ij(t,i);let o=function(l){if(l.length!==0)return Nj(gt.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:zu(h.field),direction:goe(h.dir)}}(u))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=bA(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function Mj(t){let e=Dj(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){me(r===1);let u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){let h=Pj(d);return h instanceof gt&&GS(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(m){return new Vc(Wu(m.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,zp(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new mo(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new mo(f,h)}(n.endAt)),ij(e,i,s,o,a,"F",c,l)}function moe(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Pj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Wu(n.unaryFilter.field);return Ge.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wu(n.unaryFilter.field);return Ge.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Wu(n.unaryFilter.field);return Ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Wu(n.unaryFilter.field);return Ge.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(Wu(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gt.create(n.compositeFilter.filters.map(r=>Pj(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function goe(t){return coe[t]}function yoe(t){return loe[t]}function voe(t){return uoe[t]}function zu(t){return{fieldPath:t.canonicalString()}}function Wu(t){return en.fromServerFormat(t.fieldPath)}function Nj(t){return t instanceof Ge?function(n){if(n.op==="=="){if(W6(n.value))return{unaryFilter:{field:zu(n.field),op:"IS_NAN"}};if(z6(n.value))return{unaryFilter:{field:zu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W6(n.value))return{unaryFilter:{field:zu(n.field),op:"IS_NOT_NAN"}};if(z6(n.value))return{unaryFilter:{field:zu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(n.field),op:yoe(n.op),value:n.value}}}(t):t instanceof gt?function(n){let r=n.getFilters().map(i=>Nj(i));return r.length===1?r[0]:{compositeFilter:{op:voe(n.op),filters:r}}}(t):ue()}function _oe(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kj(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var od=class t{constructor(e,n,r,i,o=ge.min(),s=ge.min(),a=Nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var tw=class{constructor(e){this.ct=e}};function woe(t,e){let n;if(e.document)n=Aj(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=ie.fromSegments(e.noDocument.path),i=$c(e.noDocument.readTime);n=pn.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue();{let r=ie.fromSegments(e.unknownDocument.path),i=$c(e.unknownDocument.version);n=pn.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){let o=new Ot(i[0],i[1]);return ge.fromTimestamp(o)}(e.readTime)),n}function u5(t,e){let n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:nw(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Np(o,s.key),fields:s.data.value.mapValue.fields,updateTime:id(o,s.version.toTimestamp()),createTime:id(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Uc(e.version)};else{if(!e.isUnknownDocument())return ue();r.unknownDocument={path:n.path.toArray(),version:Uc(e.version)}}return r}function nw(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Uc(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function $c(t){let e=new Ot(t.seconds,t.nanoseconds);return ge.fromTimestamp(e)}function Mc(t,e){let n=(e.baseMutations||[]).map(o=>TA(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>TA(t.ct,o)),i=Ot.fromMillis(e.localWriteTimeMs);return new Sp(e.batchId,i,n,r)}function gp(t){let e=$c(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?$c(t.lastLimboFreeSnapshotVersion):ge.min(),r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return me(o.documents.length===1),dr(md(Dj(o.documents[0])))}(t.query):function(o){return dr(Mj(o))}(t.query),new od(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Nn.fromBase64String(t.resumeToken))}function Fj(t,e){let n=Uc(e.snapshotVersion),r=Uc(e.lastLimboFreeSnapshotVersion),i;i=Q_(e.target)?Sj(t.ct,e.target):Rj(t.ct,e.target).ut;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Bc(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XS(t){let e=Mj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?X_(e,e.limit,"L"):e}function $T(t,e){return new Rp(e.largestBatchId,TA(t.ct,e.overlayMutation))}function d5(t,e){let n=e.path.lastSegment();return[t,ur(e.path.popLast()),n]}function h5(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Uc(r.readTime),documentKey:ur(r.documentKey.path),largestBatchId:r.largestBatchId}}var AA=class{getBundleMetadata(e,n){return f5(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:$c(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return f5(e).put(function(i){return{bundleId:i.id,createTime:Uc(tn(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return p5(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:XS(o.bundledQuery),readTime:$c(o.readTime)}}(r)})}saveNamedQuery(e,n){return p5(e).put(function(i){return{name:i.name,readTime:Uc(tn(i.readTime)),bundledQuery:i.bundledQuery}}(n))}};function f5(t){return kn(t,"bundles")}function p5(t){return kn(t,"namedQueries")}var rw=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let r=n.uid||"";return new t(e,r)}getOverlay(e,n){return dp(e).get(d5(this.userId,n)).next(r=>r?$T(this.serializer,r):null)}getOverlays(e,n){let r=lo();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){let i=[];return r.forEach((o,s)=>{let a=new Rp(n,s);i.push(this.ht(e,a))}),V.waitFor(i)}removeOverlaysForBatchId(e,n,r){let i=new Set;n.forEach(s=>i.add(ur(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(dp(e).H("collectionPathOverlayIndex",a))}),V.waitFor(o)}getOverlaysForCollection(e,n,r){let i=lo(),o=ur(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return dp(e).W("collectionPathOverlayIndex",s).next(a=>{for(let c of a){let l=$T(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){let o=lo(),s,a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return dp(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=$T(this.serializer,l);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):u.done()}).next(()=>o)}ht(e,n){return dp(e).put(function(i,o,s){let[a,c,l]=d5(o,s.mutation.key);return{userId:o,collectionPath:c,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:kp(i.ct,s.mutation)}}(this.serializer,this.userId,n))}};function dp(t){return kn(t,"documentOverlays")}var Jo=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(qt(e.integerValue));else if("doubleValue"in e){let r=qt(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Cp(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(ca(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?X5(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ue()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),ie.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Jo.bt=new Jo;function Eoe(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function m5(t){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=Eoe(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}var SA=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{let i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(let n of e){let r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{let i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){let n=this.Lt(e),r=m5(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){let n=this.Lt(e),r=m5(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},RA=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}},MA=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Pc=class{constructor(){this.Gt=new SA,this.zt=new RA(this.Gt),this.jt=new MA(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Nc=class t{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new t(this.indexId,this.documentKey,this.arrayValue,r)}};function ea(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=g5(t.arrayValue,e.arrayValue),n!==0?n:(n=g5(t.directionalValue,e.directionalValue),n!==0?n:ie.comparator(t.documentKey,e.documentKey)))}function g5(t,e){for(let n=0;n<t.length&&n<e.length;++n){let r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}var iw=class{constructor(e){this.Yt=new Et((n,r)=>en.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(me(e.collectionGroup===this.collectionId),this.en)return!1;let n=JT(e);if(n!==void 0&&!this.nn(n))return!1;let r=Sc(e),i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){let a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[o];if(!this.rn(a,c)||!this.sn(this.Zt[s++],c))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Et(en.comparator),n=[];for(let r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Qu(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Qu(r.field,0))}for(let r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Qu(r.field,r.dir==="asc"?0:1)));return new Ju(Ju.UNKNOWN_ID,this.collectionId,n,xp.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function Oj(t){var e,n;if(me(t instanceof Ge||t instanceof gt),t instanceof Ge){if(t instanceof K_){let i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Ge.create(t.field,"==",o)))||[];return gt.create(i,"or")}return t}let r=t.filters.map(i=>Oj(i));return gt.create(r,t.op)}function xoe(t){if(t.getFilters().length===0)return[];let e=kA(Oj(t));return me(Lj(e)),PA(e)||NA(e)?[e]:e.getFilters()}function PA(t){return t instanceof Ge}function NA(t){return t instanceof gt&&GS(t)}function Lj(t){return PA(t)||NA(t)||function(n){if(n instanceof gt&&aA(n)){for(let r of n.getFilters())if(!PA(r)&&!NA(r))return!1;return!0}return!1}(t)}function kA(t){if(me(t instanceof Ge||t instanceof gt),t instanceof Ge)return t;if(t.filters.length===1)return kA(t.filters[0]);let e=t.filters.map(r=>kA(r)),n=gt.create(e,t.op);return n=ow(n),Lj(n)?n:(me(n instanceof gt),me(td(n)),me(n.filters.length>1),n.filters.reduce((r,i)=>ZS(r,i)))}function ZS(t,e){let n;return me(t instanceof Ge||t instanceof gt),me(e instanceof Ge||e instanceof gt),n=t instanceof Ge?e instanceof Ge?function(i,o){return gt.create([i,o],"and")}(t,e):y5(t,e):e instanceof Ge?y5(e,t):function(i,o){if(me(i.filters.length>0&&o.filters.length>0),td(i)&&td(o))return tj(i,o.getFilters());let s=aA(i)?i:o,a=aA(i)?o:i,c=s.filters.map(l=>ZS(l,a));return gt.create(c,"or")}(t,e),ow(n)}function y5(t,e){if(td(e))return tj(e,t.getFilters());{let n=e.filters.map(r=>ZS(t,r));return gt.create(n,"or")}}function ow(t){if(me(t instanceof Ge||t instanceof gt),t instanceof Ge)return t;let e=t.getFilters();if(e.length===1)return ow(e[0]);if(J5(t))return t;let n=e.map(i=>ow(i)),r=[];return n.forEach(i=>{i instanceof Ge?r.push(i):i instanceof gt&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:gt.create(r,t.op)}var FA=class{constructor(){this._n=new Fp}addToCollectionParentIndex(e,n){return this._n.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(ai.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(ai.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}},Fp=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Et(Qe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Et(Qe.comparator)).toArray()}};var R_=new Uint8Array(0),OA=class{constructor(e,n){this.databaseId=n,this.an=new Fp,this.un=new go(r=>Bc(r),(r,i)=>Wp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:r,parent:ur(i)};return v5(e).put(o)}return V.resolve()}getCollectionParents(e,n){let r=[],i=IDBKeyRange.bound([n,""],[j5(n),""],!1,!0);return v5(e).W(i).next(o=>{for(let s of o){if(s.collectionId!==n)break;r.push(co(s.parent))}return r})}addFieldIndex(e,n){let r=hp(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(n);delete i.indexId;let o=r.add(i);if(n.indexState){let s=Uu(e);return o.next(a=>{s.put(h5(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let r=hp(e),i=Uu(e),o=ju(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=hp(e),r=ju(e),i=Uu(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return V.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new iw(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let r=ju(e),i=!0,o=new Map;return V.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Pe(),a=[];return V.forEach(o,(c,l)=>{G("IndexedDbIndexManager",`Using index ${function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(b=>`${b.fieldPath}:${b.kind}`).join(",")}`}(c)} to execute ${Bc(n)}`);let u=function(C,b){let A=JT(b);if(A===void 0)return null;for(let x of Y_(C,A.fieldPath))switch(x.op){case"array-contains-any":return x.value.arrayValue.values||[];case"array-contains":return[x.value]}return null}(l,c),d=function(C,b){let A=new Map;for(let x of Sc(b))for(let I of Y_(C,x.fieldPath))switch(I.op){case"==":case"in":A.set(x.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return A.set(x.fieldPath.canonicalString(),I.value),Array.from(A.values())}return null}(l,c),h=function(C,b){let A=[],x=!0;for(let I of Sc(b)){let T=I.kind===0?X6(C,I.fieldPath,C.startAt):Z6(C,I.fieldPath,C.startAt);A.push(T.value),x&&(x=T.inclusive)}return new mo(A,x)}(l,c),f=function(C,b){let A=[],x=!0;for(let I of Sc(b)){let T=I.kind===0?Z6(C,I.fieldPath,C.endAt):X6(C,I.fieldPath,C.endAt);A.push(T.value),x&&(x=T.inclusive)}return new mo(A,x)}(l,c),m=this.hn(c,l,h),_=this.hn(c,l,f),w=this.Pn(c,l,d),y=this.In(c.indexId,u,m,h.inclusive,_,f.inclusive,w);return V.forEach(y,v=>r.j(v,n.limit).next(C=>{C.forEach(b=>{let A=ie.fromSegments(b.documentKey);s.has(A)||(s=s.add(A),a.push(A))})}))}).next(()=>a)}return V.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=xoe(gt.create(e.filters,"and")).map(r=>gA(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){let c=(n!=null?n.length:1)*Math.max(r.length,o.length),l=c/(n!=null?n.length:1),u=[];for(let d=0;d<c;++d){let h=n?this.Tn(n[d/l]):R_,f=this.En(e,h,r[d%l],i),m=this.dn(e,h,o[d%l],s),_=a.map(w=>this.En(e,h,w,!0));u.push(...this.createRange(f,m,_))}return u}En(e,n,r,i){let o=new Nc(e,ie.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){let o=new Nc(e,ie.empty(),n,r);return i?o.Jt():o}ln(e,n){let r=new iw(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2,i=this.cn(n);return V.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(c){let l=new Et(en.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){let r=new Pc;for(let i of Sc(e)){let o=n.data.field(i.fieldPath);if(o==null)return null;let s=r.Ht(i.kind);Jo.bt.Pt(o,s)}return r.Wt()}Tn(e){let n=new Pc;return Jo.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let r=new Pc;return Jo.bt.Pt(Lc(this.databaseId,n),r.Ht(function(o){let s=Sc(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new Pc);let o=0;for(let s of Sc(e)){let a=r[o++];for(let c of i)if(this.Vn(n,s.fieldPath)&&Tp(a))i=this.mn(i,s,a);else{let l=c.Ht(s.kind);Jo.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){let n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let c=new Pc;c.seed(a.Wt()),Jo.bt.Pt(s,c.Ht(n.kind)),o.push(c)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Ge&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){let r=hp(e),i=Uu(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{let s=[];return V.forEach(o,a=>i.get([a.indexId,this.uid]).next(c=>{s.push(function(u,d){let h=d?new xp(d.sequenceNumber,new ai($c(d.readTime),new ie(co(d.documentKey)),d.largestBatchId)):xp.empty(),f=u.fields.map(([m,_])=>new Qu(en.fromServerFormat(m),_));return new Ju(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Re(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){let i=hp(e),o=Uu(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>V.forEach(a,c=>o.put(h5(c.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){let r=new Map;return V.forEach(n,(i,o)=>{let s=r.get(i.collectionGroup);return(s?V.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),V.forEach(a,c=>this.pn(e,i,c).next(l=>{let u=this.yn(o,c);return l.isEqual(u)?V.resolve():this.wn(e,o,c,l,u)}))))})}Sn(e,n,r,i){return ju(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return ju(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){let i=ju(e),o=new Et(ea);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Nc(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new Et(ea),i=this.An(n,e);if(i==null)return r;let o=JT(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Tp(s))for(let a of s.arrayValue.values||[])r=r.add(new Nc(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Nc(n.indexId,e.key,R_,i));return r}wn(e,n,r,i,o){G("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(c,l,u,d,h){let f=c.getIterator(),m=l.getIterator(),_=Bu(f),w=Bu(m);for(;_||w;){let y=!1,v=!1;if(_&&w){let C=u(_,w);C<0?v=!0:C>0&&(y=!0)}else _!=null?v=!0:y=!0;y?(d(w),w=Bu(m)):v?(h(_),_=Bu(f)):(_=Bu(f),w=Bu(m))}}(i,o,ea,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),V.waitFor(s)}gn(e){let n=1;return Uu(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>ea(s,a)).filter((s,a,c)=>!a||ea(s,c[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=ea(s,e),c=ea(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&c<0)i.push(s),i.push(s.Jt());else if(c>0)break}i.push(n);let o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,R_,[]],c=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,R_,[]];o.push(IDBKeyRange.bound(a,c))}return o}Dn(e,n){return ea(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(_5)}getMinOffset(e,n){return V.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||ue())).next(_5)}};function v5(t){return kn(t,"collectionParents")}function ju(t){return kn(t,"indexEntries")}function hp(t){return kn(t,"indexConfiguration")}function Uu(t){return kn(t,"indexState")}function _5(t){me(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){let i=t[r].indexState.offset;HS(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ai(e.readTime,e.documentKey,n)}var w5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oi=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Vj(t,e,n){let r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),a=0,c=r.Y({range:s},(u,d,h)=>(a++,h.delete()));o.push(c.next(()=>{me(a===1)}));let l=[];for(let u of n.mutations){let d=z5(e,u.key.path,n.batchId);o.push(i.delete(d)),l.push(u.key)}return V.waitFor(o).next(()=>l)}function sw(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ue();e=t.noDocument}return JSON.stringify(e).length}oi.DEFAULT_COLLECTION_PERCENTILE=10,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oi.DEFAULT=new oi(41943040,oi.DEFAULT_COLLECTION_PERCENTILE,oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oi.DISABLED=new oi(-1,0,0);var aw=class t{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){me(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,r,i)}checkEmpty(e){let n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){let o=Gu(e),s=ta(e);return s.add({}).next(a=>{me(typeof a=="number");let c=new Sp(a,n,r,i),l=function(f,m,_){let w=_.baseMutations.map(v=>kp(f.ct,v)),y=_.mutations.map(v=>kp(f.ct,v));return{userId:m,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:w,mutations:y}}(this.serializer,this.userId,c),u=[],d=new Et((h,f)=>Re(h.canonicalString(),f.canonicalString()));for(let h of i){let f=z5(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(s.put(l)),u.push(o.put(f,Sie))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=c.keys()}),V.waitFor(u).next(()=>c)})}lookupMutationBatch(e,n){return ta(e).get(n).next(r=>r?(me(r.userId===this.userId),Mc(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?V.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){let i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ta(e).Y({index:"userMutationsIndex",range:i},(s,a,c)=>{a.userId===this.userId&&(me(a.batchId>=r),o=Mc(this.serializer,a)),c.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ta(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ta(e).W("userMutationsIndex",n).next(r=>r.map(i=>Mc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){let r=k_(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return Gu(e).Y({range:i},(s,a,c)=>{let[l,u,d]=s,h=co(u);if(l===this.userId&&n.path.isEqual(h))return ta(e).get(d).next(f=>{if(!f)throw ue();me(f.userId===this.userId),o.push(Mc(this.serializer,f))});c.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Re),i=[];return n.forEach(o=>{let s=k_(this.userId,o.path),a=IDBKeyRange.lowerBound(s),c=Gu(e).Y({range:a},(l,u,d)=>{let[h,f,m]=l,_=co(f);h===this.userId&&o.path.isEqual(_)?r=r.add(m):d.done()});i.push(c)}),V.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=k_(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Et(Re);return Gu(e).Y({range:s},(c,l,u)=>{let[d,h,f]=c,m=co(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):u.done()}).next(()=>this.Fn(e,a))}Fn(e,n){let r=[],i=[];return n.forEach(o=>{i.push(ta(e).get(o).next(s=>{if(s===null)throw ue();me(s.userId===this.userId),r.push(Mc(this.serializer,s))}))}),V.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return Vj(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),V.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return V.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Gu(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){let c=co(o[1]);i.push(c)}else a.done()}).next(()=>{me(i.length===0)})})}containsKey(e,n){return Bj(e,this.userId,n)}xn(e){return jj(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function Bj(t,e,n){let r=k_(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gu(t).Y({range:o,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===i&&(s=!0),l.done()}).next(()=>s)}function ta(t){return kn(t,"mutations")}function Gu(t){return kn(t,"documentMutations")}function jj(t){return kn(t,"mutationQueues")}var sd=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var LA=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{let r=new sd(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>ge.fromTimestamp(new Ot(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>$u(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(me(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0,o=[];return $u(e).Y((s,a)=>{let c=gp(a);c.sequenceNumber<=n&&r.get(c.targetId)===null&&(i++,o.push(this.removeTargetData(e,c)))}).next(()=>V.waitFor(o)).next(()=>i)}forEachTarget(e,n){return $u(e).Y((r,i)=>{let o=gp(i);n(o)})}Ln(e){return E5(e).get("targetGlobalKey").next(n=>(me(n!==null),n))}kn(e,n){return E5(e).put("targetGlobalKey",n)}qn(e,n){return $u(e).put(Fj(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){let r=Bc(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return $u(e).Y({range:i,index:"queryTargetsIndex"},(s,a,c)=>{let l=gp(a);Wp(n,l.target)&&(o=l,c.done())}).next(()=>o)}addMatchingKeys(e,n,r){let i=[],o=na(e);return n.forEach(s=>{let a=ur(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),V.waitFor(i)}removeMatchingKeys(e,n,r){let i=na(e);return V.forEach(n,o=>{let s=ur(o.path);return V.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){let r=na(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){let r=IDBKeyRange.bound([n],[n+1],!1,!0),i=na(e),o=Pe();return i.Y({range:r,J:!0},(s,a,c)=>{let l=co(s[1]),u=new ie(l);o=o.add(u)}).next(()=>o)}containsKey(e,n){let r=ur(n.path),i=IDBKeyRange.bound([r],[j5(r)],!1,!0),o=0;return na(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],c,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return $u(e).get(n).next(r=>r?gp(r):null)}};function $u(t){return kn(t,"targets")}function E5(t){return kn(t,"targetGlobal")}function na(t){return kn(t,"targetDocuments")}function x5([t,e],[n,r]){let i=Re(t,n);return i===0?Re(e,r):i}var VA=class{constructor(e){this.Kn=e,this.buffer=new Et(x5),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();x5(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},BA=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){G("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>j(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ya(n)?G("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ga(n)}yield this.zn(3e5)}))}},jA=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return V.resolve(Br._e);let r=new VA(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(G("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(w5)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(G("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),w5):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(G("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),qu()<=Hr.DEBUG&&G("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function Coe(t,e){return new jA(t,e)}var UA=class{constructor(e,n){this.db=e,this.garbageCollector=Coe(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return M_(e,r)}removeReference(e,n,r){return M_(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return M_(e,n)}er(e,n){return function(i,o){let s=!1;return jj(i).Z(a=>Bj(i,a,o).next(c=>(c&&(s=!0),V.resolve(!c)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Xn(e,(s,a)=>{if(a<=n){let c=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ge.min()),na(e).delete(function(d){return[0,ur(d.path)]}(s))))});i.push(c)}}).next(()=>V.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return M_(e,n)}Xn(e,n){let r=na(e),i,o=Br._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:c,sequenceNumber:l})=>{s===0?(o!==Br._e&&n(new ie(co(i)),o),o=l,i=c):o=Br._e}).next(()=>{o!==Br._e&&n(new ie(co(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function M_(t,e){return na(t).put(function(r,i){return{targetId:0,path:ur(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}var cw=class{constructor(){this.changes=new go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $A=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return Ac(e).put(r)}removeEntry(e,n,r){return Ac(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],nw(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=pn.newInvalidDocument(n);return Ac(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(fp(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:pn.newInvalidDocument(n)};return Ac(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(fp(n))},(i,o)=>{r={document:this.nr(n,o),size:sw(o)}}).next(()=>r)}getEntries(e,n){let r=Er();return this.ir(e,n,(i,o)=>{let s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=Er(),i=new St(ie.comparator);return this.ir(e,n,(o,s)=>{let a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,sw(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return V.resolve();let i=new Et(I5);n.forEach(c=>i=i.add(c));let o=IDBKeyRange.bound(fp(i.first()),fp(i.last())),s=i.getIterator(),a=s.getNext();return Ac(e).Y({index:"documentKeyIndex",range:o},(c,l,u)=>{let d=ie.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&I5(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?u.U(fp(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){let s=n.path,a=[s.popLast().toArray(),s.lastSegment(),nw(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ac(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let u=Er();for(let d of l){let h=this.nr(ie.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Kp(n,h)||i.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,n,r,i){let o=Er(),s=b5(n,r),a=b5(n,ai.max());return Ac(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(c,l,u)=>{let d=this.nr(ie.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(d.key,d),o.size===i&&u.done()}).next(()=>o)}newChangeBuffer(e){return new qA(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return C5(e).get("remoteDocumentGlobalKey").next(n=>(me(!!n),n))}tr(e,n){return C5(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let r=woe(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(ge.min())))return r}return pn.newInvalidDocument(e)}};function Uj(t){return new $A(t)}var qA=class extends cw{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new go(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let n=[],r=0,i=new Et((o,s)=>Re(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){let c=u5(this.ar.serializer,s);i=i.add(o.path.popLast());let l=sw(c);r+=l-a.size,n.push(this.ar.addEntry(e,o,c))}else if(r-=a.size,this.trackRemovals){let c=u5(this.ar.serializer,s.convertToNoDocument(ge.min()));n.push(this.ar.addEntry(e,o,c))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),V.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function C5(t){return kn(t,"remoteDocumentGlobal")}function Ac(t){return kn(t,"remoteDocumentsV14")}function fp(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function b5(t,e){let n=e.documentKey.path.toArray();return[t,nw(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function I5(t,e){let n=t.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Re(n[o],r[o]),i)return i;return i=Re(n.length,r.length),i||(i=Re(n[n.length-2],r[r.length-2]),i||Re(n[n.length-1],r[r.length-1]))}var HA=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var lw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&_p(r.mutation,i,jr.empty(),Ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){let i=lo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=mp();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=lo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Er(),s=vp(),a=function(){return vp()}();return n.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Ti)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),_p(u.mutation,l,u.mutation.getFieldMask(),Ot.now())):s.set(l.key,jr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),n.forEach((l,u)=>{var d;return a.set(l,new HA(u,(d=s.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=vp(),i=new St((s,a)=>s-a),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let u=r.get(c)||jr.empty();u=a.applyToLocalView(l,u),r.set(c,u);let d=(i.get(a.batchId)||Pe()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=uj();u.forEach(h=>{if(!o.has(h)){let f=vj(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,d))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ie.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(lo()),a=-1,c=o;return s.next(l=>V.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(u)?V.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,Pe())).next(u=>({batchId:a,changes:lj(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(r=>{let i=mp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=mp();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,c=>{let l=function(d,h){return new Di(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,pn.newInvalidDocument(u)))});let a=mp();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&_p(u.mutation,l,jr.empty(),Ot.now()),Kp(n,l)&&(a=a.insert(c,l))}),a})}};var zA=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return V.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:tn(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:XS(i.bundledQuery),readTime:tn(i.readTime)}}(n)),V.resolve()}};var WA=class{constructor(){this.overlays=new St(ie.comparator),this.hr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){let r=lo();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){let i=lo(),o=n.length+1,s=new ie(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new St((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=lo(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=lo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return V.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Rp(n,r));let o=this.hr.get(n);o===void 0&&(o=Pe(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}};var Op=class{constructor(){this.Pr=new Et(dn.Ir),this.Tr=new Et(dn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new dn(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new dn(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new ie(new Qe([])),r=new dn(n,e),i=new dn(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new ie(new Qe([])),r=new dn(n,e),i=new dn(n,e+1),o=Pe();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new dn(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},dn=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ie.comparator(e.key,n.key)||Re(e.pr,n.pr)}static Er(e,n){return Re(e.pr,n.pr)||ie.comparator(e.key,n.key)}};var GA=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Et(dn.Ir)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Sp(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.wr=this.wr.add(new dn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new dn(n,0),i=new dn(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{let a=this.Sr(s.pr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Et(Re);return n.forEach(i=>{let o=new dn(i,0),s=new dn(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),V.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;ie.isDocumentKey(o)||(o=o.child(""));let s=new dn(new ie(o),0),a=new Et(Re);return this.wr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.pr)),!0)},s),V.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){me(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return V.forEach(n.mutations,i=>{let o=new dn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new dn(n,0),i=this.wr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var KA=class{constructor(e){this.vr=e,this.docs=function(){return new St(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let r=Er();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():pn.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Er(),s=n.path,a=new ie(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||HS($5(u),r)<=0||(i.has(u.key)||Kp(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ue()}Fr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new QA(this)}getSize(e){return V.resolve(this.size)}},QA=class extends cw{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var YA=class{constructor(e){this.persistence=e,this.Mr=new go(n=>Bc(n),Wp),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Op,this.targetCount=0,this.Br=sd.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),V.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new sd(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.qn(n),V.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),V.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Nr.containsKey(n))}};var uw=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new Br(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new YA(this),this.indexManager=new FA,this.remoteDocumentCache=function(i){return new KA(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new tw(n),this.$r=new zA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new GA(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);let i=new XA(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return V.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},XA=class extends q_{constructor(e){super(),this.currentSequenceNumber=e}},dw=class t{constructor(e){this.persistence=e,this.zr=new Op,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ue()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),V.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Jr,r=>{let i=ie.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,ge.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return V.or([()=>V.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var ZA=class{constructor(e){this.serializer=e}N(e,n,r,i){let o=new H_("createOrUpgrade",n);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$6,{unique:!0}),c.createObjectStore("documentMutations")}(e),D5(e),function(c){c.createObjectStore("remoteDocuments")}(e));let s=V.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),D5(e)),s=s.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ge.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$6,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return V.waitFor(h)})}(e,o))),s=s.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:Uie});l.createIndex("collectionPathOverlayIndex",$ie,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",qie,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:Rie});l.createIndex("documentKeyIndex",Mie),l.createIndex("collectionGroupIndex",Pie)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Lie}).createIndex("sequenceNumberIndex",Vie,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Bie}).createIndex("documentKeyIndex",jie,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=sw(i)}).next(()=>{let r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){let n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>V.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>V.forEach(a,c=>{me(c.userId===o.userId);let l=Mc(this.serializer,c);return Vj(e,o.userId,l).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.Y((s,a)=>{let c=new Qe(s),l=function(d){return[0,ur(d)]}(c);o.push(n.get(l).next(u=>u?V.resolve():(d=>n.put({targetId:0,path:ur(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>V.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:Oie});let r=n.store("collectionParents"),i=new Fp,o=s=>{if(i.add(s)){let a=s.lastSegment(),c=s.popLast();return r.put({collectionId:a,parent:ur(c)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{let c=new Qe(s);return o(c.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,c],l)=>{let u=co(a);return o(u.popLast())}))}ri(e){let n=e.store("targets");return n.Y((r,i)=>{let o=gp(i),s=Fj(this.serializer,o);return n.put(s)})}ii(e,n){let r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{let a=n.store("remoteDocumentsV14"),c=function(d){return d.document?new ie(Qe.fromString(d.document.name).popFirst(5)):d.noDocument?ie.fromSegments(d.noDocument.path):d.unknownDocument?ie.fromSegments(d.unknownDocument.path):ue()}(s).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>V.waitFor(i))}si(e,n){let r=n.store("mutations"),i=Uj(this.serializer),o=new uw(dw.Hr,this.serializer.ct);return r.W().next(s=>{let a=new Map;return s.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:Pe();Mc(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),V.forEach(a,(c,l)=>{let u=new hn(l),d=rw.lt(this.serializer,u),h=o.getIndexManager(u),f=aw.lt(u,this.serializer,h,o.referenceDelegate);return new lw(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new bp(n,Br._e),c).next()})})}};function D5(t){t.createObjectStore("targetDocuments",{keyPath:kie}).createIndex("documentTargetsIndex",Fie,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Nie,{unique:!0}),t.createObjectStore("targetGlobal")}var qT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",JA=class t{constructor(e,n,r,i,o,s,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=u,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!t.D())throw new W(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UA(this,i),this.Ti=n+"main",this.serializer=new tw(c),this.Ei=new ts(this.Ti,this.ui,new ZA(this.serializer)),this.Qr=new LA(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Uj(this.serializer),this.$r=new AA,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,u===!1&&Jt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new W(B.FAILED_PRECONDITION,qT);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Br(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>j(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>j(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>j(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>P_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ya(e))return G("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return G("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return pp(e).get("owner").next(n=>V.resolve(this.Si(n)))}bi(e){return P_(e).delete(this.clientId)}Di(){return j(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let r=kn(n,"clientMetadata");return r.W().next(i=>{let o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return V.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?V.resolve(!0):pp(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new W(B.FAILED_PRECONDITION,qT);return!1}}return!(!this.networkEnabled||!this.inForeground)||P_(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&G("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return j(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new bp(e,Br._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()})}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>P_(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return aw.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new OA(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return rw.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){G("IndexedDbPersistence","Starting transaction:",e);let i=n==="readonly"?"readonly":"readwrite",o=function(c){return c===15?zie:c===14?K5:c===13?G5:c===12?Hie:c===11?W5:void ue()}(this.ui),s;return this.Ei.runTransaction(e,i,o,a=>(s=new bp(a,this.kr?this.kr.next():Br._e),n==="readwrite-primary"?this.gi(s).next(c=>!!c||this.pi(s)).next(c=>{if(!c)throw Jt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new W(B.FAILED_PRECONDITION,q5);return r(s)}).next(c=>this.wi(s).next(()=>c)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return pp(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new W(B.FAILED_PRECONDITION,qT)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return pp(e).put("owner",n)}static D(){return ts.D()}yi(e){let n=pp(e);return n.get("owner").next(r=>this.Si(r)?(G("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):V.resolve())}Ci(e,n){let r=Date.now();return!(e<r-n)&&(!(e>r)||(Jt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Zw()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return G("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Jt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Jt("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function pp(t){return kn(t,"owner")}function P_(t){return kn(t,"clientMetadata")}function JS(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var eS=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Pe(),i=Pe();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var tS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hw=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Zw()?8:ts.v(Dd())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new tS;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(qu()<=Hr.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Hu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),V.resolve()):(qu()<=Hr.DEBUG&&G("QueryEngine","Query:",Hu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(qu()<=Hr.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Hu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(n))):V.resolve())}ji(e,n){if(J6(n))return V.resolve(null);let r=dr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=X_(n,null,"F"),r=dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Pe(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.Zi(n,a);return this.Xi(n,l,s,c.readTime)?this.ji(e,X_(n,null,"F")):this.es(e,l,n,c)}))})))}Hi(e,n,r,i){return J6(n)||i.isEqual(ge.min())?V.resolve(null):this.zi.getDocuments(e,r).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,r,i)?V.resolve(null):(qu()<=Hr.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Hu(n)),this.es(e,s,n,U5(i,-1)).next(a=>a))})}Zi(e,n){let r=new Et(aj(e));return n.forEach((i,o)=>{Kp(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return qu()<=Hr.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Hu(n)),this.zi.getDocumentsMatchingQuery(e,n,ai.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var nS=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new St(Re),this.rs=new go(o=>Bc(o),Wp),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lw(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function $j(t,e,n,r){return new nS(t,e,n,r)}function qj(t,e){return j(this,null,function*(){let n=se(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Pe();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return n.localDocuments.getDocuments(r,c).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})})}function boe(t,e){let n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=V.resolve();return h.forEach(m=>{f=f.next(()=>u.getEntry(c,m)).next(_=>{let w=l.docVersions.get(m);me(w!==null),_.version.compareTo(w)<0&&(d.applyToRemoteDocument(_,l),_.isValidDocument()&&(_.setReadTime(l.commitVersion),u.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Pe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Hj(t){let e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Ioe(t,e){let n=se(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((u,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,u.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Nn.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,r)),i=i.insert(d,f),function(_,w,y){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,f,u)&&a.push(n.Qr.updateTargetData(o,f))});let c=Er(),l=Pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(zj(o,s,e.documentUpdates).next(u=>{c=u.cs,l=u.ls})),!r.isEqual(ge.min())){let u=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(n.ns=i,o))}function zj(t,e,n){let r=Pe(),i=Pe();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Er();return n.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{cs:s,ls:i}})}function Doe(t,e){let n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ad(t,e){let n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new od(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function cd(t,e,n){return j(this,null,function*(){let r=se(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!ya(s))throw s;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function fw(t,e,n){let r=se(t),i=ge.min(),o=Pe();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,u){let d=se(c),h=d.rs.get(u);return h!==void 0?V.resolve(d.ns.get(h)):d.Qr.getTargetData(l,u)}(r,s,dr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:ge.min(),n?o:Pe())).next(a=>(Kj(r,sj(e),a),{documents:a,hs:o})))}function Wj(t,e){let n=se(t),r=se(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function Gj(t,e){let n=se(t),r=n.ss.get(e)||ge.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,U5(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(Kj(n,e,i),i))}function Kj(t,e,n){let r=t.ss.get(e)||ge.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}function Toe(t,e,n,r){return j(this,null,function*(){let i=se(t),o=Pe(),s=Er();for(let l of n){let u=e.Ps(l.metadata.name);l.document&&(o=o.add(u));let d=e.Is(l);d.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(u,d)}let a=i.os.newChangeBuffer({trackRemovals:!0}),c=yield ad(i,function(u){return dr(md(Qe.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>zj(l,a,s).next(u=>(a.apply(l),u)).next(u=>i.Qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Qr.addMatchingKeys(l,o,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,u.cs,u.ls)).next(()=>u.cs)))})}function Aoe(r,i){return j(this,arguments,function*(t,e,n=Pe()){let o=yield ad(t,dr(XS(e.bundledQuery))),s=se(t);return s.persistence.runTransaction("Save named query","readwrite",a=>{let c=tn(e.readTime);if(o.snapshotVersion.compareTo(c)>=0)return s.$r.saveNamedQuery(a,e);let l=o.withResumeToken(Nn.EMPTY_BYTE_STRING,c);return s.ns=s.ns.insert(l.targetId,l),s.Qr.updateTargetData(a,l).next(()=>s.Qr.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Qr.addMatchingKeys(a,n,o.targetId)).next(()=>s.$r.saveNamedQuery(a,e))})})}function T5(t,e){return`firestore_clients_${t}_${e}`}function A5(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function HT(t,e){return`firestore_targets_${t}_${e}`}var pw=class t{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new W(i.error.code,i.error.message))),s?new t(e,n,i.state,o):(Jt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},wp=class t{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){let r=JSON.parse(n),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new W(r.error.code,r.error.message))),o?new t(e,r.state,i):(Jt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},mw=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=QS();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=H5(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Jt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},rS=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Jt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Lp=class{constructor(){this.activeTargetIds=QS()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Ep=class{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new St(Re),this.started=!1,this.ys=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=T5(this.persistenceKey,this.Vs),this.Ss=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Lp),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Fs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return j(this,null,function*(){let e=yield this.syncEngine.Li();for(let r of e){if(r===this.Vs)continue;let i=this.getItem(T5(this.persistenceKey,r));if(i){let o=mw.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let r=this.xs(n);r&&this.Os(r)}for(let r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let r=this.storage.getItem(HT(this.persistenceKey,e));if(r){let i=wp.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(HT(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return G("SharedClientState","READ",e,n),n}setItem(e,n){G("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){G("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(G("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Jt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>j(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let r=this.$s(n.key);return this.Us(r,null)}{let r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){let r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){let r=function(o){let s=Br._e;if(o!=null)try{let a=JSON.parse(o);me(typeof a=="number"),s=a}catch(a){Jt("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==Br._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){let r=this.Js(n.newValue);yield Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){let i=new pw(this.currentUser,e,n,r),o=A5(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){let n=A5(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){let i=HT(this.persistenceKey,e),o=new wp(e,n,r);this.setItem(i,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let r=this.$s(e);return mw.Es(r,n)}Gs(e,n){let r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return pw.Es(new hn(o),i,n)}js(e,n){let r=this.Cs.exec(e),i=Number(r[1]);return wp.Es(i,n)}xs(e){return rS.Es(e)}Js(e){return JSON.parse(e)}zs(e){return j(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);G("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(c=>{i.has(c)||s.push(c)}),i.forEach(c=>{o.has(c)||a.push(c)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=QS();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}},gw=class{constructor(){this.no=new Lp,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Lp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var iS=class{io(e){}shutdown(){}};var yw=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var N_=null;function zT(){return N_===null?N_=function(){return 268435456+Math.round(2147483648*Math.random())}():N_++,"0x"+N_.toString(16)}var Soe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var oS=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Yn="WebChannelConnection",sS=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${o}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get wo(){return!1}So(n,r,i,o,s){let a=zT(),c=this.bo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,o,s),this.Co(n,c,l,i).then(u=>(G("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw si("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pd}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){let i=Soe[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let o=zT();return new Promise((s,a)=>{let c=new L6;c.setWithCredentials(!0),c.listenOnce(F6.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case S_.NO_ERROR:let u=c.getResponseJson();G(Yn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case S_.TIMEOUT:G(Yn,`RPC '${e}' ${o} timed out`),a(new W(B.DEADLINE_EXCEEDED,"Request time out"));break;case S_.HTTP_ERROR:let d=c.getStatus();if(G(Yn,`RPC '${e}' ${o} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let m=function(w){let y=w.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(y)>=0?y:B.UNKNOWN}(f.status);a(new W(m,f.message))}else a(new W(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new W(B.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{G(Yn,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);G(Yn,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",l,r,15)})}Fo(e,n,r){let i=zT(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=N6(),a=k6(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let u=o.join("");G(Yn,`Creating RPC '${e}' stream ${i}: ${u}`,c);let d=s.createWebChannel(u,c),h=!1,f=!1,m=new oS({lo:w=>{f?G(Yn,`Not sending because RPC '${e}' stream ${i} is closed:`,w):(h||(G(Yn,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),G(Yn,`RPC '${e}' stream ${i} sending:`,w),d.send(w))},ho:()=>d.close()}),_=(w,y,v)=>{w.listen(y,C=>{try{v(C)}catch(b){setTimeout(()=>{throw b},0)}})};return _(d,up.EventType.OPEN,()=>{f||G(Yn,`RPC '${e}' stream ${i} transport opened.`)}),_(d,up.EventType.CLOSE,()=>{f||(f=!0,G(Yn,`RPC '${e}' stream ${i} transport closed`),m.Vo())}),_(d,up.EventType.ERROR,w=>{f||(f=!0,si(Yn,`RPC '${e}' stream ${i} transport errored:`,w),m.Vo(new W(B.UNAVAILABLE,"The operation could not be completed")))}),_(d,up.EventType.MESSAGE,w=>{var y;if(!f){let v=w.data[0];me(!!v);let C=v,b=C.error||((y=C[0])===null||y===void 0?void 0:y.error);if(b){G(Yn,`RPC '${e}' stream ${i} received error:`,b);let A=b.status,x=function(R){let L=un[R];if(L!==void 0)return Ej(L)}(A),I=b.message;x===void 0&&(x=B.INTERNAL,I="Unknown error status: "+A+" with message "+b.message),f=!0,m.Vo(new W(x,I)),d.close()}else G(Yn,`RPC '${e}' stream ${i} received:`,v),m.mo(v)}}),_(a,O6.STAT_EVENT,w=>{w.stat===UT.PROXY?G(Yn,`RPC '${e}' stream ${i} detected buffering proxy`):w.stat===UT.NOPROXY&&G(Yn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{m.Ro()},0),m}};function Qj(){return typeof window<"u"?window:null}function V_(){return typeof document<"u"?document:null}function Qp(t){return new CA(t,!0)}var Vp=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var vw=class{constructor(e,n,r,i,o,s,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Vp(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return j(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return j(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return j(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(Jt(n.toString()),Jt("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new W(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>j(this,null,function*(){this.state=0,this.start()}))}__(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},aS=class extends vw{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=foe(this.serializer,e),r=function(o){if(!("targetChange"in o))return ge.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ge.min():s.readTime?tn(s.readTime):ge.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=DA(this.serializer),n.addTarget=function(o,s){let a,c=s.target;if(a=Q_(c)?{documents:Sj(o,c)}:{query:Rj(o,c).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Cj(o,s.resumeToken);let l=bA(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ge.min())>0){a.readTime=id(o,s.snapshotVersion.toTimestamp());let l=bA(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=moe(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=DA(this.serializer),n.removeTarget=e,this.t_(n)}},cS=class extends vw{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=poe(e.writeResults,e.commitTime),r=tn(e.commitTime);return this.listener.T_(r,n)}return me(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=DA(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>kp(this.serializer,r))};this.t_(n)}};var lS=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new W(B.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,IA(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(B.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,IA(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(B.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var uS=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(Jt(n),this.g_=!1):G("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var dS=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(()=>j(this,null,function*(){va(this)&&(G("RemoteStore","Restarting streams for network reachability change."),yield function(c){return j(this,null,function*(){let l=se(c);l.v_.add(4),yield gd(l),l.x_.set("Unknown"),l.v_.delete(4),yield Yp(l)})}(this))}))}),this.x_=new uS(r,i)}};function Yp(t){return j(this,null,function*(){if(va(t))for(let e of t.F_)yield e(!0)})}function gd(t){return j(this,null,function*(){for(let e of t.F_)yield e(!1)})}function Lw(t,e){let n=se(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),nR(n)?tR(n):vd(n).Jo()&&eR(n,e))}function Bp(t,e){let n=se(t),r=vd(n);n.C_.delete(e),r.Jo()&&Yj(n,e),n.C_.size===0&&(r.Jo()?r.Xo():va(n)&&n.x_.set("Unknown"))}function eR(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}vd(t).c_(e)}function Yj(t,e){t.O_.Oe(e),vd(t).l_(e)}function tR(t){t.O_=new xA({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),vd(t).start(),t.x_.p_()}function nR(t){return va(t)&&!vd(t).Ho()&&t.C_.size>0}function va(t){return se(t).v_.size===0}function Xj(t){t.O_=void 0}function Roe(t){return j(this,null,function*(){t.C_.forEach((e,n)=>{eR(t,e)})})}function Moe(t,e){return j(this,null,function*(){Xj(t),nR(t)?(t.x_.S_(e),tR(t)):t.x_.set("Unknown")})}function Poe(t,e,n){return j(this,null,function*(){if(t.x_.set("Online"),e instanceof J_&&e.state===2&&e.cause)try{yield function(i,o){return j(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _w(t,r)}else if(e instanceof Xu?t.O_.$e(e):e instanceof Z_?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(ge.min()))try{let r=yield Hj(t.localStore);n.compareTo(r)>=0&&(yield function(o,s){let a=o.O_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.C_.get(l);u&&o.C_.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.C_.get(c);if(!u)return;o.C_.set(c,u.withResumeToken(Nn.EMPTY_BYTE_STRING,u.snapshotVersion)),Yj(o,c);let d=new od(u.target,c,l,u.sequenceNumber);eR(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){G("RemoteStore","Failed to raise snapshot:",r),yield _w(t,r)}})}function _w(t,e,n){return j(this,null,function*(){if(!ya(e))throw e;t.v_.add(1),yield gd(t),t.x_.set("Offline"),n||(n=()=>Hj(t.localStore)),t.asyncQueue.enqueueRetryable(()=>j(this,null,function*(){G("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Yp(t)}))})}function Zj(t,e){return e().catch(n=>_w(t,n,e))}function yd(t){return j(this,null,function*(){let e=se(t),n=ma(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Noe(e);)try{let i=yield Doe(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,koe(e,i)}catch(i){yield _w(e,i)}Jj(e)&&eU(e)})}function Noe(t){return va(t)&&t.D_.length<10}function koe(t,e){t.D_.push(e);let n=ma(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function Jj(t){return va(t)&&!ma(t).Ho()&&t.D_.length>0}function eU(t){ma(t).start()}function Foe(t){return j(this,null,function*(){ma(t).d_()})}function Ooe(t){return j(this,null,function*(){let e=ma(t);for(let n of t.D_)e.I_(n.mutations)})}function Loe(t,e,n){return j(this,null,function*(){let r=t.D_.shift(),i=_A.from(r,e,n);yield Zj(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield yd(t)})}function Voe(t,e){return j(this,null,function*(){e&&ma(t).P_&&(yield function(r,i){return j(this,null,function*(){if(function(s){return wj(s)&&s!==B.ABORTED}(i.code)){let o=r.D_.shift();ma(r).Zo(),yield Zj(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield yd(r)}})}(t,e)),Jj(t)&&eU(t)})}function S5(t,e){return j(this,null,function*(){let n=se(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");let r=va(n);n.v_.add(3),yield gd(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Yp(n)})}function hS(t,e){return j(this,null,function*(){let n=se(t);e?(n.v_.delete(2),yield Yp(n)):e||(n.v_.add(2),yield gd(n),n.x_.set("Unknown"))})}function vd(t){return t.N_||(t.N_=function(n,r,i){let o=se(n);return o.R_(),new aS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:Roe.bind(null,t),To:Moe.bind(null,t),u_:Poe.bind(null,t)}),t.F_.push(e=>j(this,null,function*(){e?(t.N_.Zo(),nR(t)?tR(t):t.x_.set("Unknown")):(yield t.N_.stop(),Xj(t))}))),t.N_}function ma(t){return t.B_||(t.B_=function(n,r,i){let o=se(n);return o.R_(),new cS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:Foe.bind(null,t),To:Voe.bind(null,t),E_:Ooe.bind(null,t),T_:Loe.bind(null,t)}),t.F_.push(e=>j(this,null,function*(){e?(t.B_.Zo(),yield yd(t)):(yield t.B_.stop(),t.D_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var fS=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new fn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _d(t,e){if(Jt("AsyncQueue",`${e}: ${t}`),ya(t))return new W(B.UNAVAILABLE,`${e}: ${t}`);throw t}var ww=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ie.comparator(n.key,r.key):(n,r)=>ie.comparator(n.key,r.key),this.keyedMap=mp(),this.sortedSet=new St(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ew=class{constructor(){this.L_=new St(ie.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):ue():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},ld=class t{constructor(e,n,r,i,o,s,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,ww.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var pS=class{constructor(){this.q_=void 0,this.Q_=[]}},mS=class{constructor(){this.queries=new go(e=>oj(e),Gp),this.onlineState="Unknown",this.K_=new Set}};function rR(t,e){return j(this,null,function*(){let n=se(t),r=e.query,i=!1,o=n.queries.get(r);if(o||(i=!0,o=new pS),i)try{o.q_=yield n.onListen(r)}catch(s){let a=_d(s,`Initialization of query '${Hu(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&oR(n)})}function iR(t,e){return j(this,null,function*(){let n=se(t),r=e.query,i=!1,o=n.queries.get(r);if(o){let s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function Boe(t,e){let n=se(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&oR(n)}function joe(t,e,n){let r=se(t),i=r.queries.get(e);if(i)for(let o of i.Q_)o.onError(n);r.queries.delete(e)}function oR(t){t.K_.forEach(e=>{e.next()})}var jp=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ld(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=ld.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var gS=class{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}};var xw=class{constructor(e){this.serializer=e}Ps(e){return ho(this.serializer,e)}Is(e){return e.metadata.exists?Aj(this.serializer,e.document,!1):pn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return tn(e)}},yS=class{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tU(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;let r=Qe.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){let n=new Map,r=new xw(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Ps(i.metadata.name);for(let s of i.metadata.queries){let a=(n.get(s)||Pe()).add(o);n.set(s,a)}}return n}complete(){return j(this,null,function*(){let e=yield Toe(this.localStore,new xw(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(let r of this.queries)yield Aoe(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}})}};function tU(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Cw=class{constructor(e){this.key=e}},bw=class{constructor(e){this.key=e}},Iw=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Pe(),this.mutatedKeys=Pe(),this.ua=aj(e),this.ca=new ww(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new Ew,i=n?n.ca:this.ca,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{let h=i.get(u),f=Kp(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),w=!1;h&&f?h.data.isEqual(f.data)?m!==_&&(r.track({type:3,doc:f}),w=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),w=!0,(c&&this.ua(f,c)>0||l&&this.ua(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),w=!0):h&&!f&&(r.track({type:1,doc:h}),w=!0,(c||l)&&(a=!0)),w&&(f?(s=s.add(f),o=_?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let s=e.Pa.k_();s.sort((u,d)=>function(f,m){let _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return _(f)-_(m)}(u.type,d.type)||this.ua(u.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,l=c!==this._a;return this._a=c,s.length!==0||l?{snapshot:new ld(this.query,e.ca,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new Ew,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=Pe(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new bw(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new Cw(r))}),n}Ra(e){this.oa=e.hs,this.aa=Pe();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return ld.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},vS=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},_S=class{constructor(e){this.key=e,this.ma=!1}},wS=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new go(a=>oj(a),Gp),this.pa=new Map,this.ya=new Set,this.wa=new St(ie.comparator),this.Sa=new Map,this.ba=new Op,this.Da={},this.Ca=new Map,this.va=sd.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function Uoe(t,e){return j(this,null,function*(){let n=uR(t),r,i,o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{let s=yield ad(n.localStore,dr(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=yield sR(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&Lw(n.remoteStore,s)}return i})}function sR(t,e,n,r,i){return j(this,null,function*(){t.Ma=(d,h,f)=>function(_,w,y,v){return j(this,null,function*(){let C=w.view.ha(y);C.Xi&&(C=yield fw(_.localStore,w.query,!1).then(({documents:I})=>w.view.ha(I,C)));let b=v&&v.targetChanges.get(w.targetId),A=v&&v.targetMismatches.get(w.targetId)!=null,x=w.view.applyChanges(C,_.isPrimaryClient,b,A);return ES(_,w.targetId,x.da),x.snapshot})}(t,d,h,f);let o=yield fw(t.localStore,e,!0),s=new Iw(e,o.hs),a=s.ha(o.documents),c=Pp.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,c);ES(t,n,l.da);let u=new vS(e,n,s);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot})}function $oe(t,e){return j(this,null,function*(){let n=se(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!Gp(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield cd(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Bp(n.remoteStore,r.targetId),ud(n,r.targetId)}).catch(ga))):(ud(n,r.targetId),yield cd(n.localStore,r.targetId,!0))})}function qoe(t,e,n){return j(this,null,function*(){let r=dR(t);try{let i=yield function(s,a){let c=se(s),l=Ot.now(),u=a.reduce((f,m)=>f.add(m.key),Pe()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=Er(),_=Pe();return c.os.getEntries(f,u).next(w=>{m=w,m.forEach((y,v)=>{v.isValidDocument()||(_=_.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,m)).next(w=>{d=w;let y=[];for(let v of a){let C=soe(v,d.get(v.key).overlayedDocument);C!=null&&y.push(new Ti(v.key,C,Z5(C.value.mapValue),Ht.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,y,a)}).next(w=>{h=w;let y=w.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(f,w.batchId,y)})}).then(()=>({batchId:h.batchId,changes:lj(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.Da[s.currentUser.toKey()];l||(l=new St(Re)),l=l.insert(a,c),s.Da[s.currentUser.toKey()]=l}(r,i.batchId,n),yield ss(r,i.changes),yield yd(r.remoteStore)}catch(i){let o=_d(i,"Failed to persist write");n.reject(o)}})}function nU(t,e){return j(this,null,function*(){let n=se(t);try{let r=yield Ioe(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Sa.get(o);s&&(me(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?me(s.ma):i.removedDocuments.size>0&&(me(s.ma),s.ma=!1))}),yield ss(n,r,e)}catch(r){yield ga(r)}})}function R5(t,e,n){let r=se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((o,s)=>{let a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=se(s);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.Q_)h.U_(a)&&(l=!0)}),l&&oR(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Hoe(t,e,n){return j(this,null,function*(){let r=se(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),o=i&&i.key;if(o){let s=new St(ie.comparator);s=s.insert(o,pn.newNoDocument(o,ge.min()));let a=Pe().add(o),c=new Mp(ge.min(),new Map,new St(Re),s,a);yield nU(r,c),r.wa=r.wa.remove(o),r.Sa.delete(e),lR(r)}else yield cd(r.localStore,e,!1).then(()=>ud(r,e,n)).catch(ga)})}function zoe(t,e){return j(this,null,function*(){let n=se(t),r=e.batch.batchId;try{let i=yield boe(n.localStore,e);cR(n,r,null),aR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield ss(n,i)}catch(i){yield ga(i)}})}function Woe(t,e,n){return j(this,null,function*(){let r=se(t);try{let i=yield function(s,a){let c=se(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(me(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);cR(r,e,n),aR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield ss(r,i)}catch(i){yield ga(i)}})}function Goe(t,e){return j(this,null,function*(){let n=se(t);va(n.remoteStore)||G("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=se(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(n.localStore);if(r===-1)return void e.resolve();let i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){let i=_d(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function aR(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function cR(t,e,n){let r=se(t),i=r.Da[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function ud(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||rU(t,r)})}function rU(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(Bp(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),lR(t))}function ES(t,e,n){for(let r of n)r instanceof Cw?(t.ba.addReference(r.key,e),Koe(t,r)):r instanceof bw?(G("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||rU(t,r.key)):ue()}function Koe(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(G("SyncEngine","New document in limbo: "+n),t.ya.add(r),lR(t))}function lR(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new ie(Qe.fromString(e)),r=t.va.next();t.Sa.set(r,new _S(n)),t.wa=t.wa.insert(n,r),Lw(t.remoteStore,new od(dr(md(n.path)),r,"TargetPurposeLimboResolution",Br._e))}}function ss(t,e,n){return j(this,null,function*(){let r=se(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{s.push(r.Ma(c,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){i.push(l);let u=eS.Ki(c.targetId,l);o.push(u)}}))}),yield Promise.all(s),r.fa.u_(i),yield function(c,l){return j(this,null,function*(){let u=se(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>V.forEach(l,h=>V.forEach(h.qi,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>V.forEach(h.Qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ya(d))throw d;G("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ns.get(h),m=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(m);u.ns=u.ns.insert(h,_)}}})}(r.localStore,o))})}function Qoe(t,e){return j(this,null,function*(){let n=se(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());let r=yield qj(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(c=>{c.reject(new W(B.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ss(n,r.us)}})}function Yoe(t,e){let n=se(t),r=n.Sa.get(e);if(r&&r.ma)return Pe().add(r.key);{let i=Pe(),o=n.pa.get(e);if(!o)return i;for(let s of o){let a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}function Xoe(t,e){return j(this,null,function*(){let n=se(t),r=yield fw(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&ES(n,e.targetId,i.da),i})}function Zoe(t,e){return j(this,null,function*(){let n=se(t);return Gj(n.localStore,e).then(r=>ss(n,r))})}function Joe(t,e,n,r){return j(this,null,function*(){let i=se(t),o=yield function(a,c){let l=se(a),u=se(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.vn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):V.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?yield yd(i.remoteStore):n==="acknowledged"||n==="rejected"?(cR(i,e,r||null),aR(i,e),function(a,c){se(se(a).mutationQueue).Mn(c)}(i.localStore,e)):ue(),yield ss(i,o)):G("SyncEngine","Cannot apply mutation batch with id: "+e)})}function ese(t,e){return j(this,null,function*(){let n=se(t);if(uR(n),dR(n),e===!0&&n.Fa!==!0){let r=n.sharedClientState.getAllActiveQueryTargets(),i=yield M5(n,r.toArray());n.Fa=!0,yield hS(n.remoteStore,!0);for(let o of i)Lw(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){let r=[],i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(ud(n,s),cd(n.localStore,s,!0))),Bp(n.remoteStore,s)}),yield i,yield M5(n,r),function(s){let a=se(s);a.Sa.forEach((c,l)=>{Bp(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new St(ie.comparator)}(n),n.Fa=!1,yield hS(n.remoteStore,!1)}})}function M5(t,e,n){return j(this,null,function*(){let r=se(t),i=[],o=[];for(let s of e){let a,c=r.pa.get(s);if(c&&c.length!==0){a=yield ad(r.localStore,dr(c[0]));for(let l of c){let u=r.ga.get(l),d=yield Xoe(r,u);d.snapshot&&o.push(d.snapshot)}}else{let l=yield Wj(r.localStore,s);a=yield ad(r.localStore,l),yield sR(r,iU(l),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i})}function iU(t){return ij(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function tse(t){return function(n){return se(se(n).persistence).Li()}(se(t).localStore)}function nse(t,e,n,r){return j(this,null,function*(){let i=se(t);if(i.Fa)return void G("SyncEngine","Ignoring unexpected query state notification.");let o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield Gj(i.localStore,sj(o[0])),a=Mp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Nn.EMPTY_BYTE_STRING);yield ss(i,s,a);break}case"rejected":yield cd(i.localStore,e,!0),ud(i,e,r);break;default:ue()}})}function rse(t,e,n){return j(this,null,function*(){let r=uR(t);if(r.Fa){for(let i of e){if(r.pa.has(i)){G("SyncEngine","Adding an already active target "+i);continue}let o=yield Wj(r.localStore,i),s=yield ad(r.localStore,o);yield sR(r,iU(o),s.targetId,!1,s.resumeToken),Lw(r.remoteStore,s)}for(let i of n)r.pa.has(i)&&(yield cd(r.localStore,i,!1).then(()=>{Bp(r.remoteStore,i),ud(r,i)}).catch(ga))}})}function uR(t){let e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yoe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hoe.bind(null,e),e.fa.u_=Boe.bind(null,e.eventManager),e.fa.xa=joe.bind(null,e.eventManager),e}function dR(t){let e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zoe.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Woe.bind(null,e),e}function ise(t,e,n){let r=se(t);(function(o,s,a){return j(this,null,function*(){try{let c=yield s.getMetadata();if(yield function(f,m){let _=se(f),w=tn(m.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",y=>_.$r.getBundleMetadata(y,m.id)).then(y=>!!y&&y.createTime.compareTo(w)>=0)}(o.localStore,c))return yield s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(tU(c));let l=new yS(c,o.localStore,s.serializer),u=yield s.Oa();for(;u;){let h=yield l.na(u);h&&a._updateProgress(h),u=yield s.Oa()}let d=yield l.complete();return yield ss(o,d.sa,void 0),yield function(f,m){let _=se(f);return _.persistence.runTransaction("Save bundle","readwrite",w=>_.$r.saveBundleMetadata(w,m))}(o.localStore,c),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(c){return si("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Up=class{constructor(){this.synchronizeTabs=!1}initialize(e){return j(this,null,function*(){this.serializer=Qp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return $j(this.persistence,new hw,e.initialUser,this.serializer)}createPersistence(e){return new uw(dw.Hr,this.serializer)}createSharedClientState(e){return new gw}terminate(){return j(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Dw=class t extends Up{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){return j(this,null,function*(){yield Yw(t.prototype,this,"initialize").call(this,e),yield this.Na.initialize(this,e),yield dR(this.Na.syncEngine),yield yd(this.Na.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return $j(this.persistence,new hw,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let r=this.persistence.referenceDelegate.garbageCollector;return new BA(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let r=new rA(n,this.persistence);return new nA(e.asyncQueue,r)}createPersistence(e){let n=JS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?oi.withCacheSize(this.cacheSizeBytes):oi.DEFAULT;return new JA(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,Qj(),V_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new gw}},xS=class t extends Dw{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return j(this,null,function*(){yield Yw(t.prototype,this,"initialize").call(this,e);let n=this.Na.syncEngine;this.sharedClientState instanceof Ep&&(this.sharedClientState.syncEngine={Zs:Joe.bind(null,n),Xs:nse.bind(null,n),eo:rse.bind(null,n),Li:tse.bind(null,n),Ys:Zoe.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(r=>j(this,null,function*(){yield ese(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=Qj();if(!Ep.D(n))throw new W(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=JS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ep(n,e.asyncQueue,r,e.clientId,e.initialUser)}},$p=class{initialize(e,n){return j(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>R5(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qoe.bind(null,this.syncEngine),yield hS(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new mS}()}createDatastore(e){let n=Qp(e.databaseInfo.databaseId),r=function(o){return new sS(o)}(e.databaseInfo);return function(o,s,a,c){return new lS(o,s,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new dS(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>R5(this.syncEngine,n,0),function(){return yw.D()?new yw:new iS}())}createSyncEngine(e,n){return function(i,o,s,a,c,l,u){let d=new wS(i,o,s,a,c,l);return u&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return j(this,null,function*(){var e;yield function(r){return j(this,null,function*(){let i=se(r);G("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield gd(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function P5(t,e=10240){let n=0;return{read(){return j(this,null,function*(){if(n<t.byteLength){let i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}})},cancel(){return j(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var dd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):Jt("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var CS=class{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new fn,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){return j(this,null,function*(){return this.metadata.promise})}Oa(){return j(this,null,function*(){return yield this.getMetadata(),this.Qa()})}Qa(){return j(this,null,function*(){let e=yield this.Ka();if(e===null)return null;let n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a(`length string (${n}) is not valid number`);let i=yield this.Ua(r);return new gS(JSON.parse(i),e.length+r)})}Wa(){return this.buffer.findIndex(e=>e===123)}Ka(){return j(this,null,function*(){for(;this.Wa()<0&&!(yield this.Ga()););if(this.buffer.length===0)return null;let e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ua(e){return j(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ga())&&this.$a("Reached the end of bundle when more is expected.");let n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){return j(this,null,function*(){let e=yield this.ka.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var bS=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return j(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new W(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(i,o){return j(this,null,function*(){let s=se(i),a={documents:o.map(d=>Np(s.serializer,d))},c=yield s.vo("BatchGetDocuments",s.serializer.databaseId,Qe.emptyPath(),a,o.length),l=new Map;c.forEach(d=>{let h=hoe(s.serializer,d);l.set(h.key.toString(),h)});let u=[];return o.forEach(d=>{let h=l.get(d.toString());me(!!h),u.push(h)}),u})}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return j(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{let i=ie.fromPath(r);this.mutations.push(new Ap(i,this.precondition(i)))}),yield function(r,i){return j(this,null,function*(){let o=se(r),s={writes:i.map(a=>kp(o.serializer,a))};yield o.So("Commit",o.serializer.databaseId,Qe.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ue();n=ge.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new W(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ge.min())?Ht.exists(!1):Ht.updateTime(n):Ht.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ge.min()))throw new W(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ht.updateTime(n)}return Ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var IS=class{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new Vp(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(()=>j(this,null,function*(){let e=new bS(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})}))}Ja(e){try{let n=this.updateFunction(e);return!zp(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!wj(n)}return!1}};var DS=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=hn.UNAUTHENTICATED,this.clientId=U_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>j(this,null,function*(){G("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(B.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new fn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>j(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=_d(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function B_(t,e){return j(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>j(this,null,function*(){r.isEqual(i)||(yield qj(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function TS(t,e){return j(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield hR(t);G("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>S5(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>S5(e.remoteStore,i)),t._onlineComponents=e})}function oU(t){return t.name==="FirebaseError"?t.code===B.FAILED_PRECONDITION||t.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function hR(t){return j(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{yield B_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!oU(n))throw n;si("Error using user provided cache. Falling back to memory cache: "+n),yield B_(t,new Up)}}else G("FirestoreClient","Using default OfflineComponentProvider"),yield B_(t,new Up);return t._offlineComponents})}function Vw(t){return j(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),yield TS(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),yield TS(t,new $p))),t._onlineComponents})}function sU(t){return hR(t).then(e=>e.persistence)}function fR(t){return hR(t).then(e=>e.localStore)}function aU(t){return Vw(t).then(e=>e.remoteStore)}function pR(t){return Vw(t).then(e=>e.syncEngine)}function ose(t){return Vw(t).then(e=>e.datastore)}function hd(t){return j(this,null,function*(){let e=yield Vw(t),n=e.eventManager;return n.onListen=Uoe.bind(null,e.syncEngine),n.onUnlisten=$oe.bind(null,e.syncEngine),n})}function sse(t){return t.asyncQueue.enqueue(()=>j(this,null,function*(){let e=yield sU(t),n=yield aU(t);return e.setNetworkEnabled(!0),function(i){let o=se(i);return o.v_.delete(0),Yp(o)}(n)}))}function ase(t){return t.asyncQueue.enqueue(()=>j(this,null,function*(){let e=yield sU(t),n=yield aU(t);return e.setNetworkEnabled(!1),function(i){return j(this,null,function*(){let o=se(i);o.v_.add(0),yield gd(o),o.x_.set("Offline")})}(n)}))}function cse(t,e){let n=new fn;return t.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return function(i,o,s){return j(this,null,function*(){try{let a=yield function(l,u){let d=se(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new W(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=_d(a,`Failed to get document '${o} from cache`);s.reject(c)}})}(yield fR(t),e,n)})),n.promise}function cU(t,e,n={}){let r=new fn;return t.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return function(o,s,a,c,l){let u=new dd({next:h=>{s.enqueueAndForget(()=>iR(o,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new W(B.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new W(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new jp(md(a.path),u,{includeMetadataChanges:!0,Z_:!0});return rR(o,d)}(yield hd(t),t.asyncQueue,e,n,r)})),r.promise}function lse(t,e){let n=new fn;return t.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return function(i,o,s){return j(this,null,function*(){try{let a=yield fw(i,o,!0),c=new Iw(o,a.hs),l=c.ha(a.documents),u=c.applyChanges(l,!1);s.resolve(u.snapshot)}catch(a){let c=_d(a,`Failed to execute query '${o} against cache`);s.reject(c)}})}(yield fR(t),e,n)})),n.promise}function lU(t,e,n={}){let r=new fn;return t.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return function(o,s,a,c,l){let u=new dd({next:h=>{s.enqueueAndForget(()=>iR(o,d)),h.fromCache&&c.source==="server"?l.reject(new W(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new jp(a,u,{includeMetadataChanges:!0,Z_:!0});return rR(o,d)}(yield hd(t),t.asyncQueue,e,n,r)})),r.promise}function use(t,e){let n=new dd(e);return t.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return function(i,o){se(i).K_.add(o),o.next()}(yield hd(t),n)})),()=>{n.La(),t.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return function(i,o){se(i).K_.delete(o)}(yield hd(t),n)}))}}function dse(t,e,n,r){let i=function(s,a){let c;return c=typeof s=="string"?xj().encode(s):s,function(u,d){return new CS(u,d)}(function(u,d){if(u instanceof Uint8Array)return P5(u,d);if(u instanceof ArrayBuffer)return P5(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(n,Qp(e));t.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){ise(yield pR(t),i,r)}))}function hse(t,e){return t.asyncQueue.enqueue(()=>j(this,null,function*(){return function(r,i){let o=se(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(yield fR(t),e)}))}function uU(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var N5=new Map;function mR(t,e,n){if(!n)throw new W(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function gR(t,e,n,r){if(e===!0&&r===!0)throw new W(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function k5(t){if(!ie.isDocumentKey(t))throw new W(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function F5(t){if(ie.isDocumentKey(t))throw new W(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function Ye(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Bw(t);throw new W(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function dU(t,e){if(e<=0)throw new W(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Tw=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new W(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new W(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uU((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new W(B.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},qc=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new W(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new W(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WT;switch(r.type){case"firstParty":return new YT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=N5.get(n);r&&(G("ComponentProvider","Removing Datastore"),N5.delete(n),r.terminate())}(this),Promise.resolve()}};function hU(t,e,n,r={}){var i;let o=(t=Ye(t,qc))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=hn.MOCK_USER;else{a=nm(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new W(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new hn(l)}t._authCredentials=new GT(new j_(a,c))}}var $n=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},It=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},fo=class t extends $n{constructor(e,n,r){super(e,n,md(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new ie(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function yR(t,e,...n){if(t=qe(t),mR("collection","path",e),t instanceof qc){let r=Qe.fromString(e,...n);return F5(r),new fo(t,null,r)}{if(!(t instanceof It||t instanceof fo))throw new W(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Qe.fromString(e,...n));return F5(r),new fo(t.firestore,null,r)}}function fU(t,e){if(t=Ye(t,qc),mR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new W(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $n(t,null,function(r){return new Di(Qe.emptyPath(),r)}(e))}function Xp(t,e,...n){if(t=qe(t),arguments.length===1&&(e=U_.newId()),mR("doc","path",e),t instanceof qc){let r=Qe.fromString(e,...n);return k5(r),new It(t,null,new ie(r))}{if(!(t instanceof It||t instanceof fo))throw new W(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Qe.fromString(e,...n));return k5(r),new It(t.firestore,t instanceof fo?t.converter:null,new ie(r))}}function vR(t,e){return t=qe(t),e=qe(e),(t instanceof It||t instanceof fo)&&(e instanceof It||e instanceof fo)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function _R(t,e){return t=qe(t),e=qe(e),t instanceof $n&&e instanceof $n&&t.firestore===e.firestore&&Gp(t._query,e._query)&&t.converter===e.converter}var AS=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Vp(this,"async_queue_retry"),this._u=()=>{let n=V_();n&&G("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=V_();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=V_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new fn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return j(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!ya(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Jt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=fS.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&ue()}verifyOperationInProgress(){}hu(){return j(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};function SS(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}var RS=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new fn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var pU=-1,Nt=class extends qc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new AS}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||mU(this),this._firestoreClient.terminate()}};function xn(t){return t._firestoreClient||mU(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function mU(t){var e,n,r;let i=t._freezeSettings(),o=function(a,c,l,u){return new iA(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,uU(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new DS(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function gU(t,e){IU(t=Ye(t,Nt));let n=xn(t);if(n._uninitializedComponentsProvider)throw new W(B.FAILED_PRECONDITION,"SDK cache is already specified.");si("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let r=t._freezeSettings(),i=new $p;return vU(n,i,new Dw(i,r.cacheSizeBytes,e?.forceOwnership))}function yU(t){IU(t=Ye(t,Nt));let e=xn(t);if(e._uninitializedComponentsProvider)throw new W(B.FAILED_PRECONDITION,"SDK cache is already specified.");si("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),r=new $p;return vU(e,r,new xS(r,n.cacheSizeBytes))}function vU(t,e,n){let r=new fn;return t.asyncQueue.enqueue(()=>j(this,null,function*(){try{yield B_(t,n),yield TS(t,e),r.resolve()}catch(i){let o=i;if(!oU(o))throw o;si("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}})).then(()=>r.promise)}function _U(t){if(t._initialized&&!t._terminated)throw new W(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new fn;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>j(this,null,function*(){try{yield function(r){return j(this,null,function*(){if(!ts.D())return Promise.resolve();let i=r+"main";yield ts.delete(i)})}(JS(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function wU(t){return function(n){let r=new fn;return n.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return Goe(yield pR(n),r)})),r.promise}(xn(t=Ye(t,Nt)))}function EU(t){return sse(xn(t=Ye(t,Nt)))}function xU(t){return ase(xn(t=Ye(t,Nt)))}function CU(t,e){let n=xn(t=Ye(t,Nt)),r=new RS;return dse(n,t._databaseId,e,r),r}function bU(t,e){return hse(xn(t=Ye(t,Nt)),e).then(n=>n?new $n(t,null,n.query):null)}function IU(t){if(t._initialized||t._terminated)throw new W(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var yo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Nn.fromBase64String(e))}catch(n){throw new W(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ai=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var is=class{constructor(e){this._methodName=e}};var Hc=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}};var fse=/^__.*__$/,MS=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new fa(e,this.data,n,this.fieldTransforms)}},Aw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function DU(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}var Sw=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Rw(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(DU(this.du)&&fse.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},PS=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qp(e)}Su(e,n,r,i=!1){return new Sw({du:e,methodName:n,wu:r,path:en.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Kc(t){let e=t._freezeSettings(),n=Qp(t._databaseId);return new PS(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jw(t,e,n,r,i,o={}){let s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);xR("Data must be an object, but it was:",s,r);let a=SU(r,s),c,l;if(o.merge)c=new jr(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let d of o.mergeFields){let h=LS(e,d,n);if(!s.contains(h))throw new W(B.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);MU(u,h)||u.push(h)}c=new jr(u),l=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=s.fieldTransforms;return new MS(new Xn(a),c,l)}var qp=class t extends is{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function TU(t,e,n){return new Sw({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var NS=class t extends is{_toFieldTransform(e){return new jc(e.path,new da)}isEqual(e){return e instanceof t}},kS=class t extends is{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=TU(this,e,!0),r=this.bu.map(o=>Qc(o,n)),i=new ns(r);return new jc(e.path,i)}isEqual(e){return e instanceof t&&Jw(this.bu,e.bu)}},FS=class t extends is{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){let n=TU(this,e,!0),r=this.bu.map(o=>Qc(o,n)),i=new rs(r);return new jc(e.path,i)}isEqual(e){return e instanceof t&&Jw(this.bu,e.bu)}},OS=class t extends is{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){let n=new ha(e.serializer,fj(e.serializer,this.Du));return new jc(e.path,n)}isEqual(e){return e instanceof t&&this.Du===e.Du}};function wR(t,e,n,r){let i=t.Su(1,e,n);xR("Data must be an object, but it was:",i,r);let o=[],s=Xn.empty();Gc(r,(c,l)=>{let u=CR(e,c,n);l=qe(l);let d=i.fu(u);if(l instanceof qp)o.push(u);else{let h=Qc(l,d);h!=null&&(o.push(u),s.set(u,h))}});let a=new jr(o);return new Aw(s,a,i.fieldTransforms)}function ER(t,e,n,r,i,o){let s=t.Su(1,e,n),a=[LS(e,r,n)],c=[i];if(o.length%2!=0)throw new W(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)a.push(LS(e,o[h])),c.push(o[h+1]);let l=[],u=Xn.empty();for(let h=a.length-1;h>=0;--h)if(!MU(l,a[h])){let f=a[h],m=c[h];m=qe(m);let _=s.fu(f);if(m instanceof qp)l.push(f);else{let w=Qc(m,_);w!=null&&(l.push(f),u.set(f,w))}}let d=new jr(l);return new Aw(u,d,s.fieldTransforms)}function AU(t,e,n,r=!1){return Qc(n,t.Su(r?4:3,e))}function Qc(t,e){if(RU(t=qe(t)))return xR("Unsupported field value:",e,t),SU(t,e);if(t instanceof is)return function(r,i){if(!DU(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=Qc(a,i.gu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ot.fromDate(r);return{timestampValue:id(i.serializer,o)}}if(r instanceof Ot){let o=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:id(i.serializer,o)}}if(r instanceof Hc)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof yo)return{bytesValue:Cj(i.serializer,r._byteString)};if(r instanceof It){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:YS(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Bw(r)}`)}(t,e)}function SU(t,e){let n={};return Q5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gc(t,(r,i)=>{let o=Qc(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function RU(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof Hc||t instanceof yo||t instanceof It||t instanceof is)}function xR(t,e,n){if(!RU(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Bw(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function LS(t,e,n){if((e=qe(e))instanceof Ai)return e._internalPath;if(typeof e=="string")return CR(t,e);throw Rw("Field path arguments must be of type string or ",t,!1,void 0,n)}var pse=new RegExp("[~\\*/\\[\\]]");function CR(t,e,n){if(e.search(pse)>=0)throw Rw(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ai(...e.split("."))._internalPath}catch{throw Rw(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rw(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new W(B.INVALID_ARGUMENT,a+t+c)}function MU(t,e){return t.some(n=>n.isEqual(e))}var zc=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new VS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Uw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},VS=class extends zc{data(){return super.data()}};function Uw(t,e){return typeof e=="string"?CR(t,e):e instanceof Ai?e._internalPath:e._delegate._internalPath}function PU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Hp=class{},Wc=class extends Hp{};function as(t,e,...n){let r=[];e instanceof Hp&&r.push(e),r=r.concat(n),function(o){let s=o.filter(c=>c instanceof BS).length,a=o.filter(c=>c instanceof Mw).length;if(s>1||s>0&&a>0)throw new W(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Mw=class t extends Wc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return $U(e._query,n),new $n(e.firestore,e.converter,yA(e._query,n))}_parse(e){let n=Kc(e.firestore);return function(o,s,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new W(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){L5(d,u);let f=[];for(let m of d)f.push(O5(c,o,m));h={arrayValue:{values:f}}}else h=O5(c,o,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||L5(d,u),h=AU(a,s,d,u==="in"||u==="not-in");return Ge.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function NU(t,e,n){let r=e,i=Uw("where",t);return Mw._create(i,r,n)}var BS=class t extends Hp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)$U(s,c),s=yA(s,c)}(e._query,n),new $n(e.firestore,e.converter,yA(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var jS=class t extends Wc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(i,o,s){if(i.startAt!==null)throw new W(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new W(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vc(o,s)}(e._query,this._field,this._direction);return new $n(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Di(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}};function kU(t,e="asc"){let n=e,r=Uw("orderBy",t);return jS._create(r,n)}var Pw=class t extends Wc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){return new $n(e.firestore,e.converter,X_(e._query,this._limit,this._limitType))}};function FU(t){return dU("limit",t),Pw._create("limit",t,"F")}function OU(t){return dU("limitToLast",t),Pw._create("limitToLast",t,"L")}var Nw=class t extends Wc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=UU(e,this.type,this._docOrFields,this._inclusive);return new $n(e.firestore,e.converter,function(i,o){return new Di(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}};function LU(...t){return Nw._create("startAt",t,!0)}function VU(...t){return Nw._create("startAfter",t,!1)}var kw=class t extends Wc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=UU(e,this.type,this._docOrFields,this._inclusive);return new $n(e.firestore,e.converter,function(i,o){return new Di(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}};function BU(...t){return kw._create("endBefore",t,!1)}function jU(...t){return kw._create("endAt",t,!0)}function UU(t,e,n,r){if(n[0]=qe(n[0]),n[0]instanceof zc)return function(o,s,a,c,l){if(!c)throw new W(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of Yu(o))if(d.field.isKeyField())u.push(Lc(s,c.key));else{let h=c.data.field(d.field);if(Ow(h))throw new W(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new W(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new mo(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{let i=Kc(t.firestore);return function(s,a,c,l,u,d){let h=s.explicitOrderBy;if(u.length>h.length)throw new W(B.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let m=0;m<u.length;m++){let _=u[m];if(h[m].field.isKeyField()){if(typeof _!="string")throw new W(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof _}`);if(!KS(s)&&_.indexOf("/")!==-1)throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${_}' contains a slash.`);let w=s.path.child(Qe.fromString(_));if(!ie.isDocumentKey(w))throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);let y=new ie(w);f.push(Lc(a,y))}else{let w=AU(c,l,_);f.push(w)}}return new mo(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function O5(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new W(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KS(e)&&n.indexOf("/")!==-1)throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Qe.fromString(n));if(!ie.isDocumentKey(r))throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lc(t,new ie(r))}if(n instanceof It)return Lc(t,n._key);throw new W(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bw(n)}.`)}function L5(t,e){if(!Array.isArray(t)||t.length===0)throw new W(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $U(t,e){let n=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var fd=class{convertValue(e,n="none"){switch(Oc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ca(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Gc(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Hc(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=WS(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ip(e));default:return null}}convertTimestamp(e){let n=aa(e);return new Ot(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Qe.fromString(e);me(kj(r));let i=new la(r.get(1),r.get(3)),o=new ie(r.popFirst(5));return i.isEqual(n)||Jt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function $w(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var US=class extends fd{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}};var es=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ci=class extends zc{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Uw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},oa=class extends ci{data(e={}){return super.data(e)}},Si=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new es(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new oa(this._firestore,this._userDataWriter,r.key,r,new es(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new es(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new es(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:mse(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function mse(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}function bR(t,e){return t instanceof ci&&e instanceof ci?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Si&&e instanceof Si&&t._firestore===e._firestore&&_R(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function qU(t){t=Ye(t,It);let e=Ye(t.firestore,Nt);return cU(xn(e),t._key).then(n=>AR(e,t,n))}var os=class extends fd{constructor(e){super(),this.firestore=e}convertBytes(e){return new yo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}};function HU(t){t=Ye(t,It);let e=Ye(t.firestore,Nt),n=xn(e),r=new os(e);return cse(n,t._key).then(i=>new ci(e,r,t._key,i,new es(i!==null&&i.hasLocalMutations,!0),t.converter))}function zU(t){t=Ye(t,It);let e=Ye(t.firestore,Nt);return cU(xn(e),t._key,{source:"server"}).then(n=>AR(e,t,n))}function WU(t){t=Ye(t,$n);let e=Ye(t.firestore,Nt),n=xn(e),r=new os(e);return PU(t._query),lU(n,t._query).then(i=>new Si(e,r,t,i))}function GU(t){t=Ye(t,$n);let e=Ye(t.firestore,Nt),n=xn(e),r=new os(e);return lse(n,t._query).then(i=>new Si(e,r,t,i))}function KU(t){t=Ye(t,$n);let e=Ye(t.firestore,Nt),n=xn(e),r=new os(e);return lU(n,t._query,{source:"server"}).then(i=>new Si(e,r,t,i))}function IR(t,e,n){t=Ye(t,It);let r=Ye(t.firestore,Nt),i=$w(t.converter,e,n);return wd(r,[jw(Kc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ht.none())])}function DR(t,e,n,...r){t=Ye(t,It);let i=Ye(t.firestore,Nt),o=Kc(i),s;return s=typeof(e=qe(e))=="string"||e instanceof Ai?ER(o,"updateDoc",t._key,e,n,r):wR(o,"updateDoc",t._key,e),wd(i,[s.toMutation(t._key,Ht.exists(!0))])}function QU(t){return wd(Ye(t.firestore,Nt),[new pa(t._key,Ht.none())])}function YU(t,e){let n=Ye(t.firestore,Nt),r=Xp(t),i=$w(t.converter,e);return wd(n,[jw(Kc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ht.exists(!1))]).then(()=>r)}function TR(t,...e){var n,r,i;t=qe(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||SS(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges};if(SS(e[s])){let d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,l,u;if(t instanceof It)l=Ye(t.firestore,Nt),u=md(t._key.path),c={next:d=>{e[s]&&e[s](AR(l,t,d))},error:e[s+1],complete:e[s+2]};else{let d=Ye(t,$n);l=Ye(d.firestore,Nt),u=d._query;let h=new os(l);c={next:f=>{e[s]&&e[s](new Si(l,h,d,f))},error:e[s+1],complete:e[s+2]},PU(t._query)}return function(h,f,m,_){let w=new dd(_),y=new jp(f,w,m);return h.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return rR(yield hd(h),y)})),()=>{w.La(),h.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return iR(yield hd(h),y)}))}}(xn(l),u,a,c)}function XU(t,e){return use(xn(t=Ye(t,Nt)),SS(e)?e:{next:e})}function wd(t,e){return function(r,i){let o=new fn;return r.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){return qoe(yield pR(r),i,o)})),o.promise}(xn(t),e)}function AR(t,e,n){let r=n.docs.get(e._key),i=new os(t);return new ci(t,i,e._key,r,new es(n.hasPendingWrites,n.fromCache),e.converter)}var gse={maxAttempts:5};var Fw=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Kc(e)}set(e,n,r){this._verifyNotCommitted();let i=ra(e,this._firestore),o=$w(i.converter,n,r),s=jw(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ht.none())),this}update(e,n,r,...i){this._verifyNotCommitted();let o=ra(e,this._firestore),s;return s=typeof(n=qe(n))=="string"||n instanceof Ai?ER(this._dataReader,"WriteBatch.update",o._key,n,r,i):wR(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Ht.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ra(e,this._firestore);return this._mutations=this._mutations.concat(new pa(n._key,Ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ra(t,e){if((t=qe(t)).firestore!==e)throw new W(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var $S=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=Kc(n)}get(n){let r=ra(n,this._firestore),i=new US(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return ue();let s=o[0];if(s.isFoundDocument())return new zc(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new zc(this._firestore,i,r._key,null,r.converter);throw ue()})}set(n,r,i){let o=ra(n,this._firestore),s=$w(o.converter,r,i),a=jw(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){let s=ra(n,this._firestore),a;return a=typeof(r=qe(r))=="string"||r instanceof Ai?ER(this._dataReader,"Transaction.update",s._key,r,i,o):wR(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){let r=ra(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=ra(e,this._firestore),r=new os(this._firestore);return super.get(e).then(i=>new ci(this._firestore,r,n._key,i._document,new es(!1,!1),n.converter))}};function ZU(t,e,n){t=Ye(t,Nt);let r=Object.assign(Object.assign({},gse),n);return function(o){if(o.maxAttempts<1)throw new W(B.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let c=new fn;return o.asyncQueue.enqueueAndForget(()=>j(this,null,function*(){let l=yield ose(o);new IS(o.asyncQueue,l,a,s,c).ja()})),c.promise}(xn(t),i=>e(new $S(t,i)),r)}function JU(){return new qp("deleteField")}function e9(){return new NS("serverTimestamp")}function t9(...t){return new kS("arrayUnion",t)}function n9(...t){return new FS("arrayRemove",t)}function r9(t){return new OS("increment",t)}(function(e,n=!0){(function(i){pd=i})(am),_a(new Cr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Nt(new KT(r.getProvider("auth-internal")),new ZT(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new W(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(l.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),li(B6,"4.4.3",e),li(B6,"4.4.3","esm2017")})();var yse="@firebase/firestore-compat",vse="0.3.26";function kR(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new W("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function i9(){if(typeof Uint8Array>"u")throw new W("unimplemented","Uint8Arrays are not available in this environment.")}function o9(){if(!Y5())throw new W("unimplemented","Blobs are unavailable in Firestore in this environment.")}var qw=class t{constructor(e){this._delegate=e}static fromBase64String(e){return o9(),new t(yo.fromBase64String(e))}static fromUint8Array(e){return i9(),new t(yo.fromUint8Array(e))}toBase64(){return o9(),this._delegate.toBase64()}toUint8Array(){return i9(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function SR(t){return _se(t,["next","error","complete"])}function _se(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}var RR=class{enableIndexedDbPersistence(e,n){return gU(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return yU(e._delegate)}clearIndexedDbPersistence(e){return _U(e._delegate)}},Hw=class{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof la||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&si("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){hU(this._delegate,e,n,r)}enableNetwork(){return EU(this._delegate)}disableNetwork(){return xU(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gR("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return wU(this._delegate)}onSnapshotsInSync(e){return XU(this._delegate,e)}get app(){if(!this._appCompat)throw new W("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cd(this,yR(this._delegate,e))}catch(n){throw hr(n,"collection()","Firestore.collection()")}}doc(e){try{return new vo(this,Xp(this._delegate,e))}catch(n){throw hr(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Jc(this,fU(this._delegate,e))}catch(n){throw hr(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ZU(this._delegate,n=>e(new zw(this,n)))}batch(){return xn(this._delegate),new Ww(new Fw(this._delegate,e=>wd(this._delegate,e)))}loadBundle(e){return CU(this._delegate,e)}namedQuery(e){return bU(this._delegate,e).then(n=>n?new Jc(this,n):null)}},Ed=class extends fd{constructor(e){super(),this.firestore=e}convertBytes(e){return new qw(new yo(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return vo.forKey(n,this.firestore,null)}};function wse(t){V5(t)}var zw=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ed(e)}get(e){let n=Yc(e);return this._delegate.get(n).then(r=>new Xc(this._firestore,new ci(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){let i=Yc(e);return r?(kR("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Yc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Yc(e);return this._delegate.delete(n),this}},Ww=class{constructor(e){this._delegate=e}set(e,n,r){let i=Yc(e);return r?(kR("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){let o=Yc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){let n=Yc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},xd=class t{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){let r=new oa(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zc(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let r=t.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new t(e,new Ed(e),n),i.set(n,o)),o}};xd.INSTANCES=new WeakMap;var vo=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ed(e)}static forPath(e,n,r){if(e.length%2!==0)throw new W("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new It(n._delegate,r,new ie(e)))}static forKey(e,n,r){return new t(n,new It(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cd(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cd(this.firestore,yR(this._delegate,e))}catch(n){throw hr(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=qe(e),e instanceof It?vR(this._delegate,e):!1}set(e,n){n=kR("DocumentReference.set",n);try{return n?IR(this._delegate,e,n):IR(this._delegate,e)}catch(r){throw hr(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?DR(this._delegate,e):DR(this._delegate,e,n,...r)}catch(i){throw hr(i,"updateDoc()","DocumentReference.update()")}}delete(){return QU(this._delegate)}onSnapshot(...e){let n=s9(e),r=a9(e,i=>new Xc(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return TR(this._delegate,n,r)}get(e){let n;return e?.source==="cache"?n=HU(this._delegate):e?.source==="server"?n=zU(this._delegate):n=qU(this._delegate),n.then(r=>new Xc(this.firestore,new ci(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(xd.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function hr(t,e,n){return t.message=t.message.replace(e,n),t}function s9(t){for(let e of t)if(typeof e=="object"&&!SR(e))return e;return{}}function a9(t,e){var n,r;let i;return SR(t[0])?i=t[0]:SR(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Xc=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new vo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return bR(this._delegate,e._delegate)}},Zc=class extends Xc{data(e){let n=this._delegate.data(e);return this._delegate._converter||B5(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Jc=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ed(e)}where(e,n,r){try{return new t(this.firestore,as(this._delegate,NU(e,n,r)))}catch(i){throw hr(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,as(this._delegate,kU(e,n)))}catch(r){throw hr(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,as(this._delegate,FU(e)))}catch(n){throw hr(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,as(this._delegate,OU(e)))}catch(n){throw hr(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,as(this._delegate,LU(...e)))}catch(n){throw hr(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,as(this._delegate,VU(...e)))}catch(n){throw hr(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,as(this._delegate,BU(...e)))}catch(n){throw hr(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,as(this._delegate,jU(...e)))}catch(n){throw hr(n,"endAt()","Query.endAt()")}}isEqual(e){return _R(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=GU(this._delegate):e?.source==="server"?n=KU(this._delegate):n=WU(this._delegate),n.then(r=>new Zp(this.firestore,new Si(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let n=s9(e),r=a9(e,i=>new Zp(this.firestore,new Si(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return TR(this._delegate,n,r)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(xd.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},MR=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Zc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Zp=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Jc(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new MR(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Zc(this._firestore,r))})}isEqual(e){return bR(this._delegate,e._delegate)}},Cd=class t extends Jc{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new vo(this.firestore,e):null}doc(e){try{return e===void 0?new vo(this.firestore,Xp(this._delegate)):new vo(this.firestore,Xp(this._delegate,e))}catch(n){throw hr(n,"doc()","CollectionReference.doc()")}}add(e){return YU(this._delegate,e).then(n=>new vo(this.firestore,n))}isEqual(e){return vR(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(xd.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Yc(t){return Ye(t,It)}var PR=class t{constructor(...e){this._delegate=new Ai(...e)}static documentId(){return new t(en.keyField().canonicalString())}isEqual(e){return e=qe(e),e instanceof Ai?this._delegate._internalPath.isEqual(e._internalPath):!1}};var NR=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=e9();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=JU();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=t9(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=n9(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=r9(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Ese={Firestore:Hw,GeoPoint:Hc,Timestamp:Ot,Blob:qw,Transaction:zw,WriteBatch:Ww,DocumentReference:vo,DocumentSnapshot:Xc,Query:Jc,QueryDocumentSnapshot:Zc,QuerySnapshot:Zp,CollectionReference:Cd,FieldPath:PR,FieldValue:NR,setLogLevel:wse,CACHE_SIZE_UNLIMITED:pU};function xse(t,e){t.INTERNAL.registerComponent(new Cr("firestore-compat",n=>{let r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Ese)))}function Cse(t){xse(t,(e,n)=>new Hw(e,n,new RR)),t.registerVersion(yse,vse)}Cse(On);function bse(t,e=ba){return new Fe(n=>{let r;return e!=null?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{r?.()}})}function c9(t,e){return bse(t,e)}function Ise(t,e){return c9(t,e).pipe(Ia(void 0),Nd(),fe(n=>{let[r,i]=n;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function LR(t,e){return c9(t,e).pipe(fe(n=>({payload:n,type:"query"})))}var Gw=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let r=this.ref.collection(e),{ref:i,query:o}=f9(r,n);return new Qw(i,o,this.afs)}snapshotChanges(){return Ise(this.ref,this.afs.schedulers.outsideAngular).pipe(Zt)}valueChanges(e={}){return this.snapshotChanges().pipe(fe(({payload:n})=>e.idField?st(ae({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return be(this.ref.get(e)).pipe(Zt)}};function Kw(t,e){return LR(t,e).pipe(Ia(void 0),Nd(),fe(n=>{let[r,i]=n,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=o.find(d=>d.doc.ref.isEqual(a.ref)),u=r?.payload.docs.find(d=>d.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),s}))}function l9(t,e,n){return Kw(t,n).pipe(Ni((r,i)=>Dse(r,i.map(o=>o.payload),e),[]),Pd(),fe(r=>r.map(i=>({type:i.type,payload:i}))))}function Dse(t,e,n){return e.forEach(r=>{n.indexOf(r.type)>-1&&(t=Tse(t,r))}),t}function FR(t,e,n,...r){let i=t.slice();return i.splice(e,n,...r),i}function Tse(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return FR(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return FR(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return FR(t,e.oldIndex,1);break}return t}function u9(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Qw=class{ref;query;afs;constructor(e,n,r){this.ref=e,this.query=n,this.afs=r}stateChanges(e){let n=Kw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(fe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),n.pipe(Ia(void 0),Nd(),vn(([r,i])=>i.length>0||!r),fe(([,r])=>r),Zt)}auditTrail(e){return this.stateChanges(e).pipe(Ni((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=u9(e);return l9(this.query,n,this.afs.schedulers.outsideAngular).pipe(Zt)}valueChanges(e={}){return LR(this.query,this.afs.schedulers.outsideAngular).pipe(fe(n=>n.payload.docs.map(r=>e.idField?st(ae({},r.data()),{[e.idField]:r.id}):r.data())),Zt)}get(e){return be(this.query.get(e)).pipe(Zt)}add(e){return this.ref.add(e)}doc(e){return new Gw(this.ref.doc(e),this.afs)}},OR=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Kw(this.query,this.afs.schedulers.outsideAngular).pipe(Zt):Kw(this.query,this.afs.schedulers.outsideAngular).pipe(fe(n=>n.filter(r=>e.indexOf(r.type)>-1)),vn(n=>n.length>0),Zt)}auditTrail(e){return this.stateChanges(e).pipe(Ni((n,r)=>[...n,...r],[]))}snapshotChanges(e){let n=u9(e);return l9(this.query,n,this.afs.schedulers.outsideAngular).pipe(Zt)}valueChanges(e={}){return LR(this.query,this.afs.schedulers.outsideAngular).pipe(fe(r=>r.payload.docs.map(i=>e.idField?ae({[e.idField]:i.id},i.data()):i.data())),Zt)}get(e){return be(this.query.get(e)).pipe(Zt)}},d9=new te("angularfire2.enableFirestorePersistence"),h9=new te("angularfire2.firestore.persistenceSettings"),Ase=new te("angularfire2.firestore.settings"),Sse=new te("angularfire2.firestore.use-emulator");function f9(t,e=n=>n){return{query:e(t),ref:t}}var Rse=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,r,i,o,s,a,c,l,u,d,h,f,m,_,w,y,v){this.schedulers=c;let C=fc(n,a,r),b=u;d&&cf(C,a,h,m,_,w,f,y),[this.firestore,this.persistenceEnabled$]=pu(`${C.name}.firestore`,"AngularFirestore",C.name,()=>{let A=a.runOutsideAngular(()=>C.firestore());if(o&&A.settings(o),b&&A.useEmulator(...b),i&&!za(s)){let x=()=>{try{return be(A.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),pe(!1)}};return[A,a.runOutsideAngular(x)]}else return[A,pe(!1)]},[o,b,i])}collection(n,r){let i;typeof n=="string"?i=this.firestore.collection(n):i=n;let{ref:o,query:s}=f9(i,r),a=this.schedulers.ngZone.run(()=>o);return new Qw(a,s,this)}collectionGroup(n,r){let i=r||(s=>s),o=this.firestore.collectionGroup(n);return new OR(i(o),this)}doc(n){let r;typeof n=="string"?r=this.firestore.doc(n):r=n;let i=this.schedulers.ngZone.run(()=>r);return new Gw(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||t)(U(Us),U($s,8),U(d9,8),U(Ase,8),U(Kt),U(je),U(fu),U(h9,8),U(Sse,8),U(iv,8),U(tf,8),U(nf,8),U(rf,8),U(of,8),U(sf,8),U(af,8),U(Ko,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),p9=(()=>{class t{constructor(){On.registerVersion("angularfire",hc.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:d9,useValue:!0},{provide:h9,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Rt({type:t});static \u0275inj=Mt({providers:[Rse]})}return t})();var m9=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e,bootstrap:[sL]}),e.\u0275inj=Mt({providers:[vF(),Ut],imports:[gF,cO,g8,sF,p9,h0,eL,LV.initializeApp(y8.firebase)]});let t=e;return t})();mF().bootstrapModule(m9).catch(t=>console.error(t));
